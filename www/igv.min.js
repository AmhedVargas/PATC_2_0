!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).igv=e()}(this,(function(){"use strict";var t,e={},r=Object.prototype,n=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function h(t,e,r,n){var i=e&&e.prototype instanceof g?e:g,a=Object.create(i.prototype),o=new E(n||[]);return a._invoke=function(t,e,r){var n=l;return function(i,a){if(n===f)throw new Error("Generator is already running");if(n===p){if("throw"===i)throw a;return T()}for(r.method=i,r.arg=a;;){var o=r.delegate;if(o){var s=S(o,r);if(s){if(s===d)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===l)throw n=p,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=f;var h=c(t,e,r);if("normal"===h.type){if(n=r.done?p:u,h.arg===d)continue;return{value:h.arg,done:r.done}}"throw"===h.type&&(n=p,r.method="throw",r.arg=h.arg)}}}(t,r,o),a}function c(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=h;var l="suspendedStart",u="suspendedYield",f="executing",p="completed",d={};function g(){}function m(){}function v(){}var b={};b[a]=function(){return this};var y=(Z=Object.getPrototypeOf)&&Z(Z(A([])));y&&y!==r&&n.call(y,a)&&(b=y);var w=v.prototype=g.prototype=Object.create(b);function x(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function k(t){var e;this._invoke=function(r,i){function a(){return new Promise((function(e,a){!function e(r,i,a,o){var s=c(t[r],t,i);if("throw"!==s.type){var h=s.arg,l=h.value;return l&&"object"==typeof l&&n.call(l,"__await")?Promise.resolve(l.__await).then((function(t){e("next",t,a,o)}),(function(t){e("throw",t,a,o)})):Promise.resolve(l).then((function(t){h.value=t,a(h)}),(function(t){return e("throw",t,a,o)}))}o(s.arg)}(r,i,e,a)}))}return e=e?e.then(a,a):a()}}function S(e,r){var n=e.iterator[r.method];if(n===t){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=t,S(e,r),"throw"===r.method))return d;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var i=c(n,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,d;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,d):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function _(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(_,this),this.reset(!0)}function A(e){if(e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function r(){for(;++i<e.length;)if(n.call(e,i))return r.value=e[i],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}return{next:T}}function T(){return{value:t,done:!0}}function R(t){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function L(t,e,r,n,i,a,o){try{var s=t[a](o),h=s.value}catch(t){return void r(t)}s.done?e(h):Promise.resolve(h).then(n,i)}function I(e){return function(){var r=this,n=arguments;return new Promise((function(i,a){var o=e.apply(r,n);function s(t){L(o,i,a,s,h,"next",t)}function h(t){L(o,i,a,s,h,"throw",t)}s(t)}))}}function M(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function P(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function D(t,e,r){return e&&P(t.prototype,e),r&&P(t,r),t}function F(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&B(t,e)}function N(t){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function B(t,e){return(B=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function O(t,e,r){return(O=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,r){var n=[null];n.push.apply(n,e);var i=new(Function.bind.apply(t,n));return r&&B(i,r.prototype),i}).apply(null,arguments)}function z(e){var r="function"==typeof Map?new Map:t;return(z=function(t){if(null===t||(e=t,-1===Function.toString.call(e).indexOf("[native code]")))return t;var e;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(t))return r.get(t);r.set(t,n)}function n(){return O(t,arguments,N(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),B(n,t)})(e)}function U(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function H(e,r){return q(e)||function(e,r){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],i=!0,a=!1,o=t;try{for(var s,h=e[Symbol.iterator]();!(i=(s=h.next()).done)&&(n.push(s.value),!r||n.length!==r);i=!0);}catch(t){a=!0,o=t}finally{try{i||null==h.return||h.return()}finally{if(a)throw o}}return n}(e,r)||j()}function $(t){return function(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}(t)||V(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function q(t){if(Array.isArray(t))return t}function V(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function j(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}m.prototype=w.constructor=v,v.constructor=m,v[s]=m.displayName="GeneratorFunction",e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,s in t||(t[s]="GeneratorFunction")),t.prototype=Object.create(w),t},e.awrap=function(t){return{__await:t}},x(k.prototype),k.prototype[o]=function(){return this},e.AsyncIterator=k,e.async=function(t,r,n,i){var a=new k(h(t,r,n,i));return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(w),w[s]="Generator",w[a]=function(){return this},w.toString=function(){return"[object Generator]"},e.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=A,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(C),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function i(n,i){return s.type="throw",s.arg=e,r.next=n,i&&(r.method="next",r.arg=t),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var h=n.call(o,"catchLoc"),c=n.call(o,"finallyLoc");if(h&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(h){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=t,o.arg=e,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),C(r),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;C(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:A(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),d}};var G=[],W=window.document,Z=Object.getPrototypeOf,X=G.slice,Y=G.concat,K=G.push,Q=G.indexOf,J={},tt=J.toString,et=(n=J.hasOwnProperty).toString,rt=et.call(Object),nt={},it=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType},at=function(t){return null!=t&&t===t.window},ot={type:!0,src:!0,noModule:!0};function st(t,e,r){var n,i=(e=e||W).createElement("script");if(i.text=t,r)for(n in ot)r[n]&&(i[n]=r[n]);e.head.appendChild(i).parentNode.removeChild(i)}function ht(t){return null==t?t+"":"object"===R(t)||"function"==typeof t?J[tt.call(t)]||"object":R(t)}var ct="3.3.1 -ajax,-ajax/jsonp,-ajax/load,-ajax/parseXML,-ajax/script,-ajax/var/location,-ajax/var/nonce,-ajax/var/rquery,-ajax/xhr,-manipulation/_evalUrl,-event/ajax,-effects,-effects/Tween,-effects/animatedSelector",lt=function t(e,r){return new t.fn.init(e,r)},ut=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function ft(t){var e=!!t&&"length"in t&&t.length,r=ht(t);return!it(t)&&!at(t)&&("array"===r||0===e||"number"==typeof e&&e>0&&e-1 in t)}lt.fn=lt.prototype={jquery:ct,constructor:lt,length:0,toArray:function(){return X.call(this)},get:function(t){return null==t?X.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=lt.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return lt.each(this,t)},map:function(t){return this.pushStack(lt.map(this,(function(e,r){return t.call(e,r,e)})))},slice:function(){return this.pushStack(X.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,r=+t+(t<0?e:0);return this.pushStack(r>=0&&r<e?[this[r]]:[])},end:function(){return this.prevObject||this.constructor()},push:K,sort:G.sort,splice:G.splice},lt.extend=lt.fn.extend=function(){var e,r,n,i,a,o,s=arguments[0]||{},h=1,c=arguments.length,l=!1;for("boolean"==typeof s&&(l=s,s=arguments[h]||{},h++),"object"===R(s)||it(s)||(s={}),h===c&&(s=this,h--);h<c;h++)if(null!=(e=arguments[h]))for(r in e)n=s[r],s!==(i=e[r])&&(l&&i&&(lt.isPlainObject(i)||(a=Array.isArray(i)))?(a?(a=!1,o=n&&Array.isArray(n)?n:[]):o=n&&lt.isPlainObject(n)?n:{},s[r]=lt.extend(l,o,i)):i!==t&&(s[r]=i));return s},lt.extend({expando:"jQuery"+(ct+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var e,r;return!(!t||"[object Object]"!==tt.call(t))&&(!(e=Z(t))||"function"==typeof(r=n.call(e,"constructor")&&e.constructor)&&et.call(r)===rt)},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},globalEval:function(t){st(t)},each:function(t,e){var r,n=0;if(ft(t))for(r=t.length;n<r&&!1!==e.call(t[n],n,t[n]);n++);else for(n in t)if(!1===e.call(t[n],n,t[n]))break;return t},trim:function(t){return null==t?"":(t+"").replace(ut,"")},makeArray:function(t,e){var r=e||[];return null!=t&&(ft(Object(t))?lt.merge(r,"string"==typeof t?[t]:t):K.call(r,t)),r},inArray:function(t,e,r){return null==e?-1:Q.call(e,t,r)},merge:function(t,e){for(var r=+e.length,n=0,i=t.length;n<r;n++)t[i++]=e[n];return t.length=i,t},grep:function(t,e,r){for(var n=[],i=0,a=t.length,o=!r;i<a;i++)!e(t[i],i)!==o&&n.push(t[i]);return n},map:function(t,e,r){var n,i,a=0,o=[];if(ft(t))for(n=t.length;a<n;a++)null!=(i=e(t[a],a,r))&&o.push(i);else for(a in t)null!=(i=e(t[a],a,r))&&o.push(i);return Y.apply([],o)},guid:1,support:nt}),"function"==typeof Symbol&&(lt.fn[Symbol.iterator]=G[Symbol.iterator]),lt.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(t,e){J["[object "+e+"]"]=e.toLowerCase()}));var pt=function(e){var r,n,i,a,o,s,h,c,l,u,f,p,d,g,m,v,b,y,w,x="sizzle"+1*new Date,k=e.document,S=0,_=0,C=st(),E=st(),A=st(),T=function(t,e){return t===e&&(f=!0),0},R={}.hasOwnProperty,L=[],I=L.pop,M=L.push,P=L.push,D=L.slice,F=function(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1},N="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",B="[\\x20\\t\\r\\n\\f]",O="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",z="\\["+B+"*("+O+")(?:"+B+"*([*^$|!~]?=)"+B+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+O+"))|)"+B+"*\\]",U=":("+O+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+z+")*)|.*)\\)|)",H=new RegExp(B+"+","g"),$=new RegExp("^"+B+"+|((?:^|[^\\\\])(?:\\\\.)*)"+B+"+$","g"),q=new RegExp("^"+B+"*,"+B+"*"),V=new RegExp("^"+B+"*([>+~]|"+B+")"+B+"*"),j=new RegExp("="+B+"*([^\\]'\"]*?)"+B+"*\\]","g"),G=new RegExp(U),W=new RegExp("^"+O+"$"),Z={ID:new RegExp("^#("+O+")"),CLASS:new RegExp("^\\.("+O+")"),TAG:new RegExp("^("+O+"|[*])"),ATTR:new RegExp("^"+z),PSEUDO:new RegExp("^"+U),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+B+"*(even|odd|(([+-]|)(\\d*)n|)"+B+"*(?:([+-]|)"+B+"*(\\d+)|))"+B+"*\\)|)","i"),bool:new RegExp("^(?:"+N+")$","i"),needsContext:new RegExp("^"+B+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+B+"*((?:-\\d)?\\d*)"+B+"*\\)|)(?=[^-]|$)","i")},X=/^(?:input|select|textarea|button)$/i,Y=/^h\d$/i,K=/^[^{]+\{\s*\[native \w/,Q=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,J=/[+~]/,tt=new RegExp("\\\\([\\da-f]{1,6}"+B+"?|("+B+")|.)","ig"),et=function(t,e,r){var n="0x"+e-65536;return n!=n||r?e:n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)},rt=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,nt=function(t,e){return e?"\0"===t?"�":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t},it=function(){p()},at=yt((function(t){return!0===t.disabled&&("form"in t||"label"in t)}),{dir:"parentNode",next:"legend"});try{P.apply(L=D.call(k.childNodes),k.childNodes),L[k.childNodes.length].nodeType}catch(t){P={apply:L.length?function(t,e){M.apply(t,D.call(e))}:function(t,e){for(var r=t.length,n=0;t[r++]=e[n++];);t.length=r-1}}}function ot(t,e,r,i){var a,o,h,l,u,f,g,b=e&&e.ownerDocument,y=e?e.nodeType:9;if(r=r||[],"string"!=typeof t||!t||1!==y&&9!==y&&11!==y)return r;if(!i&&((e?e.ownerDocument||e:k)!==d&&p(e),e=e||d,m)){if(11!==y&&(u=Q.exec(t)))if(a=u[1]){if(9===y){if(!(h=e.getElementById(a)))return r;if(h.id===a)return r.push(h),r}else if(b&&(h=b.getElementById(a))&&w(e,h)&&h.id===a)return r.push(h),r}else{if(u[2])return P.apply(r,e.getElementsByTagName(t)),r;if((a=u[3])&&n.getElementsByClassName&&e.getElementsByClassName)return P.apply(r,e.getElementsByClassName(a)),r}if(n.qsa&&!A[t+" "]&&(!v||!v.test(t))){if(1!==y)b=e,g=t;else if("object"!==e.nodeName.toLowerCase()){for((l=e.getAttribute("id"))?l=l.replace(rt,nt):e.setAttribute("id",l=x),o=(f=s(t)).length;o--;)f[o]="#"+l+" "+bt(f[o]);g=f.join(","),b=J.test(t)&&mt(e.parentNode)||e}if(g)try{return P.apply(r,b.querySelectorAll(g)),r}catch(t){}finally{l===x&&e.removeAttribute("id")}}}return c(t.replace($,"$1"),e,r,i)}function st(){var t=[];return function e(r,n){return t.push(r+" ")>i.cacheLength&&delete e[t.shift()],e[r+" "]=n}}function ht(t){return t[x]=!0,t}function ct(t){var e=d.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function lt(t,e){for(var r=t.split("|"),n=r.length;n--;)i.attrHandle[r[n]]=e}function ut(t,e){var r=e&&t,n=r&&1===t.nodeType&&1===e.nodeType&&t.sourceIndex-e.sourceIndex;if(n)return n;if(r)for(;r=r.nextSibling;)if(r===e)return-1;return t?1:-1}function ft(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function pt(t){return function(e){var r=e.nodeName.toLowerCase();return("input"===r||"button"===r)&&e.type===t}}function dt(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&at(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function gt(t){return ht((function(e){return e=+e,ht((function(r,n){for(var i,a=t([],r.length,e),o=a.length;o--;)r[i=a[o]]&&(r[i]=!(n[i]=r[i]))}))}))}function mt(t){return t&&void 0!==t.getElementsByTagName&&t}for(r in n=ot.support={},o=ot.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!!e&&"HTML"!==e.nodeName},p=ot.setDocument=function(t){var e,r,a=t?t.ownerDocument||t:k;return a!==d&&9===a.nodeType&&a.documentElement?(g=(d=a).documentElement,m=!o(d),k!==d&&(r=d.defaultView)&&r.top!==r&&(r.addEventListener?r.addEventListener("unload",it,!1):r.attachEvent&&r.attachEvent("onunload",it)),n.attributes=ct((function(t){return t.className="i",!t.getAttribute("className")})),n.getElementsByTagName=ct((function(t){return t.appendChild(d.createComment("")),!t.getElementsByTagName("*").length})),n.getElementsByClassName=K.test(d.getElementsByClassName),n.getById=ct((function(t){return g.appendChild(t).id=x,!d.getElementsByName||!d.getElementsByName(x).length})),n.getById?(i.filter.ID=function(t){var e=t.replace(tt,et);return function(t){return t.getAttribute("id")===e}},i.find.ID=function(t,e){if(void 0!==e.getElementById&&m){var r=e.getElementById(t);return r?[r]:[]}}):(i.filter.ID=function(t){var e=t.replace(tt,et);return function(t){var r=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return r&&r.value===e}},i.find.ID=function(t,e){if(void 0!==e.getElementById&&m){var r,n,i,a=e.getElementById(t);if(a){if((r=a.getAttributeNode("id"))&&r.value===t)return[a];for(i=e.getElementsByName(t),n=0;a=i[n++];)if((r=a.getAttributeNode("id"))&&r.value===t)return[a]}return[]}}),i.find.TAG=n.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):n.qsa?e.querySelectorAll(t):void 0}:function(t,e){var r,n=[],i=0,a=e.getElementsByTagName(t);if("*"===t){for(;r=a[i++];)1===r.nodeType&&n.push(r);return n}return a},i.find.CLASS=n.getElementsByClassName&&function(t,e){if(void 0!==e.getElementsByClassName&&m)return e.getElementsByClassName(t)},b=[],v=[],(n.qsa=K.test(d.querySelectorAll))&&(ct((function(t){g.appendChild(t).innerHTML="<a id='"+x+"'></a><select id='"+x+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&v.push("[*^$]="+B+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||v.push("\\["+B+"*(?:value|"+N+")"),t.querySelectorAll("[id~="+x+"-]").length||v.push("~="),t.querySelectorAll(":checked").length||v.push(":checked"),t.querySelectorAll("a#"+x+"+*").length||v.push(".#.+[+~]")})),ct((function(t){t.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=d.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&v.push("name"+B+"*[*^$|!~]?="),2!==t.querySelectorAll(":enabled").length&&v.push(":enabled",":disabled"),g.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&v.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),v.push(",.*:")}))),(n.matchesSelector=K.test(y=g.matches||g.webkitMatchesSelector||g.mozMatchesSelector||g.oMatchesSelector||g.msMatchesSelector))&&ct((function(t){n.disconnectedMatch=y.call(t,"*"),y.call(t,"[s!='']:x"),b.push("!=",U)})),v=v.length&&new RegExp(v.join("|")),b=b.length&&new RegExp(b.join("|")),e=K.test(g.compareDocumentPosition),w=e||K.test(g.contains)?function(t,e){var r=9===t.nodeType?t.documentElement:t,n=e&&e.parentNode;return t===n||!(!n||1!==n.nodeType||!(r.contains?r.contains(n):t.compareDocumentPosition&&16&t.compareDocumentPosition(n)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},T=e?function(t,e){if(t===e)return f=!0,0;var r=!t.compareDocumentPosition-!e.compareDocumentPosition;return r||(1&(r=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!n.sortDetached&&e.compareDocumentPosition(t)===r?t===d||t.ownerDocument===k&&w(k,t)?-1:e===d||e.ownerDocument===k&&w(k,e)?1:u?F(u,t)-F(u,e):0:4&r?-1:1)}:function(t,e){if(t===e)return f=!0,0;var r,n=0,i=t.parentNode,a=e.parentNode,o=[t],s=[e];if(!i||!a)return t===d?-1:e===d?1:i?-1:a?1:u?F(u,t)-F(u,e):0;if(i===a)return ut(t,e);for(r=t;r=r.parentNode;)o.unshift(r);for(r=e;r=r.parentNode;)s.unshift(r);for(;o[n]===s[n];)n++;return n?ut(o[n],s[n]):o[n]===k?-1:s[n]===k?1:0},d):d},ot.matches=function(t,e){return ot(t,null,null,e)},ot.matchesSelector=function(t,e){if((t.ownerDocument||t)!==d&&p(t),e=e.replace(j,"='$1']"),n.matchesSelector&&m&&!A[e+" "]&&(!b||!b.test(e))&&(!v||!v.test(e)))try{var r=y.call(t,e);if(r||n.disconnectedMatch||t.document&&11!==t.document.nodeType)return r}catch(t){}return ot(e,d,null,[t]).length>0},ot.contains=function(t,e){return(t.ownerDocument||t)!==d&&p(t),w(t,e)},ot.attr=function(e,r){(e.ownerDocument||e)!==d&&p(e);var a=i.attrHandle[r.toLowerCase()],o=a&&R.call(i.attrHandle,r.toLowerCase())?a(e,r,!m):t;return o!==t?o:n.attributes||!m?e.getAttribute(r):(o=e.getAttributeNode(r))&&o.specified?o.value:null},ot.escape=function(t){return(t+"").replace(rt,nt)},ot.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},ot.uniqueSort=function(t){var e,r=[],i=0,a=0;if(f=!n.detectDuplicates,u=!n.sortStable&&t.slice(0),t.sort(T),f){for(;e=t[a++];)e===t[a]&&(i=r.push(a));for(;i--;)t.splice(r[i],1)}return u=null,t},a=ot.getText=function(t){var e,r="",n=0,i=t.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)r+=a(t)}else if(3===i||4===i)return t.nodeValue}else for(;e=t[n++];)r+=a(e);return r},(i=ot.selectors={cacheLength:50,createPseudo:ht,match:Z,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(tt,et),t[3]=(t[3]||t[4]||t[5]||"").replace(tt,et),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||ot.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&ot.error(t[0]),t},PSEUDO:function(t){var e,r=!t[6]&&t[2];return Z.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":r&&G.test(r)&&(e=s(r,!0))&&(e=r.indexOf(")",r.length-e)-r.length)&&(t[0]=t[0].slice(0,e),t[2]=r.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(tt,et).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=C[t+" "];return e||(e=new RegExp("(^|"+B+")"+t+"("+B+"|$)"))&&C(t,(function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")}))},ATTR:function(t,e,r){return function(n){var i=ot.attr(n,t);return null==i?"!="===e:!e||(i+="","="===e?i===r:"!="===e?i!==r:"^="===e?r&&0===i.indexOf(r):"*="===e?r&&i.indexOf(r)>-1:"$="===e?r&&i.slice(-r.length)===r:"~="===e?(" "+i.replace(H," ")+" ").indexOf(r)>-1:"|="===e&&(i===r||i.slice(0,r.length+1)===r+"-"))}},CHILD:function(t,e,r,n,i){var a="nth"!==t.slice(0,3),o="last"!==t.slice(-4),s="of-type"===e;return 1===n&&0===i?function(t){return!!t.parentNode}:function(e,r,h){var c,l,u,f,p,d,g=a!==o?"nextSibling":"previousSibling",m=e.parentNode,v=s&&e.nodeName.toLowerCase(),b=!h&&!s,y=!1;if(m){if(a){for(;g;){for(f=e;f=f[g];)if(s?f.nodeName.toLowerCase()===v:1===f.nodeType)return!1;d=g="only"===t&&!d&&"nextSibling"}return!0}if(d=[o?m.firstChild:m.lastChild],o&&b){for(y=(p=(c=(l=(u=(f=m)[x]||(f[x]={}))[f.uniqueID]||(u[f.uniqueID]={}))[t]||[])[0]===S&&c[1])&&c[2],f=p&&m.childNodes[p];f=++p&&f&&f[g]||(y=p=0)||d.pop();)if(1===f.nodeType&&++y&&f===e){l[t]=[S,p,y];break}}else if(b&&(y=p=(c=(l=(u=(f=e)[x]||(f[x]={}))[f.uniqueID]||(u[f.uniqueID]={}))[t]||[])[0]===S&&c[1]),!1===y)for(;(f=++p&&f&&f[g]||(y=p=0)||d.pop())&&((s?f.nodeName.toLowerCase()!==v:1!==f.nodeType)||!++y||(b&&((l=(u=f[x]||(f[x]={}))[f.uniqueID]||(u[f.uniqueID]={}))[t]=[S,y]),f!==e)););return(y-=i)===n||y%n==0&&y/n>=0}}},PSEUDO:function(t,e){var r,n=i.pseudos[t]||i.setFilters[t.toLowerCase()]||ot.error("unsupported pseudo: "+t);return n[x]?n(e):n.length>1?(r=[t,t,"",e],i.setFilters.hasOwnProperty(t.toLowerCase())?ht((function(t,r){for(var i,a=n(t,e),o=a.length;o--;)t[i=F(t,a[o])]=!(r[i]=a[o])})):function(t){return n(t,0,r)}):n}},pseudos:{not:ht((function(t){var e=[],r=[],n=h(t.replace($,"$1"));return n[x]?ht((function(t,e,r,i){for(var a,o=n(t,null,i,[]),s=t.length;s--;)(a=o[s])&&(t[s]=!(e[s]=a))})):function(t,i,a){return e[0]=t,n(e,null,a,r),e[0]=null,!r.pop()}})),has:ht((function(t){return function(e){return ot(t,e).length>0}})),contains:ht((function(t){return t=t.replace(tt,et),function(e){return(e.textContent||e.innerText||a(e)).indexOf(t)>-1}})),lang:ht((function(t){return W.test(t||"")||ot.error("unsupported lang: "+t),t=t.replace(tt,et).toLowerCase(),function(e){var r;do{if(r=m?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(r=r.toLowerCase())===t||0===r.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}})),target:function(t){var r=e.location&&e.location.hash;return r&&r.slice(1)===t.id},root:function(t){return t===g},focus:function(t){return t===d.activeElement&&(!d.hasFocus||d.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:dt(!1),disabled:dt(!0),checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!i.pseudos.empty(t)},header:function(t){return Y.test(t.nodeName)},input:function(t){return X.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:gt((function(){return[0]})),last:gt((function(t,e){return[e-1]})),eq:gt((function(t,e,r){return[r<0?r+e:r]})),even:gt((function(t,e){for(var r=0;r<e;r+=2)t.push(r);return t})),odd:gt((function(t,e){for(var r=1;r<e;r+=2)t.push(r);return t})),lt:gt((function(t,e,r){for(var n=r<0?r+e:r;--n>=0;)t.push(n);return t})),gt:gt((function(t,e,r){for(var n=r<0?r+e:r;++n<e;)t.push(n);return t}))}}).pseudos.nth=i.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})i.pseudos[r]=ft(r);for(r in{submit:!0,reset:!0})i.pseudos[r]=pt(r);function vt(){}function bt(t){for(var e=0,r=t.length,n="";e<r;e++)n+=t[e].value;return n}function yt(t,e,r){var n=e.dir,i=e.next,a=i||n,o=r&&"parentNode"===a,s=_++;return e.first?function(e,r,i){for(;e=e[n];)if(1===e.nodeType||o)return t(e,r,i);return!1}:function(e,r,h){var c,l,u,f=[S,s];if(h){for(;e=e[n];)if((1===e.nodeType||o)&&t(e,r,h))return!0}else for(;e=e[n];)if(1===e.nodeType||o)if(l=(u=e[x]||(e[x]={}))[e.uniqueID]||(u[e.uniqueID]={}),i&&i===e.nodeName.toLowerCase())e=e[n]||e;else{if((c=l[a])&&c[0]===S&&c[1]===s)return f[2]=c[2];if(l[a]=f,f[2]=t(e,r,h))return!0}return!1}}function wt(t){return t.length>1?function(e,r,n){for(var i=t.length;i--;)if(!t[i](e,r,n))return!1;return!0}:t[0]}function xt(t,e,r,n,i){for(var a,o=[],s=0,h=t.length,c=null!=e;s<h;s++)(a=t[s])&&(r&&!r(a,n,i)||(o.push(a),c&&e.push(s)));return o}function kt(t,e,r,n,i,a){return n&&!n[x]&&(n=kt(n)),i&&!i[x]&&(i=kt(i,a)),ht((function(a,o,s,h){var c,l,u,f=[],p=[],d=o.length,g=a||function(t,e,r){for(var n=0,i=e.length;n<i;n++)ot(t,e[n],r);return r}(e||"*",s.nodeType?[s]:s,[]),m=!t||!a&&e?g:xt(g,f,t,s,h),v=r?i||(a?t:d||n)?[]:o:m;if(r&&r(m,v,s,h),n)for(c=xt(v,p),n(c,[],s,h),l=c.length;l--;)(u=c[l])&&(v[p[l]]=!(m[p[l]]=u));if(a){if(i||t){if(i){for(c=[],l=v.length;l--;)(u=v[l])&&c.push(m[l]=u);i(null,v=[],c,h)}for(l=v.length;l--;)(u=v[l])&&(c=i?F(a,u):f[l])>-1&&(a[c]=!(o[c]=u))}}else v=xt(v===o?v.splice(d,v.length):v),i?i(null,o,v,h):P.apply(o,v)}))}function St(t){for(var e,r,n,a=t.length,o=i.relative[t[0].type],s=o||i.relative[" "],h=o?1:0,c=yt((function(t){return t===e}),s,!0),u=yt((function(t){return F(e,t)>-1}),s,!0),f=[function(t,r,n){var i=!o&&(n||r!==l)||((e=r).nodeType?c(t,r,n):u(t,r,n));return e=null,i}];h<a;h++)if(r=i.relative[t[h].type])f=[yt(wt(f),r)];else{if((r=i.filter[t[h].type].apply(null,t[h].matches))[x]){for(n=++h;n<a&&!i.relative[t[n].type];n++);return kt(h>1&&wt(f),h>1&&bt(t.slice(0,h-1).concat({value:" "===t[h-2].type?"*":""})).replace($,"$1"),r,h<n&&St(t.slice(h,n)),n<a&&St(t=t.slice(n)),n<a&&bt(t))}f.push(r)}return wt(f)}return vt.prototype=i.filters=i.pseudos,i.setFilters=new vt,s=ot.tokenize=function(t,e){var r,n,a,o,s,h,c,l=E[t+" "];if(l)return e?0:l.slice(0);for(s=t,h=[],c=i.preFilter;s;){for(o in r&&!(n=q.exec(s))||(n&&(s=s.slice(n[0].length)||s),h.push(a=[])),r=!1,(n=V.exec(s))&&(r=n.shift(),a.push({value:r,type:n[0].replace($," ")}),s=s.slice(r.length)),i.filter)!(n=Z[o].exec(s))||c[o]&&!(n=c[o](n))||(r=n.shift(),a.push({value:r,type:o,matches:n}),s=s.slice(r.length));if(!r)break}return e?s.length:s?ot.error(t):E(t,h).slice(0)},h=ot.compile=function(t,e){var r,n=[],a=[],o=A[t+" "];if(!o){for(e||(e=s(t)),r=e.length;r--;)(o=St(e[r]))[x]?n.push(o):a.push(o);(o=A(t,function(t,e){var r=e.length>0,n=t.length>0,a=function(a,o,s,h,c){var u,f,g,v=0,b="0",y=a&&[],w=[],x=l,k=a||n&&i.find.TAG("*",c),_=S+=null==x?1:Math.random()||.1,C=k.length;for(c&&(l=o===d||o||c);b!==C&&null!=(u=k[b]);b++){if(n&&u){for(f=0,o||u.ownerDocument===d||(p(u),s=!m);g=t[f++];)if(g(u,o||d,s)){h.push(u);break}c&&(S=_)}r&&((u=!g&&u)&&v--,a&&y.push(u))}if(v+=b,r&&b!==v){for(f=0;g=e[f++];)g(y,w,o,s);if(a){if(v>0)for(;b--;)y[b]||w[b]||(w[b]=I.call(h));w=xt(w)}P.apply(h,w),c&&!a&&w.length>0&&v+e.length>1&&ot.uniqueSort(h)}return c&&(S=_,l=x),y};return r?ht(a):a}(a,n))).selector=t}return o},c=ot.select=function(t,e,r,n){var a,o,c,l,u,f="function"==typeof t&&t,p=!n&&s(t=f.selector||t);if(r=r||[],1===p.length){if((o=p[0]=p[0].slice(0)).length>2&&"ID"===(c=o[0]).type&&9===e.nodeType&&m&&i.relative[o[1].type]){if(!(e=(i.find.ID(c.matches[0].replace(tt,et),e)||[])[0]))return r;f&&(e=e.parentNode),t=t.slice(o.shift().value.length)}for(a=Z.needsContext.test(t)?0:o.length;a--&&(c=o[a],!i.relative[l=c.type]);)if((u=i.find[l])&&(n=u(c.matches[0].replace(tt,et),J.test(o[0].type)&&mt(e.parentNode)||e))){if(o.splice(a,1),!(t=n.length&&bt(o)))return P.apply(r,n),r;break}}return(f||h(t,p))(n,e,!m,r,!e||J.test(t)&&mt(e.parentNode)||e),r},n.sortStable=x.split("").sort(T).join("")===x,n.detectDuplicates=!!f,p(),n.sortDetached=ct((function(t){return 1&t.compareDocumentPosition(d.createElement("fieldset"))})),ct((function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")}))||lt("type|href|height|width",(function(t,e,r){if(!r)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)})),n.attributes&&ct((function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")}))||lt("value",(function(t,e,r){if(!r&&"input"===t.nodeName.toLowerCase())return t.defaultValue})),ct((function(t){return null==t.getAttribute("disabled")}))||lt(N,(function(t,e,r){var n;if(!r)return!0===t[e]?e.toLowerCase():(n=t.getAttributeNode(e))&&n.specified?n.value:null})),ot}(window);lt.find=pt,lt.expr=pt.selectors,lt.expr[":"]=lt.expr.pseudos,lt.uniqueSort=lt.unique=pt.uniqueSort,lt.text=pt.getText,lt.isXMLDoc=pt.isXML,lt.contains=pt.contains,lt.escapeSelector=pt.escape;var dt=function(e,r,n){for(var i=[],a=n!==t;(e=e[r])&&9!==e.nodeType;)if(1===e.nodeType){if(a&&lt(e).is(n))break;i.push(e)}return i},gt=function(t,e){for(var r=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&r.push(t);return r},mt=lt.expr.match.needsContext;function vt(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}var bt=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function yt(t,e,r){return it(e)?lt.grep(t,(function(t,n){return!!e.call(t,n,t)!==r})):e.nodeType?lt.grep(t,(function(t){return t===e!==r})):"string"!=typeof e?lt.grep(t,(function(t){return Q.call(e,t)>-1!==r})):lt.filter(e,t,r)}lt.filter=function(t,e,r){var n=e[0];return r&&(t=":not("+t+")"),1===e.length&&1===n.nodeType?lt.find.matchesSelector(n,t)?[n]:[]:lt.find.matches(t,lt.grep(e,(function(t){return 1===t.nodeType})))},lt.fn.extend({find:function(t){var e,r,n=this.length,i=this;if("string"!=typeof t)return this.pushStack(lt(t).filter((function(){for(e=0;e<n;e++)if(lt.contains(i[e],this))return!0})));for(r=this.pushStack([]),e=0;e<n;e++)lt.find(t,i[e],r);return n>1?lt.uniqueSort(r):r},filter:function(t){return this.pushStack(yt(this,t||[],!1))},not:function(t){return this.pushStack(yt(this,t||[],!0))},is:function(t){return!!yt(this,"string"==typeof t&&mt.test(t)?lt(t):t||[],!1).length}});var wt,xt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(lt.fn.init=function(e,r,n){var i,a;if(!e)return this;if(n=n||wt,"string"==typeof e){if(!(i="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:xt.exec(e))||!i[1]&&r)return!r||r.jquery?(r||n).find(e):this.constructor(r).find(e);if(i[1]){if(r=r instanceof lt?r[0]:r,lt.merge(this,lt.parseHTML(i[1],r&&r.nodeType?r.ownerDocument||r:W,!0)),bt.test(i[1])&&lt.isPlainObject(r))for(i in r)it(this[i])?this[i](r[i]):this.attr(i,r[i]);return this}return(a=W.getElementById(i[2]))&&(this[0]=a,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):it(e)?n.ready!==t?n.ready(e):e(lt):lt.makeArray(e,this)}).prototype=lt.fn,wt=lt(W);var kt=/^(?:parents|prev(?:Until|All))/,St={children:!0,contents:!0,next:!0,prev:!0};function _t(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}lt.fn.extend({has:function(t){var e=lt(t,this),r=e.length;return this.filter((function(){for(var t=0;t<r;t++)if(lt.contains(this,e[t]))return!0}))},closest:function(t,e){var r,n=0,i=this.length,a=[],o="string"!=typeof t&&lt(t);if(!mt.test(t))for(;n<i;n++)for(r=this[n];r&&r!==e;r=r.parentNode)if(r.nodeType<11&&(o?o.index(r)>-1:1===r.nodeType&&lt.find.matchesSelector(r,t))){a.push(r);break}return this.pushStack(a.length>1?lt.uniqueSort(a):a)},index:function(t){return t?"string"==typeof t?Q.call(lt(t),this[0]):Q.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(lt.uniqueSort(lt.merge(this.get(),lt(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),lt.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return dt(t,"parentNode")},parentsUntil:function(t,e,r){return dt(t,"parentNode",r)},next:function(t){return _t(t,"nextSibling")},prev:function(t){return _t(t,"previousSibling")},nextAll:function(t){return dt(t,"nextSibling")},prevAll:function(t){return dt(t,"previousSibling")},nextUntil:function(t,e,r){return dt(t,"nextSibling",r)},prevUntil:function(t,e,r){return dt(t,"previousSibling",r)},siblings:function(t){return gt((t.parentNode||{}).firstChild,t)},children:function(t){return gt(t.firstChild)},contents:function(t){return vt(t,"iframe")?t.contentDocument:(vt(t,"template")&&(t=t.content||t),lt.merge([],t.childNodes))}},(function(t,e){lt.fn[t]=function(r,n){var i=lt.map(this,e,r);return"Until"!==t.slice(-5)&&(n=r),n&&"string"==typeof n&&(i=lt.filter(n,i)),this.length>1&&(St[t]||lt.uniqueSort(i),kt.test(t)&&i.reverse()),this.pushStack(i)}}));var Ct=/[^\x20\t\r\n\f]+/g;function Et(t){return t}function At(t){throw t}function Tt(e,r,n,i){var a;try{e&&it(a=e.promise)?a.call(e).done(r).fail(n):e&&it(a=e.then)?a.call(e,r,n):r.apply(t,[e].slice(i))}catch(e){n.apply(t,[e])}}lt.Callbacks=function(t){t="string"==typeof t?function(t){var e={};return lt.each(t.match(Ct)||[],(function(t,r){e[r]=!0})),e}(t):lt.extend({},t);var e,r,n,i,a=[],o=[],s=-1,h=function(){for(i=i||t.once,n=e=!0;o.length;s=-1)for(r=o.shift();++s<a.length;)!1===a[s].apply(r[0],r[1])&&t.stopOnFalse&&(s=a.length,r=!1);t.memory||(r=!1),e=!1,i&&(a=r?[]:"")},c={add:function(){return a&&(r&&!e&&(s=a.length-1,o.push(r)),function e(r){lt.each(r,(function(r,n){it(n)?t.unique&&c.has(n)||a.push(n):n&&n.length&&"string"!==ht(n)&&e(n)}))}(arguments),r&&!e&&h()),this},remove:function(){return lt.each(arguments,(function(t,e){for(var r;(r=lt.inArray(e,a,r))>-1;)a.splice(r,1),r<=s&&s--})),this},has:function(t){return t?lt.inArray(t,a)>-1:a.length>0},empty:function(){return a&&(a=[]),this},disable:function(){return i=o=[],a=r="",this},disabled:function(){return!a},lock:function(){return i=o=[],r||e||(a=r=""),this},locked:function(){return!!i},fireWith:function(t,r){return i||(r=[t,(r=r||[]).slice?r.slice():r],o.push(r),e||h()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!n}};return c},lt.extend({Deferred:function(e){var r=[["notify","progress",lt.Callbacks("memory"),lt.Callbacks("memory"),2],["resolve","done",lt.Callbacks("once memory"),lt.Callbacks("once memory"),0,"resolved"],["reject","fail",lt.Callbacks("once memory"),lt.Callbacks("once memory"),1,"rejected"]],n="pending",i={state:function(){return n},always:function(){return a.done(arguments).fail(arguments),this},catch:function(t){return i.then(null,t)},pipe:function(){var t=arguments;return lt.Deferred((function(e){lt.each(r,(function(r,n){var i=it(t[n[4]])&&t[n[4]];a[n[1]]((function(){var t=i&&i.apply(this,arguments);t&&it(t.promise)?t.promise().progress(e.notify).done(e.resolve).fail(e.reject):e[n[0]+"With"](this,i?[t]:arguments)}))})),t=null})).promise()},then:function(e,n,i){var a=0;function o(e,r,n,i){return function(){var s=this,h=arguments,c=function(){var c,l;if(!(e<a)){if((c=n.apply(s,h))===r.promise())throw new TypeError("Thenable self-resolution");l=c&&("object"===R(c)||"function"==typeof c)&&c.then,it(l)?i?l.call(c,o(a,r,Et,i),o(a,r,At,i)):(a++,l.call(c,o(a,r,Et,i),o(a,r,At,i),o(a,r,Et,r.notifyWith))):(n!==Et&&(s=t,h=[c]),(i||r.resolveWith)(s,h))}},l=i?c:function(){try{c()}catch(i){lt.Deferred.exceptionHook&&lt.Deferred.exceptionHook(i,l.stackTrace),e+1>=a&&(n!==At&&(s=t,h=[i]),r.rejectWith(s,h))}};e?l():(lt.Deferred.getStackHook&&(l.stackTrace=lt.Deferred.getStackHook()),window.setTimeout(l))}}return lt.Deferred((function(t){r[0][3].add(o(0,t,it(i)?i:Et,t.notifyWith)),r[1][3].add(o(0,t,it(e)?e:Et)),r[2][3].add(o(0,t,it(n)?n:At))})).promise()},promise:function(t){return null!=t?lt.extend(t,i):i}},a={};return lt.each(r,(function(e,o){var s=o[2],h=o[5];i[o[1]]=s.add,h&&s.add((function(){n=h}),r[3-e][2].disable,r[3-e][3].disable,r[0][2].lock,r[0][3].lock),s.add(o[3].fire),a[o[0]]=function(){return a[o[0]+"With"](this===a?t:this,arguments),this},a[o[0]+"With"]=s.fireWith})),i.promise(a),e&&e.call(a,a),a},when:function(t){var e=arguments.length,r=e,n=Array(r),i=X.call(arguments),a=lt.Deferred(),o=function(t){return function(r){n[t]=this,i[t]=arguments.length>1?X.call(arguments):r,--e||a.resolveWith(n,i)}};if(e<=1&&(Tt(t,a.done(o(r)).resolve,a.reject,!e),"pending"===a.state()||it(i[r]&&i[r].then)))return a.then();for(;r--;)Tt(i[r],o(r),a.reject);return a.promise()}});var Rt=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;lt.Deferred.exceptionHook=function(t,e){window.console&&window.console.warn&&t&&Rt.test(t.name)&&window.console.warn("jQuery.Deferred exception: "+t.message,t.stack,e)},lt.readyException=function(t){window.setTimeout((function(){throw t}))};var Lt=lt.Deferred();function It(){W.removeEventListener("DOMContentLoaded",It),window.removeEventListener("load",It),lt.ready()}lt.fn.ready=function(t){return Lt.then(t).catch((function(t){lt.readyException(t)})),this},lt.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--lt.readyWait:lt.isReady)||(lt.isReady=!0,!0!==t&&--lt.readyWait>0||Lt.resolveWith(W,[lt]))}}),lt.ready.then=Lt.then,"complete"===W.readyState||"loading"!==W.readyState&&!W.documentElement.doScroll?window.setTimeout(lt.ready):(W.addEventListener("DOMContentLoaded",It),window.addEventListener("load",It));var Mt=function e(r,n,i,a,o,s,h){var c=0,l=r.length,u=null==i;if("object"===ht(i))for(c in o=!0,i)e(r,n,c,i[c],!0,s,h);else if(a!==t&&(o=!0,it(a)||(h=!0),u&&(h?(n.call(r,a),n=null):(u=n,n=function(t,e,r){return u.call(lt(t),r)})),n))for(;c<l;c++)n(r[c],i,h?a:a.call(r[c],c,n(r[c],i)));return o?r:u?n.call(r):l?n(r[0],i):s},Pt=/^-ms-/,Dt=/-([a-z])/g;function Ft(t,e){return e.toUpperCase()}function Nt(t){return t.replace(Pt,"ms-").replace(Dt,Ft)}var Bt=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};function Ot(){this.expando=lt.expando+Ot.uid++}Ot.uid=1,Ot.prototype={cache:function(t){var e=t[this.expando];return e||(e={},Bt(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,r){var n,i=this.cache(t);if("string"==typeof e)i[Nt(e)]=r;else for(n in e)i[Nt(n)]=e[n];return i},get:function(e,r){return r===t?this.cache(e):e[this.expando]&&e[this.expando][Nt(r)]},access:function(e,r,n){return r===t||r&&"string"==typeof r&&n===t?this.get(e,r):(this.set(e,r,n),n!==t?n:r)},remove:function(e,r){var n,i=e[this.expando];if(i!==t){if(r!==t){n=(r=Array.isArray(r)?r.map(Nt):(r=Nt(r))in i?[r]:r.match(Ct)||[]).length;for(;n--;)delete i[r[n]]}(r===t||lt.isEmptyObject(i))&&(e.nodeType?e[this.expando]=t:delete e[this.expando])}},hasData:function(e){var r=e[this.expando];return r!==t&&!lt.isEmptyObject(r)}};var zt=new Ot,Ut=new Ot,Ht=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,$t=/[A-Z]/g;function qt(e,r,n){var i;if(n===t&&1===e.nodeType)if(i="data-"+r.replace($t,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(i))){try{n=function(t){return"true"===t||"false"!==t&&("null"===t?null:t===+t+""?+t:Ht.test(t)?JSON.parse(t):t)}(n)}catch(t){}Ut.set(e,r,n)}else n=t;return n}lt.extend({hasData:function(t){return Ut.hasData(t)||zt.hasData(t)},data:function(t,e,r){return Ut.access(t,e,r)},removeData:function(t,e){Ut.remove(t,e)},_data:function(t,e,r){return zt.access(t,e,r)},_removeData:function(t,e){zt.remove(t,e)}}),lt.fn.extend({data:function(e,r){var n,i,a,o=this[0],s=o&&o.attributes;if(e===t){if(this.length&&(a=Ut.get(o),1===o.nodeType&&!zt.get(o,"hasDataAttrs"))){for(n=s.length;n--;)s[n]&&0===(i=s[n].name).indexOf("data-")&&(i=Nt(i.slice(5)),qt(o,i,a[i]));zt.set(o,"hasDataAttrs",!0)}return a}return"object"===R(e)?this.each((function(){Ut.set(this,e)})):Mt(this,(function(r){var n;if(o&&r===t)return(n=Ut.get(o,e))!==t?n:(n=qt(o,e))!==t?n:void 0;this.each((function(){Ut.set(this,e,r)}))}),null,r,arguments.length>1,null,!0)},removeData:function(t){return this.each((function(){Ut.remove(this,t)}))}}),lt.extend({queue:function(t,e,r){var n;if(t)return e=(e||"fx")+"queue",n=zt.get(t,e),r&&(!n||Array.isArray(r)?n=zt.access(t,e,lt.makeArray(r)):n.push(r)),n||[]},dequeue:function(t,e){e=e||"fx";var r=lt.queue(t,e),n=r.length,i=r.shift(),a=lt._queueHooks(t,e);"inprogress"===i&&(i=r.shift(),n--),i&&("fx"===e&&r.unshift("inprogress"),delete a.stop,i.call(t,(function(){lt.dequeue(t,e)}),a)),!n&&a&&a.empty.fire()},_queueHooks:function(t,e){var r=e+"queueHooks";return zt.get(t,r)||zt.access(t,r,{empty:lt.Callbacks("once memory").add((function(){zt.remove(t,[e+"queue",r])}))})}}),lt.fn.extend({queue:function(e,r){var n=2;return"string"!=typeof e&&(r=e,e="fx",n--),arguments.length<n?lt.queue(this[0],e):r===t?this:this.each((function(){var t=lt.queue(this,e,r);lt._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&lt.dequeue(this,e)}))},dequeue:function(t){return this.each((function(){lt.dequeue(this,t)}))},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(e,r){var n,i=1,a=lt.Deferred(),o=this,s=this.length,h=function(){--i||a.resolveWith(o,[o])};for("string"!=typeof e&&(r=e,e=t),e=e||"fx";s--;)(n=zt.get(o[s],e+"queueHooks"))&&n.empty&&(i++,n.empty.add(h));return h(),a.promise(r)}});var Vt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,jt=new RegExp("^(?:([+-])=|)("+Vt+")([a-z%]*)$","i"),Gt=["Top","Right","Bottom","Left"],Wt=function(t,e){return"none"===(t=e||t).style.display||""===t.style.display&&lt.contains(t.ownerDocument,t)&&"none"===lt.css(t,"display")},Zt=function(t,e,r,n){var i,a,o={};for(a in e)o[a]=t.style[a],t.style[a]=e[a];for(a in i=r.apply(t,n||[]),e)t.style[a]=o[a];return i};var Xt={};function Yt(t){var e,r=t.ownerDocument,n=t.nodeName,i=Xt[n];return i||(e=r.body.appendChild(r.createElement(n)),i=lt.css(e,"display"),e.parentNode.removeChild(e),"none"===i&&(i="block"),Xt[n]=i,i)}function Kt(t,e){for(var r,n,i=[],a=0,o=t.length;a<o;a++)(n=t[a]).style&&(r=n.style.display,e?("none"===r&&(i[a]=zt.get(n,"display")||null,i[a]||(n.style.display="")),""===n.style.display&&Wt(n)&&(i[a]=Yt(n))):"none"!==r&&(i[a]="none",zt.set(n,"display",r)));for(a=0;a<o;a++)null!=i[a]&&(t[a].style.display=i[a]);return t}lt.fn.extend({show:function(){return Kt(this,!0)},hide:function(){return Kt(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each((function(){Wt(this)?lt(this).show():lt(this).hide()}))}});var Qt=/^(?:checkbox|radio)$/i,Jt=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,te=/^$|^module$|\/(?:java|ecma)script/i,ee={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function re(e,r){var n;return n=void 0!==e.getElementsByTagName?e.getElementsByTagName(r||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(r||"*"):[],r===t||r&&vt(e,r)?lt.merge([e],n):n}function ne(t,e){for(var r=0,n=t.length;r<n;r++)zt.set(t[r],"globalEval",!e||zt.get(e[r],"globalEval"))}ee.optgroup=ee.option,ee.tbody=ee.tfoot=ee.colgroup=ee.caption=ee.thead,ee.th=ee.td;var ie,ae,oe=/<|&#?\w+;/;function se(t,e,r,n,i){for(var a,o,s,h,c,l,u=e.createDocumentFragment(),f=[],p=0,d=t.length;p<d;p++)if((a=t[p])||0===a)if("object"===ht(a))lt.merge(f,a.nodeType?[a]:a);else if(oe.test(a)){for(o=o||u.appendChild(e.createElement("div")),s=(Jt.exec(a)||["",""])[1].toLowerCase(),h=ee[s]||ee._default,o.innerHTML=h[1]+lt.htmlPrefilter(a)+h[2],l=h[0];l--;)o=o.lastChild;lt.merge(f,o.childNodes),(o=u.firstChild).textContent=""}else f.push(e.createTextNode(a));for(u.textContent="",p=0;a=f[p++];)if(n&&lt.inArray(a,n)>-1)i&&i.push(a);else if(c=lt.contains(a.ownerDocument,a),o=re(u.appendChild(a),"script"),c&&ne(o),r)for(l=0;a=o[l++];)te.test(a.type||"")&&r.push(a);return u}ie=W.createDocumentFragment().appendChild(W.createElement("div")),(ae=W.createElement("input")).setAttribute("type","radio"),ae.setAttribute("checked","checked"),ae.setAttribute("name","t"),ie.appendChild(ae),nt.checkClone=ie.cloneNode(!0).cloneNode(!0).lastChild.checked,ie.innerHTML="<textarea>x</textarea>",nt.noCloneChecked=!!ie.cloneNode(!0).lastChild.defaultValue;var he=W.documentElement,ce=/^key/,le=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,ue=/^([^.]*)(?:\.(.+)|)/;function fe(){return!0}function pe(){return!1}function de(){try{return W.activeElement}catch(t){}}function ge(e,r,n,i,a,o){var s,h;if("object"===R(r)){for(h in"string"!=typeof n&&(i=i||n,n=t),r)ge(e,h,n,i,r[h],o);return e}if(null==i&&null==a?(a=n,i=n=t):null==a&&("string"==typeof n?(a=i,i=t):(a=i,i=n,n=t)),!1===a)a=pe;else if(!a)return e;return 1===o&&(s=a,(a=function(t){return lt().off(t),s.apply(this,arguments)}).guid=s.guid||(s.guid=lt.guid++)),e.each((function(){lt.event.add(this,r,a,i,n)}))}lt.event={global:{},add:function(e,r,n,i,a){var o,s,h,c,l,u,f,p,d,g,m,v=zt.get(e);if(v)for(n.handler&&(n=(o=n).handler,a=o.selector),a&&lt.find.matchesSelector(he,a),n.guid||(n.guid=lt.guid++),(c=v.events)||(c=v.events={}),(s=v.handle)||(s=v.handle=function(r){return void 0!==lt&&lt.event.triggered!==r.type?lt.event.dispatch.apply(e,arguments):t}),l=(r=(r||"").match(Ct)||[""]).length;l--;)d=m=(h=ue.exec(r[l])||[])[1],g=(h[2]||"").split(".").sort(),d&&(f=lt.event.special[d]||{},d=(a?f.delegateType:f.bindType)||d,f=lt.event.special[d]||{},u=lt.extend({type:d,origType:m,data:i,handler:n,guid:n.guid,selector:a,needsContext:a&&lt.expr.match.needsContext.test(a),namespace:g.join(".")},o),(p=c[d])||((p=c[d]=[]).delegateCount=0,f.setup&&!1!==f.setup.call(e,i,g,s)||e.addEventListener&&e.addEventListener(d,s)),f.add&&(f.add.call(e,u),u.handler.guid||(u.handler.guid=n.guid)),a?p.splice(p.delegateCount++,0,u):p.push(u),lt.event.global[d]=!0)},remove:function(t,e,r,n,i){var a,o,s,h,c,l,u,f,p,d,g,m=zt.hasData(t)&&zt.get(t);if(m&&(h=m.events)){for(c=(e=(e||"").match(Ct)||[""]).length;c--;)if(p=g=(s=ue.exec(e[c])||[])[1],d=(s[2]||"").split(".").sort(),p){for(u=lt.event.special[p]||{},f=h[p=(n?u.delegateType:u.bindType)||p]||[],s=s[2]&&new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=a=f.length;a--;)l=f[a],!i&&g!==l.origType||r&&r.guid!==l.guid||s&&!s.test(l.namespace)||n&&n!==l.selector&&("**"!==n||!l.selector)||(f.splice(a,1),l.selector&&f.delegateCount--,u.remove&&u.remove.call(t,l));o&&!f.length&&(u.teardown&&!1!==u.teardown.call(t,d,m.handle)||lt.removeEvent(t,p,m.handle),delete h[p])}else for(p in h)lt.event.remove(t,p+e[c],r,n,!0);lt.isEmptyObject(h)&&zt.remove(t,"handle events")}},dispatch:function(e){var r,n,i,a,o,s,h=lt.event.fix(e),c=new Array(arguments.length),l=(zt.get(this,"events")||{})[h.type]||[],u=lt.event.special[h.type]||{};for(c[0]=h,r=1;r<arguments.length;r++)c[r]=arguments[r];if(h.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,h)){for(s=lt.event.handlers.call(this,h,l),r=0;(a=s[r++])&&!h.isPropagationStopped();)for(h.currentTarget=a.elem,n=0;(o=a.handlers[n++])&&!h.isImmediatePropagationStopped();)h.rnamespace&&!h.rnamespace.test(o.namespace)||(h.handleObj=o,h.data=o.data,(i=((lt.event.special[o.origType]||{}).handle||o.handler).apply(a.elem,c))!==t&&!1===(h.result=i)&&(h.preventDefault(),h.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,h),h.result}},handlers:function(e,r){var n,i,a,o,s,h=[],c=r.delegateCount,l=e.target;if(c&&l.nodeType&&!("click"===e.type&&e.button>=1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==e.type||!0!==l.disabled)){for(o=[],s={},n=0;n<c;n++)s[a=(i=r[n]).selector+" "]===t&&(s[a]=i.needsContext?lt(a,this).index(l)>-1:lt.find(a,this,null,[l]).length),s[a]&&o.push(i);o.length&&h.push({elem:l,handlers:o})}return l=this,c<r.length&&h.push({elem:l,handlers:r.slice(c)}),h},addProp:function(t,e){Object.defineProperty(lt.Event.prototype,t,{enumerable:!0,configurable:!0,get:it(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(t){return t[lt.expando]?t:new lt.Event(t)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==de()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===de()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&vt(this,"input"))return this.click(),!1},_default:function(t){return vt(t.target,"a")}},beforeunload:{postDispatch:function(e){e.result!==t&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},lt.removeEvent=function(t,e,r){t.removeEventListener&&t.removeEventListener(e,r)},lt.Event=function(e,r){if(!(this instanceof lt.Event))return new lt.Event(e,r);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.defaultPrevented===t&&!1===e.returnValue?fe:pe,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,r&&lt.extend(this,r),this.timeStamp=e&&e.timeStamp||Date.now(),this[lt.expando]=!0},lt.Event.prototype={constructor:lt.Event,isDefaultPrevented:pe,isPropagationStopped:pe,isImmediatePropagationStopped:pe,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=fe,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=fe,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=fe,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},lt.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var r=e.button;return null==e.which&&ce.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&r!==t&&le.test(e.type)?1&r?1:2&r?3:4&r?2:0:e.which}},lt.event.addProp),lt.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(t,e){lt.event.special[t]={delegateType:e,bindType:e,handle:function(t){var r,n=this,i=t.relatedTarget,a=t.handleObj;return i&&(i===n||lt.contains(n,i))||(t.type=a.origType,r=a.handler.apply(this,arguments),t.type=e),r}}})),lt.fn.extend({on:function(t,e,r,n){return ge(this,t,e,r,n)},one:function(t,e,r,n){return ge(this,t,e,r,n,1)},off:function(e,r,n){var i,a;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,lt(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"===R(e)){for(a in e)this.off(a,r,e[a]);return this}return!1!==r&&"function"!=typeof r||(n=r,r=t),!1===n&&(n=pe),this.each((function(){lt.event.remove(this,e,n,r)}))}});var me=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,ve=/<script|<style|<link/i,be=/checked\s*(?:[^=]|=\s*.checked.)/i,ye=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function we(t,e){return vt(t,"table")&&vt(11!==e.nodeType?e:e.firstChild,"tr")&&lt(t).children("tbody")[0]||t}function xe(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function ke(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function Se(t,e){var r,n,i,a,o,s,h,c;if(1===e.nodeType){if(zt.hasData(t)&&(a=zt.access(t),o=zt.set(e,a),c=a.events))for(i in delete o.handle,o.events={},c)for(r=0,n=c[i].length;r<n;r++)lt.event.add(e,i,c[i][r]);Ut.hasData(t)&&(s=Ut.access(t),h=lt.extend({},s),Ut.set(e,h))}}function _e(t,e){var r=e.nodeName.toLowerCase();"input"===r&&Qt.test(t.type)?e.checked=t.checked:"input"!==r&&"textarea"!==r||(e.defaultValue=t.defaultValue)}function Ce(t,e,r,n){e=Y.apply([],e);var i,a,o,s,h,c,l=0,u=t.length,f=u-1,p=e[0],d=it(p);if(d||u>1&&"string"==typeof p&&!nt.checkClone&&be.test(p))return t.each((function(i){var a=t.eq(i);d&&(e[0]=p.call(this,i,a.html())),Ce(a,e,r,n)}));if(u&&(a=(i=se(e,t[0].ownerDocument,!1,t,n)).firstChild,1===i.childNodes.length&&(i=a),a||n)){for(s=(o=lt.map(re(i,"script"),xe)).length;l<u;l++)h=i,l!==f&&(h=lt.clone(h,!0,!0),s&&lt.merge(o,re(h,"script"))),r.call(t[l],h,l);if(s)for(c=o[o.length-1].ownerDocument,lt.map(o,ke),l=0;l<s;l++)h=o[l],te.test(h.type||"")&&!zt.access(h,"globalEval")&&lt.contains(c,h)&&(h.src&&"module"!==(h.type||"").toLowerCase()?lt._evalUrl&&lt._evalUrl(h.src):st(h.textContent.replace(ye,""),c,h))}return t}function Ee(t,e,r){for(var n,i=e?lt.filter(e,t):t,a=0;null!=(n=i[a]);a++)r||1!==n.nodeType||lt.cleanData(re(n)),n.parentNode&&(r&&lt.contains(n.ownerDocument,n)&&ne(re(n,"script")),n.parentNode.removeChild(n));return t}lt.extend({htmlPrefilter:function(t){return t.replace(me,"<$1></$2>")},clone:function(t,e,r){var n,i,a,o,s=t.cloneNode(!0),h=lt.contains(t.ownerDocument,t);if(!(nt.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||lt.isXMLDoc(t)))for(o=re(s),n=0,i=(a=re(t)).length;n<i;n++)_e(a[n],o[n]);if(e)if(r)for(a=a||re(t),o=o||re(s),n=0,i=a.length;n<i;n++)Se(a[n],o[n]);else Se(t,s);return(o=re(s,"script")).length>0&&ne(o,!h&&re(t,"script")),s},cleanData:function(e){for(var r,n,i,a=lt.event.special,o=0;(n=e[o])!==t;o++)if(Bt(n)){if(r=n[zt.expando]){if(r.events)for(i in r.events)a[i]?lt.event.remove(n,i):lt.removeEvent(n,i,r.handle);n[zt.expando]=t}n[Ut.expando]&&(n[Ut.expando]=t)}}}),lt.fn.extend({detach:function(t){return Ee(this,t,!0)},remove:function(t){return Ee(this,t)},text:function(e){return Mt(this,(function(e){return e===t?lt.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)}))}),null,e,arguments.length)},append:function(){return Ce(this,arguments,(function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||we(this,t).appendChild(t)}))},prepend:function(){return Ce(this,arguments,(function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=we(this,t);e.insertBefore(t,e.firstChild)}}))},before:function(){return Ce(this,arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this)}))},after:function(){return Ce(this,arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)}))},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(lt.cleanData(re(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map((function(){return lt.clone(this,t,e)}))},html:function(e){return Mt(this,(function(e){var r=this[0]||{},n=0,i=this.length;if(e===t&&1===r.nodeType)return r.innerHTML;if("string"==typeof e&&!ve.test(e)&&!ee[(Jt.exec(e)||["",""])[1].toLowerCase()]){e=lt.htmlPrefilter(e);try{for(;n<i;n++)1===(r=this[n]||{}).nodeType&&(lt.cleanData(re(r,!1)),r.innerHTML=e);r=0}catch(t){}}r&&this.empty().append(e)}),null,e,arguments.length)},replaceWith:function(){var t=[];return Ce(this,arguments,(function(e){var r=this.parentNode;lt.inArray(this,t)<0&&(lt.cleanData(re(this)),r&&r.replaceChild(e,this))}),t)}}),lt.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(t,e){lt.fn[t]=function(t){for(var r,n=[],i=lt(t),a=i.length-1,o=0;o<=a;o++)r=o===a?this:this.clone(!0),lt(i[o])[e](r),K.apply(n,r.get());return this.pushStack(n)}}));var Ae=new RegExp("^("+Vt+")(?!px)[a-z%]+$","i"),Te=function(t){var e=t.ownerDocument.defaultView;return e&&e.opener||(e=window),e.getComputedStyle(t)},Re=new RegExp(Gt.join("|"),"i");function Le(e,r,n){var i,a,o,s,h=e.style;return(n=n||Te(e))&&(""!==(s=n.getPropertyValue(r)||n[r])||lt.contains(e.ownerDocument,e)||(s=lt.style(e,r)),!nt.pixelBoxStyles()&&Ae.test(s)&&Re.test(r)&&(i=h.width,a=h.minWidth,o=h.maxWidth,h.minWidth=h.maxWidth=h.width=s,s=n.width,h.width=i,h.minWidth=a,h.maxWidth=o)),s!==t?s+"":s}function Ie(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}!function(){function t(){if(h){s.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",h.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",he.appendChild(s).appendChild(h);var t=window.getComputedStyle(h);r="1%"!==t.top,o=12===e(t.marginLeft),h.style.right="60%",a=36===e(t.right),n=36===e(t.width),h.style.position="absolute",i=36===h.offsetWidth||"absolute",he.removeChild(s),h=null}}function e(t){return Math.round(parseFloat(t))}var r,n,i,a,o,s=W.createElement("div"),h=W.createElement("div");h.style&&(h.style.backgroundClip="content-box",h.cloneNode(!0).style.backgroundClip="",nt.clearCloneStyle="content-box"===h.style.backgroundClip,lt.extend(nt,{boxSizingReliable:function(){return t(),n},pixelBoxStyles:function(){return t(),a},pixelPosition:function(){return t(),r},reliableMarginLeft:function(){return t(),o},scrollboxSize:function(){return t(),i}}))}();var Me=/^(none|table(?!-c[ea]).+)/,Pe=/^--/,De={position:"absolute",visibility:"hidden",display:"block"},Fe={letterSpacing:"0",fontWeight:"400"},Ne=["Webkit","Moz","ms"],Be=W.createElement("div").style;function Oe(t){var e=lt.cssProps[t];return e||(e=lt.cssProps[t]=function(t){if(t in Be)return t;for(var e=t[0].toUpperCase()+t.slice(1),r=Ne.length;r--;)if((t=Ne[r]+e)in Be)return t}(t)||t),e}function ze(t,e,r){var n=jt.exec(e);return n?Math.max(0,n[2]-(r||0))+(n[3]||"px"):e}function Ue(t,e,r,n,i,a){var o="width"===e?1:0,s=0,h=0;if(r===(n?"border":"content"))return 0;for(;o<4;o+=2)"margin"===r&&(h+=lt.css(t,r+Gt[o],!0,i)),n?("content"===r&&(h-=lt.css(t,"padding"+Gt[o],!0,i)),"margin"!==r&&(h-=lt.css(t,"border"+Gt[o]+"Width",!0,i))):(h+=lt.css(t,"padding"+Gt[o],!0,i),"padding"!==r?h+=lt.css(t,"border"+Gt[o]+"Width",!0,i):s+=lt.css(t,"border"+Gt[o]+"Width",!0,i));return!n&&a>=0&&(h+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-a-h-s-.5))),h}function He(t,e,r){var n=Te(t),i=Le(t,e,n),a="border-box"===lt.css(t,"boxSizing",!1,n),o=a;if(Ae.test(i)){if(!r)return i;i="auto"}return o=o&&(nt.boxSizingReliable()||i===t.style[e]),("auto"===i||!parseFloat(i)&&"inline"===lt.css(t,"display",!1,n))&&(i=t["offset"+e[0].toUpperCase()+e.slice(1)],o=!0),(i=parseFloat(i)||0)+Ue(t,e,r||(a?"border":"content"),o,n,i)+"px"}lt.extend({cssHooks:{opacity:{get:function(t,e){if(e){var r=Le(t,"opacity");return""===r?"1":r}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,r,n,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var a,o,s,h=Nt(r),c=Pe.test(r),l=e.style;if(c||(r=Oe(h)),s=lt.cssHooks[r]||lt.cssHooks[h],n===t)return s&&"get"in s&&(a=s.get(e,!1,i))!==t?a:l[r];"string"===(o=R(n))&&(a=jt.exec(n))&&a[1]&&(n=function(t,e,r,n){var i,a,o=20,s=n?function(){return n.cur()}:function(){return lt.css(t,e,"")},h=s(),c=r&&r[3]||(lt.cssNumber[e]?"":"px"),l=(lt.cssNumber[e]||"px"!==c&&+h)&&jt.exec(lt.css(t,e));if(l&&l[3]!==c){for(h/=2,c=c||l[3],l=+h||1;o--;)lt.style(t,e,l+c),(1-a)*(1-(a=s()/h||.5))<=0&&(o=0),l/=a;l*=2,lt.style(t,e,l+c),r=r||[]}return r&&(l=+l||+h||0,i=r[1]?l+(r[1]+1)*r[2]:+r[2],n&&(n.unit=c,n.start=l,n.end=i)),i}(e,r,a),o="number"),null!=n&&n==n&&("number"===o&&(n+=a&&a[3]||(lt.cssNumber[h]?"":"px")),nt.clearCloneStyle||""!==n||0!==r.indexOf("background")||(l[r]="inherit"),s&&"set"in s&&(n=s.set(e,n,i))===t||(c?l.setProperty(r,n):l[r]=n))}},css:function(e,r,n,i){var a,o,s,h=Nt(r);return Pe.test(r)||(r=Oe(h)),(s=lt.cssHooks[r]||lt.cssHooks[h])&&"get"in s&&(a=s.get(e,!0,n)),a===t&&(a=Le(e,r,i)),"normal"===a&&r in Fe&&(a=Fe[r]),""===n||n?(o=parseFloat(a),!0===n||isFinite(o)?o||0:a):a}}),lt.each(["height","width"],(function(t,e){lt.cssHooks[e]={get:function(t,r,n){if(r)return!Me.test(lt.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?He(t,e,n):Zt(t,De,(function(){return He(t,e,n)}))},set:function(t,r,n){var i,a=Te(t),o="border-box"===lt.css(t,"boxSizing",!1,a),s=n&&Ue(t,e,n,o,a);return o&&nt.scrollboxSize()===a.position&&(s-=Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-parseFloat(a[e])-Ue(t,e,"border",!1,a)-.5)),s&&(i=jt.exec(r))&&"px"!==(i[3]||"px")&&(t.style[e]=r,r=lt.css(t,e)),ze(0,r,s)}}})),lt.cssHooks.marginLeft=Ie(nt.reliableMarginLeft,(function(t,e){if(e)return(parseFloat(Le(t,"marginLeft"))||t.getBoundingClientRect().left-Zt(t,{marginLeft:0},(function(){return t.getBoundingClientRect().left})))+"px"})),lt.each({margin:"",padding:"",border:"Width"},(function(t,e){lt.cssHooks[t+e]={expand:function(r){for(var n=0,i={},a="string"==typeof r?r.split(" "):[r];n<4;n++)i[t+Gt[n]+e]=a[n]||a[n-2]||a[0];return i}},"margin"!==t&&(lt.cssHooks[t+e].set=ze)})),lt.fn.extend({css:function(e,r){return Mt(this,(function(e,r,n){var i,a,o={},s=0;if(Array.isArray(r)){for(i=Te(e),a=r.length;s<a;s++)o[r[s]]=lt.css(e,r[s],!1,i);return o}return n!==t?lt.style(e,r,n):lt.css(e,r)}),e,r,arguments.length>1)}}),lt.fn.delay=function(t,e){return t=lt.fx&&lt.fx.speeds[t]||t,e=e||"fx",this.queue(e,(function(e,r){var n=window.setTimeout(e,t);r.stop=function(){window.clearTimeout(n)}}))},function(){var t=W.createElement("input"),e=W.createElement("select").appendChild(W.createElement("option"));t.type="checkbox",nt.checkOn=""!==t.value,nt.optSelected=e.selected,(t=W.createElement("input")).value="t",t.type="radio",nt.radioValue="t"===t.value}();var $e,qe=lt.expr.attrHandle;lt.fn.extend({attr:function(t,e){return Mt(this,lt.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each((function(){lt.removeAttr(this,t)}))}}),lt.extend({attr:function(e,r,n){var i,a,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===e.getAttribute?lt.prop(e,r,n):(1===o&&lt.isXMLDoc(e)||(a=lt.attrHooks[r.toLowerCase()]||(lt.expr.match.bool.test(r)?$e:t)),n!==t?null===n?void lt.removeAttr(e,r):a&&"set"in a&&(i=a.set(e,n,r))!==t?i:(e.setAttribute(r,n+""),n):a&&"get"in a&&null!==(i=a.get(e,r))?i:null==(i=lt.find.attr(e,r))?t:i)},attrHooks:{type:{set:function(t,e){if(!nt.radioValue&&"radio"===e&&vt(t,"input")){var r=t.value;return t.setAttribute("type",e),r&&(t.value=r),e}}}},removeAttr:function(t,e){var r,n=0,i=e&&e.match(Ct);if(i&&1===t.nodeType)for(;r=i[n++];)t.removeAttribute(r)}}),$e={set:function(t,e,r){return!1===e?lt.removeAttr(t,r):t.setAttribute(r,r),r}},lt.each(lt.expr.match.bool.source.match(/\w+/g),(function(t,e){var r=qe[e]||lt.find.attr;qe[e]=function(t,e,n){var i,a,o=e.toLowerCase();return n||(a=qe[o],qe[o]=i,i=null!=r(t,e,n)?o:null,qe[o]=a),i}}));var Ve=/^(?:input|select|textarea|button)$/i,je=/^(?:a|area)$/i;function Ge(t){return(t.match(Ct)||[]).join(" ")}function We(t){return t.getAttribute&&t.getAttribute("class")||""}function Ze(t){return Array.isArray(t)?t:"string"==typeof t&&t.match(Ct)||[]}lt.fn.extend({prop:function(t,e){return Mt(this,lt.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each((function(){delete this[lt.propFix[t]||t]}))}}),lt.extend({prop:function(e,r,n){var i,a,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&lt.isXMLDoc(e)||(r=lt.propFix[r]||r,a=lt.propHooks[r]),n!==t?a&&"set"in a&&(i=a.set(e,n,r))!==t?i:e[r]=n:a&&"get"in a&&null!==(i=a.get(e,r))?i:e[r]},propHooks:{tabIndex:{get:function(t){var e=lt.find.attr(t,"tabindex");return e?parseInt(e,10):Ve.test(t.nodeName)||je.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),nt.optSelected||(lt.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),lt.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){lt.propFix[this.toLowerCase()]=this})),lt.fn.extend({addClass:function(t){var e,r,n,i,a,o,s,h=0;if(it(t))return this.each((function(e){lt(this).addClass(t.call(this,e,We(this)))}));if((e=Ze(t)).length)for(;r=this[h++];)if(i=We(r),n=1===r.nodeType&&" "+Ge(i)+" "){for(o=0;a=e[o++];)n.indexOf(" "+a+" ")<0&&(n+=a+" ");i!==(s=Ge(n))&&r.setAttribute("class",s)}return this},removeClass:function(t){var e,r,n,i,a,o,s,h=0;if(it(t))return this.each((function(e){lt(this).removeClass(t.call(this,e,We(this)))}));if(!arguments.length)return this.attr("class","");if((e=Ze(t)).length)for(;r=this[h++];)if(i=We(r),n=1===r.nodeType&&" "+Ge(i)+" "){for(o=0;a=e[o++];)for(;n.indexOf(" "+a+" ")>-1;)n=n.replace(" "+a+" "," ");i!==(s=Ge(n))&&r.setAttribute("class",s)}return this},toggleClass:function(e,r){var n=R(e),i="string"===n||Array.isArray(e);return"boolean"==typeof r&&i?r?this.addClass(e):this.removeClass(e):it(e)?this.each((function(t){lt(this).toggleClass(e.call(this,t,We(this),r),r)})):this.each((function(){var r,a,o,s;if(i)for(a=0,o=lt(this),s=Ze(e);r=s[a++];)o.hasClass(r)?o.removeClass(r):o.addClass(r);else e!==t&&"boolean"!==n||((r=We(this))&&zt.set(this,"__className__",r),this.setAttribute&&this.setAttribute("class",r||!1===e?"":zt.get(this,"__className__")||""))}))},hasClass:function(t){var e,r,n=0;for(e=" "+t+" ";r=this[n++];)if(1===r.nodeType&&(" "+Ge(We(r))+" ").indexOf(e)>-1)return!0;return!1}});var Xe=/\r/g;lt.fn.extend({val:function(e){var r,n,i,a=this[0];return arguments.length?(i=it(e),this.each((function(n){var a;1===this.nodeType&&(null==(a=i?e.call(this,n,lt(this).val()):e)?a="":"number"==typeof a?a+="":Array.isArray(a)&&(a=lt.map(a,(function(t){return null==t?"":t+""}))),(r=lt.valHooks[this.type]||lt.valHooks[this.nodeName.toLowerCase()])&&"set"in r&&r.set(this,a,"value")!==t||(this.value=a))}))):a?(r=lt.valHooks[a.type]||lt.valHooks[a.nodeName.toLowerCase()])&&"get"in r&&(n=r.get(a,"value"))!==t?n:"string"==typeof(n=a.value)?n.replace(Xe,""):null==n?"":n:void 0}}),lt.extend({valHooks:{option:{get:function(t){var e=lt.find.attr(t,"value");return null!=e?e:Ge(lt.text(t))}},select:{get:function(t){var e,r,n,i=t.options,a=t.selectedIndex,o="select-one"===t.type,s=o?null:[],h=o?a+1:i.length;for(n=a<0?h:o?a:0;n<h;n++)if(((r=i[n]).selected||n===a)&&!r.disabled&&(!r.parentNode.disabled||!vt(r.parentNode,"optgroup"))){if(e=lt(r).val(),o)return e;s.push(e)}return s},set:function(t,e){for(var r,n,i=t.options,a=lt.makeArray(e),o=i.length;o--;)((n=i[o]).selected=lt.inArray(lt.valHooks.option.get(n),a)>-1)&&(r=!0);return r||(t.selectedIndex=-1),a}}}}),lt.each(["radio","checkbox"],(function(){lt.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=lt.inArray(lt(t).val(),e)>-1}},nt.checkOn||(lt.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})})),nt.focusin="onfocusin"in window;var Ye=/^(?:focusinfocus|focusoutblur)$/,Ke=function(t){t.stopPropagation()};lt.extend(lt.event,{trigger:function(e,r,i,a){var o,s,h,c,l,u,f,p,d=[i||W],g=n.call(e,"type")?e.type:e,m=n.call(e,"namespace")?e.namespace.split("."):[];if(s=p=h=i=i||W,3!==i.nodeType&&8!==i.nodeType&&!Ye.test(g+lt.event.triggered)&&(g.indexOf(".")>-1&&(m=g.split("."),g=m.shift(),m.sort()),l=g.indexOf(":")<0&&"on"+g,(e=e[lt.expando]?e:new lt.Event(g,"object"===R(e)&&e)).isTrigger=a?2:3,e.namespace=m.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=t,e.target||(e.target=i),r=null==r?[e]:lt.makeArray(r,[e]),f=lt.event.special[g]||{},a||!f.trigger||!1!==f.trigger.apply(i,r))){if(!a&&!f.noBubble&&!at(i)){for(c=f.delegateType||g,Ye.test(c+g)||(s=s.parentNode);s;s=s.parentNode)d.push(s),h=s;h===(i.ownerDocument||W)&&d.push(h.defaultView||h.parentWindow||window)}for(o=0;(s=d[o++])&&!e.isPropagationStopped();)p=s,e.type=o>1?c:f.bindType||g,(u=(zt.get(s,"events")||{})[e.type]&&zt.get(s,"handle"))&&u.apply(s,r),(u=l&&s[l])&&u.apply&&Bt(s)&&(e.result=u.apply(s,r),!1===e.result&&e.preventDefault());return e.type=g,a||e.isDefaultPrevented()||f._default&&!1!==f._default.apply(d.pop(),r)||!Bt(i)||l&&it(i[g])&&!at(i)&&((h=i[l])&&(i[l]=null),lt.event.triggered=g,e.isPropagationStopped()&&p.addEventListener(g,Ke),i[g](),e.isPropagationStopped()&&p.removeEventListener(g,Ke),lt.event.triggered=t,h&&(i[l]=h)),e.result}},simulate:function(t,e,r){var n=lt.extend(new lt.Event,r,{type:t,isSimulated:!0});lt.event.trigger(n,null,e)}}),lt.fn.extend({trigger:function(t,e){return this.each((function(){lt.event.trigger(t,e,this)}))},triggerHandler:function(t,e){var r=this[0];if(r)return lt.event.trigger(t,e,r,!0)}}),nt.focusin||lt.each({focus:"focusin",blur:"focusout"},(function(t,e){var r=function(t){lt.event.simulate(e,t.target,lt.event.fix(t))};lt.event.special[e]={setup:function(){var n=this.ownerDocument||this,i=zt.access(n,e);i||n.addEventListener(t,r,!0),zt.access(n,e,(i||0)+1)},teardown:function(){var n=this.ownerDocument||this,i=zt.access(n,e)-1;i?zt.access(n,e,i):(n.removeEventListener(t,r,!0),zt.remove(n,e))}}}));var Qe,Je=/\[\]$/,tr=/\r?\n/g,er=/^(?:submit|button|image|reset|file)$/i,rr=/^(?:input|select|textarea|keygen)/i;function nr(t,e,r,n){var i;if(Array.isArray(e))lt.each(e,(function(e,i){r||Je.test(t)?n(t,i):nr(t+"["+("object"===R(i)&&null!=i?e:"")+"]",i,r,n)}));else if(r||"object"!==ht(e))n(t,e);else for(i in e)nr(t+"["+i+"]",e[i],r,n)}lt.param=function(t,e){var r,n=[],i=function(t,e){var r=it(e)?e():e;n[n.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==r?"":r)};if(Array.isArray(t)||t.jquery&&!lt.isPlainObject(t))lt.each(t,(function(){i(this.name,this.value)}));else for(r in t)nr(r,t[r],e,i);return n.join("&")},lt.fn.extend({serialize:function(){return lt.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var t=lt.prop(this,"elements");return t?lt.makeArray(t):this})).filter((function(){var t=this.type;return this.name&&!lt(this).is(":disabled")&&rr.test(this.nodeName)&&!er.test(t)&&(this.checked||!Qt.test(t))})).map((function(t,e){var r=lt(this).val();return null==r?null:Array.isArray(r)?lt.map(r,(function(t){return{name:e.name,value:t.replace(tr,"\r\n")}})):{name:e.name,value:r.replace(tr,"\r\n")}})).get()}}),lt.fn.extend({wrapAll:function(t){var e;return this[0]&&(it(t)&&(t=t.call(this[0])),e=lt(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map((function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t})).append(this)),this},wrapInner:function(t){return it(t)?this.each((function(e){lt(this).wrapInner(t.call(this,e))})):this.each((function(){var e=lt(this),r=e.contents();r.length?r.wrapAll(t):e.append(t)}))},wrap:function(t){var e=it(t);return this.each((function(r){lt(this).wrapAll(e?t.call(this,r):t)}))},unwrap:function(t){return this.parent(t).not("body").each((function(){lt(this).replaceWith(this.childNodes)})),this}}),lt.expr.pseudos.hidden=function(t){return!lt.expr.pseudos.visible(t)},lt.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},nt.createHTMLDocument=((Qe=W.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Qe.childNodes.length),lt.parseHTML=function(t,e,r){return"string"!=typeof t?[]:("boolean"==typeof e&&(r=e,e=!1),e||(nt.createHTMLDocument?((n=(e=W.implementation.createHTMLDocument("")).createElement("base")).href=W.location.href,e.head.appendChild(n)):e=W),a=!r&&[],(i=bt.exec(t))?[e.createElement(i[1])]:(i=se([t],e,a),a&&a.length&&lt(a).remove(),lt.merge([],i.childNodes)));var n,i,a},lt.offset={setOffset:function(t,e,r){var n,i,a,o,s,h,c=lt.css(t,"position"),l=lt(t),u={};"static"===c&&(t.style.position="relative"),s=l.offset(),a=lt.css(t,"top"),h=lt.css(t,"left"),("absolute"===c||"fixed"===c)&&(a+h).indexOf("auto")>-1?(o=(n=l.position()).top,i=n.left):(o=parseFloat(a)||0,i=parseFloat(h)||0),it(e)&&(e=e.call(t,r,lt.extend({},s))),null!=e.top&&(u.top=e.top-s.top+o),null!=e.left&&(u.left=e.left-s.left+i),"using"in e?e.using.call(t,u):l.css(u)}},lt.fn.extend({offset:function(e){if(arguments.length)return e===t?this:this.each((function(t){lt.offset.setOffset(this,e,t)}));var r,n,i=this[0];return i?i.getClientRects().length?(r=i.getBoundingClientRect(),n=i.ownerDocument.defaultView,{top:r.top+n.pageYOffset,left:r.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var t,e,r,n=this[0],i={top:0,left:0};if("fixed"===lt.css(n,"position"))e=n.getBoundingClientRect();else{for(e=this.offset(),r=n.ownerDocument,t=n.offsetParent||r.documentElement;t&&(t===r.body||t===r.documentElement)&&"static"===lt.css(t,"position");)t=t.parentNode;t&&t!==n&&1===t.nodeType&&((i=lt(t).offset()).top+=lt.css(t,"borderTopWidth",!0),i.left+=lt.css(t,"borderLeftWidth",!0))}return{top:e.top-i.top-lt.css(n,"marginTop",!0),left:e.left-i.left-lt.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var t=this.offsetParent;t&&"static"===lt.css(t,"position");)t=t.offsetParent;return t||he}))}}),lt.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(e,r){var n="pageYOffset"===r;lt.fn[e]=function(i){return Mt(this,(function(e,i,a){var o;if(at(e)?o=e:9===e.nodeType&&(o=e.defaultView),a===t)return o?o[r]:e[i];o?o.scrollTo(n?o.pageXOffset:a,n?a:o.pageYOffset):e[i]=a}),e,i,arguments.length)}})),lt.each(["top","left"],(function(t,e){lt.cssHooks[e]=Ie(nt.pixelPosition,(function(t,r){if(r)return r=Le(t,e),Ae.test(r)?lt(t).position()[e]+"px":r}))})),lt.each({Height:"height",Width:"width"},(function(e,r){lt.each({padding:"inner"+e,content:r,"":"outer"+e},(function(n,i){lt.fn[i]=function(a,o){var s=arguments.length&&(n||"boolean"!=typeof a),h=n||(!0===a||!0===o?"margin":"border");return Mt(this,(function(r,n,a){var o;return at(r)?0===i.indexOf("outer")?r["inner"+e]:r.document.documentElement["client"+e]:9===r.nodeType?(o=r.documentElement,Math.max(r.body["scroll"+e],o["scroll"+e],r.body["offset"+e],o["offset"+e],o["client"+e])):a===t?lt.css(r,n,h):lt.style(r,n,a,h)}),r,s?a:t,s)}}))})),lt.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(t,e){lt.fn[e]=function(t,r){return arguments.length>0?this.on(e,null,t,r):this.trigger(e)}})),lt.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),lt.fn.extend({bind:function(t,e,r){return this.on(t,null,e,r)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,r,n){return this.on(e,t,r,n)},undelegate:function(t,e,r){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",r)}}),lt.proxy=function(e,r){var n,i,a;return"string"==typeof r&&(n=e[r],r=e,e=n),it(e)?(i=X.call(arguments,2),(a=function(){return e.apply(r||this,i.concat(X.call(arguments)))}).guid=e.guid=e.guid||lt.guid++,a):t},lt.holdReady=function(t){t?lt.readyWait++:lt.ready(!0)},lt.isArray=Array.isArray,lt.parseJSON=JSON.parse,lt.nodeName=vt,lt.isFunction=it,lt.isWindow=at,lt.camelCase=Nt,lt.type=ht,lt.now=Date.now,lt.isNumeric=function(t){var e=lt.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))};var ir,ar,or,sr,hr,cr=lt;function lr(t,e){var r,n=Object.keys(e);for(r=0;r<n.length;r++)t=t.replace(new RegExp("\\{"+n[r]+"\\}","gi"),e[n[r]]);return t}function ur(t){var e,r,n;if(!t)throw new Error("cannot create a random attribute name for an undefined object");e="ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",r="";do{for(r="",n=0;n<12;n++)r+=e[Math.floor(Math.random()*e.length)]}while(t[r]);return r}function fr(t){var e={alphabetic:"alphabetic",hanging:"hanging",top:"text-before-edge",bottom:"text-after-edge",middle:"central"};return e[t]||e.alphabetic}hr=function(t,e){var r,n,i,a={};for(t=t.split(","),e=e||10,r=0;r<t.length;r+=2)n="&"+t[r+1]+";",i=parseInt(t[r],e),a[n]="&#"+i+";";return a["\\xa0"]="&#160;",a}("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),ir={strokeStyle:{svgAttr:"stroke",canvas:"#000000",svg:"none",apply:"stroke"},fillStyle:{svgAttr:"fill",canvas:"#000000",svg:null,apply:"fill"},lineCap:{svgAttr:"stroke-linecap",canvas:"butt",svg:"butt",apply:"stroke"},lineJoin:{svgAttr:"stroke-linejoin",canvas:"miter",svg:"miter",apply:"stroke"},miterLimit:{svgAttr:"stroke-miterlimit",canvas:10,svg:4,apply:"stroke"},lineWidth:{svgAttr:"stroke-width",canvas:1,svg:1,apply:"stroke"},globalAlpha:{svgAttr:"opacity",canvas:1,svg:1,apply:"fill stroke"},font:{canvas:"10px sans-serif"},shadowColor:{canvas:"#000000"},shadowOffsetX:{canvas:0},shadowOffsetY:{canvas:0},shadowBlur:{canvas:0},textAlign:{canvas:"start"},textBaseline:{canvas:"alphabetic"},lineDash:{svgAttr:"stroke-dasharray",canvas:[],svg:null,apply:"stroke"}},(or=function(t,e){this.__root=t,this.__ctx=e}).prototype.addColorStop=function(t,e){var r,n=this.__ctx.__createElement("stop");n.setAttribute("offset",t),e&&-1!==e.indexOf("rgba")?(r=/rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?\.?\d*)\s*\)/gi.exec(e),n.setAttribute("stop-color",lr("rgb({r},{g},{b})",{r:r[1],g:r[2],b:r[3]})),n.setAttribute("stop-opacity",r[4])):n.setAttribute("stop-color",e),this.__root.appendChild(n)},sr=function(t,e){this.__root=t,this.__ctx=e},(ar=function(t){if(!(this instanceof ar))return new ar(t);if(this.config=t,this.width=t.width,this.height=t.height,this.enableMirroring=t.enableMirroring||!1,this.canvas=this,this.__document=document,t.ctx?this.__ctx=t.ctx:(this.__canvas=this.__document.createElement("canvas"),this.__ctx=this.__canvas.getContext("2d")),this.isSVG=!0,this.__setDefaultStyles(),this.__stack=[this.__getStyleState()],this.__groupStack=[],this.__root=this.__createElement("svg"),this.__root.setAttribute("width",this.width),this.__root.setAttribute("height",this.height),this.__root.setAttribute("overflow","visible"),t.viewbox){var e=t.viewbox.x+" "+t.viewbox.y+" "+t.viewbox.width+" "+t.viewbox.height;this.__root.setAttribute("viewBox",e),this.viewbox=t.viewbox}this.__ids={},this.__defs=this.__createElement("defs"),this.__root.appendChild(this.__defs),this.multiLocusGap=t.multiLocusGap;var r={id:"svg_output_backdrop",width:"100%",height:"100%",fill:t.backdropColor||"white"},n=this.__createElement("rect",r);this.__root.appendChild(n),this.__rootGroup=this.__createElement("g",{id:"root-group"}),this.__root.appendChild(this.__rootGroup),this.__currentElement=this.__rootGroup}).prototype.setWidth=function(t){this.width=t,this.__root.setAttribute("width",this.width);var e=this.config.viewbox.x+" "+this.config.viewbox.y+" "+t+" "+this.config.viewbox.height;this.__root.setAttribute("viewBox",e)},ar.prototype.setHeight=function(t){this.height=t,this.__root.setAttribute("height",this.height);var e=this.config.viewbox.x+" "+this.config.viewbox.y+" "+this.config.viewbox.width+" "+t;this.__root.setAttribute("viewBox",e)},ar.prototype.__createElement=function(t,e,r){void 0===e&&(e={});var n=this.__document.createElementNS("http://www.w3.org/2000/svg",t);r&&(n.setAttribute("fill","none"),n.setAttribute("stroke","none"));for(var i=0,a=Object.keys(e);i<a.length;i++){var o=a[i];n.setAttribute(o,e[o])}return n},ar.prototype.__setDefaultStyles=function(){var t,e,r=Object.keys(ir);for(t=0;t<r.length;t++)this[e=r[t]]=ir[e].canvas},ar.prototype.__applyStyleState=function(t){var e,r,n=Object.keys(t);for(e=0;e<n.length;e++)this[r=n[e]]=t[r]},ar.prototype.__getStyleState=function(){var t,e,r={},n=Object.keys(ir);for(t=0;t<n.length;t++)r[e=n[t]]=this[e];return r},ar.prototype.__applyStyleToCurrentElement=function(t){var e=this.__currentElement,r=this.__currentElementsToStyle;r&&(e.setAttribute(t,""),e=r.element,r.children.forEach((function(e){e.setAttribute(t,"")})));var n,i,a,o,s,h=Object.keys(ir);for(n=0;n<h.length;n++)if(i=ir[h[n]],a=this[h[n]],i.apply)if(a instanceof sr){if(a.__ctx)for(;a.__ctx.__defs.childNodes.length;)o=a.__ctx.__defs.childNodes[0].getAttribute("id"),this.__ids[o]=o,this.__defs.appendChild(a.__ctx.__defs.childNodes[0]);e.setAttribute(i.apply,lr("url(#{id})",{id:a.__root.getAttribute("id")}))}else if(a instanceof or)e.setAttribute(i.apply,lr("url(#{id})",{id:a.__root.getAttribute("id")}));else if(i&&-1!==i.apply.indexOf(t)&&i.svg!==a)if("stroke"!==i.svgAttr&&"fill"!==i.svgAttr||!a||-1===a.indexOf("rgba")){var c=i.svgAttr;if("globalAlpha"===h[n]&&(c=t+"-"+i.svgAttr,e.getAttribute(c)))continue;e.setAttribute(c,a)}else{s=/rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?\.?\d*)\s*\)/gi.exec(a),e.setAttribute(i.svgAttr,lr("rgb({r},{g},{b})",{r:s[1],g:s[2],b:s[3]}));var l=s[4],u=this.globalAlpha;null!=u&&(l*=u),e.setAttribute(i.svgAttr+"-opacity",l)}},ar.prototype.__closestGroupOrSvg=function(t){return"g"===(t=t||this.__currentElement).nodeName||"svg"===t.nodeName?t:this.__closestGroupOrSvg(t.parentNode)},ar.prototype.getSerializedSvg=function(t){var e,r,n,i,a,o=(new XMLSerializer).serializeToString(this.__root);if(t)for(e=Object.keys(hr),r=0;r<e.length;r++)n=e[r],i=hr[n],(a=new RegExp(n,"gi")).test(o)&&(o=o.replace(a,i));return o},ar.prototype.getSvg=function(){return this.__root},ar.prototype.save=function(){var t=this.__createElement("g"),e=this.__closestGroupOrSvg();this.__groupStack.push(e),e.appendChild(t),this.__currentElement=t,this.__stack.push(this.__getStyleState())},ar.prototype.restore=function(){this.__currentElement=this.__groupStack.pop(),this.__currentElementsToStyle=null,this.__currentElement||(this.__currentElement=this.__root.childNodes[1]);var t=this.__stack.pop();this.__applyStyleState(t)},ar.prototype.__addTransform=function(t){var e=this.__closestGroupOrSvg();if(e.childNodes.length>0){"path"===this.__currentElement.nodeName&&(this.__currentElementsToStyle||(this.__currentElementsToStyle={element:e,children:[]}),this.__currentElementsToStyle.children.push(this.__currentElement),this.__applyCurrentDefaultPath());var r=this.__createElement("g");e.appendChild(r),this.__currentElement=r}var n=this.__currentElement.getAttribute("transform");n?n+=" ":n="",n+=t,this.__currentElement.setAttribute("transform",n)},ar.prototype.addTrackGroupWithTranslationAndClipRect=function(t,e,r,n,i,a){var o=t+"_clip_rect",s=this.__createElement("clipPath",{id:o});this.__defs.appendChild(s),s.appendChild(this.__createElement("rect",{x:"0",y:a.toString(),width:n.toString(),height:i.toString()}));var h=this.__createElement("g");this.__rootGroup.appendChild(h),h.setAttribute("transform",lr("translate({x},{y})",{x:e,y:r})),h.setAttribute("id",t+"_group"),h.setAttribute("clip-path",lr("url(#{id})",{id:o})),this.__currentElement=h},ar.prototype.scale=function(e,r){r===t&&(r=e),this.__addTransform(lr("scale({x},{y})",{x:e,y:r}))},ar.prototype.rotate=function(t){var e=180*t/Math.PI;this.__addTransform(lr("rotate({angle},{cx},{cy})",{angle:e,cx:0,cy:0}))},ar.prototype.translate=function(t,e){this.__addTransform(lr("translate({x},{y})",{x:t,y:e}))},ar.prototype.transform=function(t,e,r,n,i,a){this.__addTransform(lr("matrix({a},{b},{c},{d},{e},{f})",{a:t,b:e,c:r,d:n,e:i,f:a}))},ar.prototype.beginPath=function(){var t;this.__currentDefaultPath="",this.__currentPosition={},t=this.__createElement("path",{},!0),this.__closestGroupOrSvg().appendChild(t),this.__currentElement=t},ar.prototype.__applyCurrentDefaultPath=function(){var t=this.__currentElement;"path"===t.nodeName?t.setAttribute("d",this.__currentDefaultPath):console.error("Attempted to apply path command to node",t.nodeName)},ar.prototype.__addPathCommand=function(t){this.__currentDefaultPath+=" ",this.__currentDefaultPath+=t},ar.prototype.moveTo=function(t,e){"path"!==this.__currentElement.nodeName&&this.beginPath(),this.__currentPosition={x:t,y:e},this.__addPathCommand(lr("M {x} {y}",{x:t,y:e}))},ar.prototype.closePath=function(){this.__currentDefaultPath&&this.__addPathCommand("Z")},ar.prototype.lineTo=function(t,e){this.__currentPosition={x:t,y:e},this.__currentDefaultPath&&this.__currentDefaultPath.indexOf("M")>-1?this.__addPathCommand(lr("L {x} {y}",{x:t,y:e})):this.__addPathCommand(lr("M {x} {y}",{x:t,y:e}))},ar.prototype.bezierCurveTo=function(t,e,r,n,i,a){this.__currentPosition={x:i,y:a},this.__addPathCommand(lr("C {cp1x} {cp1y} {cp2x} {cp2y} {x} {y}",{cp1x:t,cp1y:e,cp2x:r,cp2y:n,x:i,y:a}))},ar.prototype.quadraticCurveTo=function(t,e,r,n){this.__currentPosition={x:r,y:n},this.__addPathCommand(lr("Q {cpx} {cpy} {x} {y}",{cpx:t,cpy:e,x:r,y:n}))};var pr=function(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]);return[t[0]/e,t[1]/e]};ar.prototype.arcTo=function(t,e,r,n,i){var a=this.__currentPosition&&this.__currentPosition.x,o=this.__currentPosition&&this.__currentPosition.y;if(void 0!==a&&void 0!==o){if(i<0)throw new Error("IndexSizeError: The radius provided ("+i+") is negative.");if(a===t&&o===e||t===r&&e===n||0===i)this.lineTo(t,e);else{var s=pr([a-t,o-e]),h=pr([r-t,n-e]);if(s[0]*h[1]!=s[1]*h[0]){var c=s[0]*h[0]+s[1]*h[1],l=Math.acos(Math.abs(c)),u=pr([s[0]+h[0],s[1]+h[1]]),f=i/Math.sin(l/2),p=t+f*u[0],d=e+f*u[1],g=[-s[1],s[0]],m=[h[1],-h[0]],v=function(t){var e=t[0];return t[1]>=0?Math.acos(e):-Math.acos(e)},b=v(g),y=v(m);this.lineTo(p+g[0]*i,d+g[1]*i),this.arc(p,d,i,b,y)}else this.lineTo(t,e)}}},ar.prototype.stroke=function(){"path"===this.__currentElement.nodeName&&this.__currentElement.setAttribute("paint-order","fill stroke markers"),this.__applyCurrentDefaultPath(),this.__applyStyleToCurrentElement("stroke")},ar.prototype.fill=function(){"path"===this.__currentElement.nodeName&&this.__currentElement.setAttribute("paint-order","stroke fill markers"),this.__applyCurrentDefaultPath(),this.__applyStyleToCurrentElement("fill")},ar.prototype.rect=function(t,e,r,n){"path"!==this.__currentElement.nodeName&&this.beginPath(),this.moveTo(t,e),this.lineTo(t+r,e),this.lineTo(t+r,e+n),this.lineTo(t,e+n),this.lineTo(t,e),this.closePath()},ar.prototype.fillRect=function(t,e,r,n){var i,a,o,s={x:t,y:e,width:r,height:n};(!this.viewbox||(i=this.viewbox,a=s,i.x<a.x+a.width&&i.x+i.width>a.x&&i.y<a.y+a.height&&i.y+i.height>a.y))&&(o=this.__createElement("rect",s,!0),this.__closestGroupOrSvg().appendChild(o),this.__currentElement=o,this.__applyStyleToCurrentElement("fill"))},ar.prototype.strokeRect=function(t,e,r,n){var i;i=this.__createElement("rect",{x:t,y:e,width:r,height:n},!0),this.__closestGroupOrSvg().appendChild(i),this.__currentElement=i,this.__applyStyleToCurrentElement("stroke")},ar.prototype.__clearCanvas=function(){for(var t=this.__closestGroupOrSvg().getAttribute("transform"),e=this.__root.childNodes[1],r=e.childNodes,n=r.length-1;n>=0;n--)r[n]&&e.removeChild(r[n]);this.__currentElement=e,this.__groupStack=[],t&&this.__addTransform(t)},ar.prototype.clearRect=function(t,e,r,n){if(0!==t||0!==e||r!==this.width||n!==this.height){var i,a=this.__closestGroupOrSvg();i=this.__createElement("rect",{x:t,y:e,width:r,height:n,fill:"#FFFFFF"},!0),a.appendChild(i)}else this.__clearCanvas()},ar.prototype.createLinearGradient=function(t,e,r,n){var i=this.__createElement("linearGradient",{id:ur(this.__ids),x1:t+"px",x2:r+"px",y1:e+"px",y2:n+"px",gradientUnits:"userSpaceOnUse"},!1);return this.__defs.appendChild(i),new or(i,this)},ar.prototype.createRadialGradient=function(t,e,r,n,i,a){var o=this.__createElement("radialGradient",{id:ur(this.__ids),cx:n+"px",cy:i+"px",r:a+"px",fx:t+"px",fy:e+"px",gradientUnits:"userSpaceOnUse"},!1);return this.__defs.appendChild(o),new or(o,this)},ar.prototype.__parseFont=function(){var t=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-,\'\"\sa-z0-9]+?)\s*$/i.exec(this.font),e={style:t[1]||"normal",size:t[4]||"10px",family:t[6]||"sans-serif",weight:t[3]||"normal",decoration:t[2]||"normal",href:null};return"underline"===this.__fontUnderline&&(e.decoration="underline"),this.__fontHref&&(e.href=this.__fontHref),e},ar.prototype.__wrapTextLink=function(t,e){if(t.href){var r=this.__createElement("a");return r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",t.href),r.appendChild(e),r}return e},ar.prototype.__applyText=function(t,e,r,n){var i,a,o=this.__parseFont(),s=this.__closestGroupOrSvg(),h=this.__createElement("text",{"font-family":o.family,"font-size":o.size,"font-style":o.style,"font-weight":o.weight,"text-decoration":o.decoration,x:e,y:r,"text-anchor":(i=this.textAlign,a={left:"start",right:"end",center:"middle",start:"start",end:"end"},a[i]||a.start),"dominant-baseline":fr(this.textBaseline)},!0);h.appendChild(this.__document.createTextNode(t)),this.__currentElement=h,this.__applyStyleToCurrentElement(n),s.appendChild(this.__wrapTextLink(o,h))},ar.prototype.fillText=function(t,e,r){this.__applyText(t,e,r,"fill")},ar.prototype.strokeText=function(t,e,r){this.__applyText(t,e,r,"stroke")},ar.prototype.measureText=function(t){return this.__ctx.font=this.font,this.__ctx.measureText(t)},ar.prototype.arc=function(t,e,r,n,i,a){if(n!==i){(n%=2*Math.PI)===(i%=2*Math.PI)&&(i=(i+2*Math.PI-.001*(a?-1:1))%(2*Math.PI));var o=t+r*Math.cos(i),s=e+r*Math.sin(i),h=t+r*Math.cos(n),c=e+r*Math.sin(n),l=a?0:1,u=0,f=i-n;f<0&&(f+=2*Math.PI),u=a?f>Math.PI?0:1:f>Math.PI?1:0,this.lineTo(h,c),this.__addPathCommand(lr("A {rx} {ry} {xAxisRotation} {largeArcFlag} {sweepFlag} {endX} {endY}",{rx:r,ry:r,xAxisRotation:0,largeArcFlag:u,sweepFlag:l,endX:o,endY:s})),this.__currentPosition={x:o,y:s}}},ar.prototype.clip=function(){var t=this.__closestGroupOrSvg(),e=this.__createElement("clipPath"),r=ur(this.__ids),n=this.__createElement("g");this.__applyCurrentDefaultPath(),t.removeChild(this.__currentElement),e.setAttribute("id",r),e.appendChild(this.__currentElement),this.__defs.appendChild(e),t.setAttribute("clip-path",lr("url(#{id})",{id:r})),t.appendChild(n),this.__currentElement=n},ar.prototype.drawImage=function(){var t,e,r,n,i,a,o,s,h,c,l,u,f,p=Array.prototype.slice.call(arguments),d=p[0],g=0,m=0;if(3===p.length)t=p[1],e=p[2],r=i=d.width,n=a=d.height;else if(5===p.length)t=p[1],e=p[2],r=p[3],n=p[4],i=d.width,a=d.height;else{if(9!==p.length)throw new Error("Invalid number of arguments passed to drawImage: "+arguments.length);g=p[1],m=p[2],i=p[3],a=p[4],t=p[5],e=p[6],r=p[7],n=p[8]}o=this.__closestGroupOrSvg(),this.__currentElement;var v="translate("+t+", "+e+")";if(d instanceof ar){if((s=d.getSvg().cloneNode(!0)).childNodes&&s.childNodes.length>1){for(h=s.childNodes[0];h.childNodes.length;)f=h.childNodes[0].getAttribute("id"),this.__ids[f]=f,this.__defs.appendChild(h.childNodes[0]);if(c=s.childNodes[1]){var b,y=c.getAttribute("transform");b=y?y+" "+v:v,c.setAttribute("transform",b),o.appendChild(c)}}}else"CANVAS"!==d.nodeName&&"IMG"!==d.nodeName||((l=this.__createElement("image")).setAttribute("width",r),l.setAttribute("height",n),l.setAttribute("preserveAspectRatio","none"),(g||m||i!==d.width||a!==d.height)&&((u=this.__document.createElement("canvas")).width=r,u.height=n,u.getContext("2d").drawImage(d,g,m,i,a,0,0,r,n),d=u),l.setAttribute("transform",v),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","CANVAS"===d.nodeName?d.toDataURL():d.getAttribute("src")),o.appendChild(l))},ar.prototype.createPattern=function(t,e){var r,n=this.__document.__createElement("pattern"),i=ur(this.__ids);return n.setAttribute("id",i),n.setAttribute("width",t.width),n.setAttribute("height",t.height),"CANVAS"===t.nodeName||"IMG"===t.nodeName?((r=this.__createElement("image")).setAttribute("width",t.width),r.setAttribute("height",t.height),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","CANVAS"===t.nodeName?t.toDataURL():t.getAttribute("src")),n.appendChild(r),this.__defs.appendChild(n)):t instanceof ar&&(n.appendChild(t.__root.childNodes[1]),this.__defs.appendChild(n)),new sr(n,this)},ar.prototype.setLineDash=function(t){t&&t.length>0?this.lineDash=t.join(","):this.lineDash=null},ar.prototype.drawFocusRing=function(){},ar.prototype.createImageData=function(){},ar.prototype.getImageData=function(){},ar.prototype.putImageData=function(){},ar.prototype.globalCompositeOperation=function(){},ar.prototype.setTransform=function(){};var dr,gr=ar,mr=".igv_drag";function vr(t,e){cr(e).on("mousedown"+mr,br.bind(t))}function br(t){t.stopPropagation(),t.preventDefault();var e=Math.round(parseFloat(this.style.left.replace("px",""))),r=Math.round(parseFloat(this.style.top.replace("px",""))),n=yr.bind(this),i=wr.bind(this);dr={dragFunction:n,dragEndFunction:i,dx:e-t.screenX,dy:r-t.screenY},cr(document).on("mousemove"+mr,n),cr(document).on("mouseup"+mr,i),cr(document).on("mouseleave"+mr,i),cr(document).on("mouseexit"+mr,i)}function yr(t){if(dr){t.stopPropagation(),t.preventDefault();var e=dr.dx+t.screenX,r=dr.dy+t.screenY;this.style.left=e+"px",this.style.top=r+"px"}}function wr(e){if(dr){e.stopPropagation(),e.preventDefault();var r=dr.dx+e.screenX,n=dr.dy+e.screenY;this.style.left=r+"px",this.style.top=n+"px",cr(document).off(mr),dr=t}}var xr={trackMenuItemList:function(e){var r,n=new Set(["alignment","annotation","variant","eqtl","snp"]),i=e.track.config&&e.track.config.visibilityWindow!==t,a=[];return"sequence"!==e.track.config.type&&(a.push(function(e){var r;return(r=cr("<div>")).text("Set track name"),{object:r,click:function(){var r;r=function(){var r;r=""===(r=e.browser.inputDialog.$input.val().trim())||t===r?"untitled":r,e.browser.setTrackLabelName(e,r)},e.browser.inputDialog.configure({label:"Track Name",input:kr(e.track)||"unnamed",click:r}),e.browser.inputDialog.present(cr(e.trackDiv))}}}(e)),a.push(function(e){var r;return(r=cr("<div>")).text("Set track height"),{object:r,click:function(){var r;r=function(){var r;r=parseFloat(e.browser.inputDialog.$input.val(),10),t!==r&&(e.track.minHeight!==t&&e.track.minHeight>r&&(e.track.minHeight=r),e.track.maxHeight!==t&&e.track.maxHeight<r&&(e.track.minHeight=r),e.setTrackHeight(r,!0,!0),e.track.autoHeight=!1)},e.browser.inputDialog.configure({label:"Track Height",input:e.trackDiv.clientHeight,click:r}),e.browser.inputDialog.present(cr(e.trackDiv))}}}(e))),("alignment"===(r=e.track).type||"annotation"===r.type||"variant"===r.type||"wig"===r.type)&&a.push(function(t){var e;return(e=cr("<div>")).text("Set track color"),{object:e,click:function(){t.presentColorPicker()}}}(e)),e.track.menuItemList&&(a=a.concat(e.track.menuItemList())),(i||n.has(e.track.config.type))&&(a.push("<hr/>"),a.push(function(e){var r=cr("<div>");return r.text("Set visibility window"),{object:r,click:function(){e.browser.inputDialog.configure({label:"Visibility Window",input:e.track.visibilityWindow,click:function(){var r=e.browser.inputDialog.$input.val().trim();""!==r&&t!==r||(r=-1),r=Number.parseInt(r),e.track.visibilityWindow=r,e.track.config.visibilityWindow=r,e.updateViews()}}),e.browser.inputDialog.present(cr(e.trackDiv))}}}(e))),!1!==e.track.removable&&(a.push("<hr/>"),a.push(function(t){var e;return(e=cr("<div>")).text("Remove track"),{object:e,click:function(){t.browser.removeTrack(t.track)}}}(e))),a},dataRangeMenuItem:function(t){var e;return(e=cr("<div>")).text("Set data range"),{object:e,click:function(){t.browser.dataRangeDialog.configure({trackView:t}),t.browser.dataRangeDialog.present(cr(t.trackDiv))}}},trackMenuItemListHelper:function(e,r){var n=[];return e.length>0&&(n=e.map((function(e,n){var i;if(e.name?(i=cr("<div>")).text(e.name):e.object?i=e.object:"string"==typeof e.label?(i=cr("<div>")).html(e.label):"string"==typeof e&&(i=e.startsWith("<")?cr(e):cr("<div>"+e+"</div>")),0===n&&i.addClass("igv-track-menu-border-top"),e.click){function a(t){e.click(),r.hide(),t.preventDefault(),t.stopPropagation()}i.on("click",a),i.on("touchend",(function(t){a(t)})),i.on("mouseup",(function(t){t.preventDefault(),t.stopPropagation()}))}return{object:i,init:e.init||t}}))),n}};function kr(t){return t.trackView.viewports[0].$trackLabel.text()}function Sr(t,e){var r=cr("<div>",{class:"igv-trackgear-popover-check-container"}),n=cr("<div>");r.append(n);var i=Cr("check",!0===e?"#444":"transparent");n.append(i);var a=cr("<div>");return a.text(t),r.append(a),r}function _r(t,e){return cr(Cr(t,e))}function Cr(t,e){e=e||"currentColor";var r=Er[t];r||(console.error("No icon named: ".concat(t)),r=Er.question);var n='<svg viewBox="0 0 '+r[0]+" "+r[1]+'">';return n+='<path fill="'+e+'" d="'+r[4]+'"></path>',n+="</svg>"}var Er={check:[512,512,[],"f00c","M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"],cog:[512,512,[],"f013","M444.788 291.1l42.616 24.599c4.867 2.809 7.126 8.618 5.459 13.985-11.07 35.642-29.97 67.842-54.689 94.586a12.016 12.016 0 0 1-14.832 2.254l-42.584-24.595a191.577 191.577 0 0 1-60.759 35.13v49.182a12.01 12.01 0 0 1-9.377 11.718c-34.956 7.85-72.499 8.256-109.219.007-5.49-1.233-9.403-6.096-9.403-11.723v-49.184a191.555 191.555 0 0 1-60.759-35.13l-42.584 24.595a12.016 12.016 0 0 1-14.832-2.254c-24.718-26.744-43.619-58.944-54.689-94.586-1.667-5.366.592-11.175 5.459-13.985L67.212 291.1a193.48 193.48 0 0 1 0-70.199l-42.616-24.599c-4.867-2.809-7.126-8.618-5.459-13.985 11.07-35.642 29.97-67.842 54.689-94.586a12.016 12.016 0 0 1 14.832-2.254l42.584 24.595a191.577 191.577 0 0 1 60.759-35.13V25.759a12.01 12.01 0 0 1 9.377-11.718c34.956-7.85 72.499-8.256 109.219-.007 5.49 1.233 9.403 6.096 9.403 11.723v49.184a191.555 191.555 0 0 1 60.759 35.13l42.584-24.595a12.016 12.016 0 0 1 14.832 2.254c24.718 26.744 43.619 58.944 54.689 94.586 1.667 5.366-.592 11.175-5.459 13.985L444.788 220.9a193.485 193.485 0 0 1 0 70.2zM336 256c0-44.112-35.888-80-80-80s-80 35.888-80 80 35.888 80 80 80 80-35.888 80-80z"],exclamation:[192,512,[],"f12a","M176 432c0 44.112-35.888 80-80 80s-80-35.888-80-80 35.888-80 80-80 80 35.888 80 80zM25.26 25.199l13.6 272C39.499 309.972 50.041 320 62.83 320h66.34c12.789 0 23.331-10.028 23.97-22.801l13.6-272C167.425 11.49 156.496 0 142.77 0H49.23C35.504 0 24.575 11.49 25.26 25.199z"],"exclamation-circle":[512,512,[],"f06a","M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"],"exclamation-triangle":[576,512,[],"f071","M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"],minus:[448,512,[],"f068","M424 318.2c13.3 0 24-10.7 24-24v-76.4c0-13.3-10.7-24-24-24H24c-13.3 0-24 10.7-24 24v76.4c0 13.3 10.7 24 24 24h400z"],"minus-circle":[512,512,[],"f056","M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zM124 296c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h264c6.6 0 12 5.4 12 12v56c0 6.6-5.4 12-12 12H124z"],"minus-square":[448,512,[],"f146","M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zM92 296c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h264c6.6 0 12 5.4 12 12v56c0 6.6-5.4 12-12 12H92z"],plus:[448,512,[],"f067","M448 294.2v-76.4c0-13.3-10.7-24-24-24H286.2V56c0-13.3-10.7-24-24-24h-76.4c-13.3 0-24 10.7-24 24v137.8H24c-13.3 0-24 10.7-24 24v76.4c0 13.3 10.7 24 24 24h137.8V456c0 13.3 10.7 24 24 24h76.4c13.3 0 24-10.7 24-24V318.2H424c13.3 0 24-10.7 24-24z"],"plus-circle":[512,512,[],"f055","M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm144 276c0 6.6-5.4 12-12 12h-92v92c0 6.6-5.4 12-12 12h-56c-6.6 0-12-5.4-12-12v-92h-92c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h92v-92c0-6.6 5.4-12 12-12h56c6.6 0 12 5.4 12 12v92h92c6.6 0 12 5.4 12 12v56z"],"plus-square":[448,512,[],"f0fe","M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zm-32 252c0 6.6-5.4 12-12 12h-92v92c0 6.6-5.4 12-12 12h-56c-6.6 0-12-5.4-12-12v-92H92c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h92v-92c0-6.6 5.4-12 12-12h56c6.6 0 12 5.4 12 12v92h92c6.6 0 12 5.4 12 12v56z"],question:[384,512,[],"f128","M202.021 0C122.202 0 70.503 32.703 29.914 91.026c-7.363 10.58-5.093 25.086 5.178 32.874l43.138 32.709c10.373 7.865 25.132 6.026 33.253-4.148 25.049-31.381 43.63-49.449 82.757-49.449 30.764 0 68.816 19.799 68.816 49.631 0 22.552-18.617 34.134-48.993 51.164-35.423 19.86-82.299 44.576-82.299 106.405V320c0 13.255 10.745 24 24 24h72.471c13.255 0 24-10.745 24-24v-5.773c0-42.86 125.268-44.645 125.268-160.627C377.504 66.256 286.902 0 202.021 0zM192 373.459c-38.196 0-69.271 31.075-69.271 69.271 0 38.195 31.075 69.27 69.271 69.27s69.271-31.075 69.271-69.271-31.075-69.27-69.271-69.27z"],save:[448,512,[],"f0c7","M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z"],search:[512,512,[],"f002","M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"],share:[512,512,[],"f064","M503.691 189.836L327.687 37.851C312.281 24.546 288 35.347 288 56.015v80.053C127.371 137.907 0 170.1 0 322.326c0 61.441 39.581 122.309 83.333 154.132 13.653 9.931 33.111-2.533 28.077-18.631C66.066 312.814 132.917 274.316 288 272.085V360c0 20.7 24.3 31.453 39.687 18.164l176.004-152c11.071-9.562 11.086-26.753 0-36.328z"],spinner:[512,512,[],"f110","M304 48c0 26.51-21.49 48-48 48s-48-21.49-48-48 21.49-48 48-48 48 21.49 48 48zm-48 368c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm208-208c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zM96 256c0-26.51-21.49-48-48-48S0 229.49 0 256s21.49 48 48 48 48-21.49 48-48zm12.922 99.078c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.491-48-48-48zm294.156 0c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.49-48-48-48zM108.922 60.922c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.491-48-48-48z"],square:[448,512,[],"f0c8","M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48z"],"square-full":[512,512,[],"f45c","M512 512H0V0h512v512z"],times:[384,512,[],"f00d","M323.1 441l53.9-53.9c9.4-9.4 9.4-24.5 0-33.9L279.8 256l97.2-97.2c9.4-9.4 9.4-24.5 0-33.9L323.1 71c-9.4-9.4-24.5-9.4-33.9 0L192 168.2 94.8 71c-9.4-9.4-24.5-9.4-33.9 0L7 124.9c-9.4 9.4-9.4 24.5 0 33.9l97.2 97.2L7 353.2c-9.4 9.4-9.4 24.5 0 33.9L60.9 441c9.4 9.4 24.5 9.4 33.9 0l97.2-97.2 97.2 97.2c9.3 9.3 24.5 9.3 33.9 0z"],"times-circle":[512,512,[],"f057","M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm121.6 313.1c4.7 4.7 4.7 12.3 0 17L338 377.6c-4.7 4.7-12.3 4.7-17 0L256 312l-65.1 65.6c-4.7 4.7-12.3 4.7-17 0L134.4 338c-4.7-4.7-4.7-12.3 0-17l65.6-65-65.6-65.1c-4.7-4.7-4.7-12.3 0-17l39.6-39.6c4.7-4.7 12.3-4.7 17 0l65 65.7 65.1-65.6c4.7-4.7 12.3-4.7 17 0l39.6 39.6c4.7 4.7 4.7 12.3 0 17L312 256l65.6 65.1z"],wrench:[512,512,[],"f0ad","M481.156 200c9.3 0 15.12 10.155 10.325 18.124C466.295 259.992 420.419 288 368 288c-79.222 0-143.501-63.974-143.997-143.079C223.505 65.469 288.548-.001 368.002 0c52.362.001 98.196 27.949 123.4 69.743C496.24 77.766 490.523 88 481.154 88H376l-40 56 40 56h105.156zm-171.649 93.003L109.255 493.255c-24.994 24.993-65.515 24.994-90.51 0-24.993-24.994-24.993-65.516 0-90.51L218.991 202.5c16.16 41.197 49.303 74.335 90.516 90.503zM104 432c0-13.255-10.745-24-24-24s-24 10.745-24 24 10.745 24 24 24 24-10.745 24-24z"]},Ar={licorice:"#000000",lead:"#1e1e1e",tungsten:"#3a3a3a",iron:"#545453",steel:"#6e6e6e",tin:"#878687",nickel:"#888787",aluminum:"#a09fa0",magnesium:"#b8b8b8",silver:"#d0d0d0",mercury:"#e8e8e8",snow:"white",cayenne:"#891100",mocha:"#894800",aspargus:"#888501",fern:"#458401",clover:"#028401",moss:"#018448",teal:"#008688",ocean:"#004a88",midnight:"#001888",eggplant:"#491a88",plum:"#891e88",maroon:"#891648",maraschino:"#ff2101",tangerine:"#ff8802",lemon:"#fffa03",lime:"#83f902",spring:"#05f802",seam_foam:"#03f987",turquoise:"#00fdff",aqua:"#008cff",blueberry:"#002eff",grape:"#8931ff",magenta:"#ff39ff",strawberry:"#ff2987",salmon:"#ff726e",cantaloupe:"#ffce6e",banana:"#fffb6d",honeydew:"#cefa6e",flora:"#68f96e",spindrift:"#68fbd0",ice:"#68fdff",sky:"#6acfff",orchid:"#6e76ff",lavender:"#d278ff",bubblegum:"#ff7aff",carnation:"#ff7fd3"},Tr={A:[0,200,0],C:[0,0,200],T:[255,0,0],G:[209,113,5],a:[0,200,0],c:[0,0,200],t:[255,0,0],g:[209,113,5],N:[80,80,80]},Rr={A:"rgb(  0, 200,   0)",C:"rgb(  0,   0, 200)",T:"rgb(255,   0,   0)",G:"rgb(209, 113,   5)",a:"rgb(  0, 200,   0)",c:"rgb(  0,   0, 200)",t:"rgb(255,   0,   0)",g:"rgb(209, 113,   5)",N:"rgb(80, 80, 80)"},Lr={Set1:["rgb(228,26,28)","rgb(55,126,184)","rgb(77,175,74)","rgb(166,86,40)","rgb(152,78,163)","rgb(255,127,0)","rgb(247,129,191)","rgb(153,153,153)","rgb(255,255,51)"],Dark2:["rgb(27,158,119)","rgb(217,95,2)","rgb(117,112,179)","rgb(231,41,138)","rgb(102,166,30)","rgb(230,171,2)","rgb(166,118,29)","rgb(102,102,102)"],Set2:["rgb(102, 194,165)","rgb(252,141,98)","rgb(141,160,203)","rgb(231,138,195)","rgb(166,216,84)","rgb(255,217,47)","rgb(229,196,148)","rgb(179,179,179)"],Set3:["rgb(141,211,199)","rgb(255,255,179)","rgb(190,186,218)","rgb(251,128,114)","rgb(128,177,211)","rgb(253,180,98)","rgb(179,222,105)","rgb(252,205,229)","rgb(217,217,217)","rgb(188,128,189)","rgb(204,235,197)","rgb(255,237,111)"],Pastel1:["rgb(251,180,174)","rgb(179,205,227)","rgb(204,235,197)","rgb(222,203,228)","rgb(254,217,166)","rgb(255,255,204)","rgb(229,216,189)","rgb(253,218,236)"],Pastel2:["rgb(173,226,207)","rgb(253,205,172)","rgb(203,213,232)","rgb(244,202,228)","rgb(230,245,201)","rgb(255,242,174)","rgb(243,225,206)"],Accent:["rgb(127,201,127)","rgb(190,174,212)","rgb(253,192,134)","rgb(255,255,153)","rgb(56,108,176)","rgb(240,2,127)","rgb(191,91,23)"]};function Ir(t){this.colors=Lr[t],Array.isArray(this.colors)||(this.colors=[]),this.colorTable={},this.nextIdx=0,this.colorGenerator=new Mr}function Mr(){this.hue=Math.random(),this.goldenRatio=.618033988749895,this.hexwidth=2}Ir.prototype.getColor=function(t){return this.colorTable.hasOwnProperty(t)||(this.nextIdx<this.colors.length?this.colorTable[t]=this.colors[this.nextIdx]:this.colorTable[t]=this.colorGenerator.get(),this.nextIdx++),this.colorTable[t]},Mr.prototype.hsvToRgb=function(t,e,r){var n=Math.floor(6*t),i=6*t-n,a=r*(1-e),o=r*(1-i*e),s=r*(1-(1-i)*e),h=255,c=255,l=255;switch(n){case 0:h=r,c=s,l=a;break;case 1:h=o,c=r,l=a;break;case 2:h=a,c=r,l=s;break;case 3:h=a,c=o,l=r;break;case 4:h=s,c=a,l=r;break;case 5:h=r,c=a,l=o}return[Math.floor(256*h),Math.floor(256*c),Math.floor(256*l)]},Mr.prototype.padHex=function(t){return t.length>this.hexwidth?t:new Array(this.hexwidth-t.length+1).join("0")+t},Mr.prototype.get=function(t,e){this.hue+=this.goldenRatio,this.hue%=1,"number"!=typeof t&&(t=.5),"number"!=typeof e&&(e=.95);var r=this.hsvToRgb(this.hue,t,e);return"#"+this.padHex(r[0].toString(16))+this.padHex(r[1].toString(16))+this.padHex(r[2].toString(16))};var Pr=function(e,r){if(0===e.length)return t;var n=Math.floor(e.length*((100-r)/100));return 0===n?(e.sort((function(t,e){return e-t})),e[n]):function(t,e){var r,n=new Nr;for(r=0;r<t.length;r++){var i=t[r];if(n.content.length<e||i>n.content[0]){if(n.content.length===e)n.pop();n.push(i)}}return n.content[0]}(e,n)},Dr=function(t,e,r){return Math.min(Math.max(t,e),r)},Fr=function(t){return Math.log(t)/Math.LN2};function Nr(){this.content=[]}Nr.prototype={push:function(t){this.content.push(t),this.bubbleUp(this.content.length-1)},pop:function(){var t=this.content[0],e=this.content.pop();return this.content.length>0&&(this.content[0]=e,this.sinkDown(0)),t},remove:function(t){for(var e=this.content.length,r=0;r<e;r++)if(this.content[r]===t){var n=this.content.pop();if(r===e-1)break;this.content[r]=n,this.bubbleUp(r),this.sinkDown(r);break}},size:function(){return this.content.length},bubbleUp:function(t){for(var e=this.content[t],r=e;t>0;){var n=Math.floor((t+1)/2)-1,i=this.content[n];if(r>=i)break;this.content[n]=e,this.content[t]=i,t=n}},sinkDown:function(t){for(var e=this.content.length,r=this.content[t],n=r;;){var i=2*(t+1),a=i-1,o=null;if(a<e){var s=this.content[a],h=s;s<n&&(o=a)}if(i<e)this.content[i]<(null==o?n:h)&&(o=i);if(null==o)break;this.content[t]=this.content[o],this.content[o]=r,t=o}}};var Br={Huffman:{},Util:{},CRC32:{},CompressionMethod:{DEFLATE:8,RESERVED:15},Zip:function(t){t=t||{},this.files=[],this.comment=t.comment,this.password}};Br.Zip.CompressionMethod={STORE:0,DEFLATE:8},Br.Zip.OperatingSystem={MSDOS:0,UNIX:3,MACINTOSH:7},Br.Zip.Flags={ENCRYPT:1,DESCRIPTOR:8,UTF8:2048},Br.Zip.FileHeaderSignature=[80,75,1,2],Br.Zip.LocalFileHeaderSignature=[80,75,3,4],Br.Zip.CentralDirectorySignature=[80,75,5,6],Br.Zip.prototype.addFile=function(t,e){(e=e||{}).filename;var r,n=t.length,i=0;if(t instanceof Array&&(t=new Uint8Array(t)),"number"!=typeof e.compressionMethod&&(e.compressionMethod=Br.Zip.CompressionMethod.DEFLATE),e.compress)switch(e.compressionMethod){case Br.Zip.CompressionMethod.STORE:break;case Br.Zip.CompressionMethod.DEFLATE:i=Br.CRC32.calc(t),t=this.deflateWithOption(t,e),r=!0;break;default:throw new Error("unknown compression method:"+e.compressionMethod)}this.files.push({buffer:t,option:e,compressed:r,encrypted:!1,size:n,crc32:i})},Br.Zip.prototype.setPassword=function(t){this.password=t},Br.Zip.prototype.compress=function(){var t,e,r,n,i,a,o,s,h,c,l,u,f,p,d,g,m,v,b,y,w,x,k,S,_,C,E=this.files,A=0,T=0;for(k=0,S=E.length;k<S;++k){if(p=(t=E[k]).option.filename?t.option.filename.length:0,d=t.option.extraField?t.option.extraField.length:0,g=t.option.comment?t.option.comment.length:0,!t.compressed)switch(t.crc32=Br.CRC32.calc(t.buffer),t.option.compressionMethod){case Br.Zip.CompressionMethod.STORE:break;case Br.Zip.CompressionMethod.DEFLATE:t.buffer=this.deflateWithOption(t.buffer,t.option),t.compressed=!0;break;default:throw new Error("unknown compression method:"+t.option.compressionMethod)}if(void 0!==t.option.password||void 0!==this.password){for(x=this.createEncryptionKey(t.option.password||this.password),y=t.buffer,(w=new Uint8Array(y.length+12)).set(y,12),y=w,_=0;_<12;++_)y[_]=this.encode(x,11===k?255&t.crc32:256*Math.random()|0);for(C=y.length;_<C;++_)y[_]=this.encode(x,y[_]);t.buffer=y}A+=30+p+t.buffer.length,T+=46+p+g}for(a=22+(this.comment?this.comment.length:0),e=new Uint8Array(A+T+a),r=0,i=(n=A)+T,k=0,S=E.length;k<S;++k)p=(t=E[k]).option.filename?t.option.filename.length:0,d=0,g=t.option.comment?t.option.comment.length:0,o=r,e[r++]=Br.Zip.LocalFileHeaderSignature[0],e[r++]=Br.Zip.LocalFileHeaderSignature[1],e[r++]=Br.Zip.LocalFileHeaderSignature[2],e[r++]=Br.Zip.LocalFileHeaderSignature[3],e[n++]=Br.Zip.FileHeaderSignature[0],e[n++]=Br.Zip.FileHeaderSignature[1],e[n++]=Br.Zip.FileHeaderSignature[2],e[n++]=Br.Zip.FileHeaderSignature[3],20,e[n++]=20,e[n++]=t.option.os||Br.Zip.OperatingSystem.MSDOS,e[r++]=e[n++]=20,e[r++]=e[n++]=0,s=0,(t.option.password||this.password)&&(s|=Br.Zip.Flags.ENCRYPT),e[r++]=e[n++]=255&s,e[r++]=e[n++]=s>>8&255,h=t.option.compressionMethod,e[r++]=e[n++]=255&h,e[r++]=e[n++]=h>>8&255,c=t.option.date||new Date,e[r++]=e[n++]=(7&c.getMinutes())<<5|c.getSeconds()/2|0,e[r++]=e[n++]=c.getHours()<<3|c.getMinutes()>>3,e[r++]=e[n++]=(c.getMonth()+1&7)<<5|c.getDate(),e[r++]=e[n++]=(c.getFullYear()-1980&127)<<1|c.getMonth()+1>>3,l=t.crc32,e[r++]=e[n++]=255&l,e[r++]=e[n++]=l>>8&255,e[r++]=e[n++]=l>>16&255,e[r++]=e[n++]=l>>24&255,u=t.buffer.length,e[r++]=e[n++]=255&u,e[r++]=e[n++]=u>>8&255,e[r++]=e[n++]=u>>16&255,e[r++]=e[n++]=u>>24&255,f=t.size,e[r++]=e[n++]=255&f,e[r++]=e[n++]=f>>8&255,e[r++]=e[n++]=f>>16&255,e[r++]=e[n++]=f>>24&255,e[r++]=e[n++]=255&p,e[r++]=e[n++]=p>>8&255,e[r++]=e[n++]=255&d,e[r++]=e[n++]=d>>8&255,e[n++]=255&g,e[n++]=g>>8&255,e[n++]=0,e[n++]=0,e[n++]=0,e[n++]=0,e[n++]=0,e[n++]=0,e[n++]=0,e[n++]=0,e[n++]=255&o,e[n++]=o>>8&255,e[n++]=o>>16&255,e[n++]=o>>24&255,(m=t.option.filename)&&(e.set(m,r),e.set(m,n),r+=p,n+=p),(v=t.option.extraField)&&(e.set(v,r),e.set(v,n),r+=d,n+=d),(b=t.option.comment)&&(e.set(b,n),n+=g),e.set(t.buffer,r),r+=t.buffer.length;return e[i++]=Br.Zip.CentralDirectorySignature[0],e[i++]=Br.Zip.CentralDirectorySignature[1],e[i++]=Br.Zip.CentralDirectorySignature[2],e[i++]=Br.Zip.CentralDirectorySignature[3],e[i++]=0,e[i++]=0,e[i++]=0,e[i++]=0,e[i++]=255&S,e[i++]=S>>8&255,e[i++]=255&S,e[i++]=S>>8&255,e[i++]=255&T,e[i++]=T>>8&255,e[i++]=T>>16&255,e[i++]=T>>24&255,e[i++]=255&A,e[i++]=A>>8&255,e[i++]=A>>16&255,e[i++]=A>>24&255,g=this.comment?this.comment.length:0,e[i++]=255&g,e[i++]=g>>8&255,this.comment&&(e.set(this.comment,i),i+=g),e},Br.Zip.prototype.deflateWithOption=function(t,e){return new Br.RawDeflate(t,e.deflateOption).compress()},Br.Zip.prototype.getByte=function(t){var e=65535&t[2]|2;return e*(1^e)>>8&255},Br.Zip.prototype.encode=function(t,e){var r=this.getByte(t);return this.updateKeys(t,e),r^e},Br.Zip.prototype.updateKeys=function(t,e){t[0]=Br.CRC32.single(t[0],e),t[1]=1+(6681*(20173*(t[1]+(255&t[0]))>>>0)>>>0)>>>0,t[2]=Br.CRC32.single(t[2],t[1]>>>24)},Br.Zip.prototype.createEncryptionKey=function(t){var e,r,n=[305419896,591751049,878082192];for(n=new Uint32Array(n),e=0,r=t.length;e<r;++e)this.updateKeys(n,255&t[e]);return n},Br.Huffman.buildHuffmanTable=function(t){var e,r,n,i,a,o,s,h,c,l,u,f=t.length,p=0,d=Number.POSITIVE_INFINITY;for(h=0,c=f;h<c;++h)t[h]>p&&(p=t[h]),t[h]<d&&(d=t[h]);for(e=1<<p,r=new Uint32Array(e),n=1,i=0,a=2;n<=p;){for(h=0;h<f;++h)if(t[h]===n){for(o=0,s=i,l=0;l<n;++l)o=o<<1|1&s,s>>=1;for(u=n<<16|h,l=o;l<e;l+=a)r[l]=u;++i}++n,i<<=1,a<<=1}return[r,p,d]};var Or=Br.Huffman.buildHuffmanTable;Br.RawInflate=function(t,e){switch(this.buffer,this.blocks=[],this.bufferSize=32768,this.totalpos=0,this.ip=0,this.bitsbuf=0,this.bitsbuflen=0,this.input=new Uint8Array(t),this.output,this.op,this.bfinal=!1,this.bufferType=Br.RawInflate.BufferType.ADAPTIVE,this.resize=!1,!e&&(e={})||(e.index&&(this.ip=e.index),e.bufferSize&&(this.bufferSize=e.bufferSize),e.bufferType&&(this.bufferType=e.bufferType),e.resize&&(this.resize=e.resize)),this.bufferType){case Br.RawInflate.BufferType.BLOCK:this.op=Br.RawInflate.MaxBackwardLength,this.output=new Uint8Array(Br.RawInflate.MaxBackwardLength+this.bufferSize+Br.RawInflate.MaxCopyLength);break;case Br.RawInflate.BufferType.ADAPTIVE:this.op=0,this.output=new Uint8Array(this.bufferSize);break;default:throw new Error("invalid inflate mode")}},Br.RawInflate.BufferType={BLOCK:0,ADAPTIVE:1},Br.RawInflate.prototype.decompress=function(){for(;!this.bfinal;)this.parseBlock();switch(this.bufferType){case Br.RawInflate.BufferType.BLOCK:return this.concatBufferBlock();case Br.RawInflate.BufferType.ADAPTIVE:return this.concatBufferDynamic();default:throw new Error("invalid inflate mode")}},Br.RawInflate.MaxBackwardLength=32768,Br.RawInflate.MaxCopyLength=258,Br.RawInflate.Order=new Uint16Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Br.RawInflate.LengthCodeTable=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258]),Br.RawInflate.LengthExtraTable=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0]),Br.RawInflate.DistCodeTable=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577]),Br.RawInflate.DistExtraTable=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),Br.RawInflate.FixedLiteralLengthTable=function(){var t,e,r=new Uint8Array(288);for(t=0,e=r.length;t<e;++t)r[t]=t<=143?8:t<=255?9:t<=279?7:8;return Or(r)}(),Br.RawInflate.FixedDistanceTable=function(t){return t}(function(){var t,e,r=new Uint8Array(30);for(t=0,e=r.length;t<e;++t)r[t]=5;return Or(r)}()),Br.RawInflate.prototype.parseBlock=function(){var t=this.readBits(3);switch(1&t&&(this.bfinal=!0),t>>>=1){case 0:this.parseUncompressedBlock();break;case 1:this.parseFixedHuffmanBlock();break;case 2:this.parseDynamicHuffmanBlock();break;default:throw new Error("unknown BTYPE: "+t)}},Br.RawInflate.prototype.readBits=function(t){var e,r=this.bitsbuf,n=this.bitsbuflen,i=this.input,a=this.ip;if(a+(t-n+7>>3)>=i.length)throw new Error("input buffer is broken");for(;n<t;)r|=i[a++]<<n,n+=8;return e=r&(1<<t)-1,r>>>=t,n-=t,this.bitsbuf=r,this.bitsbuflen=n,this.ip=a,e},Br.RawInflate.prototype.readCodeByTable=function(t){for(var e,r,n=this.bitsbuf,i=this.bitsbuflen,a=this.input,o=this.ip,s=a.length,h=t[0],c=t[1];i<c&&!(o>=s);)n|=a[o++]<<i,i+=8;if((r=(e=h[n&(1<<c)-1])>>>16)>i)throw new Error("invalid code length: "+r);return this.bitsbuf=n>>r,this.bitsbuflen=i-r,this.ip=o,65535&e},Br.RawInflate.prototype.parseUncompressedBlock=function(){var t,e,r=this.input,n=this.ip,i=this.output,a=this.op,o=r.length,s=i.length;if(this.bitsbuf=0,this.bitsbuflen=0,n+1>=o)throw new Error("invalid uncompressed block header: LEN");if(t=r[n++]|r[n++]<<8,n+1>=o)throw new Error("invalid uncompressed block header: NLEN");if(t===~(r[n++]|r[n++]<<8))throw new Error("invalid uncompressed block header: length verify");if(n+t>r.length)throw new Error("input buffer is broken");switch(this.bufferType){case Br.RawInflate.BufferType.BLOCK:for(;a+t>i.length;)t-=e=s-a,i.set(r.subarray(n,n+e),a),a+=e,n+=e,this.op=a,i=this.expandBufferBlock(),a=this.op;break;case Br.RawInflate.BufferType.ADAPTIVE:for(;a+t>i.length;)i=this.expandBufferAdaptive({fixRatio:2});break;default:throw new Error("invalid inflate mode")}i.set(r.subarray(n,n+t),a),a+=t,n+=t,this.ip=n,this.op=a,this.output=i},Br.RawInflate.prototype.parseFixedHuffmanBlock=function(){switch(this.bufferType){case Br.RawInflate.BufferType.ADAPTIVE:this.decodeHuffmanAdaptive(Br.RawInflate.FixedLiteralLengthTable,Br.RawInflate.FixedDistanceTable);break;case Br.RawInflate.BufferType.BLOCK:this.decodeHuffmanBlock(Br.RawInflate.FixedLiteralLengthTable,Br.RawInflate.FixedDistanceTable);break;default:throw new Error("invalid inflate mode")}},Br.RawInflate.prototype.parseDynamicHuffmanBlock=function(){var t,e,r,n,i,a,o,s,h,c=this.readBits(5)+257,l=this.readBits(5)+1,u=this.readBits(4)+4,f=new Uint8Array(Br.RawInflate.Order.length);for(s=0;s<u;++s)f[Br.RawInflate.Order[s]]=this.readBits(3);for(t=Or(f),n=new Uint8Array(c+l),s=0,h=c+l;s<h;)switch(i=this.readCodeByTable(t)){case 16:for(o=3+this.readBits(2);o--;)n[s++]=a;break;case 17:for(o=3+this.readBits(3);o--;)n[s++]=0;a=0;break;case 18:for(o=11+this.readBits(7);o--;)n[s++]=0;a=0;break;default:n[s++]=i,a=i}switch(e=Or(n.subarray(0,c)),r=Or(n.subarray(c)),this.bufferType){case Br.RawInflate.BufferType.ADAPTIVE:this.decodeHuffmanAdaptive(e,r);break;case Br.RawInflate.BufferType.BLOCK:this.decodeHuffmanBlock(e,r);break;default:throw new Error("invalid inflate mode")}},Br.RawInflate.prototype.decodeHuffmanBlock=function(t,e){var r=this.output,n=this.op;this.currentLitlenTable=t;for(var i,a,o,s,h=r.length-Br.RawInflate.MaxCopyLength,c=Br.RawInflate.LengthCodeTable,l=Br.RawInflate.LengthExtraTable,u=Br.RawInflate.DistCodeTable,f=Br.RawInflate.DistExtraTable;256!==(i=this.readCodeByTable(t));)if(i<256)n>=h&&(this.op=n,r=this.expandBufferBlock(),n=this.op),r[n++]=i;else for(s=c[a=i-257],l[a]>0&&(s+=this.readBits(l[a])),o=u[i=this.readCodeByTable(e)],f[i]>0&&(o+=this.readBits(f[i])),n>=h&&(this.op=n,r=this.expandBufferBlock(),n=this.op);s--;)r[n]=r[n++-o];for(;this.bitsbuflen>=8;)this.bitsbuflen-=8,this.ip--;this.op=n},Br.RawInflate.prototype.decodeHuffmanAdaptive=function(t,e){var r=this.output,n=this.op;this.currentLitlenTable=t;for(var i,a,o,s,h=r.length,c=Br.RawInflate.LengthCodeTable,l=Br.RawInflate.LengthExtraTable,u=Br.RawInflate.DistCodeTable,f=Br.RawInflate.DistExtraTable;256!==(i=this.readCodeByTable(t));)if(i<256)n>=h&&(h=(r=this.expandBufferAdaptive()).length),r[n++]=i;else for(s=c[a=i-257],l[a]>0&&(s+=this.readBits(l[a])),o=u[i=this.readCodeByTable(e)],f[i]>0&&(o+=this.readBits(f[i])),n+s>h&&(h=(r=this.expandBufferAdaptive()).length);s--;)r[n]=r[n++-o];for(;this.bitsbuflen>=8;)this.bitsbuflen-=8,this.ip--;this.op=n},Br.RawInflate.prototype.expandBufferBlock=function(t){var e=new Uint8Array(this.op-Br.RawInflate.MaxBackwardLength),r=this.op-Br.RawInflate.MaxBackwardLength,n=this.output;return e.set(n.subarray(Br.RawInflate.MaxBackwardLength,e.length)),this.blocks.push(e),this.totalpos+=e.length,n.set(n.subarray(r,r+Br.RawInflate.MaxBackwardLength)),this.op=Br.RawInflate.MaxBackwardLength,n},Br.RawInflate.prototype.expandBufferAdaptive=function(t){var e,r,n,i=this.input.length/this.ip+1|0,a=this.input,o=this.output;return t&&("number"==typeof t.fixRatio&&(i=t.fixRatio),"number"==typeof t.addRatio&&(i+=t.addRatio)),r=i<2?(n=(a.length-this.ip)/this.currentLitlenTable[2]/2*258|0)<o.length?o.length+n:o.length<<1:o.length*i,(e=new Uint8Array(r)).set(o),this.output=e,this.output},Br.RawInflate.prototype.concatBufferBlock=function(){var t,e,r,n,i,a=0,o=this.totalpos+(this.op-Br.RawInflate.MaxBackwardLength),s=this.output,h=this.blocks,c=new Uint8Array(o);if(0===h.length)return this.output.subarray(Br.RawInflate.MaxBackwardLength,this.op);for(e=0,r=h.length;e<r;++e)for(n=0,i=(t=h[e]).length;n<i;++n)c[a++]=t[n];for(e=Br.RawInflate.MaxBackwardLength,r=this.op;e<r;++e)c[a++]=s[e];return this.blocks=[],this.buffer=c,this.buffer},Br.RawInflate.prototype.concatBufferDynamic=function(){var t,e=this.op;return this.resize?(t=new Uint8Array(e)).set(this.output.subarray(0,e)):t=this.output.subarray(0,e),this.buffer=t,this.buffer};Or=Br.Huffman.buildHuffmanTable;function zr(t){return"string"==typeof t||t instanceof String}function Ur(t){var e=String(t).split(/[.,]/);return e[0].split("").reverse().reduce((function(t,e,r){return r%3==0?t+","+e:t+e})).split("").reverse().join("")+(e[1]?"."+e[1]:"")}Br.RawInflateStream=function(t,e,r){this.blocks=[],this.bufferSize=r||65e3,this.totalpos=0,this.ip=void 0===e?0:e,this.bitsbuf=0,this.bitsbuflen=0,this.input=new Uint8Array(t),this.output=new Uint8Array(this.bufferSize),this.op=0,this.bfinal=!1,this.blockLength,this.resize=!1,this.litlenTable,this.distTable,this.sp=0,this.status=Br.RawInflateStream.Status.INITIALIZED,this.ip_,this.bitsbuflen_,this.bitsbuf_},Br.RawInflateStream.BlockType={UNCOMPRESSED:0,FIXED:1,DYNAMIC:2},Br.RawInflateStream.Status={INITIALIZED:0,BLOCK_HEADER_START:1,BLOCK_HEADER_END:2,BLOCK_BODY_START:3,BLOCK_BODY_END:4,DECODE_BLOCK_START:5,DECODE_BLOCK_END:6},Br.RawInflateStream.prototype.decompress=function(t,e){var r=!1;for(void 0!==t&&(this.input=t),void 0!==e&&(this.ip=e);!r;)switch(this.status){case Br.RawInflateStream.Status.INITIALIZED:case Br.RawInflateStream.Status.BLOCK_HEADER_START:this.readBlockHeader()<0&&(r=!0);break;case Br.RawInflateStream.Status.BLOCK_HEADER_END:case Br.RawInflateStream.Status.BLOCK_BODY_START:switch(this.currentBlockType){case Br.RawInflateStream.BlockType.UNCOMPRESSED:this.readUncompressedBlockHeader()<0&&(r=!0);break;case Br.RawInflateStream.BlockType.FIXED:this.parseFixedHuffmanBlock()<0&&(r=!0);break;case Br.RawInflateStream.BlockType.DYNAMIC:this.parseDynamicHuffmanBlock()<0&&(r=!0)}break;case Br.RawInflateStream.Status.BLOCK_BODY_END:case Br.RawInflateStream.Status.DECODE_BLOCK_START:switch(this.currentBlockType){case Br.RawInflateStream.BlockType.UNCOMPRESSED:this.parseUncompressedBlock()<0&&(r=!0);break;case Br.RawInflateStream.BlockType.FIXED:case Br.RawInflateStream.BlockType.DYNAMIC:this.decodeHuffman()<0&&(r=!0)}break;case Br.RawInflateStream.Status.DECODE_BLOCK_END:this.bfinal?r=!0:this.status=Br.RawInflateStream.Status.INITIALIZED}return this.concatBuffer()},Br.RawInflateStream.MaxBackwardLength=32768,Br.RawInflateStream.MaxCopyLength=258,Br.RawInflateStream.Order=new Uint16Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Br.RawInflateStream.LengthCodeTable=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258]),Br.RawInflateStream.LengthExtraTable=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0]),Br.RawInflateStream.DistCodeTable=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577]),Br.RawInflateStream.DistExtraTable=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),Br.RawInflateStream.FixedLiteralLengthTable=function(t){return t}(function(){var t,e,r=new Uint8Array(288);for(t=0,e=r.length;t<e;++t)r[t]=t<=143?8:t<=255?9:t<=279?7:8;return Or(r)}()),Br.RawInflateStream.FixedDistanceTable=function(t){return t}(function(){var t,e,r=new Uint8Array(30);for(t=0,e=r.length;t<e;++t)r[t]=5;return Or(r)}()),Br.RawInflateStream.prototype.readBlockHeader=function(){var t;if(this.status=Br.RawInflateStream.Status.BLOCK_HEADER_START,this.save_(),(t=this.readBits(3))<0)return this.restore_(),-1;switch(1&t&&(this.bfinal=!0),t>>>=1){case 0:this.currentBlockType=Br.RawInflateStream.BlockType.UNCOMPRESSED;break;case 1:this.currentBlockType=Br.RawInflateStream.BlockType.FIXED;break;case 2:this.currentBlockType=Br.RawInflateStream.BlockType.DYNAMIC;break;default:throw new Error("unknown BTYPE: "+t)}this.status=Br.RawInflateStream.Status.BLOCK_HEADER_END},Br.RawInflateStream.prototype.readBits=function(t){for(var e,r=this.bitsbuf,n=this.bitsbuflen,i=this.input,a=this.ip;n<t;){if(i.length<=a)return-1;r|=(e=i[a++])<<n,n+=8}return e=r&(1<<t)-1,r>>>=t,n-=t,this.bitsbuf=r,this.bitsbuflen=n,this.ip=a,e},Br.RawInflateStream.prototype.readCodeByTable=function(t){for(var e,r,n=this.bitsbuf,i=this.bitsbuflen,a=this.input,o=this.ip,s=t[0],h=t[1];i<h;){if(a.length<=o)return-1;n|=a[o++]<<i,i+=8}if((r=(e=s[n&(1<<h)-1])>>>16)>i)throw new Error("invalid code length: "+r);return this.bitsbuf=n>>r,this.bitsbuflen=i-r,this.ip=o,65535&e},Br.RawInflateStream.prototype.readUncompressedBlockHeader=function(){var t,e=this.input,r=this.ip;if(this.status=Br.RawInflateStream.Status.BLOCK_BODY_START,r+4>=e.length)return-1;if((t=e[r++]|e[r++]<<8)===~(e[r++]|e[r++]<<8))throw new Error("invalid uncompressed block header: length verify");this.bitsbuf=0,this.bitsbuflen=0,this.ip=r,this.blockLength=t,this.status=Br.RawInflateStream.Status.BLOCK_BODY_END},Br.RawInflateStream.prototype.parseUncompressedBlock=function(){var t=this.input,e=this.ip,r=this.output,n=this.op,i=this.blockLength;for(this.status=Br.RawInflateStream.Status.DECODE_BLOCK_START;i--;){if(n===r.length&&(r=this.expandBuffer({fixRatio:2})),e>=t.length)return this.ip=e,this.op=n,this.blockLength=i+1,-1;r[n++]=t[e++]}return i<0&&(this.status=Br.RawInflateStream.Status.DECODE_BLOCK_END),this.ip=e,this.op=n,0},Br.RawInflateStream.prototype.parseFixedHuffmanBlock=function(){return this.status=Br.RawInflateStream.Status.BLOCK_BODY_START,this.litlenTable=Br.RawInflateStream.FixedLiteralLengthTable,this.distTable=Br.RawInflateStream.FixedDistanceTable,this.status=Br.RawInflateStream.Status.BLOCK_BODY_END,0},Br.RawInflateStream.prototype.save_=function(){this.ip_=this.ip,this.bitsbuflen_=this.bitsbuflen,this.bitsbuf_=this.bitsbuf},Br.RawInflateStream.prototype.restore_=function(){this.ip=this.ip_,this.bitsbuflen=this.bitsbuflen_,this.bitsbuf=this.bitsbuf_},Br.RawInflateStream.prototype.parseDynamicHuffmanBlock=function(){var t,e,r,n,i=new Uint8Array(Br.RawInflateStream.Order.length);if(this.status=Br.RawInflateStream.Status.BLOCK_BODY_START,this.save_(),t=this.readBits(5)+257,e=this.readBits(5)+1,r=this.readBits(4)+4,t<0||e<0||r<0)return this.restore_(),-1;try{(function(){var a,o,s,h,c,l,u=0;for(c=0;c<r;++c){if((a=this.readBits(3))<0)throw new Error("not enough input");i[Br.RawInflateStream.Order[c]]=a}for(n=Or(i),h=new Uint8Array(t+e),c=0,l=t+e;c<l;){if((o=this.readCodeByTable(n))<0)throw new Error("not enough input");switch(o){case 16:if((a=this.readBits(2))<0)throw new Error("not enough input");for(s=3+a;s--;)h[c++]=u;break;case 17:if((a=this.readBits(3))<0)throw new Error("not enough input");for(s=3+a;s--;)h[c++]=0;u=0;break;case 18:if((a=this.readBits(7))<0)throw new Error("not enough input");for(s=11+a;s--;)h[c++]=0;u=0;break;default:h[c++]=o,u=o}}this.litlenTable=Or(h.subarray(0,t)),this.distTable=Or(h.subarray(t))}).call(this)}catch(t){return this.restore_(),-1}return this.status=Br.RawInflateStream.Status.BLOCK_BODY_END,0},Br.RawInflateStream.prototype.decodeHuffman=function(){var t,e,r,n,i,a=this.output,o=this.op,s=this.litlenTable,h=this.distTable,c=a.length;for(this.status=Br.RawInflateStream.Status.DECODE_BLOCK_START;;){if(this.save_(),(t=this.readCodeByTable(s))<0)return this.op=o,this.restore_(),-1;if(256===t)break;if(t<256)o===c&&(c=(a=this.expandBuffer()).length),a[o++]=t;else{if(e=t-257,n=Br.RawInflateStream.LengthCodeTable[e],Br.RawInflateStream.LengthExtraTable[e]>0){if((i=this.readBits(Br.RawInflateStream.LengthExtraTable[e]))<0)return this.op=o,this.restore_(),-1;n+=i}if((t=this.readCodeByTable(h))<0)return this.op=o,this.restore_(),-1;if(r=Br.RawInflateStream.DistCodeTable[t],Br.RawInflateStream.DistExtraTable[t]>0){if((i=this.readBits(Br.RawInflateStream.DistExtraTable[t]))<0)return this.op=o,this.restore_(),-1;r+=i}for(o+n>=c&&(c=(a=this.expandBuffer()).length);n--;)a[o]=a[o++-r];if(this.ip===this.input.length)return this.op=o,-1}}for(;this.bitsbuflen>=8;)this.bitsbuflen-=8,this.ip--;this.op=o,this.status=Br.RawInflateStream.Status.DECODE_BLOCK_END},Br.RawInflateStream.prototype.expandBuffer=function(t){var e,r,n,i=this.input.length/this.ip+1|0,a=this.input,o=this.output;return t&&("number"==typeof t.fixRatio&&(i=t.fixRatio),"number"==typeof t.addRatio&&(i+=t.addRatio)),r=i<2?(n=(a.length-this.ip)/this.litlenTable[2]/2*258|0)<o.length?o.length+n:o.length<<1:o.length*i,(e=new Uint8Array(r)).set(o),this.output=e,this.output},Br.RawInflateStream.prototype.concatBuffer=function(){var t,e,r=this.op;return t=this.resize?new Uint8Array(this.output.subarray(this.sp,r)):this.output.subarray(this.sp,r),this.sp=r,r>Br.RawInflateStream.MaxBackwardLength+this.bufferSize&&(this.op=this.sp=Br.RawInflateStream.MaxBackwardLength,e=this.output,this.output=new Uint8Array(this.bufferSize+Br.RawInflateStream.MaxBackwardLength),this.output.set(e.subarray(r-Br.RawInflateStream.MaxBackwardLength,r))),t},Br.Inflate=function(t,e){var r,n;switch(this.input=t,this.ip=0,this.rawinflate,this.verify,!e&&(e={})||(e.index&&(this.ip=e.index),e.verify&&(this.verify=e.verify)),r=t[this.ip++],n=t[this.ip++],15&r){case Br.CompressionMethod.DEFLATE:this.method=Br.CompressionMethod.DEFLATE;break;default:throw new Error("unsupported compression method")}if(((r<<8)+n)%31!=0)throw new Error("invalid fcheck flag:"+((r<<8)+n)%31);if(32&n)throw new Error("fdict flag is not supported");this.rawinflate=new Br.RawInflate(t,{index:this.ip,bufferSize:e.bufferSize,bufferType:e.bufferType,resize:e.resize})},Br.Inflate.BufferType=Br.RawInflate.BufferType,Br.Inflate.prototype.decompress=function(){var t,e=this.input;if(t=this.rawinflate.decompress(),this.ip=this.rawinflate.ip,this.verify&&(e[this.ip++]<<24|e[this.ip++]<<16|e[this.ip++]<<8|e[this.ip++])>>>0!==Br.Adler32(t))throw new Error("invalid adler-32 checksum");return t},Br.InflateStream=function(t){this.input=void 0===t?new Uint8Array:t,this.ip=0,this.rawinflate=new Br.RawInflateStream(this.input,this.ip),this.method,this.output=this.rawinflate.output},Br.InflateStream.prototype.decompress=function(t){var e;if(void 0!==t){var r=new Uint8Array(this.input.length+t.length);r.set(this.input,0),r.set(t,this.input.length),this.input=r}return void 0===this.method&&this.readHeader()<0?new Uint8Array:(e=this.rawinflate.decompress(this.input,this.ip),0!==this.rawinflate.ip&&(this.input=this.input.subarray(this.rawinflate.ip),this.ip=0),e)},Br.InflateStream.prototype.readHeader=function(){var t=this.ip,e=this.input,r=e[t++],n=e[t++];if(void 0===r||void 0===n)return-1;switch(15&r){case Br.CompressionMethod.DEFLATE:this.method=Br.CompressionMethod.DEFLATE;break;default:throw new Error("unsupported compression method")}if(((r<<8)+n)%31!=0)throw new Error("invalid fcheck flag:"+((r<<8)+n)%31);if(32&n)throw new Error("fdict flag is not supported");this.ip=t},Br.Gunzip=function(t,e){this.input=t,this.ip=0,this.member=[],this.decompressed=!1},Br.Gunzip.prototype.getMembers=function(){return this.decompressed||this.decompress(),this.member.slice()},Br.Gunzip.prototype.decompress=function(){for(var t=this.input.length;this.ip<t;)this.decodeMember();return this.decompressed=!0,this.concatMember()},Br.Gunzip.prototype.decodeMember=function(){var t,e,r,n,i,a,o,s,h,c=new Br.GunzipMember,l=this.input,u=this.ip;if(c.id1=l[u++],c.id2=l[u++],31!==c.id1||139!==c.id2)throw new Error("invalid file signature:"+c.id1+","+c.id2);switch(c.cm=l[u++],c.cm){case 8:break;default:throw new Error("unknown compression method: "+c.cm)}if(c.flg=l[u++],s=l[u++]|l[u++]<<8|l[u++]<<16|l[u++]<<24,c.mtime=new Date(1e3*s),c.xfl=l[u++],c.os=l[u++],(c.flg&Br.Gzip.FlagsMask.FEXTRA)>0&&(c.xlen=l[u++]|l[u++]<<8,u=this.decodeSubField(u,c.xlen)),(c.flg&Br.Gzip.FlagsMask.FNAME)>0){for(o=[],a=0;(i=l[u++])>0;)o[a++]=String.fromCharCode(i);c.name=o.join("")}if((c.flg&Br.Gzip.FlagsMask.FCOMMENT)>0){for(o=[],a=0;(i=l[u++])>0;)o[a++]=String.fromCharCode(i);c.comment=o.join("")}if((c.flg&Br.Gzip.FlagsMask.FHCRC)>0&&(c.crc16=65535&Br.CRC32.calc(l,0,u),c.crc16!==(l[u++]|l[u++]<<8)))throw new Error("invalid header crc16");if(t=l[l.length-4]|l[l.length-3]<<8|l[l.length-2]<<16|l[l.length-1]<<24,l.length-u-4-4<512*t&&(n=t),e=new Br.RawInflate(l,{index:u,bufferSize:n}),c.data=r=e.decompress(),u=e.ip,c.crc32=h=(l[u++]|l[u++]<<8|l[u++]<<16|l[u++]<<24)>>>0,Br.CRC32.calc(r)!==h)throw new Error("invalid CRC-32 checksum: 0x"+Br.CRC32.calc(r).toString(16)+" / 0x"+h.toString(16));if(c.isize=t=(l[u++]|l[u++]<<8|l[u++]<<16|l[u++]<<24)>>>0,(4294967295&r.length)!==t)throw new Error("invalid input size: "+(4294967295&r.length)+" / "+t);this.member.push(c),this.ip=u},Br.Gunzip.prototype.decodeSubField=function(t,e){return t+e},Br.Gunzip.prototype.concatMember=function(){var t,e,r,n=this.member,i=0,a=0;for(t=0,e=n.length;t<e;++t)a+=n[t].data.length;for(r=new Uint8Array(a),t=0;t<e;++t)r.set(n[t].data,i),i+=n[t].data.length;return r},Br.GunzipMember=function(){this.id1,this.id2,this.cm,this.flg,this.mtime,this.xfl,this.os,this.crc16,this.xlen,this.crc32,this.isize,this.name,this.comment,this.data},Br.GunzipMember.prototype.getName=function(){return this.name},Br.GunzipMember.prototype.getData=function(){return this.data},Br.GunzipMember.prototype.getMtime=function(){return this.mtime},Br.Gzip=function(t,e){this.input=t,this.ip=0,this.output,this.op=0,this.flags={},this.filename,this.comment,this.deflateOptions,e&&(e.flags&&(this.flags=e.flags),"string"==typeof e.filename&&(this.filename=e.filename),"string"==typeof e.comment&&(this.comment=e.comment),e.deflateOptions&&(this.deflateOptions=e.deflateOptions)),this.deflateOptions||(this.deflateOptions={})},Br.Gzip.DefaultBufferSize=32768,Br.Gzip.prototype.compress=function(){var t,e,r,n,i,a,o,s,h=new Uint8Array(Br.Gzip.DefaultBufferSize),c=0,l=this.input,u=this.ip,f=this.filename,p=this.comment;if(h[c++]=31,h[c++]=139,h[c++]=8,t=0,this.flags.fname&&(t|=Br.Gzip.FlagsMask.FNAME),this.flags.fcomment&&(t|=Br.Gzip.FlagsMask.FCOMMENT),this.flags.fhcrc&&(t|=Br.Gzip.FlagsMask.FHCRC),h[c++]=t,e=(Date.now?Date.now():+new Date)/1e3|0,h[c++]=255&e,h[c++]=e>>>8&255,h[c++]=e>>>16&255,h[c++]=e>>>24&255,h[c++]=0,h[c++]=Br.Gzip.OperatingSystem.UNKNOWN,void 0!==this.flags.fname){for(o=0,s=f.length;o<s;++o)(a=f.charCodeAt(o))>255&&(h[c++]=a>>>8&255),h[c++]=255&a;h[c++]=0}if(this.flags.comment){for(o=0,s=p.length;o<s;++o)(a=p.charCodeAt(o))>255&&(h[c++]=a>>>8&255),h[c++]=255&a;h[c++]=0}return this.flags.fhcrc&&(r=65535&Br.CRC32.calc(h,0,c),h[c++]=255&r,h[c++]=r>>>8&255),this.deflateOptions.outputBuffer=h,this.deflateOptions.outputIndex=c,h=(i=new Br.RawDeflate(l,this.deflateOptions)).compress(),(c=i.op)+8>h.buffer.byteLength?(this.output=new Uint8Array(c+8),this.output.set(new Uint8Array(h.buffer)),h=this.output):h=new Uint8Array(h.buffer),n=Br.CRC32.calc(l),h[c++]=255&n,h[c++]=n>>>8&255,h[c++]=n>>>16&255,h[c++]=n>>>24&255,s=l.length,h[c++]=255&s,h[c++]=s>>>8&255,h[c++]=s>>>16&255,h[c++]=s>>>24&255,this.ip=u,c<h.length&&(this.output=h=h.subarray(0,c)),h},Br.Gzip.OperatingSystem={FAT:0,AMIGA:1,VMS:2,UNIX:3,VM_CMS:4,ATARI_TOS:5,HPFS:6,MACINTOSH:7,Z_SYSTEM:8,CP_M:9,TOPS_20:10,NTFS:11,QDOS:12,ACORN_RISCOS:13,UNKNOWN:255},Br.Gzip.FlagsMask={FTEXT:1,FHCRC:2,FEXTRA:4,FNAME:8,FCOMMENT:16},Br.Heap=function(t){this.buffer=new Uint16Array(2*t),this.length=0},Br.Heap.prototype.getParent=function(t){return 2*((t-2)/4|0)},Br.Heap.prototype.getChild=function(t){return 2*t+2},Br.Heap.prototype.push=function(t,e){var r,n,i,a=this.buffer;for(r=this.length,a[this.length++]=e,a[this.length++]=t;r>0&&(n=this.getParent(r),a[r]>a[n]);)i=a[r],a[r]=a[n],a[n]=i,i=a[r+1],a[r+1]=a[n+1],a[n+1]=i,r=n;return this.length},Br.Heap.prototype.pop=function(){var t,e,r,n,i,a=this.buffer;for(e=a[0],t=a[1],this.length-=2,a[0]=a[this.length],a[1]=a[this.length+1],i=0;!((n=this.getChild(i))>=this.length)&&(n+2<this.length&&a[n+2]>a[n]&&(n+=2),a[n]>a[i]);)r=a[i],a[i]=a[n],a[n]=r,r=a[i+1],a[i+1]=a[n+1],a[n+1]=r,i=n;return{index:t,value:e,length:this.length}},Br.RawDeflate=function(t,e){this.compressionType=Br.RawDeflate.CompressionType.DYNAMIC,this.lazy=0,this.freqsLitLen,this.freqsDist,this.input=t instanceof Array?new Uint8Array(t):t,this.output,this.op=0,e&&(e.lazy&&(this.lazy=e.lazy),"number"==typeof e.compressionType&&(this.compressionType=e.compressionType),e.outputBuffer&&(this.output=e.outputBuffer instanceof Array?new Uint8Array(e.outputBuffer):e.outputBuffer),"number"==typeof e.outputIndex&&(this.op=e.outputIndex)),this.output||(this.output=new Uint8Array(32768))},Br.RawDeflate.CompressionType={NONE:0,FIXED:1,DYNAMIC:2,RESERVED:3},Br.RawDeflate.Lz77MinLength=3,Br.RawDeflate.Lz77MaxLength=258,Br.RawDeflate.WindowSize=32768,Br.RawDeflate.MaxCodeLength=16,Br.RawDeflate.HUFMAX=286,Br.RawDeflate.FixedHuffmanTable=function(){var t,e=[];for(t=0;t<288;t++)switch(!0){case t<=143:e.push([t+48,8]);break;case t<=255:e.push([t-144+400,9]);break;case t<=279:e.push([t-256+0,7]);break;case t<=287:e.push([t-280+192,8]);break;default:throw"invalid literal: "+t}return e}(),Br.RawDeflate.prototype.compress=function(){var t,e,r,n=this.input;switch(this.compressionType){case Br.RawDeflate.CompressionType.NONE:for(e=0,r=n.length;e<r;)e+=(t=n.subarray(e,e+65535)).length,this.makeNocompressBlock(t,e===r);break;case Br.RawDeflate.CompressionType.FIXED:this.output=this.makeFixedHuffmanBlock(n,!0),this.op=this.output.length;break;case Br.RawDeflate.CompressionType.DYNAMIC:this.output=this.makeDynamicHuffmanBlock(n,!0),this.op=this.output.length;break;default:throw"invalid compression type"}return this.output},Br.RawDeflate.prototype.makeNocompressBlock=function(t,e){var r,n,i,a,o=this.output,s=this.op;for(o=new Uint8Array(this.output.buffer);o.length<=s+t.length+5;)o=new Uint8Array(o.length<<1);return o.set(this.output),r=e?1:0,n=Br.RawDeflate.CompressionType.NONE,o[s++]=r|n<<1,a=65536+~(i=t.length)&65535,o[s++]=255&i,o[s++]=i>>>8&255,o[s++]=255&a,o[s++]=a>>>8&255,o.set(t,s),s+=t.length,o=o.subarray(0,s),this.op=s,this.output=o,o},Br.RawDeflate.prototype.makeFixedHuffmanBlock=function(t,e){var r,n,i,a=new Br.BitStream(new Uint8Array(this.output.buffer),this.op);return r=e?1:0,n=Br.RawDeflate.CompressionType.FIXED,a.writeBits(r,1,!0),a.writeBits(n,2,!0),i=this.lz77(t),this.fixedHuffman(i,a),a.finish()},Br.RawDeflate.prototype.makeDynamicHuffmanBlock=function(t,e){var r,n,i,a,o,s,h,c,l,u,f,p,d,g,m,v,b,y=new Br.BitStream(new Uint8Array(this.output.buffer),this.op),w=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],x=new Array(19);for(r=e?1:0,n=Br.RawDeflate.CompressionType.DYNAMIC,y.writeBits(r,1,!0),y.writeBits(n,2,!0),i=this.lz77(t),h=this.getLengths_(this.freqsLitLen,15),c=this.getCodesFromLengths_(h),l=this.getLengths_(this.freqsDist,7),u=this.getCodesFromLengths_(l),a=286;a>257&&0===h[a-1];a--);for(o=30;o>1&&0===l[o-1];o--);for(f=this.getTreeSymbols_(a,h,o,l),p=this.getLengths_(f.freqs,7),v=0;v<19;v++)x[v]=p[w[v]];for(s=19;s>4&&0===x[s-1];s--);for(d=this.getCodesFromLengths_(p),y.writeBits(a-257,5,!0),y.writeBits(o-1,5,!0),y.writeBits(s-4,4,!0),v=0;v<s;v++)y.writeBits(x[v],3,!0);for(v=0,b=f.codes.length;v<b;v++)if(g=f.codes[v],y.writeBits(d[g],p[g],!0),g>=16){switch(v++,g){case 16:m=2;break;case 17:m=3;break;case 18:m=7;break;default:throw"invalid code: "+g}y.writeBits(f.codes[v],m,!0)}return this.dynamicHuffman(i,[c,h],[u,l],y),y.finish()},Br.RawDeflate.prototype.dynamicHuffman=function(t,e,r,n){var i,a,o,s,h,c,l,u;for(h=e[0],c=e[1],l=r[0],u=r[1],i=0,a=t.length;i<a;++i)if(o=t[i],n.writeBits(h[o],c[o],!0),o>256)n.writeBits(t[++i],t[++i],!0),s=t[++i],n.writeBits(l[s],u[s],!0),n.writeBits(t[++i],t[++i],!0);else if(256===o)break;return n},Br.RawDeflate.prototype.fixedHuffman=function(t,e){var r,n,i;for(r=0,n=t.length;r<n;r++)if(i=t[r],Br.BitStream.prototype.writeBits.apply(e,Br.RawDeflate.FixedHuffmanTable[i]),i>256)e.writeBits(t[++r],t[++r],!0),e.writeBits(t[++r],5),e.writeBits(t[++r],t[++r],!0);else if(256===i)break;return e},Br.RawDeflate.Lz77Match=function(t,e){this.length=t,this.backwardDistance=e},Br.RawDeflate.Lz77Match.LengthCodeTable=function(t){return new Uint32Array(t)}(function(){var t,e,r=[];for(t=3;t<=258;t++)e=n(t),r[t]=e[2]<<24|e[1]<<16|e[0];function n(t){switch(!0){case 3===t:return[257,t-3,0];case 4===t:return[258,t-4,0];case 5===t:return[259,t-5,0];case 6===t:return[260,t-6,0];case 7===t:return[261,t-7,0];case 8===t:return[262,t-8,0];case 9===t:return[263,t-9,0];case 10===t:return[264,t-10,0];case t<=12:return[265,t-11,1];case t<=14:return[266,t-13,1];case t<=16:return[267,t-15,1];case t<=18:return[268,t-17,1];case t<=22:return[269,t-19,2];case t<=26:return[270,t-23,2];case t<=30:return[271,t-27,2];case t<=34:return[272,t-31,2];case t<=42:return[273,t-35,3];case t<=50:return[274,t-43,3];case t<=58:return[275,t-51,3];case t<=66:return[276,t-59,3];case t<=82:return[277,t-67,4];case t<=98:return[278,t-83,4];case t<=114:return[279,t-99,4];case t<=130:return[280,t-115,4];case t<=162:return[281,t-131,5];case t<=194:return[282,t-163,5];case t<=226:return[283,t-195,5];case t<=257:return[284,t-227,5];case 258===t:return[285,t-258,0];default:throw"invalid length: "+t}}return r}()),Br.RawDeflate.Lz77Match.prototype.getDistanceCode_=function(t){var e;switch(!0){case 1===t:e=[0,t-1,0];break;case 2===t:e=[1,t-2,0];break;case 3===t:e=[2,t-3,0];break;case 4===t:e=[3,t-4,0];break;case t<=6:e=[4,t-5,1];break;case t<=8:e=[5,t-7,1];break;case t<=12:e=[6,t-9,2];break;case t<=16:e=[7,t-13,2];break;case t<=24:e=[8,t-17,3];break;case t<=32:e=[9,t-25,3];break;case t<=48:e=[10,t-33,4];break;case t<=64:e=[11,t-49,4];break;case t<=96:e=[12,t-65,5];break;case t<=128:e=[13,t-97,5];break;case t<=192:e=[14,t-129,6];break;case t<=256:e=[15,t-193,6];break;case t<=384:e=[16,t-257,7];break;case t<=512:e=[17,t-385,7];break;case t<=768:e=[18,t-513,8];break;case t<=1024:e=[19,t-769,8];break;case t<=1536:e=[20,t-1025,9];break;case t<=2048:e=[21,t-1537,9];break;case t<=3072:e=[22,t-2049,10];break;case t<=4096:e=[23,t-3073,10];break;case t<=6144:e=[24,t-4097,11];break;case t<=8192:e=[25,t-6145,11];break;case t<=12288:e=[26,t-8193,12];break;case t<=16384:e=[27,t-12289,12];break;case t<=24576:e=[28,t-16385,13];break;case t<=32768:e=[29,t-24577,13];break;default:throw"invalid distance"}return e},Br.RawDeflate.Lz77Match.prototype.toLz77Array=function(){var t,e=this.length,r=this.backwardDistance,n=[],i=0;return t=Br.RawDeflate.Lz77Match.LengthCodeTable[e],n[i++]=65535&t,n[i++]=t>>16&255,n[i++]=t>>24,t=this.getDistanceCode_(r),n[i++]=t[0],n[i++]=t[1],n[i++]=t[2],n},Br.RawDeflate.prototype.lz77=function(t){var e,r,n,i,a,o,s,h,c,l={},u=Br.RawDeflate.WindowSize,f=new Uint16Array(2*t.length),p=0,d=0,g=new Uint32Array(286),m=new Uint32Array(30),v=this.lazy;function b(t,e){var r,n,i=t.toLz77Array();for(r=0,n=i.length;r<n;++r)f[p++]=i[r];g[i[0]]++,m[i[3]]++,d=t.length+e-1,h=null}for(g[256]=1,e=0,r=t.length;e<r;++e){for(a=0,n=0,i=Br.RawDeflate.Lz77MinLength;n<i&&e+n!==r;++n)a=a<<8|t[e+n];if(void 0===l[a]&&(l[a]=[]),o=l[a],d-- >0)o.push(e);else{for(;o.length>0&&e-o[0]>u;)o.shift();if(e+Br.RawDeflate.Lz77MinLength>=r){for(h&&b(h,-1),n=0,i=r-e;n<i;++n)c=t[e+n],f[p++]=c,++g[c];break}o.length>0?(s=this.searchLongestMatch_(t,e,o),h?h.length<s.length?(c=t[e-1],f[p++]=c,++g[c],b(s,0)):b(h,-1):s.length<v?h=s:b(s,0)):h?b(h,-1):(c=t[e],f[p++]=c,++g[c]),o.push(e)}}return f[p++]=256,g[256]++,this.freqsLitLen=g,this.freqsDist=m,f.subarray(0,p)},Br.RawDeflate.prototype.searchLongestMatch_=function(t,e,r){var n,i,a,o,s,h,c=0,l=t.length;t:for(o=0,h=r.length;o<h;o++){if(n=r[h-o-1],a=Br.RawDeflate.Lz77MinLength,c>Br.RawDeflate.Lz77MinLength){for(s=c;s>Br.RawDeflate.Lz77MinLength;s--)if(t[n+s-1]!==t[e+s-1])continue t;a=c}for(;a<Br.RawDeflate.Lz77MaxLength&&e+a<l&&t[n+a]===t[e+a];)++a;if(a>c&&(i=n,c=a),a===Br.RawDeflate.Lz77MaxLength)break}return new Br.RawDeflate.Lz77Match(c,e-i)},Br.RawDeflate.prototype.getTreeSymbols_=function(t,e,r,n){var i,a,o,s,h,c,l=new Uint32Array(t+r),u=new Uint32Array(316),f=new Uint8Array(19);for(a=0,i=0;i<t;i++)l[a++]=e[i];for(i=0;i<r;i++)l[a++]=n[i];for(h=0,i=0,s=l.length;i<s;i+=a){for(a=1;i+a<s&&l[i+a]===l[i];++a);if(o=a,0===l[i])if(o<3)for(;o-- >0;)u[h++]=0,f[0]++;else for(;o>0;)(c=o<138?o:138)>o-3&&c<o&&(c=o-3),c<=10?(u[h++]=17,u[h++]=c-3,f[17]++):(u[h++]=18,u[h++]=c-11,f[18]++),o-=c;else if(u[h++]=l[i],f[l[i]]++,--o<3)for(;o-- >0;)u[h++]=l[i],f[l[i]]++;else for(;o>0;)(c=o<6?o:6)>o-3&&c<o&&(c=o-3),u[h++]=16,u[h++]=c-3,f[16]++,o-=c}return{codes:u.subarray(0,h),freqs:f}},Br.RawDeflate.prototype.getLengths_=function(t,e){var r,n,i,a,o,s=t.length,h=new Br.Heap(2*Br.RawDeflate.HUFMAX),c=new Uint8Array(s);for(a=0;a<s;++a)t[a]>0&&h.push(a,t[a]);if(r=new Array(h.length/2),n=new Uint32Array(h.length/2),1===r.length)return c[h.pop().index]=1,c;for(a=0,o=h.length/2;a<o;++a)r[a]=h.pop(),n[a]=r[a].value;for(i=this.reversePackageMerge_(n,n.length,e),a=0,o=r.length;a<o;++a)c[r[a].index]=i[a];return c},Br.RawDeflate.prototype.reversePackageMerge_=function(t,e,r){var n,i,a,o,s,h=new Uint16Array(r),c=new Uint8Array(r),l=new Uint8Array(e),u=new Array(r),f=new Array(r),p=new Array(r),d=(1<<r)-e,g=1<<r-1;function m(t){var r=f[t][p[t]];r===e?(m(t+1),m(t+1)):--l[r],++p[t]}for(h[r-1]=e,i=0;i<r;++i)d<g?c[i]=0:(c[i]=1,d-=g),d<<=1,h[r-2-i]=(h[r-1-i]/2|0)+e;for(h[0]=c[0],u[0]=new Array(h[0]),f[0]=new Array(h[0]),i=1;i<r;++i)h[i]>2*h[i-1]+c[i]&&(h[i]=2*h[i-1]+c[i]),u[i]=new Array(h[i]),f[i]=new Array(h[i]);for(n=0;n<e;++n)l[n]=r;for(a=0;a<h[r-1];++a)u[r-1][a]=t[a],f[r-1][a]=a;for(n=0;n<r;++n)p[n]=0;for(1===c[r-1]&&(--l[0],++p[r-1]),i=r-2;i>=0;--i){for(n=0,o=0,s=p[i+1],a=0;a<h[i];a++)(o=u[i+1][s]+u[i+1][s+1])>t[n]?(u[i][a]=o,f[i][a]=e,s+=2):(u[i][a]=t[n],f[i][a]=n,++n);p[i]=0,1===c[i]&&m(i)}return l},Br.RawDeflate.prototype.getCodesFromLengths_=function(t){var e,r,n,i,a=new Uint16Array(t.length),o=[],s=[],h=0;for(e=0,r=t.length;e<r;e++)o[t[e]]=1+(0|o[t[e]]);for(e=1,r=Br.RawDeflate.MaxCodeLength;e<=r;e++)s[e]=h,h+=0|o[e],h<<=1;for(e=0,r=t.length;e<r;e++)for(h=s[t[e]],s[t[e]]+=1,a[e]=0,n=0,i=t[e];n<i;n++)a[e]=a[e]<<1|1&h,h>>>=1;return a},Br.Unzip=function(t,e){e=e||{},this.input=t instanceof Array?new Uint8Array(t):t,this.ip=0,this.eocdrOffset,this.numberOfThisDisk,this.startDisk,this.totalEntriesThisDisk,this.totalEntries,this.centralDirectorySize,this.centralDirectoryOffset,this.commentLength,this.comment,this.fileHeaderList,this.filenameToIndex,this.verify=e.verify||!1,this.password=e.password},Br.Unzip.CompressionMethod=Br.Zip.CompressionMethod,Br.Unzip.FileHeaderSignature=Br.Zip.FileHeaderSignature,Br.Unzip.LocalFileHeaderSignature=Br.Zip.LocalFileHeaderSignature,Br.Unzip.CentralDirectorySignature=Br.Zip.CentralDirectorySignature,Br.Unzip.FileHeader=function(t,e){this.input=t,this.offset=e,this.length,this.version,this.os,this.needVersion,this.flags,this.compression,this.time,this.date,this.crc32,this.compressedSize,this.plainSize,this.fileNameLength,this.extraFieldLength,this.fileCommentLength,this.diskNumberStart,this.internalFileAttributes,this.externalFileAttributes,this.relativeOffset,this.filename,this.extraField,this.comment},Br.Unzip.FileHeader.prototype.parse=function(){var t=this.input,e=this.offset;if(t[e++]!==Br.Unzip.FileHeaderSignature[0]||t[e++]!==Br.Unzip.FileHeaderSignature[1]||t[e++]!==Br.Unzip.FileHeaderSignature[2]||t[e++]!==Br.Unzip.FileHeaderSignature[3])throw new Error("invalid file header signature");this.version=t[e++],this.os=t[e++],this.needVersion=t[e++]|t[e++]<<8,this.flags=t[e++]|t[e++]<<8,this.compression=t[e++]|t[e++]<<8,this.time=t[e++]|t[e++]<<8,this.date=t[e++]|t[e++]<<8,this.crc32=(t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24)>>>0,this.compressedSize=(t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24)>>>0,this.plainSize=(t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24)>>>0,this.fileNameLength=t[e++]|t[e++]<<8,this.extraFieldLength=t[e++]|t[e++]<<8,this.fileCommentLength=t[e++]|t[e++]<<8,this.diskNumberStart=t[e++]|t[e++]<<8,this.internalFileAttributes=t[e++]|t[e++]<<8,this.externalFileAttributes=t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24,this.relativeOffset=(t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24)>>>0,this.filename=String.fromCharCode.apply(null,t.subarray(e,e+=this.fileNameLength)),this.extraField=t.subarray(e,e+=this.extraFieldLength),this.comment=t.subarray(e,e+this.fileCommentLength),this.length=e-this.offset},Br.Unzip.LocalFileHeader=function(t,e){this.input=t,this.offset=e,this.length,this.needVersion,this.flags,this.compression,this.time,this.date,this.crc32,this.compressedSize,this.plainSize,this.fileNameLength,this.extraFieldLength,this.filename,this.extraField},Br.Unzip.LocalFileHeader.Flags=Br.Zip.Flags,Br.Unzip.LocalFileHeader.prototype.parse=function(){var t=this.input,e=this.offset;if(t[e++]!==Br.Unzip.LocalFileHeaderSignature[0]||t[e++]!==Br.Unzip.LocalFileHeaderSignature[1]||t[e++]!==Br.Unzip.LocalFileHeaderSignature[2]||t[e++]!==Br.Unzip.LocalFileHeaderSignature[3])throw new Error("invalid local file header signature");this.needVersion=t[e++]|t[e++]<<8,this.flags=t[e++]|t[e++]<<8,this.compression=t[e++]|t[e++]<<8,this.time=t[e++]|t[e++]<<8,this.date=t[e++]|t[e++]<<8,this.crc32=(t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24)>>>0,this.compressedSize=(t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24)>>>0,this.plainSize=(t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24)>>>0,this.fileNameLength=t[e++]|t[e++]<<8,this.extraFieldLength=t[e++]|t[e++]<<8,this.filename=String.fromCharCode.apply(null,t.subarray(e,e+=this.fileNameLength)),this.extraField=t.subarray(e,e+=this.extraFieldLength),this.length=e-this.offset},Br.Unzip.prototype.searchEndOfCentralDirectoryRecord=function(){var t,e=this.input;for(t=e.length-12;t>0;--t)if(e[t]===Br.Unzip.CentralDirectorySignature[0]&&e[t+1]===Br.Unzip.CentralDirectorySignature[1]&&e[t+2]===Br.Unzip.CentralDirectorySignature[2]&&e[t+3]===Br.Unzip.CentralDirectorySignature[3])return void(this.eocdrOffset=t);throw new Error("End of Central Directory Record not found")},Br.Unzip.prototype.parseEndOfCentralDirectoryRecord=function(){var t,e=this.input;if(this.eocdrOffset||this.searchEndOfCentralDirectoryRecord(),t=this.eocdrOffset,e[t++]!==Br.Unzip.CentralDirectorySignature[0]||e[t++]!==Br.Unzip.CentralDirectorySignature[1]||e[t++]!==Br.Unzip.CentralDirectorySignature[2]||e[t++]!==Br.Unzip.CentralDirectorySignature[3])throw new Error("invalid signature");this.numberOfThisDisk=e[t++]|e[t++]<<8,this.startDisk=e[t++]|e[t++]<<8,this.totalEntriesThisDisk=e[t++]|e[t++]<<8,this.totalEntries=e[t++]|e[t++]<<8,this.centralDirectorySize=(e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24)>>>0,this.centralDirectoryOffset=(e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24)>>>0,this.commentLength=e[t++]|e[t++]<<8,this.comment=e.subarray(t,t+this.commentLength)},Br.Unzip.prototype.parseFileHeader=function(){var t,e,r,n,i=[],a={};if(!this.fileHeaderList){for(void 0===this.centralDirectoryOffset&&this.parseEndOfCentralDirectoryRecord(),t=this.centralDirectoryOffset,r=0,n=this.totalEntries;r<n;++r)(e=new Br.Unzip.FileHeader(this.input,t)).parse(),t+=e.length,i[r]=e,a[e.filename]=r;if(this.centralDirectorySize<t-this.centralDirectoryOffset)throw new Error("invalid file header size");this.fileHeaderList=i,this.filenameToIndex=a}},Br.Unzip.prototype.getFileData=function(t,e){e=e||{};var r,n,i,a,o,s,h,c,l=this.input,u=this.fileHeaderList;if(u||this.parseFileHeader(),void 0===u[t])throw new Error("wrong index");if(n=u[t].relativeOffset,(r=new Br.Unzip.LocalFileHeader(this.input,n)).parse(),n+=r.length,i=r.compressedSize,0!=(r.flags&Br.Unzip.LocalFileHeader.Flags.ENCRYPT)){if(!e.password&&!this.password)throw new Error("please set password");for(s=this.createDecryptionKey(e.password||this.password),h=n,c=n+12;h<c;++h)this.decode(s,l[h]);for(h=n+=12,c=n+(i-=12);h<c;++h)l[h]=this.decode(s,l[h])}switch(r.compression){case Br.Unzip.CompressionMethod.STORE:a=this.input.subarray(n,n+i);break;case Br.Unzip.CompressionMethod.DEFLATE:a=new Br.RawInflate(this.input,{index:n,bufferSize:r.plainSize}).decompress();break;default:throw new Error("unknown compression type")}if(this.verify&&(o=Br.CRC32.calc(a),r.crc32!==o))throw new Error("wrong crc: file=0x"+r.crc32.toString(16)+", data=0x"+o.toString(16));return a},Br.Unzip.prototype.getFilenames=function(){var t,e,r,n=[];for(this.fileHeaderList||this.parseFileHeader(),t=0,e=(r=this.fileHeaderList).length;t<e;++t)n[t]=r[t].filename;return n},Br.Unzip.prototype.decompress=function(t,e){var r;if(this.filenameToIndex||this.parseFileHeader(),void 0===(r=this.filenameToIndex[t]))throw new Error(t+" not found");return this.getFileData(r,e)},Br.Unzip.prototype.setPassword=function(t){this.password=t},Br.Unzip.prototype.decode=function(t,e){return e^=this.getByte(t),this.updateKeys(t,e),e},Br.Unzip.prototype.updateKeys=Br.Zip.prototype.updateKeys,Br.Unzip.prototype.createDecryptionKey=Br.Zip.prototype.createEncryptionKey,Br.Unzip.prototype.getByte=Br.Zip.prototype.getByte,Br.Util.stringToByteArray=function(t){var e,r,n=t.split("");for(e=0,r=n.length;e<r;e++)n[e]=(255&n[e].charCodeAt(0))>>>0;return n},Br.Adler32=function(t){return"string"==typeof t&&(t=Br.Util.stringToByteArray(t)),Br.Adler32.update(1,t)},Br.Adler32.update=function(t,e){for(var r,n=65535&t,i=t>>>16&65535,a=e.length,o=0;a>0;){a-=r=a>Br.Adler32.OptimizationParameter?Br.Adler32.OptimizationParameter:a;do{i+=n+=e[o++]}while(--r);n%=65521,i%=65521}return(i<<16|n)>>>0},Br.Adler32.OptimizationParameter=1024,Br.BitStream=function(t,e){if(this.index="number"==typeof e?e:0,this.bitindex=0,this.buffer=t instanceof Uint8Array?t:new Uint8Array(Br.BitStream.DefaultBlockSize),2*this.buffer.length<=this.index)throw new Error("invalid index");this.buffer.length<=this.index&&this.expandBuffer()},Br.BitStream.DefaultBlockSize=32768,Br.BitStream.prototype.expandBuffer=function(){var t=this.buffer,e=t.length,r=new Uint8Array(e<<1);return r.set(t),this.buffer=r},Br.BitStream.prototype.writeBits=function(t,e,r){var n,i=this.buffer,a=this.index,o=this.bitindex,s=i[a];if(r&&e>1&&(t=e>8?function(t){return Br.BitStream.ReverseTable[255&t]<<24|Br.BitStream.ReverseTable[t>>>8&255]<<16|Br.BitStream.ReverseTable[t>>>16&255]<<8|Br.BitStream.ReverseTable[t>>>24&255]}(t)>>32-e:Br.BitStream.ReverseTable[t]>>8-e),e+o<8)s=s<<e|t,o+=e;else for(n=0;n<e;++n)s=s<<1|t>>e-n-1&1,8==++o&&(o=0,i[a++]=Br.BitStream.ReverseTable[s],s=0,a===i.length&&(i=this.expandBuffer()));i[a]=s,this.buffer=i,this.bitindex=o,this.index=a},Br.BitStream.prototype.finish=function(){var t=this.buffer,e=this.index;return this.bitindex>0&&(t[e]<<=8-this.bitindex,t[e]=Br.BitStream.ReverseTable[t[e]],e++),t.subarray(0,e)},Br.BitStream.ReverseTable=function(t){return t}(function(){var t,e=new Uint8Array(256);for(t=0;t<256;++t)e[t]=function(t){var e=t,r=7;for(t>>>=1;t;t>>>=1)e<<=1,e|=1&t,--r;return(e<<r&255)>>>0}(t);return e}()),Br.CRC32.calc=function(t,e,r){return Br.CRC32.update(t,0,e,r)},Br.CRC32.update=function(t,e,r,n){var i=Br.CRC32.Table,a="number"==typeof r?r:r=0,o="number"==typeof n?n:t.length;for(e^=4294967295,a=7&o;a--;++r)e=e>>>8^i[255&(e^t[r])];for(a=o>>3;a--;r+=8)e=(e=(e=(e=(e=(e=(e=(e=e>>>8^i[255&(e^t[r])])>>>8^i[255&(e^t[r+1])])>>>8^i[255&(e^t[r+2])])>>>8^i[255&(e^t[r+3])])>>>8^i[255&(e^t[r+4])])>>>8^i[255&(e^t[r+5])])>>>8^i[255&(e^t[r+6])])>>>8^i[255&(e^t[r+7])];return(4294967295^e)>>>0},Br.CRC32.single=function(t,e){return(Br.CRC32.Table[255&(t^e)]^t>>>8)>>>0},Br.CRC32.Table_=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],Br.CRC32.Table=new Uint32Array(Br.CRC32.Table_),Br.Deflate=function(t,e){this.input=t,this.output=new Uint8Array(Br.Deflate.DefaultBufferSize),this.compressionType=Br.Deflate.CompressionType.DYNAMIC,this.rawDeflate;var r,n={};for(r in!e&&(e={})||"number"==typeof e.compressionType&&(this.compressionType=e.compressionType),e)n[r]=e[r];n.outputBuffer=this.output,this.rawDeflate=new Br.RawDeflate(this.input,n)},Br.Deflate.DefaultBufferSize=32768,Br.Deflate.CompressionType=Br.RawDeflate.CompressionType,Br.Deflate.compress=function(t,e){return new Br.Deflate(t,e).compress()},Br.Deflate.prototype.compress=function(){var t,e,r,n,i,a,o,s=0;switch(o=this.output,t=Br.CompressionMethod.DEFLATE){case Br.CompressionMethod.DEFLATE:e=Math.LOG2E*Math.log(Br.RawDeflate.WindowSize)-8;break;default:throw new Error("invalid compression method")}switch(r=e<<4|t,o[s++]=r,0,t){case Br.CompressionMethod.DEFLATE:switch(this.compressionType){case Br.Deflate.CompressionType.NONE:i=0;break;case Br.Deflate.CompressionType.FIXED:i=1;break;case Br.Deflate.CompressionType.DYNAMIC:i=2;break;default:throw new Error("unsupported compression type")}break;default:throw new Error("invalid compression method")}return n=i<<6|0,n|=31-(256*r+n)%31,o[s++]=n,a=Br.Adler32(this.input),this.rawDeflate.op=s,s=(o=this.rawDeflate.compress()).length,(o=new Uint8Array(o.buffer)).length<=s+4&&(this.output=new Uint8Array(o.length+4),this.output.set(o),o=this.output),(o=o.subarray(0,s+4))[s++]=a>>24&255,o[s++]=a>>16&255,o[s++]=a>>8&255,o[s++]=255&a,o};var Hr=function(t){return t.split(/\n|\r\n|\r/g)};function $r(t,e){var r,n,i=[],a=t.length,o=0,s=!1;if(a>0)for(i[o]=t.charAt(0),r=1;r<a;r++)'"'===(n=t.charAt(r))?s=!s:s||n!==e?i[o]+=n:i[++o]="";return i}function qr(t){return t.split("").reduce((function(t,e){return(t=(t<<5)-t+e.charCodeAt(0))&t}),0)}var Vr={rgbListFromHSV:function(){for(var t=[],e=1;e>=.5;e-=.1)for(var r=0;r<1;r+=1/28){var n="rgb("+Vr.hsvToRgb(r,1,e).join(",")+")";t.push(n)}return t.pop(),t.push(Vr.rgbColor(16,16,16)),t},rgbToHex:function(t){return(t=t.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&4===t.length?"#"+("0"+parseInt(t[1],10).toString(16)).slice(-2)+("0"+parseInt(t[2],10).toString(16)).slice(-2)+("0"+parseInt(t[3],10).toString(16)).slice(-2):""},hexToRgb:function(e){var r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return null===r?t:"rgb("+parseInt(r[1],16)+","+parseInt(r[2],16)+","+parseInt(r[3],16)+")"},hsvToRgb:function(t,e,r){var n,i,a,o=Math.floor(6*t),s=6*t-o,h=r*(1-e),c=r*(1-s*e),l=r*(1-(1-s)*e);switch(o%6){case 0:n=r,i=l,a=h;break;case 1:n=c,i=r,a=h;break;case 2:n=h,i=r,a=l;break;case 3:n=h,i=c,a=r;break;case 4:n=l,i=h,a=r;break;case 5:n=r,i=h,a=c}return[Math.floor(255*n),Math.floor(255*i),Math.floor(255*a)]},hslToRgb:function(t,e,r){var n,i,a;if(0===e)n=i=a=r;else{var o=r<.5?r*(1+e):r+e-r*e,s=2*r-o;n=Vr.hue2rgb(s,o,t+1/3),i=Vr.hue2rgb(s,o,t),a=Vr.hue2rgb(s,o,t-1/3)}return[255*n,255*i,255*a]},hue2rgb:function(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+6*(e-t)*r:r<.5?e:r<2/3?t+(e-t)*(2/3-r)*6:t},rgbaColor:function(t,e,r,n){return"rgba("+(t=Dr(t,0,255))+","+(e=Dr(e,0,255))+","+(r=Dr(r,0,255))+","+(n=Dr(n,0,1))+")"},rgbColor:function(t,e,r){return"rgb("+(t=Dr(t,0,255))+","+(e=Dr(e,0,255))+","+(r=Dr(r,0,255))+")"},greyScale:function(t){var e=Dr(t,0,255);return"rgb("+e+","+e+","+e+")"},randomGrey:function(t,e){t=Dr(t,0,255),e=Dr(e,0,255);var r=Math.round(Math.random(t,e)).toString(10);return"rgb("+r+","+r+","+r+")"},randomRGB:function(t,e){return t=Dr(t,0,255),e=Dr(e,0,255),"rgb("+Math.round(Math.random(t,e)).toString(10)+","+Math.round(Math.random(t,e)).toString(10)+","+Math.round(Math.random(t,e)).toString(10)+")"},randomRGBConstantAlpha:function(t,e,r){return t=Dr(t,0,255),e=Dr(e,0,255),"rgba("+Math.round(Math.random(t,e)).toString(10)+","+Math.round(Math.random(t,e)).toString(10)+","+Math.round(Math.random(t,e)).toString(10)+","+r+")"},addAlpha:function(t,e){var r=this.colorNameToHex(t);r&&(t=r);var n=/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(t);return t.startsWith("rgba")?t:(n&&(t=Vr.hexToRgb(t)),t.startsWith("rgb")?t.replace("rgb","rgba").replace(")",", "+e+")"):t)},getCompositeColor:function(t,e,r){return"rgb("+Math.floor(r*e[0]+(1-r)*t[0])+","+Math.floor(r*e[1]+(1-r)*t[1])+","+Math.floor(r*e[2]+(1-r)*t[2])+")"},createColorString:function(t){return(t=function(t){return(t.startsWith("'")||t.startsWith('"'))&&(t=t.substring(1)),(t.endsWith("'")||t.endsWith('"'))&&(t=t.substring(0,t.length-1)),t}(t)).includes(",")?t.startsWith("rgb")?t:"rgb("+t+")":t},darkenLighten:function(t,e){var r=this.colorNameToHex(t),n=(r?Vr.hexToRgb(r):t.startsWith("rgb(")?t:Vr.hexToRgb(t)).replace(")","").substring(4).split(","),i=Math.max(0,Math.min(255,Number.parseInt(n[0].trim())+e)),a=Math.max(0,Math.min(255,Number.parseInt(n[1].trim())+e)),o=Math.max(0,Math.min(255,Number.parseInt(n[2].trim())+e));return"rgb("+i.toString()+","+a.toString()+","+o.toString()+")"},colorNameToHex:function(t){return{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c","indigo ":"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32",darkgrey:"#a9a9a9",darkslategrey:"#2f4f4f",dimgrey:"#696969",grey:"#808080",lightgray:"#d3d3d3",lightslategrey:"#778899",slategrey:"#708090"}[t]}};function jr(t,e){var r=cr("<div>");t.append(r),r.append(_r("times")),r.on("click",(function(t){t.preventDefault(),t.stopPropagation(),e()}))}function Gr(t,e,r){var n=Object.values(Ar);r&&"function"!=typeof r&&(n.splice(11,1),n.unshift(Vr.rgbToHex(r)));for(var i=function(){var r=o[a],n=cr("<div>",{class:"igv-color-swatch"});t.append(n),n.css("background-color",r),"white"===r||(n.hover((function(){n.get(0).style.borderColor=r}),(function(){n.get(0).style.borderColor="white"})),n.on("click.trackview",(function(t){t.stopPropagation(),e(r)})),n.on("touchend.trackview",(function(t){t.stopPropagation(),e(r)})))},a=0,o=n;a<o.length;a++)i()}var Wr=function(t,e){var r=t.getBoundingClientRect(),n=r.x,i=r.y,a=(r.width,r.height,e.getBoundingClientRect());return{x:a.x-n,y:a.y-i,width:a.width,height:a.height}};function Zr(t){if(t.type.startsWith("touch")){var e=t.touches[0];return{x:e.pageX,y:e.pageY}}return{x:t.pageX,y:t.pageY}}function Xr(t,e){var r=cr(e);r.offset();var n=Zr(t);return{x:n.x-r.offset().left,y:n.y-r.offset().top}}function Yr(){return("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)}var Kr=xr.trackMenuItemListHelper,Qr=function(t,e){this.browser=e,this.$parent=Jr.call(this,t)};function Jr(t){var e,r=this;return this.$popover=cr('<div class="igv-popover">'),t.append(this.$popover),e=cr('<div class="igv-popover-header">'),this.$popover.append(e),jr(e,(function(){r.hide()})),this.$popoverContent=cr("<div>"),this.$popover.append(this.$popoverContent),vr(this.$popover.get(0),e.get(0)),t}function tn(t,e,r){var n,i,a=t,o=cr(window).width(),s=(cr(window).height(),t),h=e;return n=s-=r.$parent.offset().left,a+(i={x:s,y:h-=r.$parent.offset().top,width:r.$popover.outerWidth(),height:r.$popover.outerHeight()}).width>o&&(n=s-i.width),{left:n+"px",top:h+"px"}}Qr.prototype.hide=function(){this.$popover.hide()},Qr.prototype.presentTrackContextMenu=function(e,r){var n=this.$popover;if(cr(".igv-popover").hide(),r.length>0){r=Kr(r,n),this.$popoverContent.empty(),this.$popoverContent.removeClass(),this.$popoverContent.addClass("igv-popover-track-popup-content");var i=!0,a=!1,o=t;try{for(var s,h=r[Symbol.iterator]();!(i=(s=h.next()).done);i=!0){var c=s.value;this.$popoverContent.append(c.object)}}catch(t){a=!0,o=t}finally{try{i||null==h.return||h.return()}finally{if(a)throw o}}var l=Zr(e);n.css(tn(l.x,l.y,this)),n.show()}},Qr.prototype.presentTrackContent=function(e,r,n){cr(".igv-popover").hide(),t!==n&&(this.$popoverContent.empty(),this.$popoverContent.removeClass(),this.$popoverContent.addClass("igv-popover-track-popup-content"),this.$popoverContent.html(n),this.$popover.css(tn(e,r,this)),this.$popover.show())},Qr.prototype.dispose=function(){this.$popover.empty(),this.$popoverContent.empty(),Object.keys(this).forEach((function(e){this[e]=t}))};var en=function(t,e){return e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.prototype._super=Object.getPrototypeOf(e.prototype),e};function rn(e){var r=new Set(["boolean","number","string","symbol"]),n=R(e);return e!==t&&(r.has(n)||e.substring||e.toFixed)}function nn(t,e){var r={oauthToken:t.oauthToken,headers:t.headers,withCredentials:t.withCredentials,filename:t.filename};return Object.assign(r,e)}function an(t,e){var r=document.createElement("a");r.setAttribute("href",e),r.setAttribute("download",t),r.style.display="none",document.body.appendChild(r),r.click(),document.body.removeChild(r)}var on=function(t){var e,r;return t.length>0?(e=Number.MAX_VALUE,r=-Number.MAX_VALUE,t.forEach((function(t){Number.isNaN(t.value)||(e=Math.min(e,t.value),r=Math.max(r,t.value))})),r>0&&(e=Math.min(0,e)),r<0&&(r=0)):(e=0,r=100),{min:e,max:r}},sn=function(e,r,n){var i=r.start,a=r.end;if(t===a)(a=(i-=n/2)+n)>e?i=(a=e)-n:i<0&&(i=0,a=n);else if(a-i<n){var o=(a+i)/2;o-n/2<0?a=(i=0)+n:o+n/2>e?i=(a=e)-n:a=(i=o-n/2)+n}r.start=Math.ceil(i),r.end=Math.floor(a)},hn=function(t){this.viewport=t,this.browser=t.browser,this.$rulerSweeper=cr('<div class="igv-ruler-sweeper-div">'),cr(t.contentDiv).append(this.$rulerSweeper),this.namespace=".sweeper_"+Yr(),this.addMouseHandlers()};function cn(t){return this.viewport.genomicState.referenceFrame.start+t*this.viewport.genomicState.referenceFrame.bpPerPixel}hn.prototype.disableMouseHandlers=function(){cr(document).off(this.namespace),this.viewport.$viewport.off(this.namespace)},hn.prototype.addMouseHandlers=function(){var e,r,n,i,a,o,s=this.browser,h=this;this.disableMouseHandlers(),e=r=n=t,cr(this.browser.$root).on("mousedown"+this.namespace,(function(t){r=!0,n=Xr(t,h.viewport.$viewport).x,!0===e&&(h.$rulerSweeper.show(),a=1,i=n,h.$rulerSweeper.css({left:i+"px"}),h.$rulerSweeper.width(a))})),cr(this.browser.$root).on("mousemove"+this.namespace,(function(t){var s;e&&r&&(s=Xr(t,h.viewport.$viewport).x,s=Math.min(s,h.viewport.$viewport.width()),s=Math.max(s,0),o=s-n,a=Math.abs(o),h.$rulerSweeper.width(a),o<0&&(i=n+o,h.$rulerSweeper.css({left:i+"px"})))})),cr(this.browser.$root).on("mouseup"+this.namespace,(function(n){var o;!0===e&&!0===r&&(e=r=t,h.$rulerSweeper.hide(),(o={}).start=cn.call(h,i),o.end=cn.call(h,i+a),a>1&&(sn(s.genome.getChromosome(h.viewport.genomicState.referenceFrame.chrName).bpLength,o,s.minimumBases()),h.viewport.genomicState.referenceFrame.bpPerPixel=(Math.round(o.end)-Math.round(o.start))/h.viewport.$viewport.width(),h.viewport.genomicState.referenceFrame.start=Math.round(o.start),s.updateViews(h.viewport.genomicState)))})),this.viewport.$viewport.on("mousedown"+this.namespace,(function(t){e=!0}))},hn.prototype.dispose=function(){this.disableMouseHandlers()};var ln=function(t,e,r,n){this.start=t,this.end=e,this.name=r,this.stain=0,"acen"===n?this.type="c":(this.type=n.charAt(1),"p"===this.type&&(this.stain=parseInt(n.substring(4))))},un=function(t,e,r,n){this.chr=t,this.start=e,this.end=r,this.features=n};un.prototype.contains=function(t,e,r){return this.chr===t&&this.start<=e&&this.end>=r},un.prototype.containsRange=function(t){return this.chr===t.chr&&this.start<=t.start&&this.end>=t.end};var fn=function(t,e,r,n,i){this.name=t,this.order=e,this.bpStart=r,this.bpLength=n,this.rangeLocus=i},pn={fileInfoCache:{},isGoogleURL:function(t){return t.includes("googleapis")&&!t.includes("urlshortener")||this.isGoogleCloudURL(t)||this.isGoogleStorageURL(t)||this.isGoogleDrive(t)},isGoogleStorageURL:function(t){return t.startsWith("https://www.googleapis.com/storage")||t.startsWith("https://storage.cloud.google.com")||t.startsWith("https://storage.googleapis.com")},isGoogleCloudURL:function(t){return t.startsWith("gs://")},isGoogleDrive:function(t){return t.indexOf("drive.google.com")>=0||t.indexOf("www.googleapis.com/drive")>0},setApiKey:function(t){this.apiKey=t},translateGoogleCloudURL:function(t){var e,r,n,i,a,o;return e=t.indexOf("/",5),i=t.indexOf("?"),e<0?t:(r=t.substring(5,e),a=i<0?t.substring(e+1):t.substring(e+1,i),n=encodeURIComponent(a),i>0&&(o=t.substring(i)),"https://www.googleapis.com/storage/v1/b/"+r+"/o/"+n+(o?o+"&alt=media":"?alt=media"))},addApiKey:function(e){var r=this.apiKey;if(r!==t&&!e.includes("key=")){var n=e.includes("?")?"&":"?";e=e+n+"key="+r}return e},driveDownloadURL:function(t){var e=dn(t);return e?"https://www.googleapis.com/drive/v3/files/"+e+"?alt=media&supportsTeamDrives=true":t},getDriveFileInfo:function(t){var e="https://www.googleapis.com/drive/v3/files/"+dn(t)+"?supportsTeamDrives=true";return On.loadJson(e,nn({}))},loadGoogleProperties:function(t){var e=this;return On.loadArrayBuffer(t).then((function(t){var r,n;r=new Br.Gunzip(new Uint8Array(t)).decompress(),n=String.fromCharCode.apply(null,r);var i=JSON.parse(n);return e.setApiKey(i.api_key),e.properties=i,i}))}};function dn(t){var e,r;if(t.includes("/open?id=")){if(e=t.indexOf("/open?id=")+9,r=t.indexOf("&"),e>0&&r>e)return t.substring(e,r);if(e>0)return t.substring(e)}else if(t.includes("/file/d/"))return e=t.indexOf("/file/d/")+8,r=t.lastIndexOf("/"),t.substring(e,r)}var gn={oauthTokens:{},setToken:function(t,e){e?this.oauthTokens[e]=t:this.google.access_token=t},getToken:function(t){var e;if(t)for(var r in this.oauthTokens){if(new RegExp("^"+r.split(/\*+/).map(mn).join(".*")+"$").test(t)){e=this.oauthTokens[r];break}}else e=this.google.access_token;return e},removeToken:function(t){t?delete this.oauthTokens[t]:delete gn.google.access_token},google:{setToken:function(t){this.access_token=t}}};function mn(t){return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")}function vn(t,e){var r=[],n=0,i=0;for(e=e||t.byteLength-18;n<e;)try{var a=new Uint8Array(t,n,18),o=a[11]<<8|a[10],s=(a[12],a[13],a[15],a[14],1+(a[17]<<8|a[16])),h=12+o+n,c=t.byteLength-h,l=s-o-19;if(c<l)break;var u=new Uint8Array(t,h,l),f=new Br.RawInflate(u),p=f.decompress();n+=f.ip+26,i+=p.byteLength,r.push(p)}catch(t){console.error(t);break}if(1===r.length)return r[0];for(var d=new Uint8Array(i),g=0,m=0;m<r.length;++m){var v=new Uint8Array(r[m]);wn(v,0,d,g,v.length),g+=v.length}return d}function bn(t){var e=new Uint8Array(t);return e[17]<<8|e[16]+1}var yn="function"==typeof new Uint8Array(1).subarray;function wn(t,e,r,n,i){if(0!==i){if(!t)throw"Undef src";if(!r)throw"Undef dest";0===e&&i===t.length?xn(t,r,n):yn?xn(t.subarray(e,e+i),r,n):1===t.BYTES_PER_ELEMENT&&i>100?xn(new Uint8Array(t.buffer,t.byteOffset+e,i),r,n):function(t,e,r,n,i){for(var a=0;a<i;++a)r[n+a]=t[e+a]}(t,e,r,n,i)}}function xn(t,e,r){e.set(t,r)}function kn(t){var e,r;return t instanceof File?t.name:((e=(r=(e=t.lastIndexOf("/"))<0?t:t.substr(e+1)).indexOf("?"))>0&&(r=r.substr(0,e)),r)}function Sn(t){return t instanceof File}function _n(t){var e=t.split(","),r=e[0].split(":")[1],n=e[1];n=r.indexOf("base64")>=0?atob(n):decodeURI(n);for(var i,a=new Uint8Array(n.length),o=0;o<n.length;o++)a[o]=n.charCodeAt(o);r.indexOf("gzip")>0?i=new Br.Gunzip(a).decompress():i=a;return i}function Cn(t){for(var e=An,r=e.parser.loose.exec(t),n={},i=14;i--;)n[e.key[i]]=r[i]||"";return n[e.q.name]={},n[e.key[12]].replace(e.q.parser,(function(t,r,i){r&&(n[e.q.name][r]=i)})),n}"object"===("undefined"==typeof process?"undefined":R(process))&&"undefined"==typeof window&&(global.atob=function(t){return Buffer.from(t,"base64").toString("binary")});var En,An={strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},Tn={401:"Access unauthorized",403:"Access forbidden",404:"Not found"},Rn=function(t){var e=this;this.$container=cr("<div>",{class:"igv-alert-dialog-container"}),t.append(this.$container);var r=cr("<div>");this.$container.append(r);var n=cr("<div>",{id:"igv-alert-dialog-body"});this.$container.append(n),this.$body=cr("<div>",{id:"igv-alert-dialog-body-copy"}),n.append(this.$body);var i=cr("<div>");this.$container.append(i),this.$ok=cr("<div>"),i.append(this.$ok),this.$ok.text("OK"),this.$ok.on("click",(function(){e.$body.html(""),e.$container.hide()})),this.$container.hide()};Rn.prototype.configure=function(t){this.$body.html(t.label)},Rn.prototype.present=function(t,e){var r=this,n=t.message||t;Tn.hasOwnProperty(n)&&(n=Tn[n]),this.$body.html(n),this.$ok.on("click",(function(){"function"==typeof e&&e("OK"),r.$body.html(""),r.$container.hide()})),this.$container.show()};var Ln,In,Mn={init:function(t){En||(En=new Rn(t))},presentAlert:function(t,e){En.present(t,e)}},Pn=0,Dn=1,Fn=2,Nn=3,Bn=new(function(){function e(r){M(this,e),this.wait=r===t?100:r,this.isCalled=!1,this.calls=[]}return D(e,[{key:"limiter",value:function(t){var e=this,r=function t(){e.calls.length&&!e.isCalled&&(e.isCalled=!0,e.calls.shift().call(),setTimeout((function(){e.isCalled=!1,t()}),e.wait))};return function(){e.calls.push(t.bind.apply(t,[this].concat(Array.prototype.slice.call(arguments)))),r()}}}]),e}())(100),On={load:(Ln=I(e.mark((function t(r,n){var i,a;return e.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=function(){return(a=I(e.mark((function t(r,n){var i,a,o,s,h;return e.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(h=function(){return(h=I(e.mark((function t(r,n){return e.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,i){pn.isGoogleURL(r)&&(r.startsWith("gs://")?r=pn.translateGoogleCloudURL(r):pn.isGoogleStorageURL(r)&&(r.includes("altMedia=")||(r+=r.includes("?")?"&altMedia=true":"?altMedia=true")),r=pn.addApiKey(r));var a=n.headers||{};n.token&&$n(a,n.token);var o=n.range,s=navigator.userAgent.indexOf("Chrome")>-1;0===navigator.vendor.indexOf("Apple")&&/\sSafari\//.test(navigator.userAgent),o&&s&&!Un(r)&&(r+=r.includes("?")?"&":"?",r+="someRandomSeed="+Math.random().toString(36));var h=new XMLHttpRequest,c=n.sendData||n.body,l=n.method||(c?"POST":"GET"),u=n.responseType,f=n.contentType,p=n.mimeType;if(h.open(l,r),o){var d=o.size?o.start+o.size-1:"";h.setRequestHeader("Range","bytes="+o.start+"-"+d)}if(f&&h.setRequestHeader("Content-Type",f),p&&h.overrideMimeType(p),u&&(h.responseType=u),a)for(var g=0,m=Object.keys(a);g<m.length;g++){var v=m[g],b=a[v];h.setRequestHeader(v,b)}!0===n.withCredentials&&(h.withCredentials=!0),h.onload=function(){var i=I(e.mark((function i(a){var s;return e.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0===h.status||h.status>=200&&h.status<=300)){e.next=4;break}o&&206!==h.status&&0!==o.start?(h.response.length>1e5&&Mn.presentAlert("Warning: Range header ignored for URL: ".concat(r,".  This can have performance impacts.")),t(h.response.slice(o.start,o.start+o.size))):t(h.response),e.next=20;break;case 4:if("undefined"==typeof gapi||404!==h.status&&401!==h.status||!pn.isGoogleURL(r)||n.retries){e.next=19;break}return e.prev=5,n.retries=1,e.next=9,Gn();case 9:return s=e.sent,n.oauthToken=s,e.abrupt("return",On.load(r,n));case 14:e.prev=14,e.t0=e.catch(5),y(e.t0);case 17:e.next=20;break;case 19:403===h.status?y("Access forbidden: "+r):416===h.status?y("Unsatisfiable range"):y(h.status);case 20:case"end":return e.stop()}}),i,null,[[5,14]])})));return function(t){return i.apply(this,arguments)}}(),h.onerror=function(t){y("Error accessing resource: "+r+" Status: "+h.status)},h.ontimeout=function(t){y("Timed out")},h.onabort=function(t){i(t)};try{h.send(c)}catch(t){i(t)}function y(t){if(!i)throw new Error(t);i(new Error(t))}})));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)},s=function(t,e){return h.apply(this,arguments)},o=function(t){return t&&(n.token=t),s(r,n)},r=qn(r),(i=(n=n||{}).oauthToken)||(i=Hn(r)),!i){t.next=16;break}if(!(a="function"==typeof i?i():i).then||"function"!=typeof a.then){t.next=13;break}return t.abrupt("return",a.then(o));case 13:return t.abrupt("return",o(a));case 14:t.next=17;break;case 16:return t.abrupt("return",s(r,n));case 17:case"end":return t.stop()}}),t)})))).apply(this,arguments)},i=function(t,e){return a.apply(this,arguments)},n=n||{},!(r instanceof File)){t.next=7;break}return t.abrupt("return",zn(r,n));case 7:if(!r.startsWith("data:")){t.next=11;break}return t.abrupt("return",_n(r));case 11:if(!jn(r)){t.next=15;break}return t.abrupt("return",new Promise((function(t,a){Bn.limiter(function(){var r=I(e.mark((function r(n,o){var s;return e.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{s=i(n,o),t(s)}catch(t){a(t)}case 1:case"end":return e.stop()}}),r)})));return function(t,e){return r.apply(this,arguments)}}())(r,n)})));case 15:return t.abrupt("return",i(r,n));case 16:case"end":return t.stop()}}),t)}))),function(t,e){return Ln.apply(this,arguments)}),loadArrayBuffer:function(t,e){return(e=e||{}).responseType="arraybuffer",t instanceof File?zn(t,e):On.load(t,e)},loadJson:function(t,e){return"POST"===((e=e||{}).method||(e.sendData?"POST":"GET"))&&(e.contentType="application/json"),On.load(t,e).then((function(t){return t?JSON.parse(t):t}))},loadString:function(t,e){return e=e||{},t instanceof File?function(t,e){var r=(e=e||{}).range?t.slice(e.range.start,e.range.start+e.range.size):t;return new Promise((function(n,i){var a=new FileReader,o=Pn;e.bgz||t.name.endsWith(".bgz")?o=Fn:t.name.endsWith(".gz")&&(o=Dn),a.onload=function(t){return n(o===Pn?a.result:Vn(a.result,o))},a.onerror=function(e){var r=a.error;i(r+" "+t.name,a)},o===Pn?a.readAsText(r):a.readAsArrayBuffer(r)}))}(t,e):function(t,e){var r=(e=e||{}).filename||kn(t),n=Nn;e.bgz?n=Fn:r.endsWith(".gz")&&(n=Dn);return e.responseType="arraybuffer",On.load(t,e).then((function(t){return Vn(t,n)}))}(t,e)},startup:function(){var t=window.document.location.href;Cn(t).host;if(0===Zn&&!t.includes("localhost")&&!t.includes("127.0.0.1")){Zn++;On.load("https://data.broadinstitute.org/igv/projects/current/counter_igvjs.php?version=0").then((function(t){})).catch((function(t){}))}}};function zn(t,e){return new Promise((function(r,n){var i=new FileReader;if(i.onload=function(t){r(i.result)},i.onerror=function(t){n(null,i)},e.range){var a=t.slice(e.range.start,e.range.start+e.range.size);"arraybuffer"===e.responseType?i.readAsArrayBuffer(a):i.readAsBinaryString(a)}else"arraybuffer"===e.responseType?i.readAsArrayBuffer(t):i.readAsBinaryString(t)}))}function Un(t){return t.indexOf("X-Amz-Signature")>-1}function Hn(t){var e=Cn(t).host,r=gn.getToken(e);return!r&&pn.isGoogleURL(t)&&(r=gn.google.access_token),r}function $n(t,e){return e&&(t["Cache-Control"]="no-cache",t.Authorization="Bearer "+e),t}function qn(t){return t.includes("//www.dropbox.com")?t.replace("//www.dropbox.com","//dl.dropboxusercontent.com"):t.includes("//drive.google.com")?pn.driveDownloadURL(t):t.includes("//www.broadinstitute.org/igvdata")?t.replace("//www.broadinstitute.org/igvdata","//data.broadinstitute.org/igvdata"):t.includes("//igvdata.broadinstitute.org")?t.replace("//igvdata.broadinstitute.org","https://dn7ywbm9isq8j.cloudfront.net"):t}function Vn(t,e){if(e===Nn&&t.byteLength>2){var r=new Uint8Array(t,0,2);31===r[0]&&139===r[1]&&(e=Dn)}var n;e===Dn?n=new Br.Gunzip(new Uint8Array(t)).decompress():n=e===Fn?vn(t):new Uint8Array(t);return"TextDecoder"in function(){if("undefined"!=typeof self)return self;return"undefined"!=typeof global?global:window}()?(new TextDecoder).decode(n):function(t){var e="",r=0;for(;r<t.length;){var n=t[r],i=0,a=0;if(n<=127?(i=0,a=255&n):n<=223?(i=1,a=31&n):n<=239?(i=2,a=15&n):n<=244&&(i=3,a=7&n),t.length-r-i>0)for(var o=0;o<i;)n=t[r+o+1],a=a<<6|63&n,o+=1;else a=65533,i=t.length-r;e+=String.fromCodePoint(a),r+=i+1}return e}(n)}function jn(t){return t.includes("drive.google.com")||t.includes("www.googleapis.com/drive")}function Gn(){return Wn.apply(this,arguments)}function Wn(){return(Wn=I(e.mark((function r(){var n;return e.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!gn.google.access_token){e.next=2;break}return e.abrupt("return",gn.google.access_token);case 2:if(!In){e.next=4;break}return e.abrupt("return",In);case 4:if(gapi&&gapi.auth2){e.next=6;break}throw new Error("The Google oAuth API is required but not loaded");case 6:if(gapi.auth2.getAuthInstance()){e.next=10;break}return Mn.presentAlert("Authorization is required, but Google oAuth has not been initalized.  Contact your site administrator for assistance."),e.abrupt("return",t);case 10:return"https://www.googleapis.com/auth/devstorage.read_only https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/drive.readonly",(n=new gapi.auth2.SigninOptionsBuilder).setPrompt("select_account"),n.setScope("https://www.googleapis.com/auth/devstorage.read_only https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/drive.readonly"),In=new Promise((function(e,r){Mn.presentAlert("Google Login required",(function(){gapi.auth2.getAuthInstance().signIn(n).then((function(r){var n=r.getAuthResponse();gn.google.setToken(n.access_token),e(n.access_token),In=t})).catch((function(e){In=t,r(e)}))}))})),e.abrupt("return",In);case 16:case"end":return e.stop()}}),r)})))).apply(this,arguments)}var Zn=0;var Xn,Yn=new Set(["fastaURL","indexURL","cytobandURL","indexed"]),Kn=function(t){"string"==typeof t.fastaURL&&t.fastaURL.startsWith("data:")?(this.file=function(t){var e,r=t.split(","),n=r[0].split(":")[1],i=r[1];i=n.indexOf("base64")>=0?atob(i):decodeURI(i);e=new Uint8Array(i.length);for(var a=0;a<i.length;a++)e[a]=i.charCodeAt(a);for(var o=new Br.Gunzip(e).decompress(),s="",h=o.length,c=0;c<h;c++)s+=String.fromCharCode(o[c]);return s}(t.fastaURL),this.indexed=!1,this.isDataURI=!0):(this.file=t.fastaURL,this.indexed=!1!==t.indexed,this.indexed&&(this.indexFile=t.indexURL||t.indexFile||this.file+".fai")),this.withCredentials=t.withCredentials,this.chromosomeNames=[],this.chromosomes={},this.sequences={},this.offsets={},this.config=function(t){var e,r={};for(e in t)t.hasOwnProperty(e)&&!Yn.has(e)&&(r[e]=t[e]);return r}(t)};function Qn(t,e,r){var n=this,i=n.interval;if(i&&i.contains(t,e,r))return Promise.resolve(c(i,e,r));var a=e,o=r;if(r-e<5e4){var s=r-e,h=Math.round(e+s/2);a=Math.max(0,h-25e3),o=h+25e3}return n.readSequence(t,a,o).then((function(i){return n.interval=new un(t,a,o,i),c(n.interval,e,r)}));function c(t,e,r){var n=e-t.start,i=r-e;return t.features?t.features.substr(n,i):null}}function Jn(t,e,r){this.offsets[t]&&(e-=this.offsets[t],r-=this.offsets[t]);var n="";if(e<0)for(var i=e;i<Math.min(r,0);i++)n+="*";if(r<=0)return Promise.resolve(n);var a=this.sequences[t];Math.min(r,a.length);return Promise.resolve(n+a.substring(e,r))}Kn.prototype.init=function(){return this.indexed?this.getIndex():this.loadAll()},Kn.prototype.getSequence=function(t,e,r){return this.indexed?Qn.call(this,t,e,r):Jn.call(this,t,e,r)},Kn.prototype.getIndex=function(){if(this.index)return Promise.resolve(this.index);var t=this;return On.load(t.indexFile,nn(t.config)).then((function(e){var r=Hr(e),n=r.length,i=0,a=0;for(t.index={};i<n;){var o=r[i++].split("\t");if(5===o.length){var s=o[0],h=parseInt(o[1]),c={size:h,position:parseInt(o[2]),basesPerLine:parseInt(o[3]),bytesPerLine:parseInt(o[4])};t.chromosomeNames.push(s),t.index[s]=c,t.chromosomes[s]=new fn(s,a++,0,h)}}return t.index}))},Kn.prototype.loadAll=function(){var e=this;return this.isDataURI?Promise.resolve(r(this.file)):On.load(e.file,nn(e.config)).then(r);function r(r){for(var n,i,a=Hr(r),o=a.length,s=0,h="",c=t,l=0,u=0;s<o;)if((n=a[s++].trim()).startsWith("#")||0===n.length);else if(n.startsWith(">")){h&&(e.chromosomeNames.push(i),e.sequences[i]=h,e.chromosomes[i]=new fn(i,u++,l,l+h.length,c));var f=n.substr(1).split(/\s+/)[0].split(":");if(i=f[0],h="",l=0,c=t,f.length>1&&f[1].indexOf("-")>0){var p=f[1].split("-");2===p.length&&/^[0-9]+$/.test(p[0])&&/^[0-9]+$/.test(p[1]);var d=Number.parseInt(p[0]);Number.parseInt(p[1])>d&&(l=d-1,e.offsets[i]=l,c=f[1])}}else h+=n;h&&(e.chromosomeNames.push(i),e.sequences[i]=h,e.chromosomes[i]=new fn(i,u++,l,l+h.length,c))}},Kn.prototype.readSequence=function(t,e,r){var n,i,a,o,s,h=this;return h.getIndex().then((function(){var c=h.index[t];if(c){i=Math.max(0,e),a=Math.min(c.size,r);var l=c.bytesPerLine;o=c.basesPerLine;var u=c.position;s=l-o;var f=Math.floor(i/o),p=Math.floor(a/o),d=u+f*l+(n=i-f*o),g=u+p*l+(a-p*o)-1-d+1;return g<=0?(console.error("No sequence for "+t+":"+e+"-"+r),""):On.load(h.file,nn(h.config,{range:{start:d,size:g}}))}return h.interval=new un(t,e,r,null),null})).then((function(t){if(t){var e,r="",h=0,c=t.length;for(n>0&&(e=Math.min(a-i,o-n),r+=t.substr(h,e),h+=e+s);h<c;)e=Math.min(o,c-h),r+=t.substr(h,e),h+=e+s;return r}return null}))};var ti,ei,ri={loadGenome:(ei=I(e.mark((function t(r){var n,i,a,o,s;return e.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.cytobandURL,i=r.aliasURL,a=new Kn(r),t.next=5,a.init();case 5:if(!n){t.next=9;break}return t.next=8,ai(n,a.config);case 8:o=t.sent;case 9:if(!i){t.next=13;break}return t.next=12,oi(i,a.config);case 12:s=t.sent;case 13:return t.abrupt("return",new ni(r,a,o,s));case 14:case"end":return t.stop()}}),t)}))),function(t){return ei.apply(this,arguments)}),getKnownGenomes:(ti=I(e.mark((function t(){var r,n,i;return e.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=function(t){var e={};return t.forEach((function(t){e[t.id]=t})),Xn=e,e},r=ri.genomeList,!Xn){t.next=6;break}return t.abrupt("return",Xn);case 6:if(r){t.next=10;break}return t.abrupt("return",{});case 10:if("string"!=typeof r){t.next=17;break}return t.next=13,On.loadJson(r,{});case 13:return n=t.sent,t.abrupt("return",i(n));case 17:return t.abrupt("return",i(r));case 18:case"end":return t.stop()}}),t)}))),function(){return ti.apply(this,arguments)}),isWholeGenomeView:function(t){return"all"===t.chrName.toLowerCase()}},ni=function(e,r,n,i){this.config=e,this.id=e.id,this.sequence=r,this.chromosomeNames=r.chromosomeNames,this.chromosomes=r.chromosomes,this.ideograms=n,this.wholeGenomeView=e.wholeGenomeView===t||e.wholeGenomeView,this.wholeGenomeView&&Object.keys(r.chromosomes).length>1?function(e,r){var n;if(r.chromosomeOrder)e.wgChromosomeNames=r.chromosomeOrder.split(",").map((function(t){return t.trim()})),n=e.wgChromosomeNames.map((function(t){return e.chromosomes[t]})).filter((function(e){return e!==t}));else{var i=Object.keys(e.chromosomes).map((function(t){return e.chromosomes[t].bpLength})).reduce((function(t,e){return Math.max(t,e)}))/50,a=(n=Object.values(e.chromosomes).filter((function(t){return t.bpLength>i}))).filter((function(t){return g(t.name.replace("chr",""))})),o=n.filter((function(t){return!g(t.name.replace("chr",""))}));a.sort((function(t,e){return Number.parseInt(t.name.replace("chr",""))-Number.parseInt(e.name.replace("chr",""))}));var s=a.map((function(t){return t.name})),h=!0,c=!1,l=t;try{for(var u,f=o[Symbol.iterator]();!(h=(u=f.next()).done);h=!0){var p=u.value;s.push(p.name)}}catch(t){c=!0,l=t}finally{try{h||null==f.return||f.return()}finally{if(c)throw l}}e.wgChromosomeNames=s}var d=n.reduce((function(t,e){return t+e.bpLength}),0);function g(t){return/^\d+$/.test(t)}e.chromosomes.all={name:"all",bpLength:d}}(this,e):this.wgChromosomeNames=r.chromosomeNames;var a={},o=this;a.all="all",this.chromosomeNames.forEach((function(t){var e=t.startsWith("chr")?t.substring(3):"chr"+t;a[e.toLowerCase()]=t,"chrM"===t&&(a.mt="chrM"),"MT"===t&&(a.chrm="MT"),a[t.toLowerCase()]=t})),i&&i.forEach((function(t){var e,r;for(r=0;r<t.length;r++)if(o.chromosomes[t[r]]){e=t[r];break}e&&t.forEach((function(t){t!==e&&(a[t.toLowerCase()]=e,a[t]=e)}))})),this.chrAliasTable=a};function ii(){var e={},r=0,n=!0,i=!1,a=t;try{for(var o,s=this.wgChromosomeNames[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var h=o.value;e[h]=Math.floor(r),r+=this.getChromosome(h).bpLength}}catch(t){i=!0,a=t}finally{try{n||null==s.return||s.return()}finally{if(i)throw a}}return e}function ai(t,e){if(t.startsWith("data:")){var r=function(t){var e;if(t.startsWith("data:application/gzip;base64"))e=_n(t);else{var r,n=t.split(","),i=n[0].split(":")[1],a=n[1];a=i.indexOf("base64")>=0?atob(a):decodeURI(a),r=new Uint8Array(a.length);for(var o=0;o<a.length;o++)r[o]=a.charCodeAt(o);var s=new Br.Gunzip(r);e=s.decompress()}for(var h="",c=e.length,l=0;l<c;l++)h+=String.fromCharCode(e[l]);return h}(t);return Promise.resolve(n(r))}return On.loadString(t,nn(e)).then((function(t){return n(t)}));function n(t){for(var e,r=[],n=0,i=Hr(t),a=i.length,o={},s=0;s<a;s++){var h=i[s].split("\t"),c=h[0];if(e||(e=c),c!==e&&(o[e]=r,r=[],e=c,n=0),5===h.length){var l=parseInt(h[1]),u=parseInt(h[2]),f=h[3],p=h[4];r[n++]=new ln(l,u,f,p)}}return o}}function oi(t,e){return On.loadString(t,nn(e)).then((function(t){var e=Hr(t),r=[];return e.forEach((function(t){!t.startsWith("#")&&t.length>0&&r.push(t.split("\t"))})),r}))}ni.prototype.showWholeGenomeView=function(){return!1!==this.config.wholeGenomeView},ni.prototype.toJSON=function(){return Object.assign({},this.config,{tracks:t})},ni.prototype.getInitialLocus=function(){},ni.prototype.getHomeChromosomeName=function(){if(this.showWholeGenomeView()&&this.chromosomes.hasOwnProperty("all"))return"all";var t=this.chromosomes[this.chromosomeNames[0]];return t.rangeLocus?t.name+":"+t.rangeLocus:this.chromosomeNames[0]},ni.prototype.getChromosomeName=function(t){var e=this.chrAliasTable[t.toLowerCase()];return e||t},ni.prototype.getChromosome=function(t){return t=this.getChromosomeName(t),this.chromosomes[t]},ni.prototype.getCytobands=function(t){return this.ideograms?this.ideograms[t]:null},ni.prototype.getLongestChromosome=function(){var e,r=this.chromosomes;for(var n in r){if(r.hasOwnProperty(n)){var i=r[n];(e===t||i.bpLength>e.bpLength)&&(e=i)}return e}},ni.prototype.getChromosomes=function(){return this.chromosomes},ni.prototype.getGenomeCoordinate=function(e,r){var n=this.getCumulativeOffset(e);return n===t?t:n+r},ni.prototype.getChromosomeCoordinate=function(e){this.cumulativeOffsets===t&&(this.cumulativeOffsets=ii.call(this));var r=t,n=0,i=!0,a=!1,o=t;try{for(var s,h=this.wgChromosomeNames[Symbol.iterator]();!(i=(s=h.next()).done);i=!0){var c=s.value,l=this.cumulativeOffsets[c];if(l>e)return{chr:r,position:e-n};r=c,n=l}}catch(t){a=!0,o=t}finally{try{i||null==h.return||h.return()}finally{if(a)throw o}}return{chr:this.chromosomeNames[this.chromosomeNames.length-1],position:0}},ni.prototype.getCumulativeOffset=function(e){this.cumulativeOffsets===t&&(this.cumulativeOffsets=ii.call(this));var r=this.getChromosomeName(e);return this.cumulativeOffsets[r]},ni.prototype.getGenomeLength=function(){var t=this;if(!this.bpLength){var e=0;t.wgChromosomeNames.forEach((function(r){var n=t.chromosomes[r];e+=n.bpLength})),this.bpLength=e}return this.bpLength};function si(t,e,r,n){var i=this;this.guid=Yr(),this.trackView=t,this.genomicState=r,this.browser=t.browser,this.$viewport=cr('<div class="igv-viewport-div">'),e.append(this.$viewport),this.$viewport.data("viewportGUID",this.guid);var a=cr("<div>",{class:"igv-viewport-content-div"});this.$viewport.append(a),a.height(this.$viewport.height()),this.contentDiv=a.get(0);var o=cr("<canvas>");if(cr(this.contentDiv).append(o),this.canvas=o.get(0),this.ctx=this.canvas.getContext("2d"),this.setWidth(n),"sequence"===t.track.type&&this.$viewport.addClass("igv-viewport-sequence"),"ruler"===t.track.type)this.rulerSweeper=new hn(this),t.track.appendMultiPanelCloseButton(this.$viewport,this.genomicState),this.$rulerLabel=cr('<div class = "igv-multi-locus-panel-label-div">'),this.$rulerLabel.click((function(t){i.browser.selectMultiLocusPanelWithGenomicState(i.genomicState)})),cr(this.contentDiv).append(this.$rulerLabel),!0===ri.isWholeGenomeView(this.genomicState.referenceFrame)?ui.call(this):fi.call(this);else if(gi.call(this),this.$spinner=cr('<div class="igv-viewport-spinner">'),this.$spinner.append(_r("spinner")),this.$viewport.append(this.$spinner),this.stopSpinner(),"sequence"!==t.track.type){this.popover=new Qr(this.browser.$content);var s=t.track.name.toLowerCase().split(" ").join("_");s=s+"_"+this.browser.genomicStateList.indexOf(this.genomicState),this.popover.$popover.attr("id",s),this.$zoomInNotice=hi.call(this,cr(this.contentDiv))}t.track.name&&(this.$trackLabel=cr('<div class="igv-track-label">'),this.$viewport.append(this.$trackLabel),this.setTrackLabel(t.track.name),!1===this.browser.trackLabelsVisible&&this.$trackLabel.hide(),this.$trackLabel.click((function(e){var r;e.stopPropagation(),r="function"==typeof t.track.description?t.track.description():t.track.description?t.track.description:t.track.name;var n=Zr(e);i.popover.presentTrackContent(n.x,n.y,r)})),this.$trackLabel.mousedown((function(t){t.stopPropagation()})),this.$trackLabel.mouseup((function(t){t.stopPropagation()})),this.$trackLabel.mousemove((function(t){t.stopPropagation()})))}function hi(t){var e=cr('<div class="zoom-in-notice-container">');t.append(e);var r=cr("<div>");return e.append(r),r.text("Zoom in to see features"),e.hide(),e}function ci(e,r,n){if(r&&(e.features=r,this.trackView.track.draw(e)),n){var i=!0,a=!1,o=t;try{for(var s,h=n[Symbol.iterator]();!(i=(s=h.next()).done);i=!0){var c=s.value;e.features=c.features,c.track.draw(e)}}catch(t){a=!0,o=t}finally{try{i||null==h.return||h.return()}finally{if(a)throw o}}}}function li(){return this.browser&&this.browser.genomicStateList&&this.genomicState.referenceFrame}function ui(){var t=".ruler_track_viewport_"+this.browser.genomicStateList.indexOf(this.genomicState),e=this;this.$viewport.on("click"+t,(function(t){var r,n=Xr(t,e.$viewport.get(0)).x,i=Math.round(e.genomicState.referenceFrame.start+e.genomicState.referenceFrame.toBP(n));if(1===e.browser.genomicStateList.length)r=e.browser.genome.getChromosomeCoordinate(i).chr;else{var a=e.browser.genomicStateList.map((function(t){return t.locusSearchString}));a[e.browser.genomicStateList.indexOf(e.genomicState)]=e.browser.genome.getChromosomeCoordinate(i).chr,r=a.join(" ")}e.browser.search(r)}))}function fi(){var t=".ruler_track_viewport_"+this.browser.genomicStateList.indexOf(this.genomicState);this.$viewport.off(t)}function pi(t){var e=Wr(this.$viewport.get(0),this.$trackLabel.get(0)),r=e.x,n=e.y,i=e.width,a=e.height,o=t.measureText(this.$trackLabel.text()).width;t.fillStyle="white",t.fillRect(r,n,i,a),t.font="12px Arial",t.fillStyle="rgb(68, 68, 68)";var s=.25*(i-o),h=.7*(a-12);t.fillText(this.$trackLabel.text(),r+s,n+a-h),t.strokeStyle="rgb(68, 68, 68)",t.strokeRect(r,n,i,a)}si.prototype.isVisible=function(){return this.$viewport.width()},si.prototype.setTrackLabel=function(t){this.trackView.track.name=this.trackView.track.config.name=t,this.$trackLabel.empty(),this.$trackLabel.html(t);var e=this.$trackLabel.text();this.$trackLabel.attr("title",e)},si.prototype.setWidth=function(t){this.$viewport.outerWidth(t),this.canvas.style.width=this.$viewport.width()+"px",this.canvas.setAttribute("width",this.$viewport.width())},si.prototype.startSpinner=function(){var t=this.$spinner;t&&(t.addClass("igv-fa5-spin"),t.show())},si.prototype.stopSpinner=function(){var t=this.$spinner;t&&(t.hide(),t.removeClass("igv-fa5-spin"))},si.prototype.showMessage=function(t){this.messageDiv||(this.messageDiv=document.createElement("div"),this.messageDiv.className="igv-viewport-message",this.contentDiv.append(this.messageDiv)),this.messageDiv.textContent=t,this.messageDiv.style.display="inline-block"},si.prototype.hideMessage=function(t){this.messageDiv&&(this.messageDiv.style.display="none")},si.prototype.checkZoomIn=function(){if(!li.call(this))return!1;if(this.$zoomInNotice){if(function(){var e=this.genomicState.referenceFrame;if("all"!==e.chrName.toLowerCase()||this.trackView.track.supportsWholeGenome()){var r="function"==typeof this.trackView.track.getVisibilityWindow?this.trackView.track.getVisibilityWindow():this.trackView.track.visibilityWindow;return r!==t&&r>0&&e.bpPerPixel*this.$viewport.width()>r}return!0}.call(this)){if(this.canvas&&(this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.tile=t),this.$zoomInNotice.show(),this.trackView.track.autoHeight){var e=this.trackView.minHeight||0;this.setContentHeight(e)}return!1}return this.$zoomInNotice.hide(),!0}return!0},si.prototype.shift=function(){var t=this.genomicState.referenceFrame;if(this.canvas&&this.tile&&this.tile.chr===t.chrName&&this.tile.bpPerPixel===t.bpPerPixel){var e=Math.round((this.tile.startBP-t.start)/t.bpPerPixel);this.canvas.style.left=e+"px"}},si.prototype.setTop=function(t){var e=-t,r=e+this.$viewport.height();cr(this.contentDiv).css("top",t+"px"),(!this.canvasVerticalRange||this.canvasVerticalRange.bottom<r||this.canvasVerticalRange.top>e)&&this.repaint()},si.prototype.loadFeatures=I(e.mark((function r(){var n,i,a,o,s,h,c,l,u,f,p,d,g,m,v,b,y,w;return e.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.genomicState,i=n.referenceFrame,a=i.chrName,o=this.browser.genome.getChromosome(a).bpLength,s=3*cr(this.contentDiv).width(),h=s*i.bpPerPixel,c=Math.floor(Math.max(0,i.start-h/3)),l=Math.ceil(Math.min(o,c+h)),!this.loading||this.loading.start!==c||this.loading.end!==l){e.next=10;break}return e.abrupt("return",t);case 10:return this.loading={start:c,end:l},this.startSpinner(),e.prev=12,e.next=15,mi.call(this,i.chrName,c,l,i.bpPerPixel);case 15:if(u=e.sent,f=[],!(p=bi(this.browser.roi,this.trackView.track.roi))){e.next=47;break}d=!0,g=!1,m=t,e.prev=22,v=p[Symbol.iterator]();case 24:if(d=(b=v.next()).done){e.next=33;break}return y=b.value,e.next=28,y.getFeatures(i.chrName,c,l,i.bpPerPixel);case 28:w=e.sent,f.push({track:y,features:w});case 30:d=!0,e.next=24;break;case 33:e.next=39;break;case 35:e.prev=35,e.t0=e.catch(22),g=!0,m=e.t0;case 39:e.prev=39,e.prev=40,d||null==v.return||v.return();case 42:if(e.prev=42,!g){e.next=45;break}throw m;case 45:return e.finish(42);case 46:return e.finish(39);case 47:return this.tile=new di(i.chrName,c,l,i.bpPerPixel,u,f),this.loading=!1,this.hideMessage(),this.stopSpinner(),e.abrupt("return",this.tile);case 54:e.prev=54,e.t1=e.catch(12),this.showMessage("Error loading track data"),console.error(e.t1);case 58:return e.prev=58,this.loading=!1,this.stopSpinner(),e.finish(58);case 62:case"end":return e.stop()}}),r,this,[[12,54,58,62],[22,35,39,47],[40,,42,46]])}))),si.prototype.repaint=function(){var t=I(e.mark((function t(r){var n,i,a,o,s,h,c,l,u,f,p,d,g,m,v,b,y,w;return e.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this,r||(r=this.tile),r){t.next=4;break}return t.abrupt("return");case 4:if(i=ri.isWholeGenomeView(this.genomicState.referenceFrame),a=r.features,o=r.roiFeatures,s=this.genomicState,h=s.referenceFrame,c=i?h.initialEnd/this.$viewport.width():r.bpPerPixel,l=i?0:r.startBP,u=i?h.initialEnd:r.endBP,f=i?this.$viewport.width():Math.ceil((u-l)/c),p=this.$viewport.height(),d=Math.min(n.getContentHeight(),3*p),0!==f&&0!==d){t.next=18;break}return n.canvas&&cr(n.canvas).remove(),t.abrupt("return");case 18:g=Math.max(0,-cr(this.contentDiv).position().top-p),m="FILL"===this.trackView.track.displayMode?window.devicePixelRatio:!1===this.trackView.track.supportHiDPI?1:window.devicePixelRatio,v={features:a,pixelWidth:f,pixelHeight:d,pixelTop:g,bpStart:l,bpEnd:u,bpPerPixel:c,referenceFrame:h,genomicState:s,selection:n.selection,viewport:n,viewportWidth:n.$viewport.width(),viewportContainerX:h.toPixels(h.start-l),viewportContainerWidth:this.browser.viewportContainerWidth()},(b=cr("<canvas>").get(0)).style.width=f+"px",b.style.height=d+"px",b.width=m*f,b.height=m*d,(y=b.getContext("2d")).scale(m,m),w=Math.round((l-h.start)/h.bpPerPixel),b.style.position="absolute",b.style.left=w+"px",b.style.top=g+"px",v.context=y,y.translate(0,-g),ci.call(this,v,a,o),this.canvasVerticalRange={top:g,bottom:g+d},n.canvas&&cr(n.canvas).remove(),cr(n.contentDiv).append(b),n.canvas=b,n.ctx=y;case 40:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),si.prototype.toSVG=function(){var t=I(e.mark((function t(r){var n,i,a,o,s,h,c,l,u,f,p;return e.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.$zoomInNotice||!this.$zoomInNotice.is(":visible")){t.next=2;break}return t.abrupt("return");case 2:return n=this.genomicState,i=n.referenceFrame,a=r.bpPerPixel,o=r.features,s=r.roiFeatures,h=this.$viewport.width(),c=this.$viewport.height(),l=i.start,u=i.start+h*i.bpPerPixel,f=new gr({width:h,height:c,viewbox:{x:0,y:-cr(this.contentDiv).position().top,width:h,height:c}}),p={viewport:this,context:f,top:-cr(this.contentDiv).position().top,pixelTop:0,pixelWidth:h,pixelHeight:c,bpStart:l,bpEnd:u,bpPerPixel:a,referenceFrame:i,genomicState:this.genomicState,selection:this.selection,viewportWidth:h,viewportContainerX:0,viewportContainerWidth:this.browser.viewportContainerWidth()},ci.call(this,p,o,s),t.abrupt("return",f.getSerializedSvg(!0));case 15:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),si.prototype.setContentHeight=function(t){t=Math.min(t,32e3),cr(this.contentDiv).height(t),this.tile&&(this.tile.invalidate=!0)},si.prototype.getContentHeight=function(){return cr(this.contentDiv).height()},si.prototype.getContentTop=function(){return this.contentDiv.offsetTop},si.prototype.isLoading=function(){return this.loading},si.prototype.saveImage=function(){if(this.ctx){var t=this.canvasVerticalRange?this.canvasVerticalRange.top:0,e=window.devicePixelRatio,r=this.$viewport.width()*e,n=this.$viewport.height()*e,i=-cr(this.canvas).position().left*e,a=(-cr(this.contentDiv).position().top-t)*e,o=this.ctx.getImageData(i,a,r,n),s=document.createElement("canvas"),h=s.getContext("2d");s.width=o.width,s.height=o.height,h.putImageData(o,0,0),an((this.$trackLabel.text()?this.$trackLabel.text():"image")+".png",s.toDataURL("image/png"))}},si.prototype.renderSVGContext=function(){var r=I(e.mark((function r(n,i){var a,o,s,h,c,l,u,f,p,d,g,m,v,b,y,w;return e.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.$zoomInNotice||!this.$zoomInNotice.is(":visible")){e.next=2;break}return e.abrupt("return");case 2:a=(a=this.trackView.track.name||this.trackView.track.id).replace(/\W/g,""),o=this.browser.genomicStateList.indexOf(this.genomicState),s=a.toLowerCase()+"_genomic_state_index_"+o,0===o&&"function"==typeof this.trackView.track.paintAxis&&(h=this.trackView.controlCanvas.getBoundingClientRect(),n.addTrackGroupWithTranslationAndClipRect(s+"_axis",i.deltaX-h.width,i.deltaY,h.width,h.height,0),n.save(),this.trackView.track.paintAxis(n,h.width,h.height),n.restore()),c=cr(this.contentDiv).position().top,l=i.deltaX+o*n.multiLocusGap,u=i.deltaY+c,f=this.$viewport.get(0).getBoundingClientRect(),p=f.width,d=f.height,n.addTrackGroupWithTranslationAndClipRect(s,l,u,p,d,-c),g=this.genomicState.referenceFrame,m=g.start,v=g.bpPerPixel,n.save(),b={context:n,viewport:this,referenceFrame:g,genomicState:this.genomicState,pixelWidth:p,pixelHeight:d,viewportWidth:p,viewportContainerX:0,viewportContainerWidth:this.browser.viewportContainerWidth(),bpStart:m,bpEnd:m+p*v,bpPerPixel:v,selection:this.selection},y=this.tile?this.tile.features:[],w=this.tile?this.tile.roiFeatures:t,ci.call(this,b,y,w),this.$trackLabel&&!0===this.browser.trackLabelsVisible&&pi.call(this,n),n.restore();case 21:case"end":return e.stop()}}),r,this)})));return function(t,e){return r.apply(this,arguments)}}(),si.prototype.saveSVG=function(){var t=this.$viewport.width(),e=this.$viewport.height(),r=new gr({width:t,height:e,viewbox:{x:0,y:-cr(this.contentDiv).position().top,width:t,height:e}}),n=this.genomicState.referenceFrame,i=n.start,a=n.bpPerPixel,o={viewport:this,context:r,top:-cr(this.contentDiv).position().top,pixelTop:0,pixelWidth:t,pixelHeight:e,bpStart:i,bpEnd:i+t*a,bpPerPixel:a,referenceFrame:this.genomicState.referenceFrame,genomicState:this.genomicState,selection:this.selection,viewportWidth:t,viewportContainerX:0,viewportContainerWidth:this.browser.viewportContainerWidth()};ci.call(this,o,this.tile.features),this.$trackLabel&&!0===this.browser.trackLabelsVisible&&pi.call(this,r);var s=o.context.getSerializedSvg(!0),h=URL.createObjectURL(new Blob([s],{type:"application/octet-stream"}));an((this.$trackLabel?this.$trackLabel.text():this.trackView.track.id)+".svg",h)},si.prototype.dispose=function(){var e=this;this.popover&&(this.popover.$popover.off(),this.popover.$popover.empty(),this.popover.$popover.remove()),cr(this.canvas).off(),cr(this.canvas).empty(),cr(this.contentDiv).off(),cr(this.contentDiv).empty(),this.$viewport.off(),this.$viewport.empty(),Object.keys(this).forEach((function(r,n,i){e[r]=t}))},si.prototype.getCachedFeatures=function(){return this.tile?this.tile.features:[]};var di=function(t,e,r,n,i,a){this.chr=t,this.startBP=e,this.endBP=r,this.bpPerPixel=n,this.features=i,this.roiFeatures=a};function gi(){var e,r=this,n=this.browser,i=0;function a(t){if(r.browser.isDragging||r.browser.isScrolling)return r.browser.cancelTrackPan(),t.preventDefault(),t.stopPropagation(),void(r.enableClick=!1);r.browser.cancelTrackPan(),r.browser.endTrackDrag()}function o(e,r){var n=r.genomicState.referenceFrame,i=Xr(e,r.contentDiv),a=Xr(e,r.canvas),o=n.start+n.toBP(i.x);return t===o||null===r.tile?t:{viewport:r,referenceFrame:n,genomicLocation:o,x:i.x,y:i.y,canvasX:a.x,canvasY:a.y}}this.$viewport.on("contextmenu",(function(e){if(r.browser.isDragging)return!1;var n=o(e,r);if(t===n)return!1;e.preventDefault();var i=[];"function"==typeof r.trackView.track.contextMenuItemList&&(i=r.trackView.track.contextMenuItemList(n)),i.length>0&&i.push({label:cr("<HR>")}),i.push({label:"Save Image (PNG)",click:function(){r.saveImage()}}),i.push({label:"Save Image (SVG)",click:function(){r.saveSVG()}}),r.popover&&r.popover.presentTrackContextMenu(e,i)})),this.$viewport.on("mousedown",(function(t){r.enableClick=!0,n.mouseDownOnViewport(t,r),Zr(t)})),this.$viewport.on("touchstart",(function(t){r.enableClick=!0,n.mouseDownOnViewport(t,r),Zr(t)})),this.$viewport.on("mouseup",a),this.$viewport.on("touchend",a),this.$viewport.on("click",(function(a){r.enableClick&&function(a){if(3===a.which||a.ctrlKey)return;if(cr(".igv-popover").hide(),n.isDragging||n.isScrolling)return;a.preventDefault(),a.stopPropagation();var s=Xr(a,r.$viewport.get(0)).x,h=Xr(a,r.canvas).x,c=r.genomicState.referenceFrame,l=Math.floor(c.start+c.toBP(h)),u=Date.now();if(u-i<n.constants.doubleClickDelay){e&&(window.clearTimeout(e),e=t);var f,p=Math.round(c.start+c.toBP(s));if("all"===c.chrName.toLowerCase()){var d=n.genome.getChromosomeCoordinate(p).chr;if(1===n.genomicStateList.length)f=d;else{var g=n.genomicStateList.map((function(t){return t.locusSearchString}));g[n.genomicStateList.indexOf(r.genomicState)]=d,f=g.join(" ")}n.search(f)}else n.zoomWithScaleFactor(.5,p,r)}else a.shiftKey&&"function"==typeof r.trackView.track.shiftClick?r.trackView.track.shiftClick(l,a):"function"==typeof r.trackView.track.popupData&&(e=setTimeout((function(){var i=function(e,r){var i=o(e,r);if(t===i)return;var a,s=r.trackView.track,h=s.popupData(i),c=n.fireEvent("trackclick",[s,h]);t===c||!0===c?h&&h.length>0&&(l='<table class="igv-popover-table">',h.forEach((function(t){t.name?l+='<tr><td class="igv-popover-td"><div class="igv-popover-name-value"><span class="igv-popover-name">'+t.name+'</span><span class="igv-popover-value">'+t.value+"</span></div></td></tr>":l+="<tr><td>"+t.toString()+"</td></tr>"})),a=l+="</table>"):"string"==typeof c&&(a=c);var l;return a}(a,r);if(i){var s=Zr(a);r.popover.presentTrackContent(s.x,s.y,i)}clearTimeout(e),e=t}),n.constants.doubleClickDelay));i=u}(a)}))}function mi(t,e,r,n){return vi.apply(this,arguments)}function vi(){return(vi=I(e.mark((function r(n,i,a,o){var s,h;return e.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=this.trackView.track,!this.tile||!this.tile.containsRange(n,i,a,o)){e.next=5;break}return e.abrupt("return",this.tile.features);case 5:if("function"!=typeof s.getFeatures){e.next=14;break}return e.next=8,s.getFeatures(n,i,a,o,this);case 8:return h=e.sent,this.cachedFeatures=h,this.checkContentHeight(),e.abrupt("return",h);case 14:return e.abrupt("return",t);case 15:case"end":return e.stop()}}),r,this)})))).apply(this,arguments)}function bi(t,e){return t&&e?t.concat(e):t||e}di.prototype.containsRange=function(t,e,r,n){return this.bpPerPixel===n&&e>=this.startBP&&r<=this.endBP&&t===this.chr},di.prototype.overlapsRange=function(t,e,r){return this.chr===t&&r>=this.startBP&&e<=this.endBP},si.prototype.checkContentHeight=function(){var t=this.trackView.track;if("FILL"===t.displayMode)this.setContentHeight(this.$viewport.height());else if("function"==typeof t.computePixelHeight){var e=this.cachedFeatures;if(e){var r=t.computePixelHeight(e);r!==cr(this.contentDiv).height()&&this.setContentHeight(r)}}};var yi=2,wi={color:1};wi.parent=wi,wi.left=wi,wi.right=wi;var xi=function(){this.root=wi};function ki(t,e,r){return e.interval.overlaps(t)&&r.push(e.interval),e.left!==wi&&e.left.max>=t.low&&ki.call(this,t,e.left,r),e.right!==wi&&e.right.min<=t.high&&ki.call(this,t,e.right,r),r}function Si(t){var e=t.right;t.right=e.left,e.left!==wi&&(e.left.parent=t),e.parent=t.parent,t.parent===wi?this.root=e:t.parent.left===t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e,Ci.call(this,t)}function _i(t){var e=t.left;t.left=e.right,e.right!==wi&&(e.right.parent=t),e.parent=t.parent,t.parent===wi?this.root=e:t.parent.right===t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e,Ci.call(this,t)}function Ci(t){for(;t!==wi;){var e=t.left.max>t.right.max?t.left.max:t.right.max,r=t.interval.high;t.max=e>r?e:r;var n=t.left.min<t.right.min?t.left.min:t.right.min,i=t.interval.low;t.min=n<i?n:i,t=t.parent}}function Ei(t,e,r){this.low=t,this.high=e,this.value=r}function Ai(t){this.parent=wi,this.left=wi,this.right=wi,this.interval=t,this.color=yi}xi.prototype.insert=function(t,e,r){var n=new Ai(new Ei(t,e,r));for(this.treeInsert(n),n.color=yi;n!==this.root&&n.parent.color===yi;)if(n.parent===n.parent.parent.left){var i=n.parent.parent.right;i.color===yi?(n.parent.color=1,i.color=1,n.parent.parent.color=yi,n=n.parent.parent):(n===n.parent.right&&(n=n.parent,Si.call(this,n)),n.parent.color=1,n.parent.parent.color=yi,_i.call(this,n.parent.parent))}else{var a=n.parent.parent.left;a.color===yi?(n.parent.color=1,a.color=1,n.parent.parent.color=yi,n=n.parent.parent):(n===n.parent.left&&(n=n.parent,_i.call(this,n)),n.parent.color=1,n.parent.parent.color=yi,Si.call(this,n.parent.parent))}this.root.color=1},xi.prototype.findOverlapping=function(t,e){var r=new Ei(t,e,0);if(this.root===wi)return[];var n=ki.call(this,r,this.root,[]);return n.length>1&&n.sort((function(t,e){return t.low-e.low})),n},xi.prototype.logIntervals=function(){!function t(e,r){e.left!==wi&&t(e.left);e.right!==wi&&t(e.right)}(this.root)},xi.prototype.mapIntervals=function(t){!function e(r){t(r.interval);r.left!==wi&&e(r.left);r.right!==wi&&e(r.right)}(this.root)},xi.prototype.treeInsert=function(t){for(var e=this.root,r=wi;e!==wi;)r=e,e=t.interval.low<=e.interval.low?e.left:e.right;t.parent=r,r===wi?(this.root=t,t.left=t.right=wi):t.interval.low<=r.interval.low?r.left=t:r.right=t,Ci.call(this,t)},Ei.prototype.equals=function(t){return!!t&&(this===t||this.low===t.low&&this.high===t.high)},Ei.prototype.compareTo=function(t){return this.low<t.low?-1:this.low>t.low?1:this.high<t.high?-1:this.high>t.high?1:0},Ei.prototype.overlaps=function(e){try{return this.low<=e.high&&e.low<=this.high}catch(e){Mn.presentAlert(e,t)}};var Ti=function(t,e,r){if(t&&0!==t.length){var n=function(t){var e=new xi,r=t.length,n=Math.max(10,Math.round(r/100));t.sort((function(t,e){return t.start===e.start?0:t.start>e.start?1:-1}));for(var i=function(i){var a=Math.min(r,i+n),o=t.slice(i,a),s=o[0].start,h=s;o.forEach((function(t){h=Math.max(h,t.end)})),e.insert(s,h,o)},a=0;a<r;a+=n)i(a);return e}(t).findOverlapping(e,r);return 0===n.length?[]:(t=[],n.forEach((function(n){for(var i=n.value,a=i.length,o=0;o<a;o++){var s=i[o];if(s.start>r)break;s.end>e&&t.push(s)}})),t.sort((function(t,e){return t.start-e.start})),t)}return[]};var Ri={setProperties:function(t,e){for(var r in e)if(e.hasOwnProperty(r)){var n=e[r];t[r]=n}},strokeLine:function(t,e,r,n,i,a){e=Math.floor(e)+.5,r=Math.floor(r)+.5,n=Math.floor(n)+.5,i=Math.floor(i)+.5,a&&(t.save(),Ri.setProperties(t,a)),t.beginPath(),t.moveTo(e,r),t.lineTo(n,i),t.stroke(),a&&t.restore()},fillRect:function(t,e,r,n,i,a){e=Math.round(e),r=Math.round(r),a&&(t.save(),Ri.setProperties(t,a)),t.fillRect(e,r,n,i),a&&t.restore()},fillPolygon:function(t,e,r,n){n&&(t.save(),Ri.setProperties(t,n)),Li(t,e,r),t.fill(),n&&t.restore()},strokePolygon:function(t,e,r,n){n&&(t.save(),Ri.setProperties(t,n)),Li(t,e,r),t.stroke(),n&&t.restore()},fillText:function(t,e,r,n,i,a){if((i||a)&&t.save(),i&&Ri.setProperties(t,i),a){for(var o in t.translate(r,n),a){var s=a[o];"translate"===o&&t.translate(s.x,s.y),"rotate"===o&&t.rotate(s.angle*Math.PI/180)}t.fillText(e,0,0)}else t.fillText(e,r,n);(i||a)&&t.restore()},strokeText:function(t,e,r,n,i,a){if((i||a)&&t.save(),i&&Ri.setProperties(t,i),a){for(var o in t.translate(r,n),a){var s=a[o];"translate"===o&&t.translate(s.x,s.y),"rotate"===o&&t.rotate(s.angle*Math.PI/180)}t.strokeText(e,0,0)}else t.strokeText(e,r,n);(i||a)&&t.restore()},strokeCircle:function(t,e,r,n,i){i&&(t.save(),Ri.setProperties(t,i)),t.beginPath(),t.arc(e,r,n,0,2*Math.PI),t.stroke(),i&&t.restore()},fillCircle:function(t,e,r,n,i){i&&(t.save(),Ri.setProperties(t,i)),t.beginPath(),t.arc(e,r,n,0,2*Math.PI),t.fill(),i&&t.restore()},drawArrowhead:function(t,e,r,n,i){t.save(),n||(n=5),i&&(t.lineWidth=i),t.beginPath(),t.moveTo(e,r-n/2),t.lineTo(e,r+n/2),t.lineTo(e+n,r),t.lineTo(e,r-n/2),t.closePath(),t.fill(),t.restore()},dashedLine:function(e,r,n,i,a,o){var s=arguments.length>6&&arguments[6]!==t?arguments[6]:{};o===t&&(o=2),e.setLineDash([o,o]),Ri.strokeLine(e,r,n,i,a,s),e.setLineDash([])},roundRect:function(t,e,r,n,i,a,o,s){void 0===s&&(s=!0),void 0===a&&(a=5),t.beginPath(),t.moveTo(e+a,r),t.lineTo(e+n-a,r),t.quadraticCurveTo(e+n,r,e+n,r+a),t.lineTo(e+n,r+i-a),t.quadraticCurveTo(e+n,r+i,e+n-a,r+i),t.lineTo(e+a,r+i),t.quadraticCurveTo(e,r+i,e,r+i-a),t.lineTo(e,r+a),t.quadraticCurveTo(e,r,e+a,r),t.closePath(),s&&t.stroke(),o&&t.fill()},polygon:function(t,e,r,n,i){void 0===i&&(i=!0),t.beginPath();var a=e.length;t.moveTo(e[0],r[0]);for(var o=1;o<a;o++)t.lineTo(e[o],r[o]);t.closePath(),i&&t.stroke(),n&&t.fill()}};function Li(t,e,r){var n,i=e.length;for(n=0;n<i;n++)e[n]=Math.round(e[n]),r[n]=Math.round(r[n]);for(t.beginPath(),t.moveTo(e[0],r[0]),n=1;n<i;n++)t.lineTo(e[n],r[n]);t.closePath()}var Ii=function(t){this.browser=t,this.height=40,this.name="",this.id="ruler",this.disableButtons=!0,this.ignoreTrackMenu=!0,this.order=-Number.MAX_VALUE,this.removable=!1,this.type="ruler"};function Mi(e){e.context.save(),Ri.fillRect(e.context,0,0,e.pixelWidth,e.pixelHeight,{fillStyle:"white"});var r=e.pixelHeight,n=!0,i=!1,a=t;try{for(var o,s=this.browser.genome.wgChromosomeNames[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var h=o.value,c=this.browser.genome.getCumulativeOffset(h),l=this.browser.genome.getChromosome(h).bpLength,u=Math.round(c/e.bpPerPixel),f=Math.round(l/e.bpPerPixel);Pi.call(this,e.context,u,0,f,r,h)}}catch(t){i=!0,a=t}finally{try{n||null==s.return||s.return()}finally{if(i)throw a}}e.context.restore()}function Pi(t,e,r,n,i,a){t.textAlign="center",t.textBaseline="middle",t.font="12px sans-serif",Ri.strokeLine(t,e+n,r,e+n,r+i,{strokeStyle:Vr.greyScale(191)});var o=a.startsWith("chr")?a.substring(3):a;n>t.measureText(o).width&&Ri.fillText(t,o,e+n/2,r+i/2,{fillStyle:Vr.greyScale(68)})}Ii.prototype.updateLocusLabel=function(){this.trackView.viewports.forEach((function(t){var e;e=t.genomicState.referenceFrame.showLocus(t.$viewport.width()),t.$rulerLabel.text(e)}))},Ii.prototype.appendMultiPanelCloseButton=function(t,e){var r,n=this.browser;t.addClass("igv-viewport-ruler"),r=cr('<div class="igv-multi-locus-panel-close-container">'),t.append(r),r.append(_r("times-circle")),r.click((function(t){n.removeMultiLocusPanelWithGenomicState(e,!0)}))},Ii.prototype.getFeatures=function(t,e,r){return Promise.resolve([])},Ii.prototype.computePixelHeight=function(t){return this.height},Ii.prototype.draw=function(t){if(ri.isWholeGenomeView(t.referenceFrame))t.viewport.rulerSweeper.disableMouseHandlers(),Mi.call(this,t);else{t.viewport.rulerSweeper.addMouseHandlers();var e=1+Math.floor(t.referenceFrame.toBP(t.pixelWidth));new Di(e,t).drawTicks(t,6,2,this.height),Ri.strokeLine(t.context,0,this.height-2,t.pixelWidth,this.height-2)}},Ii.prototype.supportsWholeGenome=function(){return!0},Ii.prototype.dispose=function(){};var Di=function(t,e){function r(t,e,r,n){this.majorTick=!0===n?2*t:t,this.majorUnit=e,this.halfTick=t/2,this.unitMultiplier=r}(function(t,e){var n,i,a,o,s=e.context.isSVG||!1;t<10&&r.call(this,1,"bp",1,s);(n=Math.floor(Math.log10(t)))>9?(i="gb",a=1e9):n>6?(i="mb",a=1e6):n>3?(i="kb",a=1e3):(i="bp",a=1);o=Ur(Math.floor(t/a))+" "+i,this.labelWidthBP=Math.round(e.referenceFrame.toBP(e.context.measureText(o).width)),t/Math.pow(10,n-1)<25?r.call(this,Math.pow(10,n-1),i,a,s):r.call(this,Math.pow(10,n)/2,i,a,s)}).call(this,t,e)};Di.prototype.drawTicks=function(t,e,r,n){var i,a,o,s,h,c,l;for(i=Math.floor(t.bpStart/this.majorTick)-1,h=0,c=0,o=0;o<t.pixelWidth;)a=Math.floor(i*this.majorTick),o=Math.round(t.referenceFrame.toPixels(a-1-t.bpStart+.5)),s=Ur(Math.floor(a/this.unitMultiplier))+" "+this.majorUnit,h=t.context.measureText(s).width,c=Math.round(o-h/2),Ri.fillText(t.context,s,c,n-e/.75),Ri.strokeLine(t.context,o,n-e,o,n-r),++i;for(i=Math.floor(t.bpStart/this.halfTick)-1,o=0;o<t.pixelWidth;)a=Math.floor(i*this.halfTick),o=Math.round(t.referenceFrame.toPixels(a-1-t.bpStart+.5)),(l=a/this.unitMultiplier)===Math.floor(l)&&this.majorTick/this.labelWidthBP>8&&(s=Ur(Math.floor(l))+" "+this.majorUnit,c=o-(h=t.context.measureText(s).width)/2,Ri.fillText(t.context,s,c,n-e/.75)),Ri.strokeLine(t.context,o,n-e,o,n-r),++i},Di.prototype.description=function(t){};var Fi=xr.trackMenuItemListHelper,Ni=function(t){this.$popover=cr("<div>",{class:"igv-trackgear-popover"}),t.append(this.$popover);var e=cr("<div>",{class:"igv-trackgear-popover-header"});this.$popover.append(e);var r=this;jr(e,(function(){r.$popover.hide()})),this.$popoverContent=cr("<div>"),this.$popover.append(this.$popoverContent),vr(this.$popover.get(0),e.get(0)),e.on("click.track_gear_popover",(function(t){t.stopPropagation(),t.preventDefault()}))};Ni.prototype.presentMenuList=function(e,r,n){if(n.length>0){this.$popoverContent.empty(),n=Fi(n,this.$popover);var i=!0,a=!1,o=t;try{for(var s,h=n[Symbol.iterator]();!(i=(s=h.next()).done);i=!0){var c=s.value;c.init&&c.init();var l=c.object;0===n.indexOf(c)&&l.removeClass("igv-track-menu-border-top"),l.hasClass("igv-track-menu-border-top")||l.hasClass("igv-trackgear-popover-check-container")||l.is("div")&&l.addClass("igv-trackgear-popover-shim"),this.$popoverContent.append(l)}}catch(t){a=!0,o=t}finally{try{i||null==h.return||h.return()}finally{if(a)throw o}}this.$popover.css({left:e+"px",top:r+"px"}),this.$popover.show()}},Ni.prototype.dispose=function(){this.$popover.empty(),this.$popoverContent.empty(),Object.keys(this).forEach((function(e){this[e]=t}))};var Bi=function(t){var e,r=t.$parent,n=t.width,i=t.height,a=t.closeHandler;this.namespace=".generic_container_"+Yr();var o=cr("<div>",{class:"igv-generic-container"});r.append(o),this.$container=o,n&&this.$container.width(n),i&&this.$container.height(i);var s=r.get(0).getBoundingClientRect();this.origin={x:s.x,y:s.y},this.$container.offset({left:this.origin.x,top:this.origin.y}),e=cr("<div>"),this.$container.append(e);var h=cr("<i>");e.append(h),h.append(_r("times")),h.on("mousedown"+this.namespace,(function(t){t.stopPropagation()})),h.on("mouseup"+this.namespace,(function(t){t.stopPropagation()})),h.on("click"+this.namespace,(function(t){t.preventDefault(),t.stopPropagation(),a(t)})),h.on("touchend"+this.namespace,(function(t){t.preventDefault(),t.stopPropagation(),a(t)})),vr(this.$container.get(0),e.get(0))},Oi=function(t,e,r){var n,i,a=this;this.browser=t,this.track=r,r.trackView=this,i=cr('<div class="igv-track-div">'),this.trackDiv=i.get(0),e.append(i),this.namespace=".trackview_"+Yr(),this.track instanceof Ii&&(this.trackDiv.dataset.rulerTrack="rulerTrack"),r.height&&(this.trackDiv.style.height=r.height+"px"),this.appendLeftHandGutter(cr(this.trackDiv)),this.$viewportContainer=cr('<div class="igv-viewport-container">'),cr(this.trackDiv).append(this.$viewportContainer),this.viewports=[],n=this.browser.viewportContainerWidth()/this.browser.genomicStateList.length,t.genomicStateList.forEach((function(t){var e;e=new si(a,a.$viewportContainer,t,n),a.viewports.push(e)})),this.decorateViewports(),this.configureViewportContainer(this.$viewportContainer,this.viewports),!0===this.track.ignoreTrackMenu||this.appendRightHandGutter(cr(this.trackDiv)),this.track instanceof Ii||Hi.call(this,cr(this.trackDiv),this.$viewportContainer),"sequence"===this.track.type||this.track instanceof Ii||this.createColorPicker()};function zi(t){var e=cr("<div>",{class:"igv-trackgear-container"});t.append(e),e.append(_r("cog")),this.trackGearPopover=new Ni(t),this.trackGearPopover.$popover.hide();var r=this;e.click((function(t){t.preventDefault(),t.stopPropagation(),r.trackGearPopover.presentMenuList(-r.trackGearPopover.$popover.width(),0,xr.trackMenuItemList(r))}))}function Ui(t,e){var r=window.devicePixelRatio;if(this.leftHandGutter){this.controlCanvas&&cr(this.controlCanvas).remove();var n=cr('<canvas class ="igv-track-control-canvas">');this.controlCanvas=n[0],cr(this.leftHandGutter).append(n),this.controlCanvas.height=r*e,this.controlCanvas.width=r*t,this.controlCanvas.style.height=e+"px",this.controlCanvas.style.width=t+"px",this.controlCtx=this.controlCanvas.getContext("2d"),this.controlCtx.scale(r,r)}}function Hi(t,e){var r=this,n=this.browser;this.$trackDragScrim=cr('<div class="igv-track-drag-scrim">'),e.append(this.$trackDragScrim),this.$trackDragScrim.hide(),r.$trackManipulationHandle=cr('<div class="igv-track-manipulation-handle">'),t.append(r.$trackManipulationHandle),r.$trackManipulationHandle.on("mousedown",(function(t){t.preventDefault(),t.stopPropagation(),r.$trackDragScrim.show(),n.startTrackDrag(r)})),r.$trackManipulationHandle.on("mouseup",(function(t){t.preventDefault(),t.stopPropagation(),n.endTrackDrag(),r.$trackDragScrim.hide()})),t.on("mouseenter",(function(t){n.dragTrack&&(t.preventDefault(),t.stopPropagation(),n.updateTrackDrag(r))})),r.$trackManipulationHandle.on("mouseleave",(function(t){n.dragTrack||(t.preventDefault(),t.stopPropagation(),r.$trackDragScrim.hide())}))}function $i(t){return this.viewports.filter((function(e){if(!e.isVisible())return!1;if(e.checkZoomIn()){var r=e.genomicState.referenceFrame,n=r.chrName,i=r.start,a=i+r.toBP(cr(e.contentDiv).width()),o=r.bpPerPixel;return t||!e.tile||e.tile.invalidate||!e.tile.containsRange(n,i,a,o)}return!1}))}function qi(){var t,e,r=this.maxContentHeight();if(this.track.autoHeight?this.setTrackHeight(r,!1):this.track.paintAxis&&this.track.paintAxis(this.controlCtx,cr(this.controlCanvas).width(),cr(this.controlCanvas).height()),this.scrollbar){var n=this.viewports[0].getContentTop(),i=Math.min(0,this.$viewportContainer.height()-(t=this.viewports,e=t.map((function(t){return t.getContentHeight()})),Math.min.apply(Math,$(e))));n<i&&this.viewports.forEach((function(t){cr(t.contentDiv).css("top",i+"px")})),this.scrollbar.update()}}function Vi(t){var e=t.map((function(t){return t.getContentHeight()}));return Math.max.apply(Math,$(e))}Oi.prototype.renderSVGContext=function(e,r){var n=!0,i=!1,a=t;try{for(var o,s=this.viewports[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var h=o.value,c=h.browser.genomicStateList.indexOf(h.genomicState),l=h.$viewport.get(0).getBoundingClientRect(),u={deltaX:r.deltaX+c*h.$viewport.width(),deltaY:r.deltaY+l.y};h.renderSVGContext(e,u)}}catch(t){i=!0,a=t}finally{try{n||null==s.return||s.return()}finally{if(i)throw a}}},Oi.prototype.configureViewportContainer=function(t,e){return"hidden"===t.css("overflow-y")&&(this.scrollbar=new ji(t,e,this.browser.$root),t.append(this.scrollbar.$outerScroll)),t},Oi.prototype.removeViewportWithLocusIndex=function(t){this.viewports[t].$viewport.remove(),this.viewports.splice(t,1),this.decorateViewports()},Oi.prototype.decorateViewports=function(){var t=this;this.viewports.forEach((function(e,r){var n;n=e.$viewport,t.viewports.length>1?(n.find(".igv-multi-locus-panel-close-container").show(),n.find(".igv-multi-locus-panel-label-div").show()):(n.find(".igv-multi-locus-panel-close-container").hide(),n.find(".igv-multi-locus-panel-label-div").hide()),r<t.viewports.length&&1+r!==t.viewports.length?n.addClass("igv-viewport-div-border-right"):n.removeClass("igv-viewport-div-border-right")}))},Oi.prototype.appendLeftHandGutter=function(t){var e,r,n=this;e=cr('<div class="igv-left-hand-gutter">'),this.leftHandGutter=e[0],t.append(e),"function"==typeof this.track.paintAxis&&(this.track.dataRange&&(e.click((function(t){n.browser.dataRangeDialog.configure({trackView:n}),n.browser.dataRangeDialog.present(cr(n.trackDiv))})),e.addClass("igv-clickable")),r=cr('<canvas class ="igv-track-control-canvas">'),e.append(r),this.controlCanvas=r.get(0),Ui.call(this,e.outerWidth(),e.outerHeight()))},Oi.prototype.appendRightHandGutter=function(t){var e=cr('<div class="igv-right-hand-gutter">');t.append(e),zi.call(this,e)},Oi.prototype.dataRange=function(){return this.track.dataRange?this.track.dataRange:t},Oi.prototype.setDataRange=function(e,r,n){e!==t&&(this.track.dataRange.min=e,this.track.config.min=e),r!==t&&(this.track.dataRange.max=r,this.track.config.max=r),this.track.autoscale=n,this.track.config.autoScale=n,this.repaintViews()},Oi.prototype.setColor=function(t){this.track.color=t,this.track.config.color=t,this.repaintViews(!0)},Oi.prototype.createColorPicker=function(){var e=this,r=this,n={$parent:cr(this.trackDiv),width:384,height:t,closeHandler:function(){r.colorPicker.$container.hide()}};this.colorPicker=new Bi(n),Gr(this.colorPicker.$container,(function(t){return e.setColor(t)}),this.track.color),r.colorPicker.$container.hide()},Oi.prototype.presentColorPicker=function(){var t=this.trackDiv.getBoundingClientRect();this.colorPicker.origin={x:t.x,y:0},this.colorPicker.$container.offset({left:this.colorPicker.origin.x,top:this.colorPicker.origin.y}),this.colorPicker.$container.show()},Oi.prototype.setTrackHeight=function(t,e,r){r||(this.track.minHeight&&(t=Math.max(this.track.minHeight,t)),this.track.maxHeight&&(t=Math.min(this.track.maxHeight,t))),this.track.height=t,this.track.config.height=t,cr(this.trackDiv).height(t),"function"!=typeof this.track.computePixelHeight&&(this.viewports.forEach((function(e){e.setContentHeight(t),e.tile&&(e.tile.invalidate=!0)})),this.repaintViews()),Ui.call(this,cr(this.leftHandGutter).outerWidth(),t),this.track.paintAxis&&this.track.paintAxis(this.controlCtx,cr(this.controlCanvas).width(),cr(this.controlCanvas).height()),this.scrollbar&&this.scrollbar.update()},Oi.prototype.isLoading=function(){for(var t=0;t<this.viewports.length;t++)if(this.viewports[t].isLoading())return!0},Oi.prototype.resize=function(){var t;if(0!==(t=this.browser.viewportContainerWidth()/this.browser.genomicStateList.length)){this.viewports.forEach((function(e){e.setWidth(t)}));var e=cr(this.leftHandGutter);Ui.call(this,e.outerWidth(),e.outerHeight()),this.updateViews(!0)}},Oi.prototype.repaintViews=function(){this.viewports.forEach((function(t){t.repaint()})),this.track.paintAxis&&this.track.paintAxis(this.controlCtx,cr(this.controlCanvas).width(),cr(this.controlCanvas).height())},Oi.prototype.updateViews=function(){var r=I(e.mark((function r(n){var i,a,o,s,h,c,l,u,f,p,d,g,m,v,b,y,w,x,k,S,_,C,E,A,T,R,L,I,M;return e.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.browser&&this.browser.genomicStateList){e.next=2;break}return e.abrupt("return");case 2:(i=this.viewports.filter((function(t){return t.isVisible()}))).forEach((function(t){t.shift()})),a=$i.call(this,n),o=!0,s=!1,h=t,e.prev=8,c=a[Symbol.iterator]();case 10:if(o=(l=c.next()).done){e.next=18;break}return u=l.value,e.next=14,u.loadFeatures();case 14:u.tile&&u.tile.features&&0===u.tile.features.length&&"all"===u.genomicState.referenceFrame.chrName&&u.checkZoomIn();case 15:o=!0,e.next=10;break;case 18:e.next=24;break;case 20:e.prev=20,e.t0=e.catch(8),s=!0,h=e.t0;case 24:e.prev=24,e.prev=25,o||null==c.return||c.return();case 27:if(e.prev=27,!s){e.next=30;break}throw h;case 30:return e.finish(27);case 31:return e.finish(24);case 32:if((f=this.browser.isDragging)||!this.track.autoscale){e.next=55;break}for(p=[],d=!0,g=!1,m=t,e.prev=38,v=i[Symbol.iterator]();!(d=(b=v.next()).done);d=!0)y=b.value,w=y.genomicState.referenceFrame,x=w.start,k=x+w.toBP(cr(y.contentDiv).width()),y.tile&&y.tile.features&&(p=p.concat(Ti(y.tile.features,x,k)));e.next=46;break;case 42:e.prev=42,e.t1=e.catch(38),g=!0,m=e.t1;case 46:e.prev=46,e.prev=47,d||null==v.return||v.return();case 49:if(e.prev=49,!g){e.next=52;break}throw m;case 52:return e.finish(49);case 53:return e.finish(46);case 54:"function"==typeof this.track.doAutoscale?this.track.doAutoscale(p):this.track.dataRange=on(p);case 55:if(f||!this.track.autoscale&&!this.track.autoscaleGroup){e.next=77;break}for(S=!0,_=!1,C=t,e.prev=59,E=i[Symbol.iterator]();!(S=(A=E.next()).done);S=!0)A.value.repaint();e.next=67;break;case 63:e.prev=63,e.t2=e.catch(59),_=!0,C=e.t2;case 67:e.prev=67,e.prev=68,S||null==E.return||E.return();case 70:if(e.prev=70,!_){e.next=73;break}throw C;case 73:return e.finish(70);case 74:return e.finish(67);case 75:e.next=96;break;case 77:for(T=!0,R=!1,L=t,e.prev=80,I=a[Symbol.iterator]();!(T=(M=I.next()).done);T=!0)M.value.repaint();e.next=88;break;case 84:e.prev=84,e.t3=e.catch(80),R=!0,L=e.t3;case 88:e.prev=88,e.prev=89,T||null==I.return||I.return();case 91:if(e.prev=91,!R){e.next=94;break}throw L;case 94:return e.finish(91);case 95:return e.finish(88);case 96:qi.call(this);case 97:case"end":return e.stop()}}),r,this,[[8,20,24,32],[25,,27,31],[38,42,46,54],[47,,49,53],[59,63,67,75],[68,,70,74],[80,84,88,96],[89,,91,95]])})));return function(t){return r.apply(this,arguments)}}(),Oi.prototype.getInViewFeatures=function(){var r=I(e.mark((function r(n){var i,a,o,s,h,c,l,u,f,p,d,g;return e.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.browser&&this.browser.genomicStateList){e.next=2;break}return e.abrupt("return",[]);case 2:return i=$i.call(this,n),a=i.map((function(t){return t.loadFeatures()})),e.next=6,Promise.all(a);case 6:for(o=[],s=!0,h=!1,c=t,e.prev=10,l=this.viewports[Symbol.iterator]();!(s=(u=l.next()).done);s=!0)(f=u.value).tile&&f.tile.features&&(p=f.genomicState.referenceFrame,d=p.start,g=d+p.toBP(cr(f.contentDiv).width()),o=o.concat(Ti(f.tile.features,d,g)));e.next=18;break;case 14:e.prev=14,e.t0=e.catch(10),h=!0,c=e.t0;case 18:e.prev=18,e.prev=19,s||null==l.return||l.return();case 21:if(e.prev=21,!h){e.next=24;break}throw c;case 24:return e.finish(21);case 25:return e.finish(18);case 26:return e.abrupt("return",o);case 27:case"end":return e.stop()}}),r,this,[[10,14,18,26],[19,,21,25]])})));return function(t){return r.apply(this,arguments)}}(),Oi.prototype.checkContentHeight=function(){this.viewports.forEach((function(t){t.checkContentHeight()})),qi.call(this)},Oi.prototype.maxContentHeight=function(){return Vi(this.viewports)},Oi.prototype.dispose=function(){var e=this;this.$trackManipulationHandle&&this.$trackManipulationHandle.off(),this.$innerScroll&&this.$innerScroll.off(),this.scrollbar&&this.scrollbar.dispose(),cr(document).off(this.namespace),"function"==typeof this.track.dispose&&this.track.dispose();var r=this.track;"function"==typeof r.dispose&&r.dispose(),Object.keys(r).forEach((function(e){r[e]=t})),this.viewports.forEach((function(t){t.dispose()})),Object.keys(this).forEach((function(r){e[r]=t}))},Oi.prototype.scrollBy=function(t){this.scrollbar.moveScrollerBy(t)};var ji=function(t,e,r){var n,i=this,a=".trackscrollbar"+Yr();this.namespace=a;var o=cr('<div class="igv-scrollbar-outer-div">');function s(t){t.preventDefault(),t.stopPropagation();var e=Zr(t);i.moveScrollerBy(e.y-n),n=e.y}function h(t){cr(document).off(i.namespace)}this.$outerScroll=o,this.$innerScroll=cr("<div>"),this.$outerScroll.append(this.$innerScroll),this.$viewportContainer=t,this.viewports=e,this.$innerScroll.on("mousedown",(function(t){t.preventDefault();var e=Zr(t);n=e.y,cr(document).on("mousemove"+a,s),cr(document).on("mouseup"+a,h),cr(document).on("mouseleave"+a,h),t.stopPropagation()})),this.$innerScroll.on("click",(function(t){t.stopPropagation()})),this.$outerScroll.on("click",(function(t){i.moveScrollerBy(t.offsetY-i.$innerScroll.height()/2),t.stopPropagation()}))};function Gi(t){return"string"==typeof t||t instanceof String?new Wi(t):new Zi(t)}ji.prototype.moveScrollerBy=function(t){var e=this.$innerScroll.position().top+t;this.moveScrollerTo(e)},ji.prototype.moveScrollerTo=function(t){var e=this.$outerScroll.height(),r=this.$innerScroll.height(),n=Math.min(Math.max(0,t),e-r),i=Vi(this.viewports),a=-Math.round(n*(i/this.$viewportContainer.height()));this.$innerScroll.css("top",n+"px"),this.viewports.forEach((function(t){t.setTop(a)}))},ji.prototype.dispose=function(){cr(window).off(this.namespace)},ji.prototype.update=function(){var t,e,r;t=this.$viewportContainer.height(),e=Vi(this.viewports),r=Math.round(t/e*t),e>t?(this.$outerScroll.show(),this.$innerScroll.height(r)):this.$outerScroll.hide()};var Wi=function(t){this.data=t,this.ptr=0};Wi.prototype.nextLine=function(){var e=this.ptr,r=this.data.indexOf("\n",e);return r>0?(this.ptr=r+1,r===e?t:this.data.substring(e,r).trim()):(this.ptr=this.data.length,e>=this.data.length?t:this.data.substring(e).trim())},Wi.prototype.nextLineNoTrim=function(){var e=this.ptr,r=this.data.indexOf("\n",e),n=this.data;if(r>0)return this.ptr=r+1,r>e&&"\r"===n.charAt(r-1)?n.substring(e,r-1):n.substring(e,r);var i=n.length;return this.ptr=i,e>=i?t:n.substring(e)};var Zi=function(t){this.data=t,this.length=this.data.length,this.ptr=0};Zi.prototype.nextLine=function(){var e,r;if(r="",this.ptr>=this.length)return t;for(var n=this.ptr;n<this.length;n++)if("\r"!==(e=String.fromCharCode(this.data[n]))){if("\n"===e)break;r+=e}return this.ptr=n+1,r},Zi.prototype.nextLineNoTrim=Zi.prototype.nextLine;var Xi={gwascatalog:{fields:["bin","chr","start","end","name","pubMedID","author","pubDate","journal","title","trait","initSample","replSample","region","genes","riskAllele","riskAlFreq","pValue","pValueDesc","orOrBeta","ci95","platform","cnv"]},wgrna:{fields:["bin","chr","start","end","name","score","strand","thickStart","thickEnd","type"]},cpgislandext:{fields:["bin","chr","start","end","name","length","cpgNum","gcNum","perCpg","perGc","obsExp"]},clinVarMain:{fields:["chr1","start","end","name","score","strand","thickStart","thickEnd","reserved","blockCount","blockSizes","chromStarts","origName","clinSign","reviewStatus","type","geneId","snpId","nsvId","rcvAcc","testedInGtr","phenotypeList","phenotype","origin","assembly","cytogenetic","hgvsCod","hgvsProt","numSubmit","lastEval","guidelines","otherIds"]}},Yi=new Set(["narrowpeak","broadpeak","regionpeak","peaks","bedgraph","wig","gff3","gff","gtf","fusionjuncspan","refflat","seg","aed","bed","vcf","bb","bigbed","bw","bigwig","bam","tdf","refgene","genepred","genepredext","bedpe","bp","snp","rmsk","cram"]);function Ki(e){if(function(e){e.featureType&&(e.type=e.type||e.featureType,e.featureType=t);"junctions"===e.type?e.type="spliceJunctions":"bed"===e.type?(e.type="annotation",e.format=e.format||"bed"):"annotations"===e.type?e.type="annotation":"alignments"===e.type?e.type="alignment":"bam"===e.type?(e.type="alignment",e.format="bam"):"vcf"===e.type?(e.type="variant",e.format="vcf"):"t2d"===e.type?e.type="gwas":"FusionJuncSpan"!==e.type||e.format?"aed"===e.type&&(e.type="annotation",e.format=e.format||"aed"):e.format="fusionjuncspan"}(e),t===e.sourceType&&e.url&&(e.sourceType="file"),"file"===e.sourceType)if(t===e.format){var r=Sn(e.url)?e.url.name:e.url;e.format=Qi(r)}else e.format=e.format.toLowerCase();if(t===e.type){if(e.type)return;if(e.format)switch(e.format.toLowerCase()){case"bw":case"bigwig":case"wig":case"bedgraph":case"tdf":e.type="wig";break;case"vcf":e.type="variant";break;case"seg":e.type="seg";break;case"bam":case"cram":e.type="alignment";break;case"bedpe":case"bedpe-loop":e.type="interaction";break;case"bp":e.type="arc";break;default:e.type="annotation"}}}function Qi(e){var r,n;if((e=e.toLowerCase()).endsWith("refgene.txt.gz")||e.endsWith("refgene.txt.bgz")||e.endsWith("refgene.txt")||e.endsWith("refgene.sorted.txt.gz")||e.endsWith("refgene.sorted.txt.bgz"))return"refgene";switch((r=e.indexOf("?"))>0&&(e=e.substr(0,r)),e.endsWith(".gz")&&(e=e.substr(0,e.length-3)),(e.endsWith(".txt")||e.endsWith(".tab")||e.endsWith(".bgz"))&&(e=e.substr(0,e.length-4)),n=(r=e.lastIndexOf("."))<0?e:e.substr(r+1)){case"bw":return"bigwig";case"bb":return"bigbed";default:return Yi.has(n)?n:t}}var Ji=Number.MAX_VALUE,ta=["Name","gene_name","gene","gene_id","alias","locus"],ea=new RegExp("([^:]*)\\(([^)]*)\\)"),ra=new RegExp("([^:]*):([^(]*)\\(([^)]*)\\)"),na=function(e,r,n){var i;if(e!==t&&(this.format=e.toLowerCase()),this.nameField=n?n.nameField:t,this.skipRows=0,r)this.decode=r;else switch(this.format){case"narrowpeak":case"broadpeak":case"regionpeak":case"peaks":this.decode=ma,this.delimiter=/\s+/;break;case"bedgraph":this.decode=va,this.delimiter=/\s+/;break;case"wig":this.decode=ba,this.delimiter=/\s+/;break;case"gff3":case"gff":case"gtf":this.decode=ka,this.delimiter="\t";break;case"fusionjuncspan":this.decode=ya,this.delimiter=/\s+/;break;case"gtexgwas":this.skipRows=1,this.decode=wa,this.delimiter="\t";break;case"refflat":this.decode=da,this.delimiter=/\s+/;break;case"genepred":this.decode=fa,this.delimiter=/\s+/;break;case"genepredext":this.decode=pa,this.delimiter=/\s+/;break;case"ensgene":this.decode=fa,this.shift=1,this.delimiter=/\s+/;break;case"refgene":this.decode=pa,this.delimiter=/\s+/,this.shift=1;break;case"aed":this.decode=Ca,this.delimiter="\t";break;case"bed":this.decode=la,this.delimiter=n.delimiter||/\s+/;break;case"bedpe":this.skipRows=1,this.decode=Ea,this.delimiter=/\s+/;break;case"bedpe-domain":this.decode=Aa,this.headerLine=!0,this.delimiter=/\s+/;break;case"bedpe-loop":this.decode=Ea,this.delimiter=/\s+/,this.skipRows=1,this.header={colorColumn:7};break;case"snp":this.decode=Ta,this.delimiter="\t";break;case"rmsk":this.decode=ua,this.delimiter="\t";break;default:(i=function(e){return Xi&&Xi[e]?function(e){for(var r=e.fields,n=["chr","start","end"],i=0;i<r.length;i++){var a=!0,o=!1,s=t;try{for(var h,c=n[Symbol.iterator]();!(a=(h=c.next()).done);a=!0){var l=h.value;l===r[i]&&(e[l]=i)}}catch(t){o=!0,s=t}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}}return e}(Xi[e]):t}(this.format))!==t?(this.decode=Ra,this.format=i,this.delimiter=i.delimiter||"\t"):(this.decode=la,this.delimiter=/\s+/)}};function ia(t){var e=t.split(/\s+/);return{format:"fixedStep",chrom:e[1].split("=")[1],start:parseInt(e[2].split("=")[1],10)-1,step:parseInt(e[3].split("=")[1],10),span:e.length>4?parseInt(e[4].split("=")[1],10):1,index:0}}function aa(t){var e=t.split(/\s+/);return{format:"variableStep",chrom:e[1].split("=")[1],span:e.length>2?parseInt(e[2].split("=")[1],10):1}}function oa(t){var e=ra.exec(t);if(e)return{namespace:e[1],name:e[2],type:e[3]};if(e=ea.exec(t))return{namespace:"?",name:e[1],type:e[2]};throw new Error("Error parsing the header row of AED file - column not in ns:name(ns:type) format")}function sa(t){var e,r,n;for(e={columns:[],metadata:{}},r=0;r<t.length;r++)n=oa(t[r]),e.columns.push(n);return e}function ha(e){var r,n={},i=e.split(/(?:")([^"]+)(?:")|([^\s"]+)(?=\s+|$)/g),a=[],o=!0,s=!1,h=t;try{for(var c,l=i[Symbol.iterator]();!(o=(c=l.next()).done);o=!0){var u=c.value;u&&0!==u.trim().length&&(u.endsWith("=")>0?r=u:r?(a.push(r+u),r=t):a.push(u))}}catch(t){s=!0,h=t}finally{try{o||null==l.return||l.return()}finally{if(s)throw h}}for(var f=0,p=a;f<p.length;f++){var d=p[f];if(!d)return;var g=d.split("=",2);if(2===g.length){var m=g[0].trim(),v=g[1].trim();n[m]=v}}return n}function ca(t){var e={},r=t.split(/\s+/);2===r.length&&r[1].split(";").forEach((function(t){var r=t.split("=");"color"===r[0]?e.colorColumn=Number.parseInt(r[1])-1:"thickness"===r[0]&&(e.thicknessColumn=Number.parseInt(r[1])-1)}));return e}function la(e,r){var n,i,a,o,s,h,c,l;if(e.length<3)return t;if(h={chr:e[0],start:n=parseInt(e[1]),end:e.length>2?parseInt(e[2]):n+1,score:1e3},e.length>3&&(-1==e[3].indexOf(";")?h.name=e[3]:(h.attributes=xa(e[3],"="),h.name=h.attributes.Name)),e.length>4&&(h.score=parseFloat(e[4])),e.length>5&&(h.strand=e[5]),e.length>6&&(h.cdStart=parseInt(e[6])),e.length>7&&(h.cdEnd=parseInt(e[7])),e.length>8&&"."!==e[8]&&"0"!==e[8]&&(h.color=Vr.createColorString(e[8])),e.length>11){i=parseInt(e[9]),a=e[10].split(","),o=e[11].split(","),s=[];for(var u=0;u<i;u++)l=(c=n+parseInt(o[u]))+parseInt(a[u]),s.push({start:c,end:l});ga(s,h.cdStart,h.cdEnd),h.exons=s}if(this.header){var f=this.header.thicknessColumn,p=this.header.colorColumn;p&&p<e.length&&(h.color=Vr.createColorString(e[p])),f&&f<e.length&&(h.thickness=e[f])}return h}function ua(e,r){return e.length<15?t:{swScore:Number.parseInt(e[1]),milliDiv:Number.parseInt(e[2]),milliDel:Number.parseInt(e[3]),milliIns:Number.parseInt(e[4]),chr:e[5],start:Number.parseInt(e[6]),end:Number.parseInt(e[7]),strand:e[9],repName:e[10],repClass:e[11],repFamily:e[12],repStart:Number.parseInt(e[13]),repEnd:Number.parseInt(e[14]),repLeft:Number.parseInt(e[15])}}function fa(e,r){var n=this.shift===t?0:1;if(e.length<9+n)return t;for(var i=parseInt(e[5+n]),a=parseInt(e[6+n]),o={name:e[0+n],chr:e[1+n],strand:e[2+n],start:parseInt(e[3+n]),end:parseInt(e[4+n]),cdStart:i,cdEnd:a,id:e[0+n]},s=parseInt(e[7+n]),h=e[8+n].split(","),c=e[9+n].split(","),l=[],u=0;u<s;u++){var f=parseInt(h[u]),p=parseInt(c[u]);l.push({start:f,end:p})}return ga(l,i,a),o.exons=l,o}function pa(e,r){var n=this.shift===t?0:1;if(e.length<11+n)return t;for(var i=parseInt(e[5+n]),a=parseInt(e[6+n]),o={name:e[11+n],chr:e[1+n],strand:e[2+n],start:parseInt(e[3+n]),end:parseInt(e[4+n]),cdStart:i,cdEnd:a,id:e[0+n]},s=parseInt(e[7+n]),h=e[8+n].split(","),c=e[9+n].split(","),l=[],u=0;u<s;u++){var f=parseInt(h[u]),p=parseInt(c[u]);l.push({start:f,end:p})}return ga(l,i,a),o.exons=l,o}function da(e,r){var n=this.shift===t?0:1;if(e.length<10+n)return t;for(var i=parseInt(e[6+n]),a=parseInt(e[7+n]),o={name:e[0+n],id:e[1+n],chr:e[2+n],strand:e[3+n],start:parseInt(e[4+n]),end:parseInt(e[5+n]),cdStart:i,cdEnd:a},s=parseInt(e[8+n]),h=e[9+n].split(","),c=e[10+n].split(","),l=[],u=0;u<s;u++){var f=parseInt(h[u]),p=parseInt(c[u]);l.push({start:f,end:p})}return ga(l,i,a),o.exons=l,o}function ga(e,r,n){var i=!0,a=!1,o=t;try{for(var s,h=e[Symbol.iterator]();!(i=(s=h.next()).done);i=!0){var c=s.value,l=c.end,u=c.start;l<r||u>n?c.utr=!0:(r>=u&&r<=l&&(c.cdStart=r),n>=u&&n<=l&&(c.cdEnd=n))}}catch(t){a=!0,o=t}finally{try{i||null==h.return||h.return()}finally{if(a)throw o}}}function ma(t,e){var r,n,i,a,o,s,h;return t.length<9?null:(r=t[0],n=parseInt(t[1]),i=parseInt(t[2]),o=t[3],s=parseFloat(t[4]),a=t[5].trim(),h=parseFloat(t[6]),0===s&&(s=h),{chr:r,start:n,end:i,name:o,score:s,strand:a,signal:h,pValue:parseFloat(t[7]),qValue:parseFloat(t[8])})}function va(t,e){if(t.length<3)return null;var r={chr:t[0],start:parseInt(t[1]),end:parseInt(t[2]),value:parseFloat(t[3])};if(this.header){var n=this.header.colorColumn;n&&n<t.length&&(r.color=Vr.createColorString(t[n]))}return r}function ba(t,e){var r,n,i;return"fixedStep"===e.format?(n=(r=e.index*e.step+e.start)+e.span,i=parseFloat(t[0]),++e.index,isNaN(i)?null:{chr:e.chrom,start:r,end:n,value:i}):"variableStep"===e.format?t.length<2?null:(n=(r=parseInt(t[0],10)-1)+e.span,i=parseFloat(t[1]),isNaN(i)?null:{chr:e.chrom,start:r,end:n,value:i}):va(t)}function ya(t,e){var r=t[0],n=t[1],i=parseInt(t[2]),a=parseInt(t[3]),o=parseInt(t[4]),s=parseInt(t[5]),h=t[6],c={chr:r,name:n,junction_left:i,junction_right:a,num_junction_reads:o,num_spanning_frags:s,spanning_frag_coords:[],start:-1,end:-1},l=i,u=a;if(s>0)for(var f=h.split(","),p=0;p<f.length;p++){var d=f[p].split("-"),g=d[0],m=d[1];g<l&&(l=g),m>u&&(u=m),c.spanning_frag_coords.push({left:g,right:m})}return c.start=l,c.end=u,c}function wa(t,e){if(t.length<7)return null;var r={chr:t[0],start:parseInt(t[1])-1,end:parseInt(t[2]),"Strongest SNP-risk allele":t[3],"Disease/Phenotype":t[4],"P-value":t[5],"Odds ratio or beta":t[6]};return t.length>6&&(r.PUBMEDID='<a target = "blank" href = "https://www.ncbi.nlm.nih.gov/pubmed/'.concat(t[7],'">').concat(t[7],"</a>")),r}function xa(e,r){var n={},i=!0,a=!1,o=t;try{for(var s,h=e.split(";")[Symbol.iterator]();!(i=(s=h.next()).done);i=!0){var c=s.value.trim().split(r,2);if(2===c.length){var l=c[0].trim(),u=c[1].trim();u.startsWith('"')&&u.endsWith('"')&&(u=u.substr(1,u.length-2)),n[l]=u}}}catch(t){a=!0,o=t}finally{try{i||null==h.return||h.return()}finally{if(a)throw o}}return n}function ka(t,e){var r,n,i,a,o,s,h,c,l,u,f=this.format;if(t.length<9)return null;r=t[0],o=t[2],n=parseInt(t[3])-1,i=parseInt(t[4]),s="."===t[5]?0:parseFloat(t[5]),a=t[6],"."===t[7]||parseInt(t[7]);for(var p="gff3"===f?"=":/\s+/,d=xa(h=t[8],p),g=0,m=Object.entries(d);g<m.length;g++){var v=H(m[g],2),b=v[0],y=v[1],w=b.toLowerCase();if("color"===w||"colour"===w)c=Vr.createColorString(y);else if("gff3"===f)try{d[b]=unescape(y)}catch(t){d[b]=y,console.error("Malformed gff3 attibute value: ".concat(y))}}if(this.nameField)l=d[this.nameField];else for(u=0;u<ta.length;u++)if(d.hasOwnProperty(ta[u])){this.nameField=ta[u],l=d[this.nameField];break}return new Sa({id:d.ID||d.transcript_id,parent:d.Parent,name:l,type:o,chr:r,start:n,end:i,score:s,strand:a,color:c,attributeString:h,delim:p})}function Sa(t){Object.assign(this,t)}function _a(t,e){var r,n,i=t.columns;this.aed=t,this.allColumns=e,this.chr=null,this.start=null,this.end=null,this.score=1e3,this.strand=".",this.cdStart=null,this.cdEnd=null,this.name=null,this.color=null;for(var a=0;a<e.length;a++)(r=e[a])&&("aed:Integer"===(n=i[a]).type&&(r=parseInt(r)),"bio"===n.namespace?"sequence"===n.name?this.chr=r:"start"===n.name?this.start=r:"end"===n.name?this.end=r:"cdsMin"===n.name?this.cdStart=r:"cdsMax"===n.name?this.cdEnd=r:"strand"===n.name&&(this.strand=r):"aed"===n.namespace?"name"===n.name&&(this.name=r):"style"===n.namespace&&"color"===n.name&&(this.color=Vr.createColorString(r)))}function Ca(e,r){var n,i,a,o,s,h,c=0,l=this.aed.columns;if(e.length!==l.length)return t;for(h=0;h<e.length;h++)o=l[h],""!==(a=e[h])&&c++,"name"===o.name&&"aed"===o.namespace?n=a:"value"===o.name&&"aed"===o.namespace&&(i=a);if(2===c&&n&&i)return s=oa(n),this.aed.metadata[s.namespace]||(this.aed.metadata[s.namespace]={}),this.aed.metadata[s.namespace][s.name]||(this.aed.metadata[s.namespace][s.name]={type:s.type,value:i}),t;var u=new _a(this.aed,e);return u.chr&&(u.start||0===u.start)&&u.end?u:t}function Ea(e,r){if(e.length<6)return t;var n={chr1:e[0],start1:Number.parseInt(e[1]),end1:Number.parseInt(e[2]),chr2:e[3],start2:Number.parseInt(e[4]),end2:Number.parseInt(e[5])};e.length>6&&(n.name=e[6]),e.length>7&&(n.score=e[7]),n.chr=n.chr1===n.chr2?n.chr1:"MIXED",n.start=Math.min(n.start1,n.start2),n.end=Math.max(n.end1,n.end2);var i=(n.start1+n.end1)/2,a=(n.start2+n.end2)/2;if(n.m1=i<a?i:a,n.m2=i<a?a:i,this.header){var o=this.header.thicknessColumn,s=this.header.colorColumn;s&&s<e.length&&(n.color=Vr.createColorString(e[s])),o&&o<e.length&&(n.thickness=e[o])}return n}function Aa(t,e){return{chr:t[0],start:Number.parseInt(t[1]),end:Number.parseInt(t[2]),color:Vr.createColorString(t[6]),score:Number.parseFloat(t[7])}}function Ta(t,e){for(var r=["bin","chr","start","end","name","score","strand","refNCBI","refUCSC","observed","molType","class","valid","avHet","avHetSE","func","locType","weight","exceptions","submitterCount","submitters","alleleFreqCount","alleles","alleleNs","alleleFreqs","bitfields"],n={chr:t[1],start:Number.parseInt(t[2]),end:Number.parseInt(t[3]),name:t[4],score:Number.parseInt(t[5])},i=Math.min(t.length,r.length),a=6;a<i;a++)n[r[a]]=t[a];return n}function Ra(e,r){var n=this.format,i=n.coords||0,a=e[n.chr],o=parseInt(e[n.start])-i,s={chr:a,start:o,end:n.end!==t?parseInt(e[n.end]):o+1};return n.fields&&n.fields.forEach((function(t,r){r!==n.chr&&r!==n.start&&r!==n.end&&(s[t]=e[r])})),s}na.prototype.parseHeader=function(t){var e,r,n;for(n=Gi(t);(e=n.nextLine())&&(e.startsWith("track")||e.startsWith("#")||e.startsWith("browser"));)if(e.startsWith("track")||e.startsWith("#track")){var i=ha(e);r?Object.assign(r,i):r=i}else if(e.startsWith("#columns")){var a=ca(e);r?Object.assign(r,a):r=a}else e.startsWith("##gff-version 3")&&(this.format="gff3",r||(r={}),r.format="gff3");return this.header=r,r},na.prototype.parseFeatures=function(t){if(!t)return null;var e,r,n,i,a,o,s,h,c=[],l=0,u=this.decode,f=this.format,p=this.delimiter||"\t";function d(){for(var t,e,r=[],n="",i=!1;a||""===a;){for(t=0;t<a.length;t++)(e=a.charAt(t))===p?i?n+=e:(r.push(n),n=""):'"'===e?t+1<a.length&&'"'===a.charAt(t+1)?(i&&(n+='"'),t++):i=!i:n+=e;if(!i)break;n+="\n",a=h()}return r.push(n),r}for(e=Gi(t),h="aed"===f?e.nextLineNoTrim.bind(e):e.nextLine.bind(e),o=0;a=h();)++o<=this.skipRows||a.startsWith("track")||a.startsWith("#")||a.startsWith("browser")||("wig"===f&&a.startsWith("fixedStep")?r=ia(a):"wig"===f&&a.startsWith("variableStep")?r=aa(a):(i="aed"!==f||-1===a.indexOf('"')?a.split(p):d()).length<1||("aed"!==f||this.aed?(n=u.call(this,i,r))&&(c.length<Ji?c.push(n):(s=Math.floor(Math.random()*l))<Ji&&(c[s]=n),l++):this.aed=sa(i)));return c},Sa.prototype.popupData=function(e){var r=this.attributeString.split(";"),n=[];n.push({name:"type",value:this.type}),n.push({name:"start",value:this.start+1}),n.push({name:"end",value:this.end});var i=!0,a=!1,o=t;try{for(var s,h=r[Symbol.iterator]();!(i=(s=h.next()).done);i=!0){var c=s.value.trim().split(this.delim,2);if(2===c.length&&c[1]!==t){var l=c[0].trim(),u=c[1].trim();u.startsWith('"')&&u.endsWith('"')&&(u=u.substr(1,u.length-2)),n.push({name:l,value:u})}}}catch(t){a=!0,o=t}finally{try{i||null==h.return||h.return()}finally{if(a)throw o}}return n},_a.prototype.popupData=function(){for(var t=[],e=this.aed,r=0;r<this.allColumns.length;r++){var n=this.allColumns[r],i=e.columns[r].name;"sequence"!==i&&"color"!==i&&n&&t.push({name:i,value:n})}return t};var La=function(){};La.prototype.parseHeader=function(t){var e,r,n,i=Hr(t),a=i.length;for(r=0;r<a;r++)if(!(e=i[r]).startsWith("#")){n=e.split("\t"),this.header={headings:n,lineCount:r+1};break}return this.header},La.prototype.parseFeatures=function(t){var e,r,n,i=t?Hr(t):[],a=i.length,o=[];for(this.header||(this.header=this.parseHeader(t)),n=this.header.headings.length-1,r=this.header.lineCount;r<a;r++)i[r],(e=i[r].split("\t")).length>n&&o.push({sampleKey:e[0],sample:e[0],chr:e[1],start:parseInt(e[2]),end:parseInt(e[3]),value:parseFloat(e[n])});return o};var Ia=function(e,r){e.displayMode&&(e.displayMode=e.displayMode.toUpperCase()),this.config=e,this.browser=r,this.url=e.url,this.type=e.type,this.description=e.description,this.supportHiDPI=e.supportHiDPI===t||e.supportHiDPI,e.name=e.name||e.label,e.name?this.name=e.name:Sn(e.url)?this.name=e.url.name:this.name=e.url,this.order=e.order,"civic-ws"===e.sourceType?this.color="rgb(155,20,20)":this.color=e.color||e.defaultColor||"rgb(0,0,150)",this.autoscaleGroup=e.autoscaleGroup,this.removable=e.removable===t||e.removable,this.height=e.height||100,this.autoHeight=e.autoHeight,this.minHeight=e.minHeight||Math.min(25,this.height),this.maxHeight=e.maxHeight||Math.max(1e3,this.height),this.visibilityWindow=e.visibilityWindow};function Ma(e){var r=new Na;return r.chr=e[0],r.pos=parseInt(e[1]),r.names=e[2],r.referenceBases=e[3],r.alternateBases=e[4],r.quality=e[5],r.filter=e[6],r.info=function(e){if(!e)return t;var r={};return e.split(";").forEach((function(t){var e=t.split("=");r[e[0]]=e[1]})),r}(e[7]),Pa(r),r}function Pa(e){var r=e.referenceBases,n=e.alternateBases;if(e.info&&(e.info.VT?e.type=e.info.VT:e.info.SVTYPE?e.type="SV":e.info.PERIOD?e.type="STR":e.type=Ba(n)),"NONVARIANT"===e.type&&(e.heterozygosity=0,e.start=e.pos-1,e.end=e.start+r.length),e.info.END)e.start=e.pos-1,e.end=Number.parseInt(e.info.END);else{var i=n.split(",").filter((function(t){return t.length>0}));e.alleles=[],e.start=e.pos,e.end=e.pos;var a=!0,o=!1,s=t;try{for(var h,c=i[Symbol.iterator]();!(a=(h=c.next()).done);a=!0){var l=h.value;if(e.alleles.push(l),"SV"!==e.type&&Fa(l)){var u=l.length,f=r.length,p=0;for(r.charCodeAt(0)===l.charCodeAt(0)&&(p++,u--,f--);u>0&&f>0&&l.charCodeAt(p+u-1)===r.charCodeAt(p+f-1);)u--,f--;for(;u>0&&f>0&&l.charCodeAt(p+u-1)===r.charCodeAt(p+f-1);)p++,u--,f--;var d=e.pos+p-1,g=d+Math.max(1,f);e.start=Math.min(e.start,d),e.end=Math.max(e.end,g)}}}catch(t){o=!0,s=t}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}}}Ia.prototype.getState=function(){var t=Object.assign({},this.config),e=this;return Object.keys(t).forEach((function(r){var n=e[r];n&&(rn(n)||"boolean"==typeof n)&&(t[r]=n)})),t},Ia.prototype.supportsWholeGenome=function(){return!1},Ia.prototype.clickedFeatures=function(t){var e=t.viewport.getCachedFeatures();if(!e||0===e.length)return[];var r=t.genomicLocation,n=t.referenceFrame.bpPerPixel>.2?3*t.referenceFrame.bpPerPixel:0,i=Math.floor(r)-n,a=Math.floor(r)+n;return Ti(e,i,a)},Ia.prototype.setTrackProperties=function(t){for(var e=0,r=Object.keys(t);e<r.length;e++){var n=r[e];switch(n){case"name":case"useScore":this[n]=t[n];break;case"visibility":switch(t[n]){case"2":case"3":case"pack":case"full":this.displayMode="EXPANDED";break;case"4":case"squish":this.displayMode="SQUISHED";break;case"1":case"dense":this.displayMode="COLLAPSED"}break;case"color":case"altColor":this[n]="rgb("+t[n]+")";break;case"featureVisiblityWindow":this.visibilityWindow=Number.parseInt(t[n])}}},Ia.prototype.getVisibilityWindow=function(){return this.visibilityWindow},Ia.extractPopupData=function(t,e){var r,n,i=new Set(["row","color"]),a=[];for(var o in t)if(t.hasOwnProperty(o)&&!i.has(o)&&rn(t[o])){var s=t[o];"start"===o&&(s+=1),a.push({name:o,value:s}),"alleles"===o?r=t[o]:"alleleFreqs"===o&&(n=t[o])}if(r&&n){r.endsWith(",")&&(r=r.substr(0,r.length-1)),n.endsWith(",")&&(n=n.substr(0,n.length-1));var h=r.split(","),c=n.split(",");if(c.length>1){for(var l=[],u=0;u<c.length;u++)l.push({a:h[u],af:Number.parseFloat(c[u])});l.sort((function(t,e){return t.af-e.af}));var f=l[l.length-1].a;if(1===f.length)for(var p=l.length-2;p>=0;p--){var d=l[p].a;if(1===d.length){var g=Ia.getCravatLink(t.chr,t.start+1,f,d,e);g&&(a.push("<hr/>"),a.push(g))}}}}return a},Ia.prototype.getGenomeId=function(){return this.browser.genome?this.browser.genome.id:t},Ia.getCravatLink=function(e,r,n,i,a){return"hg38"===a||"GRCh38"===a?"<a target='_blank' href='https://www.cravat.us/CRAVAT/variant.html?variant="+(e.startsWith("chr")?e:"chr"+e)+"_"+r+"_+_"+n+"_"+i+"'>Cravat "+n+"->"+i+"</a>":t};var Da=new Set(["A","C","T","G"].map((function(t){return t.charCodeAt(0)})));function Fa(t){for(var e=0;e<t.length;e++)if(!Da.has(t.charCodeAt(e)))return!1;return!0}var Na=function(){};function Ba(e){if(e===t)return"UNKNOWN";if(0===e.trim().length||"<NON_REF>"===e||"<*>"===e)return"NONVARIANT";var r=e.split(",").map((function(t){return"<NON_REF>"===t?"NONVARIANT":"OTHER"})),n=r[0],i=!0,a=!1,o=t;try{for(var s,h=r[Symbol.iterator]();!(i=(s=h.next()).done);i=!0){if(s.value!==n)return"MIXED"}}catch(t){a=!0,o=t}finally{try{i||null==h.return||h.return()}finally{if(a)throw o}}return n}function Oa(e,r){return r===t&&(r=","),Array.isArray(e)?e.join(r):e}Na.prototype.popupData=function(t,e){var r,n,i=this,a=this.end===this.pos?this.pos:"".concat(this.pos,"-").concat(this.end);if(r=[{name:"Chr",value:this.chr},{name:"Pos",value:a},{name:"Names",value:this.names?this.names:""},{name:"Ref",value:this.referenceBases},{name:"Alt",value:this.alternateBases.replace("<","&lt;")},{name:"Qual",value:this.quality},{name:"Filter",value:this.filter}],1===this.referenceBases.length&&!Ba(this.alternateBases)){var o=this.referenceBases;if(1===o.length)for(var s=this.alternateBases.split(","),h=0;h<s.length;h++){var c=this.alternateBases[h];if(1===c.length){var l=Ia.getCravatLink(this.chr,this.pos,o,c,e);l&&(r.push("<hr/>"),r.push(l))}}}return this.hasOwnProperty("heterozygosity")&&r.push({name:"Heterozygosity",value:this.heterozygosity}),this.info&&(r.push("<hr>"),Object.keys(this.info).forEach((function(t){r.push({name:t,value:Oa(i.info[t])})}))),this.calls&&1===this.calls.length&&(r.push("<hr>"),n=this.alleles[this.calls[0].genotype[0]]+this.alleles[this.calls[0].genotype[1]],r.push({name:"Genotype",value:n})),r},Na.prototype.isRefBlock=function(){return"NONVARIANT"===this.type};var za=function(){};function Ua(t){var e,r={genotypeIndex:-1,fields:t};for(e=0;e<t.length;e++)"GT"===t[e]&&(r.genotypeIndex=e);return r}za.prototype.parseHeader=function(t){var e,r,n,i,a,o,s,h,c,l={};if(!(n=(e=Gi(t)).nextLine()).startsWith("##fileformat"))throw new Error("Invalid VCF file: missing fileformat line");for(l.version=n.substr(13);(n=e.nextLine())&&n.startsWith("#");)if(a=null,o={},n.startsWith("##")){if(n.startsWith("##INFO")||n.startsWith("##FILTER")||n.startsWith("##FORMAT")){if(s=n.indexOf("<"),h=n.lastIndexOf(">"),!(s>2&&h>0))continue;l[c=n.substring(2,s-1)]||(l[c]={}),(r=$r(n.substring(s+1,h-1),",")).forEach((function(t){var e=t.split("=");e.length>1&&("ID"===e[0]?a=e[1]:o[e[0]]=e[1])})),a&&(l[c][a]=o)}}else if(n.startsWith("#CHROM")&&(r=n.split("\t")).length>8)for(l.callSets=[],i=9;i<r.length;i++)l.callSets.push({id:i,name:r[i]});return this.header=l,l},za.prototype.parseFeatures=function(t){var e,r,n,i,a,o,s,h=[],c=this.header.callSets;for(e=Gi(t);r=e.nextLine();)if(!r.startsWith("#")&&(i=r.split("\t")).length>=8&&((n=Ma(i)).header=this.header,h.push(n),i.length>9))for(a=Ua(i[8].split(":")),n.calls={},o=9;o<i.length;o++){s=i[o];var l=c[o-9],u={callSetName:l.name,info:{}};n.calls[l.id]=u,s.split(":").forEach((function(t,e){switch(e){case a.genotypeIndex:u.genotype=[],t.split(/[\|\/]/).forEach((function(t){u.genotype.push(parseInt(t))}));break;default:u.info[a.fields[e]]=t}}))}return h};var Ha=function(e,r){this.littleEndian=r===t||r,this.position=0,this.view=e,this.length=e.byteLength};function $a(t,e){this.block=t,this.offset=e}Ha.prototype.available=function(){return this.length-this.position},Ha.prototype.remLength=function(){return this.length-this.position},Ha.prototype.hasNext=function(){return this.position<this.length-1},Ha.prototype.getByte=function(){var t=this.view.getUint8(this.position,this.littleEndian);return this.position++,t},Ha.prototype.getShort=function(){var t=this.view.getInt16(this.position,this.littleEndian);return this.position+=2,t},Ha.prototype.getUShort=function(){var t=this.view.getUint16(this.position,this.littleEndian);return this.position+=2,t},Ha.prototype.getInt=function(){var t=this.view.getInt32(this.position,this.littleEndian);return this.position+=4,t},Ha.prototype.getUInt=function(){var t=this.view.getUint32(this.position,this.littleEndian);return this.position+=4,t},Ha.prototype.getLong=function(){var t=[];t[0]=this.view.getUint8(this.position),t[1]=this.view.getUint8(this.position+1),t[2]=this.view.getUint8(this.position+2),t[3]=this.view.getUint8(this.position+3),t[4]=this.view.getUint8(this.position+4),t[5]=this.view.getUint8(this.position+5),t[6]=this.view.getUint8(this.position+6),t[7]=this.view.getUint8(this.position+7);var e=0;if(this.littleEndian)for(var r=t.length-1;r>=0;r--)e=256*e+t[r];else for(var n=0;n<t.length;n++)e=256*e+t[n];return this.position+=8,e},Ha.prototype.getString=function(t){for(var e,r="";0!==(e=this.view.getUint8(this.position++))&&(r+=String.fromCharCode(e),!t||r.length!==t););return r},Ha.prototype.getFixedLengthString=function(t){var e,r,n="";for(e=0;e<t;e++)(r=this.view.getUint8(this.position++))>0&&(n+=String.fromCharCode(r));return n},Ha.prototype.getFixedLengthTrimmedString=function(t){var e,r,n="";for(e=0;e<t;e++)(r=this.view.getUint8(this.position++))>32&&(n+=String.fromCharCode(r));return n},Ha.prototype.getFloat=function(){var t=this.view.getFloat32(this.position,this.littleEndian);return this.position+=4,t},Ha.prototype.getDouble=function(){var t=this.view.getFloat64(this.position,this.littleEndian);return this.position+=8,t},Ha.prototype.skip=function(t){return this.position+=t,this.position},Ha.prototype.getVPointer=function(){var t=this.position,e=this.view.getUint8(t+1)<<8|this.view.getUint8(t),r=4294967296*(255&this.view.getUint8(t+6))+16777216*(255&this.view.getUint8(t+5))+65536*(255&this.view.getUint8(t+4))+256*(255&this.view.getUint8(t+3))+(255&this.view.getUint8(t+2));return this.position+=8,new $a(r,e)},$a.prototype.isLessThan=function(t){return this.block<t.block||this.block===t.block&&this.offset<t.offset},$a.prototype.isGreaterThan=function(t){return this.block>t.block||this.block===t.block&&this.offset>t.offset},$a.prototype.print=function(){return this.block+":"+this.offset};var qa=21578050,Va=21578324;function ja(t,e,r,n){return Ga.apply(this,arguments)}function Ga(){return(Ga=I(e.mark((function t(r,n,i,a){var o,s,h,c,l,u,f,p,d,g,m,v,b,y,w,x,k,S,_,C,E,A,T,R;return e.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,On.loadArrayBuffer(r,nn(n));case 2:if(o=t.sent,s=[],h=Number.MAX_VALUE,c=0,o){t.next=7;break}return t.abrupt("return");case 7:if(i&&(l=new Br.Gunzip(new Uint8Array(o)),o=l.decompress().buffer),u=new Ha(new DataView(o)),f=u.getInt(),p={},!(f===qa||i&&f===Va)){t.next=17;break}if(d=u.getInt(),i)for(u.getInt(),u.getInt(),u.getInt(),u.getInt(),u.getInt(),u.getInt(),u.getInt(),g=0;g<d;g++)m=u.getString(),a&&(m=a.getChromosomeName(m)),p[m]=g;for(v=0;v<d;v++){for(b={},y=[],w=u.getInt(),x=0;x<w;x++)if(37450===(k=u.getInt()))u.getInt(),u.getVPointer(),u.getVPointer(),u.getLong(),u.getLong();else for(b[k]=[],S=u.getInt(),_=0;_<S;_++)C=u.getVPointer(),E=u.getVPointer(),C&&E&&(C.block<h&&(h=C.block),E.block>c&&(c=E.block),b[k].push([C,E]));for(A=u.getInt(),T=0;T<A;T++)R=u.getVPointer(),y.push(R);w>0&&(s[v]={binIndex:b,linearIndex:y})}t.next=18;break;case 17:throw new Error(r+" is not a "+(i?"tabix":"bai")+" file");case 18:return t.abrupt("return",new Wa(s,h,c,p,i));case 19:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var Wa=function(t,e,r,n,i){this.firstAlignmentBlock=e,this.lastAlignmentBlock=r,this.indices=t,this.sequenceIndexMap=n,this.tabix=i};function Za(t,e,r){return Xa.apply(this,arguments)}function Xa(){return(Xa=I(e.mark((function r(n,i,a){var o,s,h,c,l,u,f;return e.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f=function(t){var e=t.getString();a&&(e=a.getChromosomeName(e));for(var r=t.getInt(),n=t.getInt(),i=t.getInt(),o=(t.getInt(),t.getInt(),t.getLong()),s=new Array,h=0;h<n;h++){var c=t.getLong();s.push({min:o,max:c}),o=c}return{chr:e,blocks:s,longestFeature:i,binWidth:r}},u=function(t){t.getInt(),t.getInt();var e=t.getInt();t.getString(),t.getLong(),t.getLong(),t.getString(),t.getInt();if(e>=3)for(var r=t.getInt();r-- >0;)t.getString(),t.getString()},e.next=4,On.loadArrayBuffer(n,nn(i));case 4:if(!(o=e.sent)){e.next=14;break}for(s={},h=new Ha(new DataView(o)),u(h),c=h.getInt();c-- >0;)l=f(h),s[l.chr]=l;return e.abrupt("return",new Ya(s));case 14:return e.abrupt("return",t);case 15:case"end":return e.stop()}}),r)})))).apply(this,arguments)}Wa.prototype.blocksForRange=function(t,e,r){var n=this.indices[t];if(n){var i=function(t,e){var r,n=[];e>=1<<29&&(e=1<<29);for(--e,n.push(0),r=1+(t>>26);r<=1+(e>>26);++r)n.push(r);for(r=9+(t>>23);r<=9+(e>>23);++r)n.push(r);for(r=73+(t>>20);r<=73+(e>>20);++r)n.push(r);for(r=585+(t>>17);r<=585+(e>>17);++r)n.push(r);for(r=4681+(t>>14);r<=4681+(e>>14);++r)n.push(r);return n}(e,r),a=[];i.forEach((function(t){if(n.binIndex[t])for(var e=n.binIndex[t],r=e.length,i=0;i<r;++i){var o=e[i][0],s=e[i][1];a.push({minv:o,maxv:s,bin:t})}}));for(var o=n.linearIndex.length,s=null,h=Math.min(e>>14,o-1),c=Math.min(r>>14,o-1),l=h;l<=c;++l){var u=n.linearIndex[l];u&&(s&&!u.isLessThan(s)||(s=u))}return function(t,e){var r=[],n=null;return 0===t.length?t:(t.sort((function(t,e){var r=t.minv.block-e.minv.block;return 0!==r?r:t.minv.offset-e.minv.offset})),t.forEach((function(t){var i,a;e&&!t.maxv.isGreaterThan(e)||(null===n?(r.push(t),n=t):(i=n,(a=t).minv.block-i.maxv.block<65e3&&a.maxv.block-i.minv.block<5e6?t.maxv.isGreaterThan(n.maxv)&&(n.maxv=t.maxv):(r.push(t),n=t)))})),r)}(a,s)}return[]};var Ya=function(){function e(t){M(this,e),this.chrIndex=t}return D(e,[{key:"blocksForRange",value:function(e,r,n){var i=this.chrIndex[e];if(i){var a=i.blocks,o=i.longestFeature,s=i.binWidth,h=Math.max(r-o,0),c=Math.floor(h/s);if(c>=a.length)return[];var l=Math.min(Math.floor((n-1)/s),a.length-1),u=a[c].min,f=a[l].max;return 0===f-u?[]:[{minv:{block:u,offset:0},maxv:{block:f,offset:0}}]}return t}}]),e}(),Ka=function(t,e){var r;this.config=t||{},this.genome=e,this.indexURL=t.indexURL,this.indexed=t.indexed,Sn(this.config.url)?this.filename=this.config.url.name:zr(this.config.url)&&this.config.url.startsWith("data:")?(this.indexed=!1,this.dataURI=t.url):(r=Cn(this.config.url),this.filename=t.filename||r.file),this.format=this.config.format,this.parser=this.getParser(this.format,this.config.decode,this.config)};Ka.prototype.readFeatures=function(){var t=I(e.mark((function t(r,n,i){return e.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getIndex();case 2:if(!t.sent){t.next=7;break}return t.abrupt("return",this.loadFeaturesWithIndex(r,n,i));case 7:if(!this.dataURI){t.next=11;break}return t.abrupt("return",this.loadFeaturesFromDataURI());case 11:return t.abrupt("return",this.loadFeaturesNoIndex());case 12:case"end":return t.stop()}}),t,this)})));return function(e,r,n){return t.apply(this,arguments)}}(),Ka.prototype.readHeader=I(e.mark((function t(){var r,n,i,a,o,s,h,c,l,u,f;return e.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.header){t.next=39;break}if(!this.dataURI){t.next=9;break}return t.next=4,this.loadFeaturesFromDataURI(this.dataURI);case 4:n=t.sent,(r=this.header||{}).features=n,t.next=39;break;case 9:if(!this.config.indexURL&&!this.config.indexed){t.next=31;break}return t.next=12,this.getIndex();case 12:if(i=t.sent){t.next=16;break}throw a=this.config.indexURL||this.config.url,new Error("Unable to load index: "+a);case 16:if(o="vcf"===this.config.format?65e3:1e3,!i.tabix){t.next=24;break}return s=nn(this.config,{range:{start:i.firstAlignmentBlock,size:26}}),t.next=21,On.loadArrayBuffer(this.config.url,s);case 21:h=t.sent,c=bn(h),o=i.firstAlignmentBlock+c;case 24:return l=nn(this.config,{bgz:i.tabix,range:{start:0,size:o}}),t.next=27,On.loadString(this.config.url,l);case 27:u=t.sent,r=this.parser.parseHeader(u),t.next=36;break;case 31:return t.next=33,this.loadFeaturesNoIndex();case 33:f=t.sent,(r=this.header||{}).features=f;case 36:return r&&this.parser&&(this.parser.header=r),this.header=r,t.abrupt("return",r);case 39:return t.abrupt("return",this.header);case 40:case"end":return t.stop()}}),t,this)}))),Ka.prototype.getParser=function(t,e,r){switch(t){case"vcf":return new za(r);case"seg":return new La;default:return new na(t,e,this.config)}},Ka.prototype.loadFeaturesNoIndex=I(e.mark((function t(){var r,n;return e.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=nn(this.config),t.next=3,On.loadString(this.config.url,r);case 3:return n=t.sent,this.header=this.parser.parseHeader(n),this.header instanceof String&&this.header.startsWith("##gff-version 3")&&(this.format="gff3"),t.abrupt("return",this.parser.parseFeatures(n));case 7:case"end":return t.stop()}}),t,this)}))),Ka.prototype.loadFeaturesWithIndex=function(){var r=I(e.mark((function r(n,i,a){var o,s,h,c,l,u,f,p,d,g,m,v,b;return e.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(o=this.config,s=this.parser,h=this.index.tabix,c=h?this.index.sequenceIndexMap[n]:n,l=[],u=this.genome,(f=this.index.blocksForRange(c,i,a))&&0!==f.length){r.next=11;break}return r.abrupt("return",[]);case 11:p=!0,d=!1,g=t,r.prev=14,m=e.mark((function r(){var c,f,p,d,g,m,v,y,w,x,k,S,_;return e.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(_=function(e){var r=p?e.slice(p):e,o=s.parseFeatures(r),h=!0,c=!1,f=t;try{for(var d,g=o[Symbol.iterator]();!(h=(d=g.next()).done);h=!0){var m=d.value;if(u.getChromosomeName(m.chr)!==n){if(0===l.length)continue;break}if(m.start>a)break;m.end>=i&&m.start<=a&&l.push(m)}}catch(t){c=!0,f=t}finally{try{h||null==g.return||g.return()}finally{if(c)throw f}}},c=b.value,f=c.minv.block,p=c.minv.offset,d=c.maxv.offset,g=void 0,!h){e.next=17;break}if(m=0,!(d>0)){e.next=14;break}return v=nn(o,{range:{start:c.maxv.block,size:26}}),e.next=12,On.loadArrayBuffer(o.url,v);case 12:y=e.sent,m=bn(y);case 14:g=c.maxv.block+m,e.next=18;break;case 17:g=c.maxv.block;case 18:if(w=nn(o,{range:{start:f,size:g-f+1}}),!h){e.next=27;break}return e.next=22,On.loadArrayBuffer(o.url,w);case 22:x=e.sent,k=vn(x),_(k),e.next=31;break;case 27:return e.next=29,On.loadString(o.url,w);case 29:S=e.sent,_(S);case 31:case"end":return e.stop()}}),r)})),v=f[Symbol.iterator]();case 17:if(p=(b=v.next()).done){r.next=22;break}return r.delegateYield(m(),"t0",19);case 19:p=!0,r.next=17;break;case 22:r.next=28;break;case 24:r.prev=24,r.t1=r.catch(14),d=!0,g=r.t1;case 28:r.prev=28,r.prev=29,p||null==v.return||v.return();case 31:if(r.prev=31,!d){r.next=34;break}throw g;case 34:return r.finish(31);case 35:return r.finish(28);case 36:return l.sort((function(t,e){return t.start-e.start})),r.abrupt("return",l);case 38:case"end":return r.stop()}}),r,this,[[14,24,28,36],[29,,31,35]])})));return function(t,e,n){return r.apply(this,arguments)}}(),Ka.prototype.getIndex=I(e.mark((function r(){var n;return e.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.index===t&&!1!==this.indexed){e.next=2;break}return e.abrupt("return",this.index);case 2:return e.next=4,this.loadIndex();case 4:return(n=e.sent)?(this.index=n,this.indexed=!0):this.indexed=!1,e.abrupt("return",this.index);case 7:case"end":return e.stop()}}),r,this)}))),Ka.prototype.loadIndex=I(e.mark((function t(){var r,n;return e.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=this.config.indexURL,t.prev=1,!this.filename.endsWith(".gz")&&!this.filename.endsWith(".bgz")){t.next=9;break}return r||(r=this.config.url+".tbi"),t.next=6,ja(r,this.config,!0,this.genome);case 6:n=t.sent,t.next=13;break;case 9:return r||(r=this.config.url+".idx"),t.next=12,Za(r,this.config,this.genome);case 12:n=t.sent;case 13:return t.abrupt("return",n);case 16:if(t.prev=16,t.t0=t.catch(1),!this.config.indexURL&&!this.config.indexed){t.next=22;break}throw t.t0;case 22:this.indexed=!1,console.error(t.t0);case 24:case"end":return t.stop()}}),t,this,[[1,16]])}))),Ka.prototype.loadFeaturesFromDataURI=I(e.mark((function t(){var r,n;return e.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=_n(this.dataURI),this.header=this.parser.parseHeader(r),this.header instanceof String&&this.header.startsWith("##gff-version 3")&&(this.format="gff3"),n=this.parser.parseFeatures(r),t.abrupt("return",n);case 5:case"end":return t.stop()}}),t,this)})));var Qa=function(t,e,r){this.treeMap=this.buildTreeMap(t,e),this.range=r,this.count=t.length};function Ja(t){for(var e=new xi,r=t.length,n=Math.max(10,Math.round(r/10)),i=0;i<r;i+=n){for(var a=Math.min(r,i+n),o=new to(i,a),s=t[i].start,h=s,c=i;c<a;c++)h=Math.max(h,t[c].end);e.insert(s,h,o)}return e}Qa.prototype.containsRange=function(e){return this.range===t||this.range.contains(e.chr,e.start,e.end)},Qa.prototype.queryFeatures=function(e,r,n){var i=this.treeMap[e];if(!i)return[];var a=i.findOverlapping(r,n);if(0===a.length)return[];var o=[],s=this.allFeatures[e];if(s){var h=!0,c=!1,l=t;try{for(var u,f=a[Symbol.iterator]();!(h=(u=f.next()).done);h=!0)for(var p=u.value.value,d=p.start;d<p.end;d++){var g=s[d];if(g.start>n)break;g.end>=r&&o.push(g)}}catch(t){c=!0,l=t}finally{try{h||null==f.return||f.return()}finally{if(c)throw l}}o.sort((function(t,e){return t.start-e.start}))}return o},Qa.prototype.getAllFeatures=function(){return this.allFeatures},Qa.prototype.buildTreeMap=function(e,r){var n={},i=[];if(this.allFeatures={},e){var a=!0,o=!1,s=t;try{for(var h,c=e[Symbol.iterator]();!(a=(h=c.next()).done);a=!0){var l=h.value,u=l.chr;r&&(u=r.getChromosomeName(u));var f=this.allFeatures[u];f||(i.push(u),f=[],this.allFeatures[u]=f),f.push(l)}}catch(t){o=!0,s=t}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}var p=!0,d=!1,g=t;try{for(var m,v=i[Symbol.iterator]();!(p=(m=v.next()).done);p=!0){var b=m.value,y=this.allFeatures[b];y.sort((function(t,e){return t.start===e.start?0:t.start>e.start?1:-1})),n[b]=Ja(y)}}catch(t){d=!0,g=t}finally{try{p||null==v.return||v.return()}finally{if(d)throw g}}}return n};var to=function t(e,r){M(this,t),this.start=e,this.end=r},eo=function(t){this.config=t};eo.prototype.readFeatures=function(e,r,n){var i=this,a=i.config.url,o=i.config.body;return"all"!==e.toLowerCase()&&(a=a.replace("$CHR",e).replace("$START",r).replace("$END",n),o!==t&&(i.config.body=i.config.body.replace("$CHR",e).replace("$START",r).replace("$END",n))),On.load(a,i.config).then((function(t){if(!t)return[];if("function"==typeof i.config.parser)return i.config.parser(t);if(!zr(t))return t;try{return JSON.parse(t)}catch(e){return t}})).then((function(t){if(i.config.mappings){var e=Object.keys(i.config.mappings);t.forEach((function(t){e.forEach((function(e){t[e]=t[i.config.mappings[e]]}))}))}return t}))};var ro=function(t,e){this.config=t,this.genome=e,this.expandQueryInterval=!1};ro.prototype.readFeatures=function(t,e,r){var n=Math.max(0,Math.floor(e)),i=Math.ceil(r);if(this.genome){var a=this.genome.getChromosome(t);a&&i>a.bpLength&&(i=a.bpLength)}var o=this.config.url+"?db="+this.config.db+"&table="+this.config.tableName+"&chr="+t+"&start="+n+"&end="+i;return On.loadJson(o,this.config).then((function(t){return t?(t.forEach((function(t){t.hasOwnProperty("exonStarts")&&t.hasOwnProperty("exonEnds")&&t.hasOwnProperty("exonCount")&&t.hasOwnProperty("cdsStart")&&t.hasOwnProperty("cdsEnd")&&function(t){var e,r,n,i,a,o;e=t.exonCount,r=t.exonStarts.split(","),n=t.exonEnds.split(","),i=[];for(var s=0;s<e;s++){a=parseInt(r[s]),o=parseInt(n[s]);var h={start:a,end:o};(t.cdsStart>o||t.cdsEnd<t.cdsStart)&&(h.utr=!0),t.cdsStart>=a&&t.cdsStart<=o&&(h.cdStart=t.cdsStart),t.cdsEnd>=a&&t.cdsEnd<=o&&(h.cdEnd=t.cdsEnd),i.push(h)}t.exons=i}(t)})),t):null}))};var no=new Set(["transcript","primary_transcript","processed_transcript","mRNA","mrna"]),io=new Set(["CDS","cds"]),ao=new Set(["start_codon","stop_codon"]),oo=new Set(["5UTR","3UTR","UTR","five_prime_UTR","three_prime_UTR","3'-UTR","5'-UTR"]),so=new Set(["exon","coding-exon"]),ho=function(t){this.format=t.format,t.filterTypes&&(this.filterTypes=new Set(t.filterTypes))};function co(e){var r=Object.create(null),n=[],i=new Set,a=this.filterTypes;e=e.filter((function(e){return a===t||!a.has(e.type)}));var o=!0,s=!1,h=t;try{for(var c,l=e[Symbol.iterator]();!(o=(c=l.next()).done);o=!0){var u=c.value;if(no.has(u.type)){var f=u.id;if(t!==f){var p=new uo(u);r[f]=p,n.push(p),i.add(u)}}}}catch(t){s=!0,h=t}finally{try{o||null==l.return||l.return()}finally{if(s)throw h}}var d=!0,g=!1,m=t;try{for(var v,b=e[Symbol.iterator]();!(d=(v=b.next()).done);d=!0){var y=v.value;if(so.has(y.type)){var w=y.id;if(w){var x=r[w];x===t&&(x=new uo(y),r[w]=x,n.push(x)),x.addExon(y),i.add(y)}}}}catch(t){g=!0,m=t}finally{try{d||null==b.return||b.return()}finally{if(g)throw m}}var k=!0,S=!1,_=t;try{for(var C,E=e[Symbol.iterator]();!(k=(C=E.next()).done);k=!0){var A=C.value;if(io.has(A.type)||oo.has(A.type)||ao.has(A.type)){var T=A.id;if(T){var R=r[T];R===t&&(R=new uo(A),r[T]=R,n.push(R)),oo.has(A.type)?R.addUTR(A):io.has(A.type)?R.addCDS(A):ao.has(A.type),i.add(A)}}}}catch(t){S=!0,_=t}finally{try{k||null==E.return||E.return()}finally{if(S)throw _}}for(var L=0,I=n;L<I.length;L++){var M=I[L];"function"==typeof M.finish&&M.finish()}var P=e.filter((function(t){return!i.has(t)})),D=!0,F=!1,N=t;try{for(var B,O=P[Symbol.iterator]();!(D=(B=O.next()).done);D=!0){var z=B.value;n.push(z)}}catch(t){F=!0,N=t}finally{try{D||null==O.return||O.return()}finally{if(F)throw N}}return n.sort((function(t,e){return t.start-e.start})),n}function lo(e){var r=Object.create(null),n=[],i=new Set,a=this.filterTypes;e=e.filter((function(e){return a===t||!a.has(e.type)}));var o=!0,s=!1,h=t;try{for(var c,l=e[Symbol.iterator]();!(o=(c=l.next()).done);o=!0){var u=c.value;if(no.has(u.type)){var f=u.id;if(t!==f){var p=new uo(u);r[f]=p,n.push(p),i.add(u)}}}}catch(t){s=!0,h=t}finally{try{o||null==l.return||l.return()}finally{if(s)throw h}}var d=!0,g=!1,m=t;try{for(var v,b=e[Symbol.iterator]();!(d=(v=b.next()).done);d=!0){var y=v.value;if(so.has(y.type)){var w=W(y);if(w){var x=!0,k=!1,S=t;try{for(var _,C=w[Symbol.iterator]();!(x=(_=C.next()).done);x=!0){var E=r[_.value];E!==t&&(E.addExon(y),i.add(y))}}catch(t){k=!0,S=t}finally{try{x||null==C.return||C.return()}finally{if(k)throw S}}}}}}catch(t){g=!0,m=t}finally{try{d||null==b.return||b.return()}finally{if(g)throw m}}var A=!0,T=!1,R=t;try{for(var L,I=e[Symbol.iterator]();!(A=(L=I.next()).done);A=!0){var M=L.value;if(io.has(M.type)||oo.has(M.type)||ao.has(M.type)){var P=W(M);if(P){var D=!0,F=!1,N=t;try{for(var B,O=P[Symbol.iterator]();!(D=(B=O.next()).done);D=!0){var z=r[B.value];z!==t&&(oo.has(M.type)?z.addUTR(M):io.has(M.type)?z.addCDS(M):ao.has(M.type),i.add(M))}}catch(t){F=!0,N=t}finally{try{D||null==O.return||O.return()}finally{if(F)throw N}}}}}}catch(t){T=!0,R=t}finally{try{A||null==I.return||I.return()}finally{if(T)throw R}}n.forEach((function(t){"function"==typeof t.finish&&t.finish()}));var U=e.filter((function(t){return!i.has(t)})),H=!0,$=!1,q=t;try{for(var V,j=U[Symbol.iterator]();!(H=(V=j.next()).done);H=!0){var G=V.value;n.push(G)}}catch(t){$=!0,q=t}finally{try{H||null==j.return||j.return()}finally{if($)throw q}}return n.sort((function(t,e){return t.start-e.start})),n;function W(t){return t.parent&&""!==t.parent.trim()?t.parent.trim().split(","):null}}ho.prototype.combineFeatures=function(t){return"gff3"===this.format?lo.call(this,t):co.call(this,t)};var uo=function(t){Object.assign(this,t),this.exons=[]};uo.prototype.addExon=function(t){this.exons.push(t),this.start=Math.min(this.start,t.start),this.end=Math.max(this.end,t.end)},uo.prototype.addCDS=function(t){for(var e,r=this.exons,n=0;n<r.length;n++)if(r[n].start<=t.start&&r[n].end>=t.end){e=r[n];break}e?(e.cdStart=e.cdStart?Math.min(t.start,e.cdStart):t.start,e.cdEnd=e.cdEnd?Math.max(t.end,e.cdEnd):t.end,e.children||(e.children=[]),e.children.push(t)):(t.cdStart=t.start,t.cdEnd=t.end,r.push(t)),this.start=Math.min(this.start,t.start),this.end=Math.max(this.end,t.end),this.cdStart=this.cdStart?Math.min(t.start,this.cdStart):t.start,this.cdEnd=this.cdEnd?Math.max(t.end,this.cdEnd):t.end},uo.prototype.addUTR=function(t){for(var e,r=this.exons,n=0;n<r.length;n++)if(r[n].start<=t.start&&r[n].end>=t.end){e=r[n];break}e?(t.start===e.start&&t.end===e.end?e.utr=!0:(t.end<e.end&&(e.cdStart=t.end),t.start>e.start&&(e.cdEnd=t.start)),e.children||(e.children=[]),e.children.push(t)):(t.utr=!0,r.push(t)),this.start=Math.min(this.start,t.start),this.end=Math.max(this.end,t.end)},uo.prototype.finish=function(){var t=this.cdStart,e=this.cdEnd;this.exons.sort((function(t,e){return t.start-e.start})),t&&this.exons.forEach((function(r){(r.end<t||r.start>e)&&(r.utr=!0)}))},uo.prototype.popupData=function(e){var r=this.attributeString.split(";"),n=[];n.push({name:"type",value:this.type}),n.push({name:"start",value:this.start+1}),n.push({name:"end",value:this.end});var i=!0,a=!1,o=t;try{for(var s,h=r[Symbol.iterator]();!(i=(s=h.next()).done);i=!0){var c=s.value.trim().split(this.delim,2);if(2===c.length&&c[1]!==t){var l=c[0].trim(),u=c[1].trim();u.startsWith('"')&&u.endsWith('"')&&(u=u.substr(1,u.length-2)),n.push({name:l,value:u})}}}catch(t){a=!0,o=t}finally{try{i||null==h.return||h.return()}finally{if(a)throw o}}var f=!0,p=!1,d=t;try{for(var g,m=this.exons[Symbol.iterator]();!(f=(g=m.next()).done);f=!0){var v=g.value;if(e>=v.start&&e<v.end){n.push("<hr>");var b=v.popupData(e),y=!0,w=!1,x=t;try{for(var k,S=b[Symbol.iterator]();!(y=(k=S.next()).done);y=!0){var _=k.value;n.push(_)}}catch(t){w=!0,x=t}finally{try{y||null==S.return||S.return()}finally{if(w)throw x}}if(v.children){var C=!0,E=!1,A=t;try{for(var T,R=v.children[Symbol.iterator]();!(C=(T=R.next()).done);C=!0){var L=T.value;n.push("<hr>");var I=L.popupData(e),M=!0,P=!1,D=t;try{for(var F,N=I[Symbol.iterator]();!(M=(F=N.next()).done);M=!0){var B=F.value;n.push(B)}}catch(t){P=!0,D=t}finally{try{M||null==N.return||N.return()}finally{if(P)throw D}}}}catch(t){E=!0,A=t}finally{try{C||null==R.return||R.return()}finally{if(E)throw A}}}}}}catch(t){p=!0,d=t}finally{try{f||null==m.return||m.return()}finally{if(p)throw d}}return n};var fo=function(t){this.config=t,this.url=t.url,this.tissueId=t.tissueSiteDetailId,this.indexed=!0,this.datasetId=t.datasetId||"gtex_v8"};fo.prototype.readFeatures=function(){var r=I(e.mark((function r(n,i,a){var o,s,h,c,l,u,f;return e.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=this,s=n.startsWith("chr")?n:"chr"+n,h=Math.floor(i),c=Math.ceil(a),l=this.datasetId,u=this.url+"?chromosome="+s+"&start="+h+"&end="+c+"&tissueSiteDetailId="+this.tissueId+"&datasetId="+l,e.next=3,On.loadJson(u,{withCredentials:o.config.withCredentials});case 3:if(!(f=e.sent)||!f.singleTissueEqtl){e.next=9;break}return f.singleTissueEqtl.forEach((function(t){t.chr=t.chromosome,t.position=t.pos,t.start=t.pos-1,t.end=t.start+1,t.snp=t.snpId,t.geneName=t.geneSymbol,t.geneId=t.gencodeId})),e.abrupt("return",f.singleTissueEqtl);case 9:return e.abrupt("return",t);case 10:case"end":return e.stop()}}),r,this)})));return function(t,e,n){return r.apply(this,arguments)}}();var po=function(t){this.config=t,this.url=t.url,this.cellConditionId=t.cellConditionId,this.valueThreshold=t.valueThreshold?t.valueThreshold:.05};function go(t){var e=t.url+"/"+t.entity+"/"+t.entityId;return t.headers={"Cache-Control":"no-cache"},On.loadJson(e,t)}function mo(e){return new Promise((function(r,n){var i=e.results?e.results:[],a=e.url,o=e.body,s=e.decode,h=pn.apiKey,c="?",l=e.fields;return h&&(a=a+c+"key="+h,c="&"),l&&(a=a+c+"fields="+l),function e(h){h?o.pageToken=h:o.pageToken!==t&&delete o.pageToken;var c=JSON.stringify(o);On.loadJson(a,{sendData:c,contentType:"application/json",headers:{"Cache-Control":"no-cache"}}).then((function(t){var n,a;t?((a=s?s(t):t)&&a.forEach((function(t){i.push(t)})),(n=t.nextPageToken)?e(n):r(i)):r(i)})).catch((function(t){n(t)}))}()}))}po.prototype.readFeatures=function(t,e,r){var n=this,i=this.url+"?chromosome="+t+"&start="+e+"&end="+r+"&cell_condition_id="+this.cellConditionId;return new Promise((function(t,e){On.loadJson(i,{withCredentials:n.config.withCredentials}).then((function(e){e?(e.eqtls.forEach((function(t){t.chr=t.chromosome,t.start=t.position,t.end=t.position+1})),t(e.eqtls)):t(null)})).catch((function(t){e(t)}))}))};var vo=function(e,r){this.config=e,this.genome=r,this.url=e.url,this.variantSetId=e.variantSetId,this.callSetIds=e.callSetIds,this.includeCalls=e.includeCalls===t||e.includeCalls};vo.prototype.readHeader=function(){var t=this;return t.header?Promise.resolve(t.header):(t.header={},!1===t.includeCalls?Promise.resolve(t.header):mo({url:t.url+"/callsets/search",fields:"nextPageToken,callSets(id,name)",body:{variantSetIds:Array.isArray(t.variantSetId)?t.variantSetId:[t.variantSetId],pageSize:"10000"},decode:function(e){if(t.callSetIds){var r=[],n=new Set;return t.callSetIds.forEach((function(t){n.add(t)})),e.callSets.forEach((function(t){n.has(t.id)&&r.push(t)})),r}return e.callSets}}).then((function(e){return t.header.callSets=e,t.header})))},vo.prototype.readFeatures=function(e,r,n){var i=this,a=this.genome;return i.readHeader().then((function(t){return new Promise((function(t,e){i.chrAliasTable?t(i.chrAliasTable):i.readMetadata().then((function(e){i.metadata=e.metadata,i.chrAliasTable={},e.referenceBounds&&a&&e.referenceBounds.forEach((function(t){var e=t.referenceName,r=a.getChromosomeName(e);i.chrAliasTable[r]=e})),t(i.chrAliasTable)}))}))})).then((function(a){var o=a.hasOwnProperty(e)?a[e]:e;return mo({url:i.url+"/variants/search",fields:i.includeCalls?t:"nextPageToken,variants(id,variantSetId,names,referenceName,start,end,referenceBases,alternateBases,quality,filter,info)",body:{variantSetIds:Array.isArray(i.variantSetId)?i.variantSetId:[i.variantSetId],callSetIds:i.callSetIds?i.callSetIds:t,referenceName:o,start:r.toString(),end:n.toString(),pageSize:"10000"},decode:function(t){var e,r=[];return t.variants.forEach((function(t){(e=function(t){var e,r=new Na;return r.chr=t.referenceName,r.start=parseInt(t.start),r.end=parseInt(t.end),r.pos=r.start+1,r.names=Oa(t.names,"; "),r.referenceBases=t.referenceBases,r.alternateBases=Oa(t.alternateBases),r.quality=t.quality,r.filter=Oa(t.filter),r.info={},t.info&&Object.keys(t.info).forEach((function(e){var n,i=t.info[e];n=Array.isArray(i)?i.join(","):i,r.info[e]=n})),r.calls={},t.calls&&t.calls.forEach((function(t){e=t.callSetId,r.calls[e]=t})),Pa(r),r}(t)).isRefBlock()||r.push(e)})),r}})}))},vo.prototype.readMetadata=function(){return go({url:this.url,entity:"variantsets",entityId:this.variantSetId})};var bo=function(t){this.config=t};function yo(e,r,n,i){if(this.chr=e,this.start=r,this.end=n,this.id=i.id,this.entrezName=i.entrez_name,this.name=i.name,this.actionabilityScore=i.civic_actionability_score,i.coordinates.reference_bases&&(this.refBases=i.coordinates.reference_bases),i.coordinates.variant_bases&&(this.altBases=i.coordinates.variant_bases),i.variant_types&&(this.variant_types=i.variant_types),this.locationString=this.chr+":"+Ur(this.start+1)+"-"+Ur(this.end),this.actionabilityScore!==t){var a;if(this.actionabilityScore<=10)a=.2;else{var o=Math.min(30,this.actionabilityScore);a=.2+.8*Math.log10((o-10)/2)}this.alpha=a}}bo.prototype.readFeatures=function(e,r,n){return On.loadJson(this.config.url+"/variants/?count=5000").then((function(e){var r=e.records,n=[],i=!0,a=!1,o=t;try{for(var s,h=r[Symbol.iterator]();!(i=(s=h.next()).done);i=!0){var c=s.value;if(c.coordinates){c.id;var l=c.coordinates;l.chromosome&&n.push(new yo(l.chromosome,l.start-1,l.stop,c)),l.chromosome2&&n.push(new yo(l.chromosome2,l.start2-1,l.stop2,c))}}}catch(t){a=!0,o=t}finally{try{i||null==h.return||h.return()}finally{if(a)throw o}}return n}))},yo.prototype.popupData=function(){var e=u("CIViC","https://civicdb.org/links/variants/"+this.id),r=(this.refBases!==this.altBases&&this.refBases&&1===this.refBases.length&&this.altBases&&this.altBases.length,[e]);if(r.push({name:"Entrez",value:u(this.entrezName,"https://ghr.nlm.nih.gov/gene/"+this.entrezName)}),r.push({name:"Name",value:this.name}),this.variant_types&&this.variant_types.length>0){var n,i=1===this.variant_types.length?"Type":"Types",a=!0,o=!1,s=t;try{for(var h,c=this.variant_types[Symbol.iterator]();!(a=(h=c.next()).done);a=!0){var l=h.value;n?n+=", "+l.display_name:n=l.display_name}}catch(t){o=!0,s=t}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}r.push({name:i,value:n})}return r.push({name:"Actionability",value:this.actionabilityScore}),r.push({name:"Location",value:this.locationString}),r;function u(t,e){return"<a target='_blank' href='"+e+"'>"+t+"</a>"}};var wo=new Set(["bigwig","bw","bigbed","bb","tdf"]),xo=function(e,r){if(this.config=e||{},this.genome=r,this.sourceType=e.sourceType===t?"file":e.sourceType,t===e.filterTypes&&(e.filterTypes=["chromosome","gene"]),e.features&&Array.isArray(e.features)){var n=e.features;So(n),e.mappings&&function(t,e){var r=Object.keys(e);t.forEach((function(t){r.forEach((function(r){t[r]=t[e[r]]}))}))}(n,e.mappings),this.featureCache=new Qa(n,r),this.static=!0}else"ga4gh"===e.sourceType?(this.reader=new vo(e,r),this.queryable=!0):"immvar"===e.sourceType?(this.reader=new po(e),this.queryable=!0):"eqtl"===e.type&&"gtex-ws"===e.sourceType?(this.reader=new fo(e),this.queryable=!0):"ucscservice"===e.sourceType?(this.reader=new ro(e.source),this.queryable=!0):"custom"===e.sourceType||e.source!==t?(this.reader=new eo(e.source),this.queryable=e.source.queryable===t||e.source.queryable):"civic-ws"===e.sourceType?(this.reader=new bo(e),this.queryable=!1):(this.reader=new Ka(e,r),e.queryable!==t?this.queryable=e.queryable:wo.has(e.format)&&(this.queryable=wo.has(e.format)||this.reader.indexed));this.supportsWG=!this.queryable};function ko(t){var e=this;t.forEach((function(t){t.name&&(e.config.browser.featureDB[t.name.toUpperCase()]=t)}))}function So(e,r){if(r=r||1e3,null!=e&&0!==e.length){var n={},i=[];e.forEach((function(t){var e=t.chr,r=n[e];r||(r=[],n[e]=r,i.push(e)),r.push(t)})),i.forEach((function(e){!function(e,r){var n=[];e.sort((function(t,e){return t.start-e.start})),n.push(-1e3);var i=!0,a=!1,o=t;try{for(var s,h=e[Symbol.iterator]();!(i=(s=h.next()).done);i=!0){var c=s.value,l=0,u=Math.min(n.length,r);for(l=0;l<u;l++)if(c.start>n[l]){c.row=l,n[l]=c.end;break}c.row=l,n[l]=c.end}}catch(t){a=!0,o=t}finally{try{i||null==h.return||h.return()}finally{if(a)throw o}}}(n[e],r)}))}}xo.prototype.supportsWholeGenome=function(){return this.supportsWG},xo.prototype.getFileHeader=I(e.mark((function t(){var r,n;return e.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.header){t.next=10;break}if(!this.reader||"function"!=typeof this.reader.readHeader){t.next=9;break}return t.next=4,this.reader.readHeader();case 4:(r=t.sent)&&(this.header=r,(n=r.features)&&this.ingestFeatures(n),r.format&&(this.config.format=r.format)),this.header=r,t.next=10;break;case 9:this.header={};case 10:return t.abrupt("return",this.header);case 11:case"end":return t.stop()}}),t,this)}))),xo.prototype.getFeatures=function(){var r=I(e.mark((function r(n,i,a,o,s){var h,c,l,u,f,p,d;return e.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return d=function(){return(d=I(e.mark((function r(){var o,c,u,f,p;return e.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=new un(l,o=i,c=a),!this.featureCache||!this.static&&!this.featureCache.containsRange(u)&&"all"!==n.toLowerCase()){e.next=7;break}return e.abrupt("return",this.featureCache);case 7:return t!==s&&(s<=0?(o=0,c=Number.MAX_VALUE):s>a-i&&(f=Math.min(4.1*(a-i),s),o=Math.max(0,(i+a-f)/2),c=i+f)),u=new un(l,o,c),e.next=11,h.readFeatures(l,u.start,u.end);case 11:return p=e.sent,this.queryable===t&&(this.queryable=h.indexed),p?this.ingestFeatures(p,u):this.featureCache=new Qa,e.abrupt("return",this.featureCache);case 15:case"end":return e.stop()}}),r,this)})))).apply(this,arguments)},p=function(){return d.apply(this,arguments)},h=this.reader,c=this.genome,l=c?c.getChromosomeName(n):n,r.next=7,p.call(this);case 7:if(u=r.sent,f=this.queryable,"all"!==n.toLowerCase()){r.next=22;break}if(!f){r.next=14;break}return r.abrupt("return",[]);case 14:if(!(u.count>5e5)){r.next=19;break}return this.supportsWG=!1,r.abrupt("return",[]);case 19:return r.abrupt("return",this.getWGFeatures(u.getAllFeatures()));case 20:r.next=23;break;case 22:return r.abrupt("return",u.queryFeatures(l,i,a));case 23:case"end":return r.stop()}}),r,this)})));return function(t,e,n,i,a){return r.apply(this,arguments)}}(),xo.prototype.ingestFeatures=function(t,e){("gtf"!==this.config.format&&"gff3"!==this.config.format&&"gff"!==this.config.format||(t=new ho(this.config).combineFeatures(t)),"wig"!==this.config.format&&"junctions"!==this.config.type)&&So(t,this.config.maxRows||500);this.featureCache=this.queryable?new Qa(t,this.genome,e):new Qa(t,this.genome),this.config.searchable&&ko.call(this,t)},xo.prototype.getWGFeatures=function(e){var r=this.genome,n=new Set(r.wgChromosomeNames),i=[],a=!0,o=!1,s=t;try{for(var h,c=r.wgChromosomeNames[Symbol.iterator]();!(a=(h=c.next()).done);a=!0){var l=e[h.value];if(l){var u=!0,f=!1,p=t;try{for(var d,g=l[Symbol.iterator]();!(u=(d=g.next()).done);u=!0){var m=d.value,v=r.getChromosomeName(m.chr);if(n.has(v)){var b=Object.create(Object.getPrototypeOf(m));Object.assign(b,m),b.realChr=m.chr,b.realStart=m.start,b.realEnd=m.end,b.chr="all",b.start=r.getGenomeCoordinate(m.chr,m.start),b.end=r.getGenomeCoordinate(m.chr,m.end),b.exons&&delete b.exons,b.popupData=function(t){var e=Object.assign({},this);return e.chr=this.realChr,e.start=this.realStart+1,e.end=this.realEnd,delete e.realChr,delete e.realStart,delete e.realEnd,Ia.extractPopupData(e,r.id)},i.push(b)}}}catch(t){f=!0,p=t}finally{try{u||null==g.return||g.return()}finally{if(f)throw p}}}}}catch(t){o=!0,s=t}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}return i.sort((function(t,e){return t.start-e.start})),i};var _o=function(t,e,r){this.path=t.url,this.bufferSize=r||512e3,this.range={start:-1,size:-1},this.config=t};_o.prototype.dataViewForRange=function(t,e){var r,n,i=this;return i.data&&i.range.start<=t.start&&i.range.start+i.range.size>=t.start+t.size?Promise.resolve(a(i,t,e)):(r=t.size?Math.max(i.bufferSize,t.size):i.bufferSize,n={start:t.start,size:r},On.loadArrayBuffer(i.path,nn(i.config,{range:n})).then((function(r){return i.data=r,i.range=n,a(i,t,e)})));function a(t,e,r){var n=t.data.byteLength,i=e.start-t.range.start;return r?new Uint8Array(t.data,i,n-i):new DataView(t.data,i,n-i)}};var Co=64,Eo=function(t,e){this.path=t.url,this.genome=e,this.rpTreeCache={},this.config=t};function Ao(t,e){this.index=t,this.reductionLevel=e.getInt(),this.reserved=e.getInt(),this.dataOffset=e.getLong(),this.indexOffset=e.getLong()}function To(t,e,r){this.config=e,this.fileOffset=t,this.path=e.url,this.littleEndian=r}function Ro(t){this.items=t;var e,r,n=Number.MAX_VALUE,i=0,a=Number.MAX_VALUE,o=0;for(e=0;e<t.length;e++)r=t[e],n=Math.min(n,r.startChrom),i=Math.max(i,r.endChrom),a=Math.min(a,r.startBase),o=Math.max(o,r.endBase);this.startChrom=n,this.endChrom=i,this.startBase=a,this.endBase=o}function Lo(t,e,r){var n=t.getInt(),i=t.getInt(),a=t.getInt(),o=t.getInt(),s=t.getLong(),h=t.getLong(),c={},l=[];this.header={magic:n,blockSize:i,keySize:a,valSize:o,itemCount:s,reserved:h},this.chromToID=c,this.idToChrom=l,function t(n,i){i>=0&&(n.position=i);var o,s,h,u,f,p,d=n.getByte(),g=(n.getByte(),n.getUShort());if(1===d)for(o=0;o<g;o++)s=n.getFixedLengthTrimmedString(a),h=n.getInt(),n.getInt(),r&&(s=r.getChromosomeName(s)),c[s]=h,l[h]=s;else for(o=0;o<g;o++)s=n.getFixedLengthTrimmedString(a),u=n.getLong(),f=u-e,p=n.position,t(n,f),n.position=p}(t,-1)}function Io(t,e,r,n,i){return!!t&&((n>t.startChrom||n===t.startChrom&&i>=t.startBase)&&(e<t.endChrom||e===t.endChrom&&r<=t.endBase))}function Mo(t){t?(this.basesCovered=t.getLong(),this.minVal=t.getDouble(),this.maxVal=t.getDouble(),this.sumData=t.getDouble(),this.sumSquares=t.getDouble(),Po.call(this)):(this.basesCovered=0,this.minVal=0,this.maxVal=0,this.sumData=0,this.sumSquares=0,this.mean=0,this.stddev=0)}function Po(){var t=this.basesCovered;if(t>0){this.mean=this.sumData/t,this.stddev=Math.sqrt(this.sumSquares/(t-1));var e=this.minVal<0?this.mean-2*this.stddev:0,r=this.maxVal>0?this.mean+2*this.stddev:0;this.defaultRange={min:e,max:r}}}function Do(t,e,r,n,i,a,o){var s,h,c=new Ha(t),l=c.getInt(),u=c.getInt(),f=c.getInt(),p=c.getInt(),d=c.getInt(),g=c.getByte(),m=(c.getByte(),c.getUShort());if(l>=e&&l<=n)for(;m-- >0;){switch(g){case 1:u=c.getInt(),f=c.getInt(),s=c.getFloat();break;case 2:u=c.getInt(),s=c.getFloat(),f=u+d;break;case 3:s=c.getFloat(),f=u+d,u+=p}if(!(l<e||l===e&&f<r)){if(l>n||l===n&&u>=i)break;Number.isFinite(s)&&(h=o[l],a.push({chr:h,start:u,end:f,value:s}))}}}function Fo(e,r,n,i,a,o,s){for(var h,c,l,u,f,p,d,g,m,v,b,y,w,x=new Ha(e);x.remLength()>=13;)if(w=s[h=x.getInt()],c=x.getInt(),l=x.getInt(),u=x.getString(),!(h<r||h===r&&l<n)){if(h>i||h===i&&c>=a)break;if(p={chr:w,start:c,end:l},o.push(p),(f=u.split("\t")).length>0&&(p.name=f[0]),f.length>1&&(p.score=parseFloat(f[1])),f.length>2&&(p.strand=f[2]),f.length>3&&(p.cdStart=parseInt(f[3])),f.length>4&&(p.cdEnd=parseInt(f[4])),f.length>5&&"."!==f[5]&&"0"!==f[5]&&"-1"!==f[5]){var k=Vr.createColorString(f[5]);p.color=k.startsWith("rgb")?k:t}if(f.length>8){d=parseInt(f[6]),g=f[7].split(","),m=f[8].split(","),v=[];for(var S=0;S<d;S++)y=(b=c+parseInt(m[S]))+parseInt(g[S]),v.push({start:b,end:y});p.exons=v}}}function No(t,e,r,n,i,a,o,s){for(var h,c,l,u,f,p,d,g,m,v=new Ha(t);v.remLength()>=32;){switch(m=o[h=v.getInt()],c=v.getInt(),l=v.getInt(),u=v.getInt(),f=v.getFloat(),p=v.getFloat(),d=v.getFloat(),v.getFloat(),s){case"min":g=f;break;case"max":g=p;break;default:g=0===u?0:d/u}if(!(h<e||h===e&&l<r)){if(h>n||h===n&&c>=i)break;Number.isFinite(g)&&a.push({chr:m,start:c,end:l,value:g})}}}Eo.prototype.readWGFeatures=function(t,e){var r=this;this.genome;return r.getZoomHeaders().then((function(n){var i,a,o;return 0,i=r.chromTree.idToChrom.length-1,a=r.chromTree.idToChrom[0],o=r.chromTree.idToChrom[i],r.readFeatures(a,0,o,Number.MAX_VALUE,t,e)}))},Eo.prototype.readFeatures=function(e,r,n,i,a,o){var s,h,c,l=this;return l.getZoomHeaders().then((function(t){var e,r=function(t,e){var r,n,i=null;for(r=0;r<e.length;r++)if((n=e[r]).reductionLevel<t){i=n;break}return i}(a,t);return r?(e=r.indexOffset,s=No):(e=l.header.fullIndexOffset,s="BigWig"===l.type?Do:Fo),l.loadRPTree(e)})).then((function(a){return h=l.chromTree.chromToID[e],c=l.chromTree.chromToID[n],h===t||c===t?t:a.findLeafItemsOverlapping(h,r,c,i)})).then((function(e){if(e&&0!==e.length){var n=Number.MAX_VALUE,a=0,u=!0,f=!1,p=t;try{for(var d,g=e[Symbol.iterator]();!(u=(d=g.next()).done);u=!0){var m=d.value;n=Math.min(n,m.dataOffset),a=Math.max(a,m.dataOffset+m.dataSize)}}catch(t){f=!0,p=t}finally{try{u||null==g.return||g.return()}finally{if(f)throw p}}var v=a-n;return On.loadArrayBuffer(l.config.url,nn(l.config,{range:{start:n,size:v}})).then((function(a){var u=[],f=new Uint8Array(a),p=!0,d=!1,g=t;try{for(var m,v=e[Symbol.iterator]();!(p=(m=v.next()).done);p=!0){var b=m.value,y=f.subarray(b.dataOffset-n,b.dataOffset+b.dataSize),w=void 0;if(l.header.uncompressBuffSize>0)w=new Br.Inflate(y).decompress();else w=y;s(new DataView(w.buffer),h,r,c,i,u,l.chromTree.idToChrom,o)}}catch(t){d=!0,g=t}finally{try{p||null==v.return||v.return()}finally{if(d)throw g}}return u.sort((function(t,e){return t.start-e.start})),u}))}return[]}))},Eo.prototype.getZoomHeaders=function(){var t=this;return t.zoomLevelHeaders?Promise.resolve(t.zoomLevelHeaders):t.loadHeader().then((function(){return t.zoomLevelHeaders}))},Eo.prototype.loadHeader=function(){var t=this;return t.header?Promise.resolve(t.header):On.loadArrayBuffer(t.path,nn(t.config,{range:{start:0,size:Co}})).then((function(e){var r;t.littleEndian=!0;var n=new Ha(new DataView(e)),i=n.getUInt();if(2291137574===i)t.type="BigWig";else if(2273964779===i)t.type="BigBed";else{t.littleEndian=!1,n.littleEndian=!1,n.position=0;var a=n.getUInt();654085990===a?t.type="BigWig":3958540679===a&&(t.type="BigBed")}return(r={}).bwVersion=n.getUShort(),r.nZoomLevels=n.getUShort(),r.chromTreeOffset=n.getLong(),r.fullDataOffset=n.getLong(),r.fullIndexOffset=n.getLong(),r.fieldCount=n.getUShort(),r.definedFieldCount=n.getUShort(),r.autoSqlOffset=n.getLong(),r.totalSummaryOffset=n.getLong(),r.uncompressBuffSize=n.getInt(),r.reserved=n.getLong(),r})).then((function(r){return t.header=r,e.call(t)}));function e(){var t=this,e=Co,r={start:e,size:t.header.fullDataOffset-e+5};return On.loadArrayBuffer(t.path,nn(t.config,{range:r})).then((function(r){var n=t.header.nZoomLevels,i=new Ha(new DataView(r));t.zoomLevelHeaders=[],t.firstZoomDataOffset=Number.MAX_VALUE;for(var a=1;a<=n;a++){var o=n-a,s=new Ao(o,i);t.firstZoomDataOffset=Math.min(s.dataOffset,t.firstZoomDataOffset),t.zoomLevelHeaders[o]=s}if(t.header.autoSqlOffset>0&&(i.position=t.header.autoSqlOffset-e,t.autoSql=i.getString()),t.header.totalSummaryOffset>0&&(i.position=t.header.totalSummaryOffset-e,t.totalSummary=new Mo(i)),!(t.header.chromTreeOffset>0))throw"BigWig chromosome tree offset <= 0";return i.position=t.header.chromTreeOffset-e,t.chromTree=new Lo(i,e,t.genome),i.position=t.header.fullDataOffset-e,t.header.dataCount=i.getInt(),t.header}))}},Eo.prototype.loadRPTree=function(t){var e=this,r=e.rpTreeCache[t];return r?Promise.resolve(r):(r=new To(t,e.config,e.littleEndian)).load().then((function(){return e.rpTreeCache[t]=r,r}))},To.prototype.load=function(){var t=this,e=t.fileOffset+48,r=new _o(t.config,512e3);return t.readNode(e,r).then((function(e){return t.rootNode=e,t}))},To.prototype.readNode=function(t,e){var r,n,i=this;return e.dataViewForRange({start:t,size:4},!1).then((function(a){var o,s;s=(o=new Ha(a,i.littleEndian)).getByte(),n=1===s,o.getByte(),r=o.getUShort();var h={start:t+=4,size:r*(n?32:24)};return e.dataViewForRange(h,!1)})).then((function(t){var e,i=new Array(r),a=new Ha(t);if(n){for(e=0;e<r;e++){var o={isLeaf:!0,startChrom:a.getInt(),startBase:a.getInt(),endChrom:a.getInt(),endBase:a.getInt(),dataOffset:a.getLong(),dataSize:a.getLong()};i[e]=o}return new Ro(i)}for(e=0;e<r;e++){var s={isLeaf:!1,startChrom:a.getInt(),startBase:a.getInt(),endChrom:a.getInt(),endBase:a.getInt(),childOffset:a.getLong()};i[e]=s}return new Ro(i)}))},To.prototype.findLeafItemsOverlapping=function(e,r,n,i){var a=this;return new Promise((function(o,s){var h=[],c=new Set,l=new _o(a.config,512e3);c.add(0),function u(f,p){if(Io(f,e,r,n,i)){f.items.forEach((function(t){Io(t,e,r,n,i)&&(t.isLeaf?h.push(t):t.childNode?u(t.childNode):(c.add(t.childOffset),a.readNode(t.childOffset,l).then((function(e){t.childNode=e,u(e,t.childOffset)})).catch(s)))}))}p!==t&&c.delete(p);0===c.size&&o(h)}(a.rootNode,0)}))};var Bo=function(t,e){this.reader=new Eo(t,e),this.genome=e,this.wgValues={}};Bo.prototype.getFeatures=function(t,e,r,n,i){return"all"===t.toLowerCase()?this.getWGValues(i):this.reader.readFeatures(t,e,t,r,n,i)},Bo.prototype.getDefaultRange=function(){return this.reader.totalSummary!==t?this.reader.totalSummary.defaultRange:t},Bo.prototype.defaultVisibilityWindow=function(){if("bigwig"===this.reader.type)return Promise.resolve(t);var e=this.genome?this.genome.getGenomeLength():3088286401;return this.reader.loadHeader().then((function(t){return e/t.dataCount*1e3}))},Bo.prototype.getWGValues=function(t){var e,r=this,n=this.genome;return r.wgValues[t]?Promise.resolve(r.wgValues[t]):(e=n.getGenomeLength()/500,r.reader.readWGFeatures(e,t).then((function(e){var i=[];return e.forEach((function(t){var e,r,a;a=t.chr,r=n.getCumulativeOffset(a),(e=Object.assign({},t)).chr="all",e.start=r+t.start,e.end=r+t.end,i.push(e)})),r.wgValues[t]=i,i})))},Bo.prototype.supportsWholeGenome=function(){return!0};var Oo={getTissueInfo:function(t,e){var r=(e=e||"https://gtexportal.org/rest/v1")+"/dataset/tissueInfo?datasetId="+(t=t||"gtex_v8");return On.loadJson(r,{})},trackConfiguration:function(t,e){return{type:"eqtl",sourceType:"gtex-ws",url:(e=e||"https://gtexportal.org/rest/v1")+"/association/singleTissueEqtlByLocation",tissueSiteDetailId:t.tissueSiteDetailId,name:t.tissueSiteDetailId.split("_").join(" "),visibilityWindow:25e4}}},zo=new Ir("Dark2");["GT/AG","CT/AC","GC/AG","CT/GC","AT/AC","GT/AT","non-canonical"].forEach((function(t){zo.getColor(t)}));var Uo=en(Ia,(function(e,r){this.type="feature",Ia.call(this,e,r),e.maxRows===t&&(e.maxRows=500),this.maxRows=e.maxRows,this.displayMode=e.displayMode||"EXPANDED",this.labelDisplayMode=e.labelDisplayMode;var n=e.format?e.format.toLowerCase():t;this.featureSource="bigwig"===n||"bigbed"===n?new Bo(e,r.genome):new xo(e,r.genome),this.autoHeight=e.autoHeight,this.margin=e.margin===t?10:e.margin,this.featureHeight=e.featureHeight||14,"FusionJuncSpan"===e.type?(this.squishedRowHeight=e.squishedRowHeight||50,this.expandedRowHeight=e.expandedRowHeight||50,this.height=e.height||this.margin+2*this.expandedRowHeight):"snp"===e.type?(this.expandedRowHeight=e.expandedRowHeight||10,this.squishedRowHeight=e.squishedRowHeight||5,this.height=e.height||30):(this.squishedRowHeight=e.squishedRowHeight||15,this.expandedRowHeight=e.expandedRowHeight||30,this.height=e.height||this.margin+2*this.expandedRowHeight),this.height!==t&&this.height||(this.height=100),"spliceJunctions"===e.type&&e.colorByNumReadsThreshold===t&&(e.colorByNumReadsThreshold=5),e.render?this.render=e.render:"FusionJuncSpan"===e.type?this.render=Vo:"spliceJunctions"===e.type?this.render=jo:"snp"===e.type?(this.render=Yo,this.snpColors=["rgb(0,0,0)","rgb(0,0,255)","rgb(0,255,0)","rgb(255,0,0)"],this.colorBy="function"):(this.render=$o,this.arrowSpacing=30,function(t){t.browser.on&&(t.browser.on("trackdragend",e),t.browser.on("trackremoved",(function r(n){t.browser.un&&t===n&&(t.browser.un("trackdrag",e),t.browser.un("trackremoved",r))})));function e(){t.trackView&&t.trackView.tile&&"SQUISHED"!==t.displayMode&&t.trackView.repaintViews()}}(this))}));function Ho(t,e,r){var n=(t.start-e)/r,i=(t.end-e)/r,a=i-n;return a<3&&(a=3,n-=1.5),{px:n,px1:i,pw:a}}function $o(e,r,n,i,a,o){var s,h,c=this.browser,l=this.color;if(e.alpha&&1!==e.alpha&&(l=Vr.addAlpha(this.color,e.alpha)),this.config.colorBy){var u=e[this.config.colorBy.field];u&&(l=this.config.colorBy.pallete[u])}else e.color&&(l=e.color);a.fillStyle=l,a.strokeStyle=l,"SQUISHED"===this.displayMode&&e.row!==t?(s=this.featureHeight/2,h=this.margin+this.squishedRowHeight*e.row):"EXPANDED"===this.displayMode&&e.row!==t?(s=this.featureHeight,h=this.margin+this.expandedRowHeight*e.row):(s=this.featureHeight,h=this.margin);var f=h+s/2,p=s/2,d=f-p/2,g=e.exons?e.exons.length:0,m=Ho(e,r,n),v=this.arrowSpacing,b="+"===e.strand?1:"-"===e.strand?-1:0;if(0===g){if(a.fillRect(m.px,h,m.pw,s),0!==b){a.fillStyle="white",a.strokeStyle="white";for(var y=m.px+v/2;y<m.px1;y+=v)Ri.strokeLine(a,y-2*b,f-2,y,f),Ri.strokeLine(a,y-2*b,f+2,y,f);a.fillStyle=l,a.strokeStyle=l}}else{Ri.strokeLine(a,m.px+1,f,m.px1-1,f);for(var w=o.pixelWidth,x=Math.max(0,m.px)+v/2,k=Math.min(w,m.px1),S=x;S<k;S+=v)Ri.strokeLine(a,S-2*b,f-2,S,f),Ri.strokeLine(a,S-2*b,f+2,S,f);for(var _=0;_<g;_++){var C=e.exons[_],E=Math.round((C.start-r)/n),A=Math.round((C.end-r)/n),T=Math.max(1,A-E),R=void 0;if(!(E+T<0)){if(E>w)break;if(C.utr)a.fillRect(E,d,T,p);else if(C.cdStart&&(R=Math.round((C.cdStart-r)/n),a.fillRect(E,d,R-E,p),T-=R-E,E=R),C.cdEnd&&(R=Math.round((C.cdEnd-r)/n),a.fillRect(R,d,A-R,p),T-=A-R,A=R),a.fillRect(E,h,T,s),T>v+5&&0!==b){a.fillStyle="white",a.strokeStyle="white";for(var L=E+v/2;L<A;L+=v)Ri.strokeLine(a,L-2*b,f-2,L,f),Ri.strokeLine(a,L-2*b,f+2,L,f);a.fillStyle=l,a.strokeStyle=l}}}}var I=Math.round(o.viewportContainerX),M=c.genomicStateList?c.genomicStateList.length:1,P=I+o.viewportContainerWidth/M;o.drawLabel&&qo.call(this,a,e,m.px,m.px1,h,I,P,o.genomicState,o)}function qo(e,r,n,i,a,o,s,h,c){if(r.name!==t){var l,u,f;i<o||n>s?(l=n,u=i):(l=Math.max(n,o),u=Math.min(i,s));var p=!1;if(h.selection&&Oo.gtexLoaded&&(p=!0,f=h.selection.colorForGene(r.name)),"SQUISHED"!==this.displayMode){var d,g={textAlign:"SLANT"===this.labelDisplayMode?t:"center",fillStyle:f||r.color||this.color,strokeStyle:f||r.color||this.color};"COLLAPSED"===this.displayMode&&"SLANT"===this.labelDisplayMode&&(d={rotate:{angle:45}});var m=l+(u-l)/2,v=function(t,e){return e?t+20:t+25}(a,d),b=e.measureText(r.name),y=m-b.width/2,w=m+b.width/2;(c.labelAllFeatures||y>c.rowLastX[r.row]||p)&&(c.rowLastX[r.row]=w,c.labelTransform?(e.save(),c.labelTransform(e,m),Ri.fillText(e,r.name,m,v,g,t),e.restore()):Ri.fillText(e,r.name,m,v,g,d))}}}function Vo(e,r,n,i,a){var o,s="EXPANDED"===this.displayMode?this.expandedRowHeight:this.squishedRowHeight;"COLLAPSED"===this.display&&(o=this.margin),"SQUISHED"===this.displayMode&&e.row!==t?o=this.margin+s*e.row:"EXPANDED"===this.displayMode&&e.row!==t&&(o=this.margin+s*e.row);var h=o+.5*s,c=h-.5*s,l=h+.5*s,u=Math.round((e.junction_left-r)/n),f=Math.round((e.junction_right-r)/n);a.beginPath(),a.moveTo(u,h),a.bezierCurveTo(u,c,f,c,f,h),a.lineWidth=1+Math.log(e.num_junction_reads)/Math.log(2),a.strokeStyle="blue",a.stroke();for(var p=e.spanning_frag_coords,d=0;d<p.length;d++){var g=p[d],m=Math.round((g.left-r)/n),v=Math.round((g.right-r)/n);a.beginPath(),a.moveTo(m,h),a.bezierCurveTo(m,l,v,l,v,h),a.lineWidth=1,a.strokeStyle="purple",a.stroke()}}function jo(e,r,n,i,a){if(!(this.config.hideAnnotatedJunctions&&"true"===e.attributes.annotated_junction||this.config.hideUnannotatedJunctions&&"false"===e.attributes.annotated_junction||this.config.hideMotifs&&this.config.hideMotifs.includes(e.attributes.motif)||this.config.hideStrand===e.strand)){var o=parseInt(e.attributes.uniquely_mapped);if(!(o<this.config.minUniquelyMappedReads)){var s=parseInt(e.attributes.multi_mapped),h=o+s;if(!(h<this.config.minTotalReads))if(!(h>0&&s/h>this.config.maxFractionMultiMappedReads))if(!(parseInt(e.attributes.maximum_spliced_alignment_overhang)<this.config.minSplicedAlignmentOverhang)){var c,l,u,f=this.margin,p=this.height,d=f+.5*p,g=f,m=f+p-10,v=Math.round((e.start-r)/n),b=Math.round((e.end-r)/n),y=(v+b)/2,w=(v+y)/2,x=(y+b)/2;this.config.thicknessBasedOn===t||"numUniqueReads"===this.config.thicknessBasedOn?c=o:"numReads"===this.config.thicknessBasedOn?c=h:"isAnnotatedJunction"===this.config.thicknessBasedOn&&(c="true"===e.attributes.annotated_junction?20:100),c=1+Math.log(c+1)/Math.log(12),this.config.bounceHeightBasedOn===t||"random"===this.config.bounceHeightBasedOn?l=(e.start+e.end)%7:"distance"===this.config.bounceHeightBasedOn?l=(e.end-e.start)/1e3:"thickness"===this.config.bounceHeightBasedOn&&(l=2*c),g+=p*Math.max(7-l,0)/10,this.config.colorBy===t||"numUniqueReads"===this.config.colorBy?u=o>this.config.colorByNumReadsThreshold?"blue":"#AAAAAA":"numReads"===this.config.colorBy?u=h>this.config.colorByNumReadsThreshold?"blue":"#AAAAAA":"isAnnotatedJunction"===this.config.colorBy?u="true"===e.attributes.annotated_junction?"#b0b0ec":"orange":"strand"===this.config.colorBy?u="+"===e.strand?"#b0b0ec":"#ecb0b0":"motif"===this.config.colorBy&&(u=zo.getColor(e.attributes.motif));var k="";this.config.labelUniqueReadCount===t&&this.config.labelMultiMappedReadCount===t&&this.config.labelTotalReadCount===t?k+=o+(0==s?"":"(+"+s+")"):(this.config.labelTotalReadCount?k+=h:this.config.labelUniqueReadCount&&(k+=o),this.config.labelMultiMappedReadCount&&s>0&&(k+=" (+"+s+")")),this.config.labelAnnotatedJunction&&"true"===e.attributes.annotated_junction&&(k+=this.config.labelAnnotatedJunction),this.config.labelMotif&&e.attributes.motif&&(k+=" ".concat(e.attributes.motif)),a.beginPath(),a.moveTo(v,m),a.bezierCurveTo(w,g,x,g,b,m),a.lineWidth=c,a.strokeStyle=u,a.stroke(),a.fillText(k,y-a.measureText(k).width/2,(7*g+d)/8)}}}}Uo.prototype.postInit=I(e.mark((function r(){var n,i;return e.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.readFileHeader();case 2:if((n=e.sent)&&this.setTrackProperties(n),!(i=this.config.format)||"bigbed"!==i.toLowerCase()||this.visibilityWindow!==t||"function"!=typeof this.featureSource.defaultVisibilityWindow){e.next=10;break}return e.next=8,this.featureSource.defaultVisibilityWindow();case 8:this.visibilityWindow=e.sent,this.featureSource.visibilityWindow=this.visibilityWindow;case 10:return e.abrupt("return",this);case 11:case"end":return e.stop()}}),r,this)}))),Uo.prototype.supportsWholeGenome=function(){return!1===this.config.indexed&&!1!==this.config.supportsWholeGenome},Uo.prototype.readFileHeader=I(e.mark((function t(){return e.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("function"!=typeof this.featureSource.getFileHeader){t.next=4;break}return t.next=3,this.featureSource.getFileHeader();case 3:this.header=t.sent;case 4:return t.abrupt("return",this.header);case 5:case"end":return t.stop()}}),t,this)}))),Uo.prototype.getFeatures=function(){var t=I(e.mark((function t(r,n,i,a){return e.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.featureSource.getFeatures(r,n,i,a,this.visibilityWindow));case 1:case"end":return t.stop()}}),t,this)})));return function(e,r,n,i){return t.apply(this,arguments)}}(),Uo.prototype.computePixelHeight=function(e){if("spliceJunctions"===this.type)return this.height;if("COLLAPSED"===this.displayMode)return this.margin+this.expandedRowHeight;var r=0;if(e&&"function"==typeof e.forEach){var n=!0,i=!1,a=t;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var h=o.value;h.row&&h.row>r&&(r=h.row)}}catch(t){i=!0,a=t}finally{try{n||null==s.return||s.return()}finally{if(i)throw a}}}return this.margin+(r+1)*("SQUISHED"===this.displayMode?this.squishedRowHeight:this.expandedRowHeight)},Uo.prototype.draw=function(e){var r=e.features,n=e.context,i=e.bpPerPixel,a=e.bpStart,o=e.pixelWidth,s=e.pixelHeight,h=a+o*i+1;if(this.config.isMergedTrack||Ri.fillRect(n,0,e.pixelTop,o,s,{fillStyle:"rgb(255, 255, 255)"}),r){var c=[];e.rowLastX=[];var l=!0,u=!1,f=t;try{for(var p,d=r[Symbol.iterator]();!(l=(p=d.next()).done);l=!0){var g=p.value.row||0;c[g]===t?c[g]=1:c[g]++,e.rowLastX[g]=-Number.MAX_VALUE}}catch(t){u=!0,f=t}finally{try{l||null==d.return||d.return()}finally{if(u)throw f}}var m=[],v=!0,b=!1,y=t;try{for(var w,x=r[Symbol.iterator]();!(v=(w=x.next()).done);v=!0){var k=w.value;if(!(k.end<a)){if(k.start>h)break;var S="COLLAPSED"===this.displayMode?0:k.row,_=o/c[S];e.drawLabel=e.labelAllFeatures||_>10;var C=Math.ceil((k.end-a)/i),E=m[S];if((!E||C>E||"spliceJunctions"===this.config.type)&&(this.render.call(this,k,a,i,s,n,e),"spliceJunctions"!==this.config.type)){var A=Math.floor((k.start-a)/i);E&&A-E<=0&&(n.globalAlpha=.5,Ri.strokeLine(n,A,0,A,s,{strokeStyle:"rgb(255, 255, 255)"}),n.globalAlpha=1),m[S]=C}}}}catch(t){b=!0,y=t}finally{try{v||null==x.return||x.return()}finally{if(b)throw y}}}},Uo.prototype.clickedFeatures=function(e){var r,n=e.y-this.margin,i=Ia.prototype.clickedFeatures.call(this,e);switch(this.displayMode){case"SQUISHED":r=Math.floor(n/this.squishedRowHeight);break;case"EXPANDED":r=Math.floor(n/this.expandedRowHeight);break;default:r=t}return i.filter((function(e){return r===t||e.row===t||r===e.row}))},Uo.prototype.popupData=function(e,r){r||(r=this.clickedFeatures(e));var n=e.genomicLocation,i=[],a=!0,o=!1,s=t;try{for(var h,c=r[Symbol.iterator]();!(a=(h=c.next()).done);a=!0){var l=h.value,u="function"==typeof l.popupData?l.popupData(n):Ia.extractPopupData(l,this.getGenomeId());u&&(i.length>0&&i.push("<HR>"),Array.prototype.push.apply(i,u))}}catch(t){o=!0,s=t}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}return i},Uo.prototype.menuItemList=function(){var t=this,e=[];return this.render===Yo&&(["function","class"].forEach((function(r){e.push({object:Sr("Color by "+r,r===t.colorBy),click:function(){t.colorBy=r,t.trackView.repaintViews()}})})),e.push({object:cr('<div class="igv-track-menu-border-top">')})),e.push({object:cr('<div class="igv-track-menu-border-top">')}),["COLLAPSED","SQUISHED","EXPANDED"].forEach((function(r){e.push({object:Sr({COLLAPSED:"Collapse",SQUISHED:"Squish",EXPANDED:"Expand"}[r],r===t.displayMode),click:function(){t.displayMode=r,t.config.displayMode=r,t.trackView.checkContentHeight(),t.trackView.repaintViews()}})})),e},Uo.prototype.description=function(){if(Yo===this.render){var t="<html>"+this.name+"<hr>";return t+="<em>Color By Function:</em><br>",t+='<span style="color:red">Red</span>: Coding-Non-Synonymous, Splice Site<br>',t+='<span style="color:green">Green</span>: Coding-Synonymous<br>',t+='<span style="color:blue">Blue</span>: Untranslated<br>',t+='<span style="color:black">Black</span>: Intron, Locus, Unknown<br><br>',t+="<em>Color By Class:</em><br>",t+='<span style="color:red">Red</span>: Deletion<br>',t+='<span style="color:green">Green</span>: MNP<br>',t+='<span style="color:blue">Blue</span>: Microsatellite, Named<br>',t+='<span style="color:black">Black</span>: Indel, Insertion, SNP',t+="</html>"}return this.name},Uo.prototype.dispose=function(){this.trackView=t};var Go=new Set(["nonsense","missense","stop-loss","frameshift","cds-indel"]),Wo=new Set(["coding-synon"]),Zo=new Set(["splice-3","splice-5"]),Xo=new Set(["untranslated-5","untranslated-3"]);function Yo(t,e,r,n,i){var a,o,s,h,c=Ho(t,e,r),l=this.margin,u=this.snpColors.length;switch(a="squished"===this.displayMode?this.squishedRowHeight:this.expandedRowHeight,this.colorBy){case"function":h=t.func,o=h.split(",").map((function(t){return Go.has(t)||Zo.has(t)?u-1:Wo.has(t)?u-2:Xo.has(t)?u-3:0})).reduce((function(t,e){return Math.max(t,e)}));break;case"class":o="deletion"===(s=t.class)?u-1:"mnp"===s?u-2:"microsatellite"===s||"named"===s?u-3:0}i.fillStyle=this.snpColors[o],i.fillRect(c.px,l,c.pw,a)}var Ko=function(t,e){this.type="sequence",this.browser=e,this.removable=!1,this.config=t,this.name="",this.id="sequence",this.sequenceType=t.sequenceType||"dna",this.height=25,this.disableButtons=!1,this.order=t.order||-Number.MAX_VALUE,this.ignoreTrackMenu=!1,this.removable=!1,this.reversed=!1,this.frameTranslate=!1,this.complement={A:"T",C:"G",G:"C",T:"A"},this.translationDict={TTT:"F",TTC:"F",TTA:"L",TTG:"L",CTT:"L",CTC:"L",CTA:"L",CTG:"L",ATT:"I",ATC:"I",ATA:"I",ATG:"M",GTT:"V",GTC:"V",GTA:"V",GTG:"V",TCT:"S",TCC:"S",TCA:"S",TCG:"S",CCT:"P",CCC:"P",CCA:"P",CCG:"P",ACT:"T",ACC:"T",ACA:"T",ACG:"T",GCT:"A",GCC:"A",GCA:"A",GCG:"A",TAT:"Y",TAC:"Y",TAA:"STOP",TAG:"STOP",CAT:"H",CAC:"H",CAA:"Q",CAG:"Q",AAT:"N",AAC:"N",AAA:"K",AAG:"K",GAT:"D",GAC:"D",GAA:"E",GAG:"E",TGT:"C",TGC:"C",TGA:"STOP",TGG:"W",CGT:"R",CGC:"R",CGA:"R",CGG:"R",AGT:"S",AGC:"S",AGA:"R",AGG:"R",GGT:"G",GGC:"G",GGA:"G",GGG:"G"}};function Qo(t){return this.color?this.color:"dna"===this.sequenceType?Rr[t]||"gray":"rgb(0, 0, 150)"}Ko.prototype.menuItemList=function(){var t=this;return[{name:t.reversed?"Forward":"Reverse",click:function(){t.reversed=!t.reversed,t.trackView.repaintViews()}},{name:t.frameTranslate?"Close Translation":"Three-frame Translate",click:function(){t.frameTranslate=!t.frameTranslate,t.frameTranslate?(t.trackView.viewports.forEach((function(t){t.setContentHeight(115)})),t.trackView.setTrackHeight(115)):(t.trackView.viewports.forEach((function(t){t.setContentHeight(25)})),t.trackView.setTrackHeight(25)),t.trackView.repaintViews()}}]},Ko.prototype.translateSequence=function(t){var e=[[],[],[]],r=this;return[0,1,2].forEach((function(n){for(var i,a,o=n;t.length-o>=3;)i={},a=t.slice(o,o+3),r.reversed&&(a=a.split("").reverse().join("")),i.codons=a,i.aminoA=r.translationDict[a.toUpperCase()],e[n].push(i),i=null,o+=3})),e},Ko.prototype.getFeatures=function(t,e,r,n){var i=this.browser;return n&&n>1?Promise.resolve(null):i.genome.sequence.getSequence(t,e,r).then((function(t){return{bpStart:e,sequence:t}}))},Ko.prototype.draw=function(e){var r=this,n=e.context;if(e.features){for(var i=e.features.sequence,a=e.features.bpStart,o=1+e.bpStart+e.pixelWidth*e.bpPerPixel,s=a;s<=o;s++){var h=Math.floor(s-a);if(h<i.length){var c=i[h];this.reversed&&(c=this.complement[c.toUpperCase()]);var l=s-e.bpStart,u=l/e.bpPerPixel,f=(l+1)/e.bpPerPixel,p=Qo.call(this,c);if(e.bpPerPixel>.1)Ri.fillRect(n,u,5,f-u,10,{fillStyle:p});else{var d=.5*(u+f-n.measureText(c).width);Ri.strokeText(n,c,d,15,{strokeStyle:p})}}}if(this.frameTranslate){var g;g=this.reversed?(g=i.split("").map((function(t){return r.complement[t]}))).join(""):i;var m=15,v=this.translateSequence(g),b=!0,y=!1,w=t;try{for(var x,k=v[Symbol.iterator]();!(b=(x=k.next()).done);b=!0){var S=x.value,_=v.indexOf(S),C=_;m=0===_?m+10:m+30;var E=!0,A=!1,T=t;try{for(var R,L=S[Symbol.iterator]();!(E=(R=L.next()).done);E=!0){var I=R.value,M=void 0,P=S.indexOf(I),D=P+C+2*P,F=0==P%2?"rgb(160,160,160)":"rgb(224,224,224)",N=Math.floor(D/e.bpPerPixel),B=Math.floor((D+3)/e.bpPerPixel),O=Math.round((N+B)/2);I.aminoA.indexOf("STOP")>-1?(F="rgb(255, 0, 0)",M="STOP"):M=I.aminoA,"M"===I.aminoA&&(F="rgb(0, 153, 0)",M="START"),Ri.fillRect(n,N,m,B-N,25,{fillStyle:F}),e.bpPerPixel<=.1&&Ri.strokeText(n,M,O-n.measureText(M).width/2,m+15)}}catch(t){A=!0,T=t}finally{try{E||null==L.return||L.return()}finally{if(A)throw T}}}}catch(t){y=!0,w=t}finally{try{b||null==k.return||k.return()}finally{if(y)throw w}}}}},Ko.prototype.supportsWholeGenome=function(){return!1},Ko.prototype.computePixelHeight=function(t){return this.height};var Jo=function(t,e){this.config=t,this.genome=e,this.path=t.url,this.groupCache={},this.datasetCache={}};function ts(t,e){for(var r=t.getInt(),n=t.getInt(),i=t.getFloat(),a=[],o=e;o-- >0;){for(var s=r,h=[];s-- >0;)h.push(t.getFloat());a.push(h)}return{type:"fixedStep",start:n,span:i,data:a,nTracks:e,nPositions:r}}function es(t,e){for(var r=t.getInt(),n=t.getFloat(),i=t.getInt(),a=[],o=i;o-- >0;)a.push(t.getInt());t.getInt();for(var s=[],h=e;h-- >0;){o=i;for(var c=[];o-- >0;)c.push(t.getFloat());s.push(c)}return{type:"variableStep",tileStart:r,span:n,start:a,data:s,nTracks:e,nPositions:i}}function rs(t,e,r){for(var n=t.getInt(),i=n,a=[];i-- >0;)a.push(t.getInt());i=n;for(var o=[];i-- >0;)o.push(t.getInt());t.getInt();for(var s=[],h=e;h-- >0;){for(var c=n,l=[];c-- >0;)l.push(t.getFloat());s.push(l)}if("bedWithName"===r){i=n;for(var u=[];i-- >0;)u.push(t.getString())}return{type:r,start:a,end:o,data:s,name:name,nTracks:e,nPositions:n}}Jo.prototype.readHeader=I(e.mark((function r(){var n,i,a,o,s,h,c,l,u,f,p;return e.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.magic===t){e.next=2;break}return e.abrupt("return",this);case 2:return e.next=4,On.loadArrayBuffer(this.path,nn(this.config,{range:{start:0,size:64e3}}));case 4:if(n=e.sent,i=new Ha(new DataView(n)),this.magic=i.getInt(),this.version=i.getInt(),this.indexPos=i.getLong(),this.indexSize=i.getInt(),i.getInt(),this.version>=2)for(a=i.getInt(),this.windowFunctions=[];a-- >0;)this.windowFunctions.push(i.getString());for(this.trackType=i.getString(),this.trackLine=i.getString(),o=i.getInt(),this.trackNames=[];o-- >0;)this.trackNames.push(i.getString());return this.genomeID=i.getString(),this.flags=i.getInt(),this.compressed=0!=(1&this.flags),e.next=22,On.loadArrayBuffer(this.path,nn(this.config,{range:{start:this.indexPos,size:this.indexSize}}));case 22:for(n=e.sent,i=new Ha(new DataView(n)),this.datasetIndex={},s=i.getInt();s-- >0;)h=i.getString(),c=i.getLong(),l=i.getInt(),this.datasetIndex[h]={position:c,size:l};for(this.groupIndex={},s=i.getInt();s-- >0;)u=i.getString(),f=i.getLong(),p=i.getInt(),this.groupIndex[u]={position:f,size:p};return e.abrupt("return",this);case 31:case"end":return e.stop()}}),r,this)}))),Jo.prototype.readDataset=function(){var r=I(e.mark((function r(n,i,a){var o,s,h,c,l,u,f,p,d,g,m,v,b,y;return e.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=n+"_"+i+"_"+a,!this.datasetCache[o]){e.next=5;break}return e.abrupt("return",this.datasetCache[o]);case 5:return e.next=7,this.readHeader();case 7:if(s=this.version<2?"":"/"+i,h="all"===n.toLowerCase()||a===t?"0":a.toString(),c="raw"===i?"/"+n+"/raw":"/"+n+"/z"+h+s,(l=this.datasetIndex[c])!==t){e.next=13;break}return e.abrupt("return",t);case 13:return e.next=15,On.loadArrayBuffer(this.path,nn(this.config,{range:{start:l.position,size:l.size}}));case 15:if(u=e.sent){e.next=18;break}return e.abrupt("return",t);case 18:for(f=new Ha(new DataView(u)),p=f.getInt(),d={};p-- >0;)d[f.getString()]=f.getString();for(g=f.getString(),m=f.getFloat(),v=f.getInt(),b=[];v-- >0;)b.push({position:f.getLong(),size:f.getInt()});return y={name:c,attributes:d,dataType:g,tileWidth:m,tiles:b},this.datasetCache[o]=y,e.abrupt("return",y);case 30:case"end":return e.stop()}}),r,this)})));return function(t,e,n){return r.apply(this,arguments)}}(),Jo.prototype.readRootGroup=I(e.mark((function t(){var r,n,i,a,o,s;return e.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=this.genome,!(n=this.groupCache["/"])){t.next=6;break}return t.abrupt("return",n);case 6:return t.next=8,this.readGroup("/");case 8:return i=t.sent,a=i.chromosomes,(o=i.maxZoom)&&(this.maxZoom=Number(o)),s={},a&&a.split(",").forEach((function(t){var e=r.getChromosomeName(t);s[e]=t})),this.chrAliasTable=s,this.groupCache["/"]=i,t.abrupt("return",i);case 17:case"end":return t.stop()}}),t,this)}))),Jo.prototype.readGroup=function(){var r=I(e.mark((function r(n){var i,a,o,s,h,c,l,u;return e.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=this.groupCache[n])){e.next=5;break}return e.abrupt("return",i);case 5:return e.next=7,this.readHeader();case 7:if((a=this.groupIndex[n])!==t){e.next=10;break}return e.abrupt("return",t);case 10:return e.next=12,On.loadArrayBuffer(this.path,nn(this.config,{range:{start:a.position,size:a.size}}));case 12:if(o=e.sent){e.next=15;break}return e.abrupt("return",t);case 15:for(s=new Ha(new DataView(o)),h={name:n},c=s.getInt();c-- >0;)l=s.getString(),u=s.getString(),h[l]=u;return this.groupCache[n]=h,e.abrupt("return",h);case 21:case"end":return e.stop()}}),r,this)})));return function(t){return r.apply(this,arguments)}}(),Jo.prototype.readTiles=function(){var r=I(e.mark((function r(n,i){var a,o,s,h,c,l,u,f,p,d,g,m,v,b,y,w,x,k,S,_;return e.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.sort((function(t,e){return t.position-e.position})),0!==(n=n.filter((function(t){return t.size>0}))).length){e.next=4;break}return e.abrupt("return",Promise.resolve([]));case 4:return a=n[0],o=n[n.length-1],s=a.position,h=o.position+o.size-s,e.next=10,On.loadArrayBuffer(this.path,nn(this.config,{range:{start:s,size:h}}));case 10:c=e.sent,l=[],u=!0,f=!1,p=t,e.prev=15,d=n[Symbol.iterator]();case 17:if(u=(g=d.next()).done){e.next=41;break}if(m=g.value,v=m.position-s,!((b=m.size)>0)){e.next=38;break}y=void 0,this.compressed?(w=new Br.Inflate(new Uint8Array(c,v,b)),x=w.decompress(),y=x.buffer):y=c.slice(v,v+b),k=new Ha(new DataView(y)),S=k.getString(),_=void 0,e.t0=S,e.next="fixedStep"===e.t0?30:"variableStep"===e.t0?32:"bed"===e.t0?34:"bedWithName"===e.t0?34:36;break;case 30:return _=ts(k,i),e.abrupt("break",37);case 32:return _=es(k,i),e.abrupt("break",37);case 34:return _=rs(k,i,S),e.abrupt("break",37);case 36:throw"Unknown tile type: "+S;case 37:l.push(_);case 38:u=!0,e.next=17;break;case 41:e.next=47;break;case 43:e.prev=43,e.t1=e.catch(15),f=!0,p=e.t1;case 47:e.prev=47,e.prev=48,u||null==d.return||d.return();case 50:if(e.prev=50,!f){e.next=53;break}throw p;case 53:return e.finish(50);case 54:return e.finish(47);case 55:return e.abrupt("return",l);case 56:case"end":return e.stop()}}),r,this,[[15,43,47,55],[48,,50,54]])})));return function(t,e){return r.apply(this,arguments)}}(),Jo.prototype.readTile=function(){var t=I(e.mark((function t(r,n){var i,a,o,s,h;return e.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,On.loadArrayBuffer(this.path,nn(this.config,{range:{start:r.position,size:r.size}}));case 2:i=t.sent,this.compressed&&(a=new Br.Inflate(new Uint8Array(i)),o=a.decompress(),i=o.buffer),s=new Ha(new DataView(i)),h=s.getString(),t.t0=h,t.next="fixedStep"===t.t0?9:"variableStep"===t.t0?10:"bed"===t.t0?11:"bedWithName"===t.t0?11:12;break;case 9:return t.abrupt("return",ts(s,n));case 10:return t.abrupt("return",es(s,n));case 11:return t.abrupt("return",rs(s,n,h));case 12:throw"Unknown tile type: "+h;case 13:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}();var ns=function(t,e){this.genome=e,this.windowFunction=t.windowFunction||"mean",this.reader=new Jo(t,e)};function is(t,e,r,n,i,a){for(var o=t.nPositions,s=t.start,h=t.end,c=t.data[0],l=0;l<o;l++){var u=s[l],f=h[l];if(!(f<r)){if(u>n)break;a.push({chr:e,start:u,end:f,value:c[l]})}}}function as(t,e,r,n,i,a){for(var o=t.nPositions,s=t.start,h=t.span,c=t.data[0],l=0;l<o;l++){var u=s[l],f=u+h;if(!(f<r)){if(u>n)break;a.push({chr:e,start:u,end:f,value:c[l]})}}}function os(t,e,r,n,i,a){for(var o=t.nPositions,s=t.start,h=t.span,c=t.data[0],l=0;l<o;l++){var u=s+h;if(s>n)break;u>=r&&(Number.isNaN(c[l])||a.push({chr:e,start:s,end:u,value:c[l]})),s=u}}ns.prototype.getFeatures=function(){var r=I(e.mark((function r(n,i,a,o){var s,h,c,l,u,f,p,d,g,m,v,b,y,w,x,k,S,_,C,E;return e.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return E=function(){return(E=I(e.mark((function t(){return e.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.rootGroup){t.next=4;break}return t.abrupt("return",this.rootGroup);case 4:return t.next=6,this.reader.readRootGroup();case 6:return this.rootGroup=t.sent,t.abrupt("return",this.rootGroup);case 8:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)},C=function(){return E.apply(this,arguments)},r.next=4,C.call(this);case 4:if(s=new un(n,i,a),h=this.genome,"all"!==n.toLowerCase()){r.next=8;break}return r.abrupt("return",[]);case 8:return s.bpPerPixel=o,r.next=11,C.call(this);case 11:return r.sent,c=hs(n,o,h),l=this.reader.chrAliasTable[n],u=this.reader.maxZoom,l===t&&(l=n),u===t&&(u=-1),f=c>u?"raw":this.windowFunction,r.next=20,this.reader.readDataset(l,f,c);case 20:if(null!=(p=r.sent)){r.next=23;break}return r.abrupt("return",[]);case 23:return d=p.tileWidth,g=Math.floor(i/d),m=Math.floor(a/d),1,r.next=29,this.reader.readTiles(p.tiles.slice(g,m+1),1);case 29:v=r.sent,b=[],y=!0,w=!1,x=t,r.prev=34,k=v[Symbol.iterator]();case 36:if(y=(S=k.next()).done){r.next=51;break}_=S.value,r.t0=_.type,r.next="bed"===r.t0?41:"variableStep"===r.t0?43:"fixedStep"===r.t0?45:47;break;case 41:return is(_,n,i,a,o,b),r.abrupt("break",48);case 43:return as(_,n,i,a,o,b),r.abrupt("break",48);case 45:return os(_,n,i,a,o,b),r.abrupt("break",48);case 47:throw"Unknown tile type: "+_.type;case 48:y=!0,r.next=36;break;case 51:r.next=57;break;case 53:r.prev=53,r.t1=r.catch(34),w=!0,x=r.t1;case 57:r.prev=57,r.prev=58,y||null==k.return||k.return();case 60:if(r.prev=60,!w){r.next=63;break}throw x;case 63:return r.finish(60);case 64:return r.finish(57);case 65:return b.sort((function(t,e){return t.start-e.start})),r.abrupt("return",b);case 67:case"end":return r.stop()}}),r,this,[[34,53,57,65],[58,,60,64]])})));return function(t,e,n,i){return r.apply(this,arguments)}}(),ns.prototype.supportsWholeGenome=function(){return!1};var ss=Math.log(2);function hs(t,e,r){var n=r.getChromosome(t).bpLength;return Math.ceil(Math.log(Math.max(0,n/(700*e)))/ss)}function cs(e,r,n){var i,a,o,s,h,c,l,u={font:"normal 10px Arial",textAlign:"right",strokeStyle:"black"};function f(t){return 0===t?"0":Math.abs(t)>=10?t.toFixed():Math.abs(t)>=1?t.toFixed(1):t.toFixed(2)}t!==this.dataRange&&t!==this.dataRange.max&&t!==this.dataRange.min&&(Ri.fillRect(e,0,0,r,n,{fillStyle:"rgb(255, 255, 255)"}),i=(l=.95*r)-8,.01,h={x:a=l,y:o=s=.01*n},Ri.strokeLine(e,i,o,a,s,u),Ri.fillText(e,f(this.dataRange.max),i+4,o+12,u),c={x:a,y:o=s=.99*n},Ri.strokeLine(e,i,o,a,s,u),Ri.fillText(e,f(this.dataRange.min),i+4,o-4,u),Ri.strokeLine(e,h.x,h.y,c.x,c.y,u))}var ls=xr.dataRangeMenuItem,us=en(Ia,(function(e,r){this.type="wig",this.featureType="numeric",e.color===t&&(e.color="rgb(150,150,150)"),e.height===t&&(e.height=50),Ia.call(this,e,r);var n=e.format?e.format.toLowerCase():e.format;this.featureSource="bigwig"===n?new Bo(e,r.genome):"tdf"===n?new ns(e,r.genome):new xo(e,r.genome),this.autoscale=e.autoscale||e.max===t,this.autoscale||(this.dataRange={min:e.min||0,max:e.max}),this.windowFunction=e.windowFunction||"mean",this.paintAxis=cs,this.graphType=e.graphType||"bar"}));function fs(t){this.thresholds=t.thresholds,this.colors=t.colors}function ps(t){this.scale=t,this.lowColor="rgb("+t.lowR+","+t.lowG+","+t.lowB+")",this.highColor="rgb("+t.highR+","+t.highG+","+t.highB+")",this.diff=t.high-t.low}us.prototype.postInit=I(e.mark((function t(){var r;return e.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getFileHeader();case 2:(r=t.sent)&&this.setTrackProperties(r);case 4:case"end":return t.stop()}}),t,this)}))),us.prototype.getFeatures=function(){var t=I(e.mark((function t(r,n,i,a){return e.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.featureSource.getFeatures(r,n,i,a,this.windowFunction));case 1:case"end":return t.stop()}}),t,this)})));return function(e,r,n,i){return t.apply(this,arguments)}}(),us.prototype.menuItemList=function(){var e=this,r=[];return r.push(ls(this.trackView)),r.push({object:Sr("Autoscale",e.autoscale),click:function(){e.autoscale=!e.autoscale,e.config.autoscale=e.autoscale,e.trackView.setDataRange(t,t,e.autoscale)}}),r},us.prototype.getFileHeader=I(e.mark((function t(){return e.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("function"!=typeof this.featureSource.getFileHeader){t.next=4;break}return t.next=3,this.featureSource.getFileHeader();case 3:this.header=t.sent;case 4:return t.abrupt("return",this.header);case 5:case"end":return t.stop()}}),t,this)}))),us.prototype.draw=function(e){var r,n=this,i=e.features,a=e.context,o=e.bpPerPixel,s=e.bpStart,h=e.pixelWidth,c=e.pixelHeight,l=s+h*o+1;"string"==typeof n.color&&n.color.startsWith("rgb(")&&(r=Vr.addAlpha(n.color,.1));var u=function(t){return(n.dataRange.max-t)/(n.dataRange.max-n.dataRange.min)*c},f=function(t){return Math.floor((t.start-s)/o)},p=function(t,e){var r=Math.ceil((t.end-s)/o);return Math.max(1,r-e)};if(i&&i.length>0&&(n.dataRange.min===t&&(n.dataRange.min=0),n.dataRange.max>n.dataRange.min)){if(w.end<s)return;if(w.start>l)return;var d=!0,g=!1,m=t;try{for(var v,b=i[Symbol.iterator]();!(d=(v=b.next()).done);d=!0){w(v.value)}}catch(t){g=!0,m=t}finally{try{d||null==b.return||b.return()}finally{if(g)throw m}}if(n.dataRange.min<0){var y=n.dataRange.max/(n.dataRange.max-n.dataRange.min)*e.pixelHeight;Ri.strokeLine(a,0,y,e.pixelWidth,y,{strokeStyle:r})}}function w(t){if(!(t.value<n.dataRange.min)){var e=u(t.value),r=f(t);if(!isNaN(r)){var i=u(0)-e,o=p(t,r),s=t.value<0&&n.altColor?n.altColor:n.color,h="function"==typeof s?s(t.value):s;if("points"===n.graphType){var c=n.config.pointSize||3,l=r+o/2;Ri.fillCircle(a,l,e,c/2,{fillStyle:h,strokeStyle:h})}else Ri.fillRect(a,r,e,o,i,{fillStyle:h}),t.value>0?t.value:t.value<0&&t.value}}}!function(e){if(n.config.hasOwnProperty("guideLines")){var r=!0,i=!1,a=t;try{for(var o,s=n.config.guideLines[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var h=o.value;if(h.hasOwnProperty("color")&&h.hasOwnProperty("y")&&h.hasOwnProperty("dotted")){var c=u(h.y),l={strokeStyle:h.color,strokeWidth:2};h.dotted?Ri.dashedLine(e.context,0,c,e.pixelWidth,c,5,l):Ri.strokeLine(e.context,0,c,e.pixelWidth,c,l)}}}catch(t){i=!0,a=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}}}(e)},us.prototype.popupData=function(e,r){if(r||(r=this.clickedFeatures(e)),r&&r.length>0){var n=[],i=function(e,r,n){var i,a,o=0,s=e.length-1,h=o+s>>1;for(;!c(e[h],r,n)&&o<s;)r<e[h].start?s=h-1:r>e[h].end&&(o=h+1),h=o+s>>1;if(c(e[h],r,n)){if(c(i=e[h],r,0))return i;for(a=h;a-- >=0&&(c(e[a]),!n);){if(c(e[a],r,0))return e[a];for(l(e[a],r)<l(i,r)&&(i=e[a]),a=h;a++<e.length&&(c(e[a]),!n);){if(c(e[a],r,0))return e[a];l(e[a],r)<l(i,r)&&(i=e[a])}}return i}return t;function c(t,e,r){return e>=t.start-r&&e<=t.end+r}function l(t,e){return Math.min(Math.abs(t.start-e),Math.abs(t.end-e))}}(r,e.genomicLocation,2*e.viewport.genomicState.referenceFrame.bpPerPixel);if(i){var a=i.end-i.start==1?Ur(i.start+1):Ur(i.start+1)+"-"+Ur(i.end);n.push({name:"Position:",value:a}),n.push({name:"Value:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;",value:Ur(i.value)})}return n}return[]},us.prototype.dispose=function(){this.trackView=t},us.prototype.getState=function(){var t=this.config;return t.autoscale=this.autoscale,!this.autoscale&&this.dataRange&&(t.min=this.dataRange.min,t.max=this.dataRange.max),t},us.prototype.supportsWholeGenome=function(){return"function"==typeof this.featureSource.supportsWholeGenome&&this.featureSource.supportsWholeGenome()},fs.prototype.getColor=function(e){var r=!0,n=!1,i=t;try{for(var a,o=this.thresholds[Symbol.iterator]();!(r=(a=o.next()).done);r=!0){var s=a.value;if(e<s)return this.colors[this.thresholds.indexOf(s)]}}catch(t){n=!0,i=t}finally{try{r||null==o.return||o.return()}finally{if(n)throw i}}return this.colors[this.colors.length-1]},ps.prototype.getColor=function(t){var e,r=this.scale;return t<=r.low?this.lowColor:t>=r.high?this.highColor:(e=(t-r.low)/this.diff,"rgb("+Math.floor(r.lowR+e*(r.highR-r.lowR))+","+Math.floor(r.lowG+e*(r.highG-r.lowG))+","+Math.floor(r.lowB+e*(r.highB-r.lowB))+")")};var ds=en(Ia,(function(t,e){if(Ia.call(this,t,e),this.isLog=t.isLog,this.displayMode=t.displayMode||"SQUISHED",this.maxHeight=t.maxHeight||500,this.squishedRowHeight=t.sampleSquishHeight||t.squishedRowHeight||2,this.expandedRowHeight=t.sampleExpandHeight||t.expandedRowHeight||12,this.posColorScale=t.posColorScale||new ps({low:.1,lowR:255,lowG:255,lowB:255,high:1.5,highR:255,highG:0,highB:0}),this.negColorScale=t.negColorScale||new ps({low:-1.5,lowR:0,lowG:0,lowB:255,high:-.1,highR:255,highG:255,highB:255}),this.sampleKeys=[],this.featureSource=new xo(this.config,e.genome),t.sort){var r=t.sort;this.sortSamples(r.chr,r.start,r.end,r.direction)}}));ds.prototype.menuItemList=function(){var t=this,e=[],r={SQUISHED:"Squish",EXPANDED:"Expand",FILL:"Fill"};return e.push("<hr/>"),e.push("Sample Height"),["SQUISHED","EXPANDED","FILL"].forEach((function(n){e.push({object:Sr(r[n],n===t.displayMode),click:function(){t.displayMode=n,t.config.displayMode=n,t.trackView.checkContentHeight(),t.trackView.repaintViews()}})})),e},ds.prototype.getFeatures=function(t,e,r){return this.featureSource.getFeatures(t,e,r)},ds.prototype.draw=function(e){var r=this,n=e.context,i=e.pixelWidth,a=e.pixelHeight;Ri.fillRect(n,0,e.pixelTop,i,a,{fillStyle:"rgb(255, 255, 255)"});var o=e.features;if(o&&o.length>0){r.isLog===t&&function(e){if(r.isLog===t){r.isLog=!1;var n=!0,i=!1,a=t;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){if(o.value.value<0)return void(r.isLog=!0)}}catch(t){i=!0,a=t}finally{try{n||null==s.return||s.return()}finally{if(i)throw a}}}}(o);var s=e.bpPerPixel,h=e.bpStart,c=h+i*s+1,l=s;this.updateSampleKeys(o);var u,f,p={};switch(this.sampleKeys.forEach((function(t,e){p[t]=e})),this.displayMode){case"FILL":u=e.pixelHeight/this.sampleKeys.length,f=0;break;case"SQUISHED":u=this.squishedRowHeight,f=0;break;default:u=this.expandedRowHeight,f=1}var d=!0,g=!1,m=t;try{for(var v,b=o[Symbol.iterator]();!(d=(v=b.next()).done);d=!0){var y=v.value;if(!(y.end<h)){if(y.start>c)break;var w=y.sampleKey||y.sample;y.row=p[w];var x=p[w]*u+f,k=y.value;r.isLog||(k=Fr(k/2));var S=void 0;S=k<-.1?r.negColorScale.getColor(k):k>.1?r.posColorScale.getColor(k):"white";var _=Math.max(y.start,h),C=Math.round((_-h)/l),E=Math.min(y.end,c),A=Math.round((E-h)/l),T=Math.max(1,A-C);n.fillStyle=S;var R=u;if(u<.25){var L=.1+2*Math.abs(k);R=Math.min(1,L*u)}y.pixelRect={x:C,y:x,w:T,h:R-2*f},n.fillRect(C,x,T,R-2*f)}}}catch(t){g=!0,m=t}finally{try{d||null==b.return||b.return()}finally{if(g)throw m}}}},ds.prototype.computePixelHeight=function(t){if(!t)return 0;var e="SQUISHED"===this.displayMode?this.squishedRowHeight:this.expandedRowHeight;return this.updateSampleKeys(t),this.sampleKeys.length*e},ds.prototype.sortSamples=function(){var r=I(e.mark((function r(n,i,a,o){var s,h,c,l,u,f,p,d,g,m,v,b,y,w,x;return e.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.featureSource.getFeatures(n,i,a);case 2:s=e.sent,this.updateSampleKeys(s),h={},c=a-i+1,l=!0,u=!1,f=t,e.prev=9,p=s[Symbol.iterator]();case 11:if(l=(d=p.next()).done){e.next=26;break}if(!((g=d.value).end<i)){e.next=15;break}return e.abrupt("continue",23);case 15:if(!(g.start>a)){e.next=17;break}return e.abrupt("break",26);case 17:m=Math.max(i,g.start),v=Math.min(a,g.end),b=(v-m)/c,y=g.sampleKey||g.sample,w=h[y]||0,h[y]=w+b*g.value;case 23:l=!0,e.next=11;break;case 26:e.next=32;break;case 28:e.prev=28,e.t0=e.catch(9),u=!0,f=e.t0;case 32:e.prev=32,e.prev=33,l||null==p.return||p.return();case 35:if(e.prev=35,!u){e.next=38;break}throw f;case 38:return e.finish(35);case 39:return e.finish(32);case 40:x="ASC"===o?1:-1,this.sampleKeys.sort((function(t,e){var r=h[t],n=h[e];return r||(r=x*Number.MAX_VALUE),n||(n=x*Number.MAX_VALUE),r===n?0:r>n?x:-1*x})),this.trackView.repaintViews();case 43:case"end":return e.stop()}}),r,this,[[9,28,32,40],[33,,35,39]])})));return function(t,e,n,i){return r.apply(this,arguments)}}(),ds.prototype.clickedFeatures=function(t){var e,r,n=Ia.prototype.clickedFeatures.call(this,t);return e=n,r=t.y,e.filter((function(t){var e=t.pixelRect;return e&&r>=e.y&&r<=e.y+e.h}))},ds.prototype.popupData=function(e,r){r||(r=this.clickedFeatures(e));var n=[],i=!0,a=!1,o=t;try{for(var s,h=r[Symbol.iterator]();!(i=(s=h.next()).done);i=!0)s.value}catch(t){a=!0,o=t}finally{try{i||null==h.return||h.return()}finally{if(a)throw o}}return r.forEach((function(t){!function(t,e){var r,n=new Set(["row","color","sampleKey","uniqueSampleKey","uniquePatientKey"]);t.hasOwnProperty("realChr")?((r=Object.assign({},t)).chr=t.realChr,r.start=t.realStart,r.end=t.realEnd,delete r.realChr,delete r.realStart,delete r.realEnd):r=t;for(var i=0,a=Object.keys(r);i<a.length;i++){var o=a[i];!n.has(o)&&rn(r[o])&&e.push({name:o,value:r[o]})}}(t,n)})),n},ds.prototype.contextMenuItemList=function(t){var e=this,r=t.viewport.genomicState.referenceFrame,n=t.genomicLocation,i=this.config.sort?"ASC"===this.config.sort.direction?"DESC":"ASC":"DESC",a=r.toBP(2.5);return[{label:"Sort by value",click:function(t){var o={direction:i,chr:r.chrName,start:n-a,end:n+a};!function(t){e.sortSamples(t.chr,t.start,t.end,t.direction)}(o),e.config.sort=o}}]},ds.prototype.supportsWholeGenome=function(){return this.featureSource.supportsWholeGenome()},ds.prototype.updateSampleKeys=function(e){var r=new Set(this.sampleKeys),n=!0,i=!1,a=t;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var h=o.value,c=h.sampleKey||h.sample;r.has(c)||(r.add(c),this.sampleKeys.push(c))}}catch(t){i=!0,a=t}finally{try{n||null==s.return||s.return()}finally{if(i)throw a}}};var gs=en(Ia,(function(e,r){var n=this;e.tracks&&(Ia.call(this,e,r),this.tracks=[],e.tracks.forEach((function(t){t.type||Ki(t),t.isMergedTrack=!0;var e=r.createTrack(t);e?(e.autoscale=!1,n.tracks.push(e)):console.warn("Could not create track "+t)})),Object.defineProperty(this,"height",{get:function(){return this._height},set:function(e){this._height=e;var r=!0,n=!1,i=t;try{for(var a,o=this.tracks[Symbol.iterator]();!(r=(a=o.next()).done);r=!0){var s=a.value;s.height=e,s.config.height=e}}catch(t){n=!0,i=t}finally{try{r||null==o.return||o.return()}finally{if(n)throw i}}}}),this.height=e.height||100)}));gs.prototype.getFeatures=function(t,e,r,n){var i=this.tracks.map((function(i){return i.getFeatures(t,e,r,n)}));return Promise.all(i)},gs.prototype.draw=function(t){var e,r,n,i,a,o,s,h;for(n=t.features,t.genomicState.chromosome.name,o=n,s=0,h=-Number.MAX_VALUE,o.forEach((function(t,e){t.forEach((function(t){void 0===t.value||Number.isNaN(t.value)||(s=Math.min(s,t.value),h=Math.max(h,t.value))}))})),a={min:s,max:h},e=0,r=this.tracks.length;e<r;e++)(i=Object.assign({},t)).features=n[e],this.tracks[e].dataRange=a,this.tracks[e].draw(i)},gs.prototype.paintAxis=function(t,e,r){var n,i,a;for(!0,n=0,i=this.tracks.length;n<i;n++)if("function"==typeof(a=this.tracks[n]).paintAxis){a.paintAxis(t,e,r);break}},gs.prototype.popupData=function(t){for(var e=[],r=0,n=this.tracks.length;r<n;r++){var i=this.tracks[r].popupData(t);e.push.apply(e,$(i))}return e};var ms=function(t){this.paired=!0,this.firstAlignment=t,this.chr=t.chr,this.readName=t.readName,t.start<t.mate.position?(this.start=t.start,this.scStart=t.scStart,this.connectingStart=t.start+t.lengthOnRef,this.connectingEnd=t.mate.position):(this.start=t.mate.position,this.scStart=this.start,this.connectingStart=t.mate.position,this.connectingEnd=t.start),this.end=Math.max(t.mate.position,t.start+t.lengthOnRef),this.lengthOnRef=this.end-this.start;var e=Math.max(this.end,t.scStart+t.scLengthOnRef);this.scLengthOnRef=e-this.scStart};function vs(t){return t.isPaired()&&t.mate&&t.isMateMapped()&&t.chr===t.mate.chr&&(t.isFirstOfPair()||t.isSecondOfPair())&&!(t.isSecondary()||t.isSupplementary())}ms.prototype.setSecondAlignment=function(t){this.secondAlignment=t;var e=this.firstAlignment;t.start>e.start?this.connectingEnd=t.start:this.connectingStart=t.start+t.lengthOnRef,this.start=Math.min(e.start,t.start),this.end=Math.max(e.start+e.lengthOnRef,t.start+t.lengthOnRef),this.lengthOnRef=this.end-this.start,this.scStart=Math.min(e.scStart,t.scStart);var r=Math.max(e.scStart+e.scLengthOnRef,t.scStart+t.scLengthOnRef);this.scLengthOnRef=r-this.scStart},ms.prototype.popupData=function(t){var e=[];return e=e.concat(this.firstAlignment.popupData(t)),this.secondAlignment&&(e.push("-------------------------------"),e=e.concat(this.secondAlignment.popupData(t))),e},ms.prototype.isPaired=function(){return!0},ms.prototype.firstOfPairStrand=function(){return this.firstAlignment.isFirstOfPair()?this.firstAlignment.strand:this.secondAlignment&&this.secondAlignment.isFirstOfPair()?this.secondAlignment.strand:this.firstAlignment.mate.strand};var bs=function(e,r,n,i,a,o,s){this.chr=e,this.start=Math.floor(r),this.end=Math.ceil(n),this.length=n-r,this.alleleFreqThreshold=s,this.coverageMap=new xs(e,r,n,this.alleleFreqThreshold),this.alignments=[],this.downsampledIntervals=[],this.samplingWindowSize=i===t?100:i,this.samplingDepth=a===t?1e3:a,this.pairsSupported=o===t||o,this.paired=!1,this.pairsCache={},this.downsampledReads=new Set,this.currentBucket=new ws(this.start,this.start+this.samplingWindowSize,this),this.filter=function(t){return t.isMapped()&&!t.isFailsVendorQualityCheck()},this.pairedEndStats=new _s};function ys(){this.alignments=this.alignments.concat(this.currentBucket.alignments),this.currentBucket.downsampledCount>0&&this.downsampledIntervals.push(new Ss(this.currentBucket.start,this.currentBucket.end,this.currentBucket.downsampledCount)),this.paired=this.paired||this.currentBucket.paired}function ws(t,e,r){this.start=t,this.end=e,this.alignments=[],this.downsampledCount=0,this.samplingDepth=r.samplingDepth,this.pairsSupported=r.pairsSupported,this.downsampledReads=r.downsampledReads,this.pairsCache=r.pairsCache}function xs(t,e,r,n){this.chr=t,this.bpStart=e,this.length=r-e,this.coverage=new Array(this.length),this.maximum=0,this.threshold=n,this.qualityWeight=!0}function ks(t){this.posA=0,this.negA=0,this.posT=0,this.negT=0,this.posC=0,this.negC=0,this.posG=0,this.negG=0,this.posN=0,this.negN=0,this.pos=0,this.neg=0,this.qualA=0,this.qualT=0,this.qualC=0,this.qualG=0,this.qualN=0,this.qual=0,this.total=0,this.del=0,this.ins=0,this.t=t}function Ss(t,e,r){this.start=t,this.end=e,this.counts=r}function _s(t,e){this.totalCount=0,this.frCount=0,this.rfCount=0,this.ffCount=0,this.sumF=0,this.sumF2=0}bs.prototype.push=function(t){!1!==this.filter(t)&&(t.isPaired()&&this.pairedEndStats.push(t),this.coverageMap.incCounts(t),this.pairsSupported&&this.downsampledReads.has(t.readName)||(t.start>=this.currentBucket.end&&(ys.call(this),this.currentBucket=new ws(t.start,t.start+this.samplingWindowSize,this)),this.currentBucket.addAlignment(t)))},bs.prototype.forEach=function(t){this.alignments.forEach(t)},bs.prototype.finish=function(){this.currentBucket!==t&&ys.call(this),this.alignments.sort((function(t,e){return t.start-e.start})),this.pairsCache=t,this.downsampledReads=t,this.pairedEndStats.compute()},bs.prototype.contains=function(t,e,r){return this.chr===t&&this.start<=e&&this.end>=r},bs.prototype.hasDownsampledIntervals=function(){return this.downsampledIntervals&&this.downsampledIntervals.length>0},ws.prototype.addAlignment=function(e){var r,n,i;if(this.pairsSupported&&vs(e)&&(i=this.pairsCache[e.readName]))return i.setSecondAlignment(e),void(this.pairsCache[e.readName]=t);this.alignments.length<this.samplingDepth?this.pairsSupported&&vs(e)?(i=new ms(e),this.paired=!0,this.pairsCache[e.readName]=i,this.alignments.push(i)):this.alignments.push(e):((r=Math.floor(Math.random()*(this.samplingDepth+this.downsampledCount-1)))<this.samplingDepth?(n=this.alignments[r],this.pairsSupported&&vs(e)?(this.pairsCache[n.readName]!==t&&(this.pairsCache[n.readName]=t),i=new ms(e),this.paired=!0,this.pairsCache[e.readName]=i,this.alignments[r]=i):this.alignments[r]=e,this.downsampledReads.add(n.readName)):this.downsampledReads.add(e.readName),this.downsampledCount++)},xs.prototype.incCounts=function(e){var r=this;if(e.blocks===t?v(e):e.blocks.forEach((function(t){v(t)})),e.deletions){var n=!0,i=!1,a=t;try{for(var o,s=e.deletions[Symbol.iterator]();!(n=(o=s.next()).done);n=!0)for(var h=o.value,c=h.start-r.bpStart,l=c;l<c+h.len;l++)l<0||(this.coverage[l]||(this.coverage[l]=new ks(r.threshold)),this.coverage[l].del++)}catch(t){i=!0,a=t}finally{try{n||null==s.return||s.return()}finally{if(i)throw a}}}if(e.insertions){var u=!0,f=!1,p=t;try{for(var d,g=e.insertions[Symbol.iterator]();!(u=(d=g.next()).done);u=!0){var m=d.value.start-this.bpStart;m<0||(this.coverage[m]||(this.coverage[m]=new ks(r.threshold)),this.coverage[m].ins++)}}catch(t){f=!0,p=t}finally{try{u||null==g.return||g.return()}finally{if(f)throw p}}}function v(t){if("S"!==t.type)for(var n=e.seq,i=e.qual,a=t.seqOffset,o=t.start-r.bpStart,s=0;s<t.len;o++,s++){r.coverage[o]||(r.coverage[o]=new ks(r.threshold));var h=n.charAt(a+s),c=e.strand?"pos"+h:"neg"+h,l=i&&a+s<i.length?i[a+s]:30;r.coverage[o][c]+=1,r.coverage[o]["qual"+h]+=l,r.coverage[o].total+=1,r.coverage[o].qual+=l,r.maximum=Math.max(r.coverage[o].total,r.maximum)}}},ks.prototype.isMismatch=function(t){var e,r=this,n=this.t*(this.qual?this.qual:this.total);return e=0,["A","T","C","G"].forEach((function(n){n!==t&&(e+=r.qual?r["qual"+n]:r["pos"+n]+r["neg"+n])})),e>=n},Ss.prototype.popupData=function(t){return[{name:"start",value:this.start+1},{name:"end",value:this.end},{name:"# downsampled:",value:this.counts}]},_s.prototype.push=function(t){if(t.isProperPair()){var e=Math.abs(t.fragmentLength);this.sumF+=e,this.sumF2+=e*e;var r=t.pairOrientation;if("string"==typeof r&&4===r.length)switch(""+r.charAt(0)+r.charAt(2)){case"FF":case"RR":this.ffCount++;break;case"FR":this.frCount++;break;case"RF":this.rfCount++}this.totalCount++}},_s.prototype.compute=function(){if(this.totalCount>100){this.ffCount/this.totalCount>.9?this.orienation="ff":this.frCount/this.totalCount>.9?this.orienation="fr":this.rfCount/this.totalCount>.9&&(this.orienation="rf");var t=this.sumF/this.totalCount,e=Math.sqrt((this.totalCount*this.sumF2-this.sumF*this.sumF)/(this.totalCount*this.totalCount));this.lowerFragmentLength=t-3*e,this.upperFragmentLength=t+3*e}};function Cs(){this.hidden=!1}function Es(e,r){for(var n=0;n<e.length;n++){var i=e[n];if(r>=i.start&&r<i.start+i.len)return i}return t}function As(t,e){return t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]}function Ts(t,e){return t[e+1]<<8|t[e]}function Rs(t,e){return new DataView(t.buffer).getFloat32(e,!0)}Cs.prototype.isMapped=function(){return 0==(4&this.flags)},Cs.prototype.isPaired=function(){return 0!=(1&this.flags)},Cs.prototype.isProperPair=function(){return 0!=(2&this.flags)},Cs.prototype.isFirstOfPair=function(){return 0!=(64&this.flags)},Cs.prototype.isSecondOfPair=function(){return 0!=(128&this.flags)},Cs.prototype.isSecondary=function(){return 0!=(256&this.flags)},Cs.prototype.isSupplementary=function(){return 0!=(2048&this.flags)},Cs.prototype.isFailsVendorQualityCheck=function(){return 0!=(512&this.flags)},Cs.prototype.isDuplicate=function(){return 0!=(1024&this.flags)},Cs.prototype.isMateMapped=function(){return 0==(8&this.flags)},Cs.prototype.isNegativeStrand=function(){return 0!=(16&this.flags)},Cs.prototype.isMateNegativeStrand=function(){return 0!=(32&this.flags)},Cs.prototype.tags=function(){return this.tagDict||(this.tagBA?(this.tagDict=function(t){var e=0,r=t.length,n={};for(;e<r;){var i,a=String.fromCharCode(t[e])+String.fromCharCode(t[e+1]),o=String.fromCharCode(t[e+2]);if("A"===o)i=String.fromCharCode(t[e+3]),e+=4;else if("i"===o||"I"===o)i=As(t,e+3),e+=7;else if("c"===o||"C"===o)i=t[e+3],e+=4;else if("s"===o||"S"===o)i=Ts(t,e+3),e+=5;else if("f"===o)i=Rs(t,e+3),e+=7;else if("Z"===o)for(e+=3,i="";;){var s=t[e++];if(0===s)break;i+=String.fromCharCode(s)}else i="B"===o?"Arrays not currently supported":"Error unknown type: "+o;n[a]=i}return n}(this.tagBA),this.tagBA=t):this.tagDict={}),this.tagDict},Cs.prototype.popupData=function(e){var r=[];if(e=Math.floor(e),this.insertions){var n=this.seq,i=!0,a=!1,o=t;try{for(var s,h=this.insertions[Symbol.iterator]();!(i=(s=h.next()).done);i=!0){var c=s.value,l=c.start;if(e===l||e===l-1)return r.push({name:"Insertion",value:n.substr(c.seqOffset,c.len)}),r.push({name:"Location",value:l}),r}}catch(t){a=!0,o=t}finally{try{i||null==h.return||h.return()}finally{if(a)throw o}}}r.push({name:"Read Name",value:this.readName}),r.push("<hr>"),r.push({name:"Alignment Start",value:Ur(1+this.start),borderTop:!0}),r.push({name:"Read Strand",value:!0===this.strand?"(+)":"(-)",borderTop:!0}),r.push({name:"Cigar",value:this.cigar}),r.push({name:"Mapped",value:d(this.isMapped())}),r.push({name:"Mapping Quality",value:this.mq}),r.push({name:"Secondary",value:d(this.isSecondary())}),r.push({name:"Supplementary",value:d(this.isSupplementary())}),r.push({name:"Duplicate",value:d(this.isDuplicate())}),r.push({name:"Failed QC",value:d(this.isFailsVendorQualityCheck())}),this.isPaired()&&(r.push("<hr>"),r.push({name:"First in Pair",value:!this.isSecondOfPair(),borderTop:!0}),r.push({name:"Mate is Mapped",value:d(this.isMateMapped())}),this.pairOrientation&&r.push({name:"Pair Orientation",value:this.pairOrientation}),this.isMateMapped()&&(r.push({name:"Mate Chromosome",value:this.mate.chr}),r.push({name:"Mate Start",value:this.mate.position+1}),r.push({name:"Mate Strand",value:!0===this.mate.strand?"(+)":"(-)"}),r.push({name:"Insert Size",value:this.fragmentLength}))),r.push("<hr>");var u=this.tags(),f=!0;for(var p in u)u.hasOwnProperty(p)&&(f?(r.push({name:p,value:u[p],borderTop:!0}),f=!1):r.push({name:p,value:u[p]}));return r.push("<hr>"),r.push({name:"Genomic Location: ",value:Ur(1+e)}),r.push({name:"Read Base:",value:this.readBaseAt(e)}),r.push({name:"Base Quality:",value:this.readBaseQualityAt(e)}),r;function d(t){return t?"Yes":"No"}},Cs.prototype.readBaseAt=function(e){var r=Es(this.blocks,e);if(r){if("*"===this.seq)return"*";var n=r.seqIndexAt(e);return this.seq[n]}return t},Cs.prototype.readBaseQualityAt=function(e){var r=Es(this.blocks,e);if(r){if("*"===this.qual)return 30;var n=r.seqIndexAt(e);return n>=0&&this.qual&&n<this.qual.length?this.qual[n]:30}return t};var Ls=function(t){t&&Object.assign(this,t)};function Is(e){e||(e={}),this.vendorFailed=e.vendorFailed===t||e.vendorFailed,this.duplicates=e.duplicates===t||e.duplicates,this.secondary=e.secondary||!1,this.supplementary=e.supplementary||!1,this.mqThreshold=e.mqThreshold===t?0:e.mqThreshold,e.readgroups&&(this.readgroups=new Set(e.readgroups))}Ls.prototype.seqIndexAt=function(t){return Math.floor(t)-this.start+this.seqOffset},Is.prototype.pass=function(t){if(this.vendorFailed&&t.isFailsVendorQualityCheck())return!1;if(this.duplicates&&t.isDuplicate())return!1;if(this.secondary&&t.isSecondary())return!1;if(this.supplementary&&t.isSupplementary())return!1;if(t.mq<this.mqThreshold)return!1;if(this.readgroups){var e=t.tags().RG;return this.readgroups.has(e)}return!0};var Ms=["=","A","C","x","G","x","x","x","T","x","x","x","x","x","x","N"],Ps=["M","I","D","N","S","H","P","=","X","?","?","?","?","?","?","?"],Ds=Bs(new Uint8Array([66,65,77,1]),0),Fs={readHeader:function(t,e,r){return On.loadArrayBuffer(t,e).then((function(t){var e;return e=vn(t),Fs.decodeBamHeader(e,r)}))},decodeBamHeader:function(t,e){var r,n,i,a,o;if((r=Bs(t,0))!==Ds)throw new Error("BAM header errror: bad magic number.  This could be caused by either a corrupt or missing file.");n=Bs(t,4);for(var s=0;s<n;++s)String.fromCharCode(t[s+8]);var h=Bs(t,n+8),c=n+12;for(i={},a=[],o={},s=0;s<h;++s){for(var l=Bs(t,c),u="",f=0;f<l-1;++f)u+=String.fromCharCode(t[c+4+f]);Bs(t,c+l+4);i[u]=s,a[s]=u,e&&(o[e.getChromosomeName(u)]=u),c=c+8+l}return{magicNumber:r,size:c,chrNames:a,chrToIndex:i,chrAliasTable:o}},bam_tag2cigar:function(t,e,r,n,i,a){function o(t){return"C"===t||"c"===t||"A"===t?1:"S"===t||"s"===t?2:"I"===t||"i"===t||"f"===t?4:0}if(1!==a.length||i.start<0)return!1;for(var s=r+(n+1>>1)+n;s+4<e;){if("CG"===String.fromCharCode(t[s])+String.fromCharCode(t[s+1]))break;var h=String.fromCharCode(t[s+2]);if("B"===h)s+=8+o(h=String.fromCharCode(t[s+3]))*Bs(t,s+4);else if("Z"===h||"H"===h)for(s+=3;0!==t[s++];);else s+=3+o(h)}if(s>=e)return!1;if("B"!==String.fromCharCode(t[s+2])||"I"!==String.fromCharCode(t[s+3]))return!1;var c=Bs(t,s+4),l=s+8;if(l+4*c>e)return!1;var u="",f=0;a.length=0,s=l;for(var p=0;p<c;++p,s+=4){var d=Bs(t,s),g=d>>4,m=Ps[15&d];"M"!==m&&"EQ"!==m&&"X"!==m&&"D"!==m&&"N"!==m&&"="!==m||(f+=g),u=u+g+m,a.push({len:g,ltr:m})}return i.cigar=u,i.lengthOnRef=f,!0},decodeBamRecords:function(e,r,n,i,a,o,s,h){for(;r<e.length;){var c=r+Bs(e,r)+4,l=new Cs,u=Bs(e,r+4),f=Bs(e,r+8);if(c>e.length)return;if(u<0)r=c;else{if(a!==t&&(u>a||f>s))return!0;if(a!==t&&u<a)r=c;else{for(var p=Bs(e,r+12),d=(65280&p)>>8,g=255&p,m=Bs(e,r+16),v=(4294901760&m)>>16,b=65535&m,y=Bs(e,r+20),w=Bs(e,r+24),x=Bs(e,r+28),k=Bs(e,r+32),S=[],_=0;_<g-1;++_)S.push(String.fromCharCode(e[r+36+_]));S=S.join("");for(var C=0,E="",A=r+36+g,T=[],R=void 0,L=0;L<b;++L){var I=Bs(e,A),M=I>>4,P=Ps[15&I];"M"!==P&&"EQ"!==P&&"X"!==P&&"D"!==P&&"N"!==P&&"="!==P||(C+=M),E=E+M+P,A+=4,R={len:M,ltr:P},T.push(R)}if(l.chr=i[u],l.start=f,l.flags=v,l.strand=!(16&v),l.readName=S,l.cigar=E,l.lengthOnRef=C,l.fragmentLength=k,l.mq=d,Fs.bam_tag2cigar(e,c,A,y,l,T),l.end=l.start+l.lengthOnRef,l.end<o)r=c;else{for(var D=[],F=y+1>>1,N=0;N<F;++N){var B=e[A+N];D.push(Ms[(240&B)>>4]),D.push(Ms[15&B])}D=D.slice(0,y).join(""),A+=F;for(var O=[],z=0;z<y;++z)O.push(e[A+z]);A+=y,w>=0&&(l.mate={chr:i[w],position:x,strand:!(32&v)}),l.seq=D,l.qual=O,l.tagBA=new Uint8Array(e.buffer.slice(A,c)),this.setPairOrientation(l),(t===h||h.pass(l))&&(Ns(l,T),n.push(l)),r=c}}}}},decodeSamRecords:function(e,r,n,i,a,o){var s,h,c,l,u,f,p,d,g,m;for(l=(s=Hr(e)).length,!1,h=0;h<l;h++)if(u=s[h].split("\t"),(g=new Cs).chr=u[2],g.start=Number.parseInt(u[3])-1,g.flags=Number.parseInt(u[1]),g.readName=u[0],g.strand=!(16&g.flags),g.mq=Number.parseInt(u[4]),g.cigar=u[5],g.fragmentLength=Number.parseInt(u[8]),g.seq=u[9],"*"!==g.chr&&g.isMapped()&&g.chr===n){if(g.start>a)break;if(d=0,(m=Os(g.cigar)).forEach((function(t){var e=t.len,r=t.ltr;"M"!==r&&"EQ"!==r&&"X"!==r&&"D"!==r&&"N"!==r&&"="!==r||(d+=e)})),g.lengthOnRef=d,!(g.start+d<i)){for(f=u[10],g.qual=[],c=0;c<f.length;c++)g.qual[c]=f.charCodeAt(c)-33;g.tagDict=u.length<11?{}:zs(u.slice(11)),g.isMateMapped()&&(p=u[6],g.mate={chr:"="===p?g.chr:p,position:Number.parseInt(u[7]),strand:!(32&g.flags)}),this.setPairOrientation(g),(t===o||o.pass(g))&&(Ns(g,m),r.push(g))}}},setReaderDefaults:function(e,r){e.filter=new Is(r.filter),r.readgroup&&(e.filter.readgroups=new Set([r.readgroup])),e.alleleFreqThreshold=r.alleleFreqThreshold===t?.2:r.alleleFreqThreshold,e.samplingWindowSize=r.samplingWindowSize===t?100:r.samplingWindowSize,e.samplingDepth=r.samplingDepth===t?500:r.samplingDepth,e.samplingDepth>1e4&&(e.samplingDepth=1e4),r.viewAsPairs?e.pairsSupported=!0:e.pairsSupported=r.pairsSupported===t||r.pairsSupported},setPairOrientation:function(t){if(t.isMapped()&&t.mate&&t.isMateMapped()&&t.mate.chr===t.chr){var e=t.strand?"F":"R",r=t.mate,n=r.strand?"F":"R",i=" ",a=" ";t.isFirstOfPair()?(i="1",a="2"):t.isSecondOfPair()&&(i="2",a="1");var o=[],s=t.fragmentLength,h=t.end-t.start;if(0===s)s=(t.start<r.position?r.position+h:r.position-h)-t.start;s>0?(o[0]=e,o[1]=i,o[2]=n,o[3]=a):(o[2]=e,o[3]=i,o[0]=n,o[1]=a),t.pairOrientation=o.join("")}}};function Ns(e,r){var n,i,a,o=[],s=0,h=e.start;e.scStart=e.start,e.scLengthOnRef=e.lengthOnRef;var c=!0,l=!1,u=t;try{for(var f,p=r[Symbol.iterator]();!(c=(f=p.next()).done);c=!0){var d=f.value,g=void 0;switch(d.ltr){case"H":case"P":break;case"S":g=h,e.scLengthOnRef+=d.len,0===o.length&&(e.scStart-=d.len,g-=d.len),o.push(new Ls({start:g,seqOffset:s,len:d.len,type:"S"})),s+=d.len,a="I";break;case"N":h+=d.len,a="N";break;case"D":i===t&&(i=[]),i.push({start:h,len:d.len}),h+=d.len,a="D";break;case"I":n===t&&(n=[]),n.push(new Ls({start:h,len:d.len,seqOffset:s,type:"I"})),s+=d.len,a="I";break;case"M":case"EQ":case"=":case"X":o.push(new Ls({start:h,seqOffset:s,len:d.len,type:"M",gapType:a})),s+=d.len,h+=d.len}}}catch(t){l=!0,u=t}finally{try{c||null==p.return||p.return()}finally{if(l)throw u}}e.blocks=o,e.insertions=n,e.deletions=i}function Bs(t,e){return t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]}function Os(t){var e,r,n,i,a,o,s,h,c;for(e=[],r=[],a=null,i=t.length,n=0;n<i;n++)o=t.charAt(n),c=void 0,(c=o.charCodeAt(0))>=48&&c<=57?r.push(o):(s=o,h=Number.parseInt(r.join("")),r=[],null!==a&&a.ltr===s?a.len+=h:(a={len:h,ltr:s},e.push(a)));return e}function zs(t){var e={};return t.forEach((function(t){var r=t.split(":");e[r[0]]=r[2]})),e}var Us=function(t,e){this.config=t,this.genome=e,this.bamPath=t.url,this.isDataUri=zr(t.url)&&t.url.startsWith("data:"),Fs.setReaderDefaults(this,t)};function Hs(t){var e=t.split(","),r=e[0].split(":")[1],n=e[1];n=r.indexOf("base64")>=0?atob(n):decodeURI(n);for(var i=new Uint8Array(n.length),a=0;a<n.length;a++)i[a]=n.charCodeAt(a);return i}Us.prototype.readAlignments=function(){var r=I(e.mark((function r(n,i,a){var o,s,h,c,l,u,f,p,d,g,m,v,b,y,w,x,k;return e.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(k=function(t,e,r){var n,i,a,o;return i=(n=this.header).chrAliasTable.hasOwnProperty(t)?n.chrAliasTable[t]:t,a=this.alignmentCache.queryFeatures(i,e,r),o=new bs(t,e,r,this.samplingWindowSize,this.samplingDepth,this.pairsSupported),a.forEach((function(t){o.push(t)})),o.finish(),o},x=function(t){var e=[];this.header=Fs.decodeBamHeader(t),Fs.decodeBamRecords(t,this.header.size,e,this.header.chrNames),this.alignmentCache=new Qa(e,o)},o=this.genome,!this.alignmentCache){e.next=31;break}for(s=this.header,h=s.chrAliasTable.hasOwnProperty(n)?s.chrAliasTable[n]:n,c=this.alignmentCache.queryFeatures(h,i,a),l=new bs(n,i,a,this.samplingWindowSize,this.samplingDepth,this.pairsSupported,this.alleleFreqThreshold),u=!0,f=!1,p=t,e.prev=11,d=c[Symbol.iterator]();!(u=(g=d.next()).done);u=!0)m=g.value,l.push(m);e.next=19;break;case 15:e.prev=15,e.t0=e.catch(11),f=!0,p=e.t0;case 19:e.prev=19,e.prev=20,u||null==d.return||d.return();case 22:if(e.prev=22,!f){e.next=25;break}throw p;case 25:return e.finish(22);case 26:return e.finish(19);case 27:return l.finish(),e.abrupt("return",l);case 31:if(!this.isDataUri){e.next=38;break}return v=Hs(this.bamPath),b=vn(v.buffer),x.call(this,b),e.abrupt("return",k.call(this,n,i,a));case 38:return e.next=40,On.loadArrayBuffer(this.bamPath,nn(this.config));case 40:return y=e.sent,w=vn(y),x.call(this,w),e.abrupt("return",k.call(this,n,i,a));case 44:case"end":return e.stop()}}),r,this,[[11,15,19,27],[20,,22,26]])})));return function(t,e,n){return r.apply(this,arguments)}}();var $s=function(t,e){this.config=t,this.genome=e,this.bamPath=t.url,this.baiPath=t.indexURL||function(t,e){var r;if(t instanceof File)throw new Error("Cannot infer an index path for a local File.  Please select explicitly");return t.includes("?")?(r=t.indexOf("?"),t.substring(0,r)+"."+e+t.substring(r)):t+"."+e}(this.bamPath,"bai"),Fs.setReaderDefaults(this,t)};function qs(){return Vs.apply(this,arguments)}function Vs(){return(Vs=I(e.mark((function t(){var r,n,i,a,o,s,h;return e.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.header){t.next=15;break}return r=this.genome,t.next=4,js.call(this);case 4:return n=t.sent,i=nn(this.config,{range:{start:n.firstAlignmentBlock,size:26}}),t.next=8,On.loadArrayBuffer(this.bamPath,i);case 8:return a=t.sent,o=bn(a),s=n.firstAlignmentBlock+o,h=nn(this.config,{range:{start:0,size:s}}),t.next=14,Fs.readHeader(this.bamPath,h,r);case 14:this.header=t.sent;case 15:return t.abrupt("return",this.header);case 16:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function js(){return Gs.apply(this,arguments)}function Gs(){return(Gs=I(e.mark((function t(){var r;return e.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=this.genome,this.index){t.next=6;break}return t.next=4,ja(this.baiPath,this.config,!1,r);case 4:return this.index=t.sent,t.abrupt("return",this.index);case 6:return t.abrupt("return",this.index);case 7:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function Ws(){return Zs.apply(this,arguments)}function Zs(){return(Zs=I(e.mark((function t(){var r;return e.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.chrToIndex){t.next=4;break}return t.abrupt("return",this.chrToIndex);case 4:return t.next=6,qs.call(this);case 6:return r=t.sent,this.chrToIndex=r.chrToIndex,this.indexToChr=r.chrNames,this.chrAliasTable=r.chrAliasTable,t.abrupt("return",this.chrToIndex);case 11:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}$s.prototype.readAlignments=function(){var r=I(e.mark((function r(n,i,a){var o,s,h,c,l,u,f,p,d,g,m,v,b,y,w,x,k,S,_,C;return e.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ws.call(this);case 2:if(o=e.sent,s=this.chrAliasTable.hasOwnProperty(n)?this.chrAliasTable[n]:n,h=o[s],c=new bs(n,i,a,this.config.samplingWindowSize,this.config.samplingDepth,this.config.pairsSupported,this.config.alleleFreqThreshold),h!==t){e.next=10;break}return e.abrupt("return",c);case 10:return e.next=12,js.call(this);case 12:if(l=e.sent,(u=l.blocksForRange(h,i,a))&&0!==u.length){e.next=16;break}return e.abrupt("return",c);case 16:f=!0,p=!1,d=t,e.prev=20,g=u[Symbol.iterator]();case 22:if(f=(m=g.next()).done){e.next=48;break}if(v=m.value,b=void 0,0!==v.maxv.offset){e.next=29;break}b=0,e.next=34;break;case 29:return y=nn(this.config,{range:{start:v.maxv.block,size:26}}),e.next=32,On.loadArrayBuffer(this.bamPath,y);case 32:w=e.sent,b=bn(w);case 34:return x=v.minv.block,k=v.maxv.block+b,S={start:x,size:k-x+1},e.next=39,On.loadArrayBuffer(this.bamPath,nn(this.config,{range:S}));case 39:if(_=e.sent,C=vn(_),!Fs.decodeBamRecords(C,v.minv.offset,c,this.indexToChr,h,i,a,this.filter)){e.next=44;break}return e.abrupt("break",48);case 44:case 45:f=!0,e.next=22;break;case 48:e.next=54;break;case 50:e.prev=50,e.t0=e.catch(20),p=!0,d=e.t0;case 54:e.prev=54,e.prev=55,f||null==g.return||g.return();case 57:if(e.prev=57,!p){e.next=60;break}throw d;case 60:return e.finish(57);case 61:return e.finish(54);case 62:return c.finish(),e.abrupt("return",c);case 64:case"end":return e.stop()}}),r,this,[[20,50,54,62],[55,,57,61]])})));return function(t,e,n){return r.apply(this,arguments)}}();var Xs=function(t,e){this.config=t,this.genome=e;var r={},n={};t.sources.sequences.forEach((function(t){if(r[t]=null,e){var i=e.getChromosomeName(t);n[i]=t}})),this.chrAliasTable=n,this.bamReaders=r,Fs.setReaderDefaults(this,t)};Xs.prototype.readAlignments=function(t,e,r){this.genome;var n=this,i=n.chrAliasTable.hasOwnProperty(t)?n.chrAliasTable[t]:t;if(this.bamReaders.hasOwnProperty(i)&&"none"!==this.bamReaders[i]){var a,o=n.bamReaders[i];if(!o){a={url:n.config.sources.url.replace("$CHR",i)},n.config.sources.indexURL&&(a.indexURL=n.config.sources.indexURL.replace("$CHR",i));var s=Object.assign(n.config,a);o=new $s(s),n.bamReaders[i]=o}return o.readAlignments(i,e,r).catch((function(o){return console.error(o),Mn.presentAlert(a.url),n.bamReaders[i]="none",new bs(t,e,r)}))}return Promise.resolve(new bs(t,e,r))};var Ys=function(t,e){this.config=t,this.genome=e,Fs.setReaderDefaults(this,t)};function Ks(){var t=this,e=this.genome;if(this.header)return Promise.resolve(this.header);var r=this.config.url+"?file="+this.config.alignmentFile+"&options=-b,-H",n=nn(this.config);return Fs.readHeader(r,n,e).then((function(e){return t.header=e,e}))}Ys.prototype.readAlignments=function(t,e,r){var n=this;return Ks.call(n).then((function(i){var a,o;return a=i.chrAliasTable.hasOwnProperty(t)?i.chrAliasTable[t]:t,o=n.config.url+"?reference="+n.config.referenceFile+"&file="+n.config.alignmentFile+"&region="+a+":"+e+"-"+r,On.loadString(o,nn(n.config)).then((function(o){var s;return i.chrToIndex[a],s=new bs(t,e,r,n.samplingWindowSize,n.samplingDepth,n.pairsSupported,n.alleleFreqThreshold),Fs.decodeSamRecords(o,s,a,e,r,n.filter),s}))}))};var Qs=function(t,e){this.config=t,this.genome=e,Fs.setReaderDefaults(this,t)};Qs.prototype.readAlignments=function(e,r,n,i){var a,o=this,s=this.genome;a=o.header&&o.header.chrAliasTable.hasOwnProperty(e)?o.header.chrAliasTable[e]:e;var h=o.config.endpoint+"/reads/"+o.config.id+"?format=BAM&referenceName="+a+"&start="+r+"&end="+n;return On.loadJson(h,o.config).then((function(t){return e=t.htsget.urls,r=[],e.forEach((function(t){if(t.url.startsWith("data:"))r.push(Promise.resolve(function(t){var e=t.split(","),r=e[0].split(":")[1],n=e[1];n=r.indexOf("base64")>=0?atob(n):decodeURI(n);for(var i=new Uint8Array(n.length),a=0;a<n.length;a++)i[a]=n.charCodeAt(a);return i}(t.url)));else{var e={};t.headers&&(e.headers=t.headers,e.headers.hasOwnProperty("referer")&&delete e.headers.referer),r.push(new Promise((function(r,n){On.loadArrayBuffer(t.url,e).then((function(t){r(new Uint8Array(t))}))})))}})),Promise.all(r);var e,r})).then((function(h){var c=vn(function(t){var e=0;t.forEach((function(t){e+=t.length}));var r=0,n=new Uint8Array(e);return t.forEach((function(t){n.set(t,r),r+=t.length})),n}(h).buffer);o.header||(o.header=Fs.decodeBamHeader(c,s));var l=o.header.chrToIndex[e],u=new bs(e,r,n,o.samplingWindowSize,o.samplingDepth,o.pairsSupported,o.alleleFreqThreshold);return Fs.decodeBamRecords(c,o.header.size,u,o.header.chrNames,l,r,n),u.finish(),0===u.alignments.length?function(e,r,n){return l===t&&o.header.chrAliasTable.hasOwnProperty(e)&&!i?(a=o.header.chrAliasTable[e],o.readAlignments(a,r,n,1)):u}(e,r,n):u}))};var Js=eval,th=function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==R(t)&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=35)}([function(t,e){var r=function(t){function e(){return M(this,e),U(this,N(e).apply(this,arguments))}return F(e,t),e}(z(Error)),n=function(t){function e(){return M(this,e),U(this,N(e).apply(this,arguments))}return F(e,t),e}(r);t.exports={CramBufferOverrunError:function(t){function e(){return M(this,e),U(this,N(e).apply(this,arguments))}return F(e,t),e}(n),CramMalformedError:n,CramUnimplementedError:function(t){function e(){return M(this,e),U(this,N(e).apply(this,arguments))}return F(e,t),e}(z(Error)),CramSizeLimitError:function(t){function e(){return M(this,e),U(this,N(e).apply(this,arguments))}return F(e,t),e}(r),CramArgumentError:function(t){function e(){return M(this,e),U(this,N(e).apply(this,arguments))}return F(e,t),e}(r)}},function(t,e,r){(function(t){var n=r(37),i=r(38),a=r(19);function o(){return h.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(t,e){if(o()<e)throw new RangeError("Invalid typed array length");return h.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=h.prototype:(null===t&&(t=new h(e)),t.length=e),t}function h(t,e,r){if(!(h.TYPED_ARRAY_SUPPORT||this instanceof h))return new h(t,e,r);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return u(this,t)}return c(this,t,e,r)}function c(t,e,r,n){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,r,n){if(e.byteLength,r<0||e.byteLength<r)throw new RangeError("'offset' is out of bounds");if(e.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");return e=void 0===r&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,r):new Uint8Array(e,r,n),h.TYPED_ARRAY_SUPPORT?(t=e).__proto__=h.prototype:t=f(t,e),t}(t,e,r,n):"string"==typeof e?function(t,e,r){if("string"==typeof r&&""!==r||(r="utf8"),!h.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|d(e,r),i=(t=s(t,n)).write(e,r);return i!==n&&(t=t.slice(0,i)),t}(t,e,r):function(t,e){if(h.isBuffer(e)){var r=0|p(e.length);return 0===(t=s(t,r)).length?t:(e.copy(t,0,0,r),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(n=e.length)!=n?s(t,0):f(t,e);if("Buffer"===e.type&&a(e.data))return f(t,e.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function l(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function u(t,e){if(l(e),t=s(t,e<0?0:0|p(e)),!h.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;++r)t[r]=0;return t}function f(t,e){var r=e.length<0?0:0|p(e.length);t=s(t,r);for(var n=0;n<r;n+=1)t[n]=255&e[n];return t}function p(t){if(t>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|t}function d(t,e){if(h.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return U(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return H(t).length;default:if(n)return U(t).length;e=(""+e).toLowerCase(),n=!0}}function g(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function m(t,e,r,n,i){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof e&&(e=h.from(e,n)),h.isBuffer(e))return 0===e.length?-1:v(t,e,r,n,i);if("number"==typeof e)return e&=255,h.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):v(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function v(t,e,r,n,i){var a,o=1,s=t.length,h=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;o=2,s/=2,h/=2,r/=2}function c(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}if(i){var l=-1;for(a=r;a<s;a++)if(c(t,a)===c(e,-1===l?0:a-l)){if(-1===l&&(l=a),a-l+1===h)return l*o}else-1!==l&&(a-=a-l),l=-1}else for(r+h>s&&(r=s-h),a=r;a>=0;a--){for(var u=!0,f=0;f<h;f++)if(c(t,a+f)!==c(e,f)){u=!1;break}if(u)return a}return-1}function b(t,e,r,n){r=Number(r)||0;var i=t.length-r;n?(n=Number(n))>i&&(n=i):n=i;var a=e.length;if(a%2!=0)throw new TypeError("Invalid hex string");n>a/2&&(n=a/2);for(var o=0;o<n;++o){var s=parseInt(e.substr(2*o,2),16);if(isNaN(s))return o;t[r+o]=s}return o}function y(t,e,r,n){return $(U(e,t.length-r),t,r,n)}function w(t,e,r,n){return $(function(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function x(t,e,r,n){return w(t,e,r,n)}function k(t,e,r,n){return $(H(e),t,r,n)}function S(t,e,r,n){return $(function(t,e){for(var r,n,i,a=[],o=0;o<t.length&&!((e-=2)<0);++o)n=(r=t.charCodeAt(o))>>8,i=r%256,a.push(i),a.push(n);return a}(e,t.length-r),t,r,n)}function _(t,e,r){return 0===e&&r===t.length?n.fromByteArray(t):n.fromByteArray(t.slice(e,r))}function C(t,e,r){r=Math.min(t.length,r);for(var n=[],i=e;i<r;){var a,o,s,h,c=t[i],l=null,u=c>239?4:c>223?3:c>191?2:1;if(i+u<=r)switch(u){case 1:c<128&&(l=c);break;case 2:128==(192&(a=t[i+1]))&&(h=(31&c)<<6|63&a)>127&&(l=h);break;case 3:a=t[i+1],o=t[i+2],128==(192&a)&&128==(192&o)&&(h=(15&c)<<12|(63&a)<<6|63&o)>2047&&(h<55296||h>57343)&&(l=h);break;case 4:a=t[i+1],o=t[i+2],s=t[i+3],128==(192&a)&&128==(192&o)&&128==(192&s)&&(h=(15&c)<<18|(63&a)<<12|(63&o)<<6|63&s)>65535&&h<1114112&&(l=h)}null===l?(l=65533,u=1):l>65535&&(l-=65536,n.push(l>>>10&1023|55296),l=56320|1023&l),n.push(l),i+=u}return function(t){var e=t.length;if(e<=E)return String.fromCharCode.apply(String,t);for(var r="",n=0;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=E));return r}(n)}e.Buffer=h,e.SlowBuffer=function(t){return+t!=t&&(t=0),h.alloc(+t)},e.INSPECT_MAX_BYTES=50,h.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=o(),h.poolSize=8192,h._augment=function(t){return t.__proto__=h.prototype,t},h.from=function(t,e,r){return c(null,t,e,r)},h.TYPED_ARRAY_SUPPORT&&(h.prototype.__proto__=Uint8Array.prototype,h.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&h[Symbol.species]===h&&Object.defineProperty(h,Symbol.species,{value:null,configurable:!0})),h.alloc=function(t,e,r){return function(t,e,r,n){return l(e),e<=0?s(t,e):void 0!==r?"string"==typeof n?s(t,e).fill(r,n):s(t,e).fill(r):s(t,e)}(null,t,e,r)},h.allocUnsafe=function(t){return u(null,t)},h.allocUnsafeSlow=function(t){return u(null,t)},h.isBuffer=function(t){return!(null==t||!t._isBuffer)},h.compare=function(t,e){if(!h.isBuffer(t)||!h.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,n=e.length,i=0,a=Math.min(r,n);i<a;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},h.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(t,e){if(!a(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return h.alloc(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var n=h.allocUnsafe(e),i=0;for(r=0;r<t.length;++r){var o=t[r];if(!h.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(n,i),i+=o.length}return n},h.byteLength=d,h.prototype._isBuffer=!0,h.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)g(this,e,e+1);return this},h.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)g(this,e,e+3),g(this,e+1,e+2);return this},h.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)g(this,e,e+7),g(this,e+1,e+6),g(this,e+2,e+5),g(this,e+3,e+4);return this},h.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?C(this,0,t):function(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return R(this,e,r);case"utf8":case"utf-8":return C(this,e,r);case"ascii":return A(this,e,r);case"latin1":case"binary":return T(this,e,r);case"base64":return _(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}.apply(this,arguments)},h.prototype.equals=function(t){if(!h.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===h.compare(this,t)},h.prototype.inspect=function(){var t="",r=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(t+=" ... ")),"<Buffer "+t+">"},h.prototype.compare=function(t,e,r,n,i){if(!h.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),e<0||r>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&e>=r)return 0;if(n>=i)return-1;if(e>=r)return 1;if(this===t)return 0;for(var a=(i>>>=0)-(n>>>=0),o=(r>>>=0)-(e>>>=0),s=Math.min(a,o),c=this.slice(n,i),l=t.slice(e,r),u=0;u<s;++u)if(c[u]!==l[u]){a=c[u],o=l[u];break}return a<o?-1:o<a?1:0},h.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},h.prototype.indexOf=function(t,e,r){return m(this,t,e,r,!0)},h.prototype.lastIndexOf=function(t,e,r){return m(this,t,e,r,!1)},h.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var a=!1;;)switch(n){case"hex":return b(this,t,e,r);case"utf8":case"utf-8":return y(this,t,e,r);case"ascii":return w(this,t,e,r);case"latin1":case"binary":return x(this,t,e,r);case"base64":return k(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,t,e,r);default:if(a)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),a=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var E=4096;function A(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function T(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function R(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var i="",a=e;a<r;++a)i+=z(t[a]);return i}function L(t,e,r){for(var n=t.slice(e,r),i="",a=0;a<n.length;a+=2)i+=String.fromCharCode(n[a]+256*n[a+1]);return i}function I(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function M(t,e,r,n,i,a){if(!h.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<a)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function P(t,e,r,n){e<0&&(e=65535+e+1);for(var i=0,a=Math.min(t.length-r,2);i<a;++i)t[r+i]=(e&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function D(t,e,r,n){e<0&&(e=4294967295+e+1);for(var i=0,a=Math.min(t.length-r,4);i<a;++i)t[r+i]=e>>>8*(n?i:3-i)&255}function F(t,e,r,n,i,a){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function N(t,e,r,n,a){return a||F(t,0,r,4),i.write(t,e,r,n,23,4),r+4}function B(t,e,r,n,a){return a||F(t,0,r,8),i.write(t,e,r,n,52,8),r+8}h.prototype.slice=function(t,e){var r,n=this.length;if((t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t),h.TYPED_ARRAY_SUPPORT)(r=this.subarray(t,e)).__proto__=h.prototype;else{var i=e-t;r=new h(i,void 0);for(var a=0;a<i;++a)r[a]=this[a+t]}return r},h.prototype.readUIntLE=function(t,e,r){t|=0,e|=0,r||I(t,e,this.length);for(var n=this[t],i=1,a=0;++a<e&&(i*=256);)n+=this[t+a]*i;return n},h.prototype.readUIntBE=function(t,e,r){t|=0,e|=0,r||I(t,e,this.length);for(var n=this[t+--e],i=1;e>0&&(i*=256);)n+=this[t+--e]*i;return n},h.prototype.readUInt8=function(t,e){return e||I(t,1,this.length),this[t]},h.prototype.readUInt16LE=function(t,e){return e||I(t,2,this.length),this[t]|this[t+1]<<8},h.prototype.readUInt16BE=function(t,e){return e||I(t,2,this.length),this[t]<<8|this[t+1]},h.prototype.readUInt32LE=function(t,e){return e||I(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},h.prototype.readUInt32BE=function(t,e){return e||I(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},h.prototype.readIntLE=function(t,e,r){t|=0,e|=0,r||I(t,e,this.length);for(var n=this[t],i=1,a=0;++a<e&&(i*=256);)n+=this[t+a]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*e)),n},h.prototype.readIntBE=function(t,e,r){t|=0,e|=0,r||I(t,e,this.length);for(var n=e,i=1,a=this[t+--n];n>0&&(i*=256);)a+=this[t+--n]*i;return a>=(i*=128)&&(a-=Math.pow(2,8*e)),a},h.prototype.readInt8=function(t,e){return e||I(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},h.prototype.readInt16LE=function(t,e){e||I(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},h.prototype.readInt16BE=function(t,e){e||I(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},h.prototype.readInt32LE=function(t,e){return e||I(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},h.prototype.readInt32BE=function(t,e){return e||I(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},h.prototype.readFloatLE=function(t,e){return e||I(t,4,this.length),i.read(this,t,!0,23,4)},h.prototype.readFloatBE=function(t,e){return e||I(t,4,this.length),i.read(this,t,!1,23,4)},h.prototype.readDoubleLE=function(t,e){return e||I(t,8,this.length),i.read(this,t,!0,52,8)},h.prototype.readDoubleBE=function(t,e){return e||I(t,8,this.length),i.read(this,t,!1,52,8)},h.prototype.writeUIntLE=function(t,e,r,n){t=+t,e|=0,r|=0,n||M(this,t,e,r,Math.pow(2,8*r)-1,0);var i=1,a=0;for(this[e]=255&t;++a<r&&(i*=256);)this[e+a]=t/i&255;return e+r},h.prototype.writeUIntBE=function(t,e,r,n){t=+t,e|=0,r|=0,n||M(this,t,e,r,Math.pow(2,8*r)-1,0);var i=r-1,a=1;for(this[e+i]=255&t;--i>=0&&(a*=256);)this[e+i]=t/a&255;return e+r},h.prototype.writeUInt8=function(t,e,r){return t=+t,e|=0,r||M(this,t,e,1,255,0),h.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},h.prototype.writeUInt16LE=function(t,e,r){return t=+t,e|=0,r||M(this,t,e,2,65535,0),h.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):P(this,t,e,!0),e+2},h.prototype.writeUInt16BE=function(t,e,r){return t=+t,e|=0,r||M(this,t,e,2,65535,0),h.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):P(this,t,e,!1),e+2},h.prototype.writeUInt32LE=function(t,e,r){return t=+t,e|=0,r||M(this,t,e,4,4294967295,0),h.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):D(this,t,e,!0),e+4},h.prototype.writeUInt32BE=function(t,e,r){return t=+t,e|=0,r||M(this,t,e,4,4294967295,0),h.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):D(this,t,e,!1),e+4},h.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*r-1);M(this,t,e,r,i-1,-i)}var a=0,o=1,s=0;for(this[e]=255&t;++a<r&&(o*=256);)t<0&&0===s&&0!==this[e+a-1]&&(s=1),this[e+a]=(t/o>>0)-s&255;return e+r},h.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*r-1);M(this,t,e,r,i-1,-i)}var a=r-1,o=1,s=0;for(this[e+a]=255&t;--a>=0&&(o*=256);)t<0&&0===s&&0!==this[e+a+1]&&(s=1),this[e+a]=(t/o>>0)-s&255;return e+r},h.prototype.writeInt8=function(t,e,r){return t=+t,e|=0,r||M(this,t,e,1,127,-128),h.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},h.prototype.writeInt16LE=function(t,e,r){return t=+t,e|=0,r||M(this,t,e,2,32767,-32768),h.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):P(this,t,e,!0),e+2},h.prototype.writeInt16BE=function(t,e,r){return t=+t,e|=0,r||M(this,t,e,2,32767,-32768),h.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):P(this,t,e,!1),e+2},h.prototype.writeInt32LE=function(t,e,r){return t=+t,e|=0,r||M(this,t,e,4,2147483647,-2147483648),h.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):D(this,t,e,!0),e+4},h.prototype.writeInt32BE=function(t,e,r){return t=+t,e|=0,r||M(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),h.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):D(this,t,e,!1),e+4},h.prototype.writeFloatLE=function(t,e,r){return N(this,t,e,!0,r)},h.prototype.writeFloatBE=function(t,e,r){return N(this,t,e,!1,r)},h.prototype.writeDoubleLE=function(t,e,r){return B(this,t,e,!0,r)},h.prototype.writeDoubleBE=function(t,e,r){return B(this,t,e,!1,r)},h.prototype.copy=function(t,e,r,n){if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var i,a=n-r;if(this===t&&r<e&&e<n)for(i=a-1;i>=0;--i)t[i+e]=this[i+r];else if(a<1e3||!h.TYPED_ARRAY_SUPPORT)for(i=0;i<a;++i)t[i+e]=this[i+r];else Uint8Array.prototype.set.call(t,this.subarray(r,r+a),e);return a},h.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!h.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;var a;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(a=e;a<r;++a)this[a]=t;else{var o=h.isBuffer(t)?t:U(new h(t,n).toString()),s=o.length;for(a=0;a<r-e;++a)this[a+e]=o[a%s]}return this};var O=/[^+\/0-9A-Za-z-_]/g;function z(t){return t<16?"0"+t.toString(16):t.toString(16)}function U(t,e){var r;e=e||1/0;for(var n=t.length,i=null,a=[],o=0;o<n;++o){if((r=t.charCodeAt(o))>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&a.push(239,191,189);continue}if(o+1===n){(e-=3)>-1&&a.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&a.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(e-=3)>-1&&a.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;a.push(r)}else if(r<2048){if((e-=2)<0)break;a.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;a.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;a.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return a}function H(t){return n.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(O,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function $(t,e,r,n){for(var i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}}).call(this,r(2))},function(t,e){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(t){"object"==("undefined"==typeof window?"undefined":R(window))&&(r=window)}t.exports=r},function(t,e){var r,n,i=t.exports={};function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(t){if(r===setTimeout)return setTimeout(t,0);if((r===a||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:a}catch(t){r=a}try{n="function"==typeof clearTimeout?clearTimeout:o}catch(t){n=o}}();var h,c=[],l=!1,u=-1;function f(){l&&h&&(l=!1,h.length?c=h.concat(c):u=-1,c.length&&p())}function p(){if(!l){var t=s(f);l=!0;for(var e=c.length;e;){for(h=c,c=[];++u<e;)h&&h[u].run();u=-1,e=c.length}h=null,l=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function g(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];c.push(new d(t,e)),1!==c.length||l||s(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}},function(t,e,r){var n=r(9),i=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e};t.exports=u;var a=r(7);a.inherits=r(4);var o=r(21),s=r(16);a.inherits(u,o);for(var h=i(s.prototype),c=0;c<h.length;c++){var l=h[c];u.prototype[l]||(u.prototype[l]=s.prototype[l])}function u(t){if(!(this instanceof u))return new u(t);o.call(this,t),s.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",f)}function f(){this.allowHalfOpen||this._writableState.ended||n.nextTick(p,this)}function p(t){t.end()}Object.defineProperty(u.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(u.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}),u.prototype._destroy=function(t,e){this.push(null),this.end(),n.nextTick(e,t)}},function(e,r,n){var i=n(0).CramBufferOverrunError,a={int:!0,byte:!0,long:!0,byteArray:!0,byteArrayBlock:!0};e.exports=function(){function e(){var r=arguments.length>0&&arguments[0]!==t?arguments[0]:{},n=arguments.length>1?arguments[1]:t;if(M(this,e),this.parameters=r,this.dataType=n,!n)throw new TypeError("must provide a data type to codec constructor");if(!a[n])throw new TypeError("invalid data type ".concat(n))}return D(e,[{key:"_getBits",value:function(t,e,r){var n=0;if(e.bytePosition+(7-e.bitPosition+r)/8>t.length)throw new i("read error during decoding. the file seems to be truncated.");for(var a=r;a;a-=1)n<<=1,n|=t[e.bytePosition]>>e.bitPosition&1,e.bitPosition-=1,e.bitPosition<0&&(e.bytePosition+=1),e.bitPosition&=7;return n}}]),e}()},function(t,e,r){(function(t){function r(t){return Object.prototype.toString.call(t)}e.isArray=function(t){return Array.isArray?Array.isArray(t):"[object Array]"===r(t)},e.isBoolean=function(t){return"boolean"==typeof t},e.isNull=function(t){return null===t},e.isNullOrUndefined=function(t){return null==t},e.isNumber=function(t){return"number"==typeof t},e.isString=function(t){return"string"==typeof t},e.isSymbol=function(t){return"symbol"==R(t)},e.isUndefined=function(t){return void 0===t},e.isRegExp=function(t){return"[object RegExp]"===r(t)},e.isObject=function(t){return"object"==R(t)&&null!==t},e.isDate=function(t){return"[object Date]"===r(t)},e.isError=function(t){return"[object Error]"===r(t)||t instanceof Error},e.isFunction=function(t){return"function"==typeof t},e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==R(t)||void 0===t},e.isBuffer=t.isBuffer}).call(this,r(1).Buffer)},function(e,r,n){var i=n(72),a=n(0).CramBufferOverrunError;e.exports={itf8Size:function(t){return-128&t?-16384&t?-2097152&t?-268435456&t?5:4:3:2:1},parseItf8:function(t,e){var r,n=e,i=t[n];if(i<128?(r=i,n+=1):i<192?(r=16383&(i<<8|t[n+1]),n+=2):i<224?(r=2097151&(i<<16|t[n+1]<<8|t[n+2]),n+=3):i<240?(r=268435455&(i<<24|t[n+1]<<16|t[n+2]<<8|t[n+3]),n+=4):(r=(15&i)<<28|t[n+1]<<20|t[n+2]<<12|t[n+3]<<4|15&t[n+4],n+=5),n>t.length)throw new a("Attempted to read beyond end of buffer; this file seems truncated.");return[r,n-e]},parseItem:function(e,r){var n=arguments.length>2&&arguments[2]!==t?arguments[2]:0,i=arguments.length>3&&arguments[3]!==t?arguments[3]:0,a=r.parse(e),o=a.offset,s=a.result;return s._endPosition=o+i,s._size=o-n,s},tinyMemoize:function(t,e){var r=t.prototype[e],n="_memo_".concat(e);t.prototype[e]=function(){return n in this||(this[n]=r.call(this)),this[n]}},sequenceMD5:function(t){return i(t.toUpperCase().replace(/[^\x21-\x7e]/g,""))}}},function(t,e,r){(function(e){!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?t.exports={nextTick:function(t,r,n,i){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var a,o,s=arguments.length;switch(s){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick((function(){t.call(null,r)}));case 3:return e.nextTick((function(){t.call(null,r,n)}));case 4:return e.nextTick((function(){t.call(null,r,n,i)}));default:for(a=new Array(s-1),o=0;o<a.length;)a[o++]=arguments[o];return e.nextTick((function(){t.apply(null,a)}))}}}:t.exports=e}).call(this,r(3))},function(t,e,r){var n=r(1),i=n.Buffer;function a(t,e){for(var r in t)e[r]=t[r]}function o(t,e,r){return i(t,e,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=n:(a(n,e),e.Buffer=o),a(i,o),o.from=function(t,e,r){if("number"==typeof t)throw new TypeError("Argument must not be a number");return i(t,e,r)},o.alloc=function(t,e,r){if("number"!=typeof t)throw new TypeError("Argument must be a number");var n=i(t);return void 0!==e?"string"==typeof r?n.fill(e,r):n.fill(e):n.fill(0),n},o.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return i(t)},o.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return n.SlowBuffer(t)}},function(t,e,r){var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;function i(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var r=e.shift();if(r){if("object"!=R(r))throw new TypeError(r+"must be non-object");for(var n in r)i(r,n)&&(t[n]=r[n])}}return t},e.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var a={arraySet:function(t,e,r,n,i){if(e.subarray&&t.subarray)t.set(e.subarray(r,r+n),i);else for(var a=0;a<n;a++)t[i+a]=e[r+a]},flattenChunks:function(t){var e,r,n,i,a,o;for(n=0,e=0,r=t.length;e<r;e++)n+=t[e].length;for(o=new Uint8Array(n),i=0,e=0,r=t.length;e<r;e++)a=t[e],o.set(a,i),i+=a.length;return o}},o={arraySet:function(t,e,r,n,i){for(var a=0;a<n;a++)t[i+a]=e[r+a]},flattenChunks:function(t){return[].concat.apply([],t)}};e.setTyped=function(t){t?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,a)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,o))},e.setTyped(n)},function(t,e,r){var n=r(0).CramMalformedError,i=r(13),a=function t(){M(this,t),this.F=void 0,this.C=void 0};function o(t,e,r,n){return r*(t>>n)+(t&(1<<n)-1)-e}var s={FC:a,AriDecoder:function t(){M(this,t),this.fc=new Array(256);for(var e=0;e<this.fc.length;e+=1)this.fc[e]=new a;this.R=null},Symbol:function t(){M(this,t),this.start=void 0,this.freq=void 0},symbolInit:function(t,e,r){if(!(e<=65536))throw new n("assertion failed: start <= 1<<16");if(!(r<=65536-e))throw new n("assertion failed: freq <= 1<<16");t.start=e,t.freq=r},advanceStep:o,advanceSymbolStep:function(t,e,r){return o(t,e.start,e.freq,r)},get:function(t,e){return t&(1<<e)-1},advanceSymbol:function(t,e,r,n){return function(t,e,r,n,a){if((t=n*(t>>a)+(t&(1<<a)-1)-r)<i.RANS_BYTE_L)do{t=t<<8|255&e.get()}while(t<i.RANS_BYTE_L);return t}(t,e,r.start,r.freq,n)},renormalize:function(t,e){if(t<i.RANS_BYTE_L)do{t=t<<8|255&e.get()}while(t<i.RANS_BYTE_L);return t}};t.exports=s},function(t,e){t.exports={TF_SHIFT:12,TOTFREQ:4096,RANS_BYTE_L:1<<23}},function(t,e){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(t){return"function"==typeof t}function i(t){return"object"==R(t)&&null!==t}function a(t){return void 0===t}t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},r.prototype.emit=function(t){var e,r,o,s,h,c;if(this._events||(this._events={}),"error"===t&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;var l=new Error('Uncaught, unspecified "error" event. ('+e+")");throw l.context=e,l}if(a(r=this._events[t]))return!1;if(n(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),r.apply(this,s)}else if(i(r))for(s=Array.prototype.slice.call(arguments,1),o=(c=r.slice()).length,h=0;h<o;h++)c[h].apply(this,s);return!0},r.prototype.addListener=function(t,e){var o;if(!n(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,n(e.listener)?e.listener:e),this._events[t]?i(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,i(this._events[t])&&!this._events[t].warned&&(o=a(this._maxListeners)?r.defaultMaxListeners:this._maxListeners)&&o>0&&this._events[t].length>o&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace()),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(t,e){if(!n(e))throw TypeError("listener must be a function");var r=!1;function i(){this.removeListener(t,i),r||(r=!0,e.apply(this,arguments))}return i.listener=e,this.on(t,i),this},r.prototype.removeListener=function(t,e){var r,a,o,s;if(!n(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(o=(r=this._events[t]).length,a=-1,r===e||n(r.listener)&&r.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(i(r)){for(s=o;s-- >0;)if(r[s]===e||r[s].listener&&r[s].listener===e){a=s;break}if(a<0)return this;1===r.length?(r.length=0,delete this._events[t]):r.splice(a,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},r.prototype.removeAllListeners=function(t){var e,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n(r=this._events[t]))this.removeListener(t,r);else if(r)for(;r.length;)this.removeListener(t,r[r.length-1]);return delete this._events[t],this},r.prototype.listeners=function(t){return this._events&&this._events[t]?n(this._events[t])?[this._events[t]]:this._events[t].slice():[]},r.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(n(e))return 1;if(e)return e.length}return 0},r.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e,r){(e=t.exports=r(21)).Stream=e,e.Readable=e,e.Writable=r(16),e.Duplex=r(5),e.Transform=r(25),e.PassThrough=r(46)},function(t,e,r){(function(e,n,i){var a=r(9);function o(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e,r){var n=t.entry;for(t.entry=null;n;){var i=n.callback;e.pendingcb--,i(void 0),n=n.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}(e,t)}}t.exports=b;var s,h=!e.browser&&["v0.10","v0.9."].indexOf(e.version.slice(0,5))>-1?n:a.nextTick;b.WritableState=v;var c=r(7);c.inherits=r(4);var l,u={deprecate:r(45)},f=r(22),p=r(10).Buffer,d=i.Uint8Array||function(){},g=r(23);function m(){}function v(t,e){s=s||r(5),t=t||{};var n=e instanceof s;this.objectMode=!!t.objectMode,n&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var i=t.highWaterMark,c=t.writableHighWaterMark,l=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:n&&(c||0===c)?c:l,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var u=!1===t.decodeStrings;this.decodeStrings=!u,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var r=t._writableState,n=r.sync,i=r.writecb;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(r),e)!function(t,e,r,n,i){--e.pendingcb,r?(a.nextTick(i,n),a.nextTick(_,t,e),t._writableState.errorEmitted=!0,t.emit("error",n)):(i(n),t._writableState.errorEmitted=!0,t.emit("error",n),_(t,e))}(t,r,n,e,i);else{var o=k(r);o||r.corked||r.bufferProcessing||!r.bufferedRequest||x(t,r),n?h(w,t,r,o,i):w(t,r,o,i)}}(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function b(t){if(s=s||r(5),!(l.call(b,this)||this instanceof s))return new b(t);this._writableState=new v(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),f.call(this)}function y(t,e,r,n,i,a,o){e.writelen=n,e.writecb=o,e.writing=!0,e.sync=!0,r?t._writev(i,e.onwrite):t._write(i,a,e.onwrite),e.sync=!1}function w(t,e,r,n){r||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),e.pendingcb--,n(),_(t,e)}function x(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var n=e.bufferedRequestCount,i=new Array(n),a=e.corkedRequestsFree;a.entry=r;for(var s=0,h=!0;r;)i[s]=r,r.isBuf||(h=!1),r=r.next,s+=1;i.allBuffers=h,y(t,e,!0,e.length,i,"",a.finish),e.pendingcb++,e.lastBufferedRequest=null,a.next?(e.corkedRequestsFree=a.next,a.next=null):e.corkedRequestsFree=new o(e),e.bufferedRequestCount=0}else{for(;r;){var c=r.chunk,l=r.encoding,u=r.callback;if(y(t,e,!1,e.objectMode?1:c.length,c,l,u),r=r.next,e.bufferedRequestCount--,e.writing)break}null===r&&(e.lastBufferedRequest=null)}e.bufferedRequest=r,e.bufferProcessing=!1}function k(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function S(t,e){t._final((function(r){e.pendingcb--,r&&t.emit("error",r),e.prefinished=!0,t.emit("prefinish"),_(t,e)}))}function _(t,e){var r=k(e);return r&&(function(t,e){e.prefinished||e.finalCalled||("function"==typeof t._final?(e.pendingcb++,e.finalCalled=!0,a.nextTick(S,t,e)):(e.prefinished=!0,t.emit("prefinish")))}(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"))),r}c.inherits(b,f),v.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(v.prototype,"buffer",{get:u.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(l=Function.prototype[Symbol.hasInstance],Object.defineProperty(b,Symbol.hasInstance,{value:function(t){return!!l.call(this,t)||this===b&&t&&t._writableState instanceof v}})):l=function(t){return t instanceof this},b.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},b.prototype.write=function(t,e,r){var n,i=this._writableState,o=!1,s=!i.objectMode&&(n=t,p.isBuffer(n)||n instanceof d);return s&&!p.isBuffer(t)&&(t=function(t){return p.from(t)}(t)),"function"==typeof e&&(r=e,e=null),s?e="buffer":e||(e=i.defaultEncoding),"function"!=typeof r&&(r=m),i.ended?function(t,e){var r=new Error("write after end");t.emit("error",r),a.nextTick(e,r)}(this,r):(s||function(t,e,r,n){var i=!0,o=!1;return null===r?o=new TypeError("May not write null values to stream"):"string"==typeof r||void 0===r||e.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o&&(t.emit("error",o),a.nextTick(n,o),i=!1),i}(this,i,t,r))&&(i.pendingcb++,o=function(t,e,r,n,i,a){if(!r){var o=function(t,e,r){return t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=p.from(e,r)),e}(e,n,i);n!==o&&(r=!0,i="buffer",n=o)}var s=e.objectMode?1:n.length;e.length+=s;var h=e.length<e.highWaterMark;if(h||(e.needDrain=!0),e.writing||e.corked){var c=e.lastBufferedRequest;e.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:a,next:null},c?c.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else y(t,e,!1,s,n,i,a);return h}(this,i,s,t,e,r)),o},b.prototype.cork=function(){this._writableState.corked++},b.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.bufferedRequest||x(this,t))},b.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(b.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),b.prototype._write=function(t,e,r){r(new Error("_write() is not implemented"))},b.prototype._writev=null,b.prototype.end=function(t,e,r){var n=this._writableState;"function"==typeof t?(r=t,t=null,e=null):"function"==typeof e&&(r=e,e=null),null!=t&&this.write(t,e),n.corked&&(n.corked=1,this.uncork()),n.ending||n.finished||function(t,e,r){e.ending=!0,_(t,e),r&&(e.finished?a.nextTick(r):t.once("finish",r)),e.ended=!0,t.writable=!1}(this,n,r)},Object.defineProperty(b.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),b.prototype.destroy=g.destroy,b.prototype._undestroy=g.undestroy,b.prototype._destroy=function(t,e){this.end(),e(t)}}).call(this,r(3),r(43).setImmediate,r(2))},function(t,e){t.exports={CRAM_FLAG_PRESERVE_QUAL_SCORES:1,CRAM_FLAG_DETACHED:2,CRAM_FLAG_MATE_DOWNSTREAM:4,CRAM_FLAG_NO_SEQ:8,CRAM_FLAG_MASK:15,CRAM_M_REVERSE:1,CRAM_M_UNMAP:2,BAM_FPAIRED:1,BAM_FPROPER_PAIR:2,BAM_FUNMAP:4,BAM_FMUNMAP:8,BAM_FREVERSE:16,BAM_FMREVERSE:32,BAM_FREAD1:64,BAM_FREAD2:128,BAM_FSECONDARY:256,BAM_FQCFAIL:512,BAM_FDUP:1024,BAM_FSUPPLEMENTARY:2048,BAM_CMATCH:0,BAM_CINS:1,BAM_CDEL:2,BAM_CREF_SKIP:3,BAM_CSOFT_CLIP:4,BAM_CHARD_CLIP:5,BAM_CPAD:6,BAM_CEQUAL:7,BAM_CDIFF:8,BAM_CBACK:9,BAM_CIGAR_STR:"MIDNSHP:XB",BAM_CIGAR_SHIFT:4,BAM_CIGAR_MASK:15,BAM_CIGAR_TYPE:246183}},function(t,e,r){var n=r(36);t.exports=n},function(t,e){var r={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)}},function(t,e,r){(function(t){var n=r(1).Buffer,i=r(39).Transform,a=r(51),o=r(27),s=r(26).ok,h=r(1).kMaxLength,c="Cannot create final Buffer. It would be larger than 0x"+h.toString(16)+" bytes";a.Z_MIN_WINDOWBITS=8,a.Z_MAX_WINDOWBITS=15,a.Z_DEFAULT_WINDOWBITS=15,a.Z_MIN_CHUNK=64,a.Z_MAX_CHUNK=1/0,a.Z_DEFAULT_CHUNK=16384,a.Z_MIN_MEMLEVEL=1,a.Z_MAX_MEMLEVEL=9,a.Z_DEFAULT_MEMLEVEL=8,a.Z_MIN_LEVEL=-1,a.Z_MAX_LEVEL=9,a.Z_DEFAULT_LEVEL=a.Z_DEFAULT_COMPRESSION;for(var l=Object.keys(a),u=0;u<l.length;u++){var f=l[u];f.match(/^Z/)&&Object.defineProperty(e,f,{enumerable:!0,value:a[f],writable:!1})}for(var p={Z_OK:a.Z_OK,Z_STREAM_END:a.Z_STREAM_END,Z_NEED_DICT:a.Z_NEED_DICT,Z_ERRNO:a.Z_ERRNO,Z_STREAM_ERROR:a.Z_STREAM_ERROR,Z_DATA_ERROR:a.Z_DATA_ERROR,Z_MEM_ERROR:a.Z_MEM_ERROR,Z_BUF_ERROR:a.Z_BUF_ERROR,Z_VERSION_ERROR:a.Z_VERSION_ERROR},d=Object.keys(p),g=0;g<d.length;g++){var m=d[g];p[p[m]]=m}function v(t,e,r){var i=[],a=0;function o(){for(var e;null!==(e=t.read());)i.push(e),a+=e.length;t.once("readable",o)}function s(){var e,o=null;a>=h?o=new RangeError(c):e=n.concat(i,a),i=[],t.close(),r(o,e)}t.on("error",(function(e){t.removeListener("end",s),t.removeListener("readable",o),r(e)})),t.on("end",s),t.end(e),o()}function b(t,e){if("string"==typeof e&&(e=n.from(e)),!n.isBuffer(e))throw new TypeError("Not a string or buffer");var r=t._finishFlushFlag;return t._processChunk(e,r)}function y(t){if(!(this instanceof y))return new y(t);A.call(this,t,a.DEFLATE)}function w(t){if(!(this instanceof w))return new w(t);A.call(this,t,a.INFLATE)}function x(t){if(!(this instanceof x))return new x(t);A.call(this,t,a.GZIP)}function k(t){if(!(this instanceof k))return new k(t);A.call(this,t,a.GUNZIP)}function S(t){if(!(this instanceof S))return new S(t);A.call(this,t,a.DEFLATERAW)}function _(t){if(!(this instanceof _))return new _(t);A.call(this,t,a.INFLATERAW)}function C(t){if(!(this instanceof C))return new C(t);A.call(this,t,a.UNZIP)}function E(t){return t===a.Z_NO_FLUSH||t===a.Z_PARTIAL_FLUSH||t===a.Z_SYNC_FLUSH||t===a.Z_FULL_FLUSH||t===a.Z_FINISH||t===a.Z_BLOCK}function A(t,r){var o=this;if(this._opts=t=t||{},this._chunkSize=t.chunkSize||e.Z_DEFAULT_CHUNK,i.call(this,t),t.flush&&!E(t.flush))throw new Error("Invalid flush flag: "+t.flush);if(t.finishFlush&&!E(t.finishFlush))throw new Error("Invalid flush flag: "+t.finishFlush);if(this._flushFlag=t.flush||a.Z_NO_FLUSH,this._finishFlushFlag=void 0!==t.finishFlush?t.finishFlush:a.Z_FINISH,t.chunkSize&&(t.chunkSize<e.Z_MIN_CHUNK||t.chunkSize>e.Z_MAX_CHUNK))throw new Error("Invalid chunk size: "+t.chunkSize);if(t.windowBits&&(t.windowBits<e.Z_MIN_WINDOWBITS||t.windowBits>e.Z_MAX_WINDOWBITS))throw new Error("Invalid windowBits: "+t.windowBits);if(t.level&&(t.level<e.Z_MIN_LEVEL||t.level>e.Z_MAX_LEVEL))throw new Error("Invalid compression level: "+t.level);if(t.memLevel&&(t.memLevel<e.Z_MIN_MEMLEVEL||t.memLevel>e.Z_MAX_MEMLEVEL))throw new Error("Invalid memLevel: "+t.memLevel);if(t.strategy&&t.strategy!=e.Z_FILTERED&&t.strategy!=e.Z_HUFFMAN_ONLY&&t.strategy!=e.Z_RLE&&t.strategy!=e.Z_FIXED&&t.strategy!=e.Z_DEFAULT_STRATEGY)throw new Error("Invalid strategy: "+t.strategy);if(t.dictionary&&!n.isBuffer(t.dictionary))throw new Error("Invalid dictionary: it should be a Buffer instance");this._handle=new a.Zlib(r);var s=this;this._hadError=!1,this._handle.onerror=function(t,r){T(s),s._hadError=!0;var n=new Error(t);n.errno=r,n.code=e.codes[r],s.emit("error",n)};var h=e.Z_DEFAULT_COMPRESSION;"number"==typeof t.level&&(h=t.level);var c=e.Z_DEFAULT_STRATEGY;"number"==typeof t.strategy&&(c=t.strategy),this._handle.init(t.windowBits||e.Z_DEFAULT_WINDOWBITS,h,t.memLevel||e.Z_DEFAULT_MEMLEVEL,c,t.dictionary),this._buffer=n.allocUnsafe(this._chunkSize),this._offset=0,this._level=h,this._strategy=c,this.once("end",this.close),Object.defineProperty(this,"_closed",{get:function(){return!o._handle},configurable:!0,enumerable:!0})}function T(e,r){r&&t.nextTick(r),e._handle&&(e._handle.close(),e._handle=null)}function R(t){t.emit("close")}Object.defineProperty(e,"codes",{enumerable:!0,value:Object.freeze(p),writable:!1}),e.Deflate=y,e.Inflate=w,e.Gzip=x,e.Gunzip=k,e.DeflateRaw=S,e.InflateRaw=_,e.Unzip=C,e.createDeflate=function(t){return new y(t)},e.createInflate=function(t){return new w(t)},e.createDeflateRaw=function(t){return new S(t)},e.createInflateRaw=function(t){return new _(t)},e.createGzip=function(t){return new x(t)},e.createGunzip=function(t){return new k(t)},e.createUnzip=function(t){return new C(t)},e.deflate=function(t,e,r){return"function"==typeof e&&(r=e,e={}),v(new y(e),t,r)},e.deflateSync=function(t,e){return b(new y(e),t)},e.gzip=function(t,e,r){return"function"==typeof e&&(r=e,e={}),v(new x(e),t,r)},e.gzipSync=function(t,e){return b(new x(e),t)},e.deflateRaw=function(t,e,r){return"function"==typeof e&&(r=e,e={}),v(new S(e),t,r)},e.deflateRawSync=function(t,e){return b(new S(e),t)},e.unzip=function(t,e,r){return"function"==typeof e&&(r=e,e={}),v(new C(e),t,r)},e.unzipSync=function(t,e){return b(new C(e),t)},e.inflate=function(t,e,r){return"function"==typeof e&&(r=e,e={}),v(new w(e),t,r)},e.inflateSync=function(t,e){return b(new w(e),t)},e.gunzip=function(t,e,r){return"function"==typeof e&&(r=e,e={}),v(new k(e),t,r)},e.gunzipSync=function(t,e){return b(new k(e),t)},e.inflateRaw=function(t,e,r){return"function"==typeof e&&(r=e,e={}),v(new _(e),t,r)},e.inflateRawSync=function(t,e){return b(new _(e),t)},o.inherits(A,i),A.prototype.params=function(r,n,i){if(r<e.Z_MIN_LEVEL||r>e.Z_MAX_LEVEL)throw new RangeError("Invalid compression level: "+r);if(n!=e.Z_FILTERED&&n!=e.Z_HUFFMAN_ONLY&&n!=e.Z_RLE&&n!=e.Z_FIXED&&n!=e.Z_DEFAULT_STRATEGY)throw new TypeError("Invalid strategy: "+n);if(this._level!==r||this._strategy!==n){var o=this;this.flush(a.Z_SYNC_FLUSH,(function(){s(o._handle,"zlib binding closed"),o._handle.params(r,n),o._hadError||(o._level=r,o._strategy=n,i&&i())}))}else t.nextTick(i)},A.prototype.reset=function(){return s(this._handle,"zlib binding closed"),this._handle.reset()},A.prototype._flush=function(t){this._transform(n.alloc(0),"",t)},A.prototype.flush=function(e,r){var i=this,o=this._writableState;("function"==typeof e||void 0===e&&!r)&&(r=e,e=a.Z_FULL_FLUSH),o.ended?r&&t.nextTick(r):o.ending?r&&this.once("end",r):o.needDrain?r&&this.once("drain",(function(){return i.flush(e,r)})):(this._flushFlag=e,this.write(n.alloc(0),"",r))},A.prototype.close=function(e){T(this,e),t.nextTick(R,this)},A.prototype._transform=function(t,e,r){var i,o=this._writableState,s=(o.ending||o.ended)&&(!t||o.length===t.length);return null===t||n.isBuffer(t)?this._handle?(s?i=this._finishFlushFlag:(i=this._flushFlag,t.length>=o.length&&(this._flushFlag=this._opts.flush||a.Z_NO_FLUSH)),void this._processChunk(t,i,r)):r(new Error("zlib binding closed")):r(new Error("invalid input"))},A.prototype._processChunk=function(t,e,r){var i=t&&t.length,a=this._chunkSize-this._offset,o=0,l=this,u="function"==typeof r;if(!u){var f,p=[],d=0;this.on("error",(function(t){f=t})),s(this._handle,"zlib binding closed");do{var g=this._handle.writeSync(e,t,o,i,this._buffer,this._offset,a)}while(!this._hadError&&b(g[0],g[1]));if(this._hadError)throw f;if(d>=h)throw T(this),new RangeError(c);var m=n.concat(p,d);return T(this),m}s(this._handle,"zlib binding closed");var v=this._handle.write(e,t,o,i,this._buffer,this._offset,a);function b(h,c){if(this&&(this.buffer=null,this.callback=null),!l._hadError){var f=a-c;if(s(f>=0,"have should not go down"),f>0){var g=l._buffer.slice(l._offset,l._offset+f);l._offset+=f,u?l.push(g):(p.push(g),d+=g.length)}if((0===c||l._offset>=l._chunkSize)&&(a=l._chunkSize,l._offset=0,l._buffer=n.allocUnsafe(l._chunkSize)),0===c){if(o+=i-h,i=h,!u)return!0;var m=l._handle.write(e,t,o,i,l._buffer,l._offset,l._chunkSize);return m.callback=b,void(m.buffer=t)}if(!u)return!1;r()}}v.buffer=t,v.callback=b},o.inherits(y,A),o.inherits(w,A),o.inherits(x,A),o.inherits(k,A),o.inherits(S,A),o.inherits(_,A),o.inherits(C,A)}).call(this,r(3))},function(t,e,r){(function(e,n){var i=r(9);t.exports=y;var a,o=r(19);y.ReadableState=b,r(14).EventEmitter;var s=function(t,e){return t.listeners(e).length},h=r(22),c=r(10).Buffer,l=e.Uint8Array||function(){},u=r(7);u.inherits=r(4);var f=r(40),p=void 0;p=f&&f.debuglog?f.debuglog("stream"):function(){};var d,g=r(41),m=r(23);u.inherits(y,h);var v=["error","close","destroy","pause","resume"];function b(t,e){t=t||{};var n=e instanceof(a=a||r(5));this.objectMode=!!t.objectMode,n&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var i=t.highWaterMark,o=t.readableHighWaterMark,s=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:n&&(o||0===o)?o:s,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new g,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(d||(d=r(24).StringDecoder),this.decoder=new d(t.encoding),this.encoding=t.encoding)}function y(t){if(a=a||r(5),!(this instanceof y))return new y(t);this._readableState=new b(t,this),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),h.call(this)}function w(t,e,r,n,i){var a,o=t._readableState;return null===e?(o.reading=!1,function(t,e){if(!e.ended){if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,_(t)}}(t,o)):(i||(a=function(t,e){var r,n;return n=e,c.isBuffer(n)||n instanceof l||"string"==typeof e||void 0===e||t.objectMode||(r=new TypeError("Invalid non-string/buffer chunk")),r}(o,e)),a?t.emit("error",a):o.objectMode||e&&e.length>0?("string"==typeof e||o.objectMode||Object.getPrototypeOf(e)===c.prototype||(e=function(t){return c.from(t)}(e)),n?o.endEmitted?t.emit("error",new Error("stream.unshift() after end event")):x(t,o,e,!0):o.ended?t.emit("error",new Error("stream.push() after EOF")):(o.reading=!1,o.decoder&&!r?(e=o.decoder.write(e),o.objectMode||0!==e.length?x(t,o,e,!1):E(t,o)):x(t,o,e,!1))):n||(o.reading=!1)),function(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}(o)}function x(t,e,r,n){e.flowing&&0===e.length&&!e.sync?(t.emit("data",r),t.read(0)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&_(t)),E(t,e)}Object.defineProperty(y.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),y.prototype.destroy=m.destroy,y.prototype._undestroy=m.undestroy,y.prototype._destroy=function(t,e){this.push(null),e(t)},y.prototype.push=function(t,e){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof t&&((e=e||n.defaultEncoding)!==n.encoding&&(t=c.from(t,e),e=""),r=!0),w(this,t,e,!1,r)},y.prototype.unshift=function(t){return w(this,t,null,!0,!1)},y.prototype.isPaused=function(){return!1===this._readableState.flowing},y.prototype.setEncoding=function(t){return d||(d=r(24).StringDecoder),this._readableState.decoder=new d(t),this._readableState.encoding=t,this};var k=8388608;function S(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=function(t){return t>=k?t=k:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function _(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(p("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?i.nextTick(C,t):C(t))}function C(t){p("emit readable"),t.emit("readable"),L(t)}function E(t,e){e.readingMore||(e.readingMore=!0,i.nextTick(A,t,e))}function A(t,e){for(var r=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(p("maybeReadMore read 0"),t.read(0),r!==e.length);)r=e.length;e.readingMore=!1}function T(t){p("readable nexttick read 0"),t.read(0)}function R(t,e){e.reading||(p("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),L(t),e.flowing&&!e.reading&&t.read(0)}function L(t){var e=t._readableState;for(p("flow",e.flowing);e.flowing&&null!==t.read(););}function I(t,e){return 0===e.length?null:(e.objectMode?r=e.buffer.shift():!t||t>=e.length?(r=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear()):r=function(t,e,r){var n;return t<e.head.data.length?(n=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):n=t===e.head.data.length?e.shift():r?function(t,e){var r=e.head,n=1,i=r.data;for(t-=i.length;r=r.next;){var a=r.data,o=t>a.length?a.length:t;if(o===a.length?i+=a:i+=a.slice(0,t),0==(t-=o)){o===a.length?(++n,r.next?e.head=r.next:e.head=e.tail=null):(e.head=r,r.data=a.slice(o));break}++n}return e.length-=n,i}(t,e):function(t,e){var r=c.allocUnsafe(t),n=e.head,i=1;for(n.data.copy(r),t-=n.data.length;n=n.next;){var a=n.data,o=t>a.length?a.length:t;if(a.copy(r,r.length-t,0,o),0==(t-=o)){o===a.length?(++i,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n,n.data=a.slice(o));break}++i}return e.length-=i,r}(t,e),n}(t,e.buffer,e.decoder),r);var r}function M(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,i.nextTick(P,e,t))}function P(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function D(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}y.prototype.read=function(t){p("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return p("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?M(this):_(this),null;if(0===(t=S(t,e))&&e.ended)return 0===e.length&&M(this),null;var n,i=e.needReadable;return p("need readable",i),(0===e.length||e.length-t<e.highWaterMark)&&p("length less than watermark",i=!0),e.ended||e.reading?p("reading or ended",i=!1):i&&(p("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=S(r,e))),null===(n=t>0?I(t,e):null)?(e.needReadable=!0,t=0):e.length-=t,0===e.length&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&M(this)),null!==n&&this.emit("data",n),n},y.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"))},y.prototype.pipe=function(t,e){var r=this,a=this._readableState;switch(a.pipesCount){case 0:a.pipes=t;break;case 1:a.pipes=[a.pipes,t];break;default:a.pipes.push(t)}a.pipesCount+=1,p("pipe count=%d opts=%j",a.pipesCount,e);var h=e&&!1===e.end||t===n.stdout||t===n.stderr?b:c;function c(){p("onend"),t.end()}a.endEmitted?i.nextTick(h):r.once("end",h),t.on("unpipe",(function e(n,i){p("onunpipe"),n===r&&i&&!1===i.hasUnpiped&&(i.hasUnpiped=!0,p("cleanup"),t.removeListener("close",m),t.removeListener("finish",v),t.removeListener("drain",l),t.removeListener("error",g),t.removeListener("unpipe",e),r.removeListener("end",c),r.removeListener("end",b),r.removeListener("data",d),u=!0,!a.awaitDrain||t._writableState&&!t._writableState.needDrain||l())}));var l=function(t){return function(){var e=t._readableState;p("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&s(t,"data")&&(e.flowing=!0,L(t))}}(r);t.on("drain",l);var u=!1,f=!1;function d(e){p("ondata"),f=!1,!1!==t.write(e)||f||((1===a.pipesCount&&a.pipes===t||a.pipesCount>1&&-1!==D(a.pipes,t))&&!u&&(p("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,f=!0),r.pause())}function g(e){p("onerror",e),b(),t.removeListener("error",g),0===s(t,"error")&&t.emit("error",e)}function m(){t.removeListener("finish",v),b()}function v(){p("onfinish"),t.removeListener("close",m),b()}function b(){p("unpipe"),r.unpipe(t)}return r.on("data",d),function(t,e,r){if("function"==typeof t.prependListener)return t.prependListener(e,r);t._events&&t._events[e]?o(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]:t.on(e,r)}(t,"error",g),t.once("close",m),t.once("finish",v),t.emit("pipe",r),a.flowing||(p("pipe resume"),r.resume()),t},y.prototype.unpipe=function(t){var e=this._readableState,r={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,r),this);if(!t){var n=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var a=0;a<i;a++)n[a].emit("unpipe",this,r);return this}var o=D(e.pipes,t);return-1===o?this:(e.pipes.splice(o,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,r),this)},y.prototype.on=function(t,e){var r=h.prototype.on.call(this,t,e);if("data"===t)!1!==this._readableState.flowing&&this.resume();else if("readable"===t){var n=this._readableState;n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&_(this):i.nextTick(T,this))}return r},y.prototype.addListener=y.prototype.on,y.prototype.resume=function(){var t=this._readableState;return t.flowing||(p("resume"),t.flowing=!0,function(t,e){e.resumeScheduled||(e.resumeScheduled=!0,i.nextTick(R,t,e))}(this,t)),this},y.prototype.pause=function(){return p("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(p("pause"),this._readableState.flowing=!1,this.emit("pause")),this},y.prototype.wrap=function(t){var e=this,r=this._readableState,n=!1;for(var i in t.on("end",(function(){if(p("wrapped end"),r.decoder&&!r.ended){var t=r.decoder.end();t&&t.length&&e.push(t)}e.push(null)})),t.on("data",(function(i){p("wrapped data"),r.decoder&&(i=r.decoder.write(i)),r.objectMode&&null==i||(r.objectMode||i&&i.length)&&(e.push(i)||(n=!0,t.pause()))})),t)void 0===this[i]&&"function"==typeof t[i]&&(this[i]=function(e){return function(){return t[e].apply(t,arguments)}}(i));for(var a=0;a<v.length;a++)t.on(v[a],this.emit.bind(this,v[a]));return this._read=function(e){p("wrapped _read",e),n&&(n=!1,t.resume())},this},Object.defineProperty(y.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),y._fromList=I}).call(this,r(2),r(3))},function(t,e,r){t.exports=r(14).EventEmitter},function(t,e,r){var n=r(9);function i(t,e){t.emit("error",e)}t.exports={destroy:function(t,e){var r=this,a=this._readableState&&this._readableState.destroyed,o=this._writableState&&this._writableState.destroyed;return a||o?(e?e(t):!t||this._writableState&&this._writableState.errorEmitted||n.nextTick(i,this,t),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(t){!e&&t?(n.nextTick(i,r,t),r._writableState&&(r._writableState.errorEmitted=!0)):e&&e(t)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(t,e,r){var n=r(10).Buffer,i=n.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function a(t){var e;switch(this.encoding=function(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"!=typeof e&&(n.isEncoding===i||!i(t)))throw new Error("Unknown encoding: "+t);return e||t}(t),this.encoding){case"utf16le":this.text=h,this.end=c,e=4;break;case"utf8":this.fillLast=s,e=4;break;case"base64":this.text=l,this.end=u,e=3;break;default:return this.write=f,void(this.end=p)}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(e)}function o(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function s(t){var e=this.lastTotal-this.lastNeed,r=function(t,e,r){if(128!=(192&e[0]))return t.lastNeed=0,"�";if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"�";if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,"�"}}(this,t);return void 0!==r?r:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function h(t,e){if((t.length-e)%2==0){var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function c(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function l(t,e){var r=(t.length-e)%3;return 0===r?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function u(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function f(t){return t.toString(this.encoding)}function p(t){return t&&t.length?this.write(t):""}e.StringDecoder=a,a.prototype.write=function(t){if(0===t.length)return"";var e,r;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""},a.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"�":e},a.prototype.text=function(t,e){var r=function(t,e,r){var n=e.length-1;if(n<r)return 0;var i=o(e[n]);return i>=0?(i>0&&(t.lastNeed=i-1),i):--n<r||-2===i?0:(i=o(e[n]))>=0?(i>0&&(t.lastNeed=i-2),i):--n<r||-2===i?0:(i=o(e[n]))>=0?(i>0&&(2===i?i=0:t.lastNeed=i-3),i):0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var n=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)},a.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},function(t,e,r){t.exports=o;var n=r(5),i=r(7);function a(t,e){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(!n)return this.emit("error",new Error("write callback called multiple times"));r.writechunk=null,r.writecb=null,null!=e&&this.push(e),n(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function o(t){if(!(this instanceof o))return new o(t);n.call(this,t),this._transformState={afterTransform:a.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",s)}function s(){var t=this;"function"==typeof this._flush?this._flush((function(e,r){h(t,e,r)})):h(this,null,null)}function h(t,e,r){if(e)return t.emit("error",e);if(null!=r&&t.push(r),t._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(t._transformState.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}i.inherits=r(4),i.inherits(o,n),o.prototype.push=function(t,e){return this._transformState.needTransform=!1,n.prototype.push.call(this,t,e)},o.prototype._transform=function(t,e,r){throw new Error("_transform() is not implemented")},o.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},o.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0},o.prototype._destroy=function(t,e){var r=this;n.prototype._destroy.call(this,t,(function(t){e(t),r.emit("close")}))}},function(t,e,r){(function(e){function n(t,e){if(t===e)return 0;for(var r=t.length,n=e.length,i=0,a=Math.min(r,n);i<a;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0}function i(t){return e.Buffer&&"function"==typeof e.Buffer.isBuffer?e.Buffer.isBuffer(t):!(null==t||!t._isBuffer)}var a=r(27),o=Object.prototype.hasOwnProperty,s=Array.prototype.slice,h="foo"===function(){}.name;function c(t){return Object.prototype.toString.call(t)}function l(t){return!i(t)&&"function"==typeof e.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):!!t&&(t instanceof DataView||!!(t.buffer&&t.buffer instanceof ArrayBuffer)))}var u=t.exports=v,f=/\s*function\s+([^\(\s]*)\s*/;function p(t){if(a.isFunction(t)){if(h)return t.name;var e=t.toString().match(f);return e&&e[1]}}function d(t,e){return"string"==typeof t?t.length<e?t:t.slice(0,e):t}function g(t){if(h||!a.isFunction(t))return a.inspect(t);var e=p(t);return"[Function"+(e?": "+e:"")+"]"}function m(t,e,r,n,i){throw new u.AssertionError({message:r,actual:t,expected:e,operator:n,stackStartFunction:i})}function v(t,e){t||m(t,!0,e,"==",u.ok)}function b(t,e,r,o){if(t===e)return!0;if(i(t)&&i(e))return 0===n(t,e);if(a.isDate(t)&&a.isDate(e))return t.getTime()===e.getTime();if(a.isRegExp(t)&&a.isRegExp(e))return t.source===e.source&&t.global===e.global&&t.multiline===e.multiline&&t.lastIndex===e.lastIndex&&t.ignoreCase===e.ignoreCase;if(null!==t&&"object"==R(t)||null!==e&&"object"==R(e)){if(l(t)&&l(e)&&c(t)===c(e)&&!(t instanceof Float32Array||t instanceof Float64Array))return 0===n(new Uint8Array(t.buffer),new Uint8Array(e.buffer));if(i(t)!==i(e))return!1;var h=(o=o||{actual:[],expected:[]}).actual.indexOf(t);return-1!==h&&h===o.expected.indexOf(e)||(o.actual.push(t),o.expected.push(e),function(t,e,r,n){if(null==t||null==e)return!1;if(a.isPrimitive(t)||a.isPrimitive(e))return t===e;if(r&&Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1;var i=y(t),o=y(e);if(i&&!o||!i&&o)return!1;if(i)return b(t=s.call(t),e=s.call(e),r);var h,c,l=k(t),u=k(e);if(l.length!==u.length)return!1;for(l.sort(),u.sort(),c=l.length-1;c>=0;c--)if(l[c]!==u[c])return!1;for(c=l.length-1;c>=0;c--)if(!b(t[h=l[c]],e[h],r,n))return!1;return!0}(t,e,r,o))}return r?t===e:t==e}function y(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function w(t,e){if(!t||!e)return!1;if("[object RegExp]"==Object.prototype.toString.call(e))return e.test(t);try{if(t instanceof e)return!0}catch(t){}return!Error.isPrototypeOf(e)&&!0===e.call({},t)}function x(t,e,r,n){var i;if("function"!=typeof e)throw new TypeError('"block" argument must be a function');"string"==typeof r&&(n=r,r=null),i=function(t){var e;try{t()}catch(t){e=t}return e}(e),n=(r&&r.name?" ("+r.name+").":".")+(n?" "+n:"."),t&&!i&&m(i,r,"Missing expected exception"+n);var o="string"==typeof n,s=!t&&i&&!r;if((!t&&a.isError(i)&&o&&w(i,r)||s)&&m(i,r,"Got unwanted exception"+n),t&&i&&r&&!w(i,r)||!t&&i)throw i}u.AssertionError=function(t){this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=d(g(this.actual),128)+" "+this.operator+" "+d(g(this.expected),128),this.generatedMessage=!0);var e=t.stackStartFunction||m;if(Error.captureStackTrace)Error.captureStackTrace(this,e);else{var r=new Error;if(r.stack){var n=r.stack,i=p(e),a=n.indexOf("\n"+i);if(a>=0){var o=n.indexOf("\n",a+1);n=n.substring(o+1)}this.stack=n}}},a.inherits(u.AssertionError,Error),u.fail=m,u.ok=v,u.equal=function(t,e,r){t!=e&&m(t,e,r,"==",u.equal)},u.notEqual=function(t,e,r){t==e&&m(t,e,r,"!=",u.notEqual)},u.deepEqual=function(t,e,r){b(t,e,!1)||m(t,e,r,"deepEqual",u.deepEqual)},u.deepStrictEqual=function(t,e,r){b(t,e,!0)||m(t,e,r,"deepStrictEqual",u.deepStrictEqual)},u.notDeepEqual=function(t,e,r){b(t,e,!1)&&m(t,e,r,"notDeepEqual",u.notDeepEqual)},u.notDeepStrictEqual=function t(e,r,n){b(e,r,!0)&&m(e,r,n,"notDeepStrictEqual",t)},u.strictEqual=function(t,e,r){t!==e&&m(t,e,r,"===",u.strictEqual)},u.notStrictEqual=function(t,e,r){t===e&&m(t,e,r,"!==",u.notStrictEqual)},u.throws=function(t,e,r){x(!0,t,e,r)},u.doesNotThrow=function(t,e,r){x(!1,t,e,r)},u.ifError=function(t){if(t)throw t};var k=Object.keys||function(t){var e=[];for(var r in t)o.call(t,r)&&e.push(r);return e}}).call(this,r(2))},function(t,e,r){(function(t,n){var i=/%[sdj%]/g;e.format=function(t){if(!v(t)){for(var e=[],r=0;r<arguments.length;r++)e.push(s(arguments[r]));return e.join(" ")}r=1;for(var n=arguments,a=n.length,o=String(t).replace(i,(function(t){if("%%"===t)return"%";if(r>=a)return t;switch(t){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(t){return"[Circular]"}default:return t}})),h=n[r];r<a;h=n[++r])g(h)||!w(h)?o+=" "+h:o+=" "+s(h);return o},e.deprecate=function(r,i){if(b(t.process))return function(){return e.deprecate(r,i).apply(this,arguments)};if(!0===n.noDeprecation)return r;var a=!1;return function(){if(!a){if(n.throwDeprecation)throw new Error(i);n.traceDeprecation?console.trace(i):console.error(i),a=!0}return r.apply(this,arguments)}};var a,o={};function s(t,r){var n={seen:[],stylize:c};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),d(r)?n.showHidden=r:r&&e._extend(n,r),b(n.showHidden)&&(n.showHidden=!1),b(n.depth)&&(n.depth=2),b(n.colors)&&(n.colors=!1),b(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=h),l(n,t,n.depth)}function h(t,e){var r=s.styles[e];return r?"["+s.colors[r][0]+"m"+t+"["+s.colors[r][1]+"m":t}function c(t,e){return t}function l(t,r,n){if(t.customInspect&&r&&S(r.inspect)&&r.inspect!==e.inspect&&(!r.constructor||r.constructor.prototype!==r)){var i=r.inspect(n,t);return v(i)||(i=l(t,i,n)),i}var a=function(t,e){if(b(e))return t.stylize("undefined","undefined");if(v(e)){var r="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(r,"string")}return m(e)?t.stylize(""+e,"number"):d(e)?t.stylize(""+e,"boolean"):g(e)?t.stylize("null","null"):void 0}(t,r);if(a)return a;var o=Object.keys(r),s=function(t){var e={};return t.forEach((function(t,r){e[t]=!0})),e}(o);if(t.showHidden&&(o=Object.getOwnPropertyNames(r)),k(r)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return u(r);if(0===o.length){if(S(r)){var h=r.name?": "+r.name:"";return t.stylize("[Function"+h+"]","special")}if(y(r))return t.stylize(RegExp.prototype.toString.call(r),"regexp");if(x(r))return t.stylize(Date.prototype.toString.call(r),"date");if(k(r))return u(r)}var c,w="",_=!1,E=["{","}"];return p(r)&&(_=!0,E=["[","]"]),S(r)&&(w=" [Function"+(r.name?": "+r.name:"")+"]"),y(r)&&(w=" "+RegExp.prototype.toString.call(r)),x(r)&&(w=" "+Date.prototype.toUTCString.call(r)),k(r)&&(w=" "+u(r)),0!==o.length||_&&0!=r.length?n<0?y(r)?t.stylize(RegExp.prototype.toString.call(r),"regexp"):t.stylize("[Object]","special"):(t.seen.push(r),c=_?function(t,e,r,n,i){for(var a=[],o=0,s=e.length;o<s;++o)C(e,String(o))?a.push(f(t,e,r,n,String(o),!0)):a.push("");return i.forEach((function(i){i.match(/^\d+$/)||a.push(f(t,e,r,n,i,!0))})),a}(t,r,n,s,o):o.map((function(e){return f(t,r,n,s,e,_)})),t.seen.pop(),function(t,e,r){return t.reduce((function(t,e){return e.indexOf("\n"),t+e.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60?r[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+r[1]:r[0]+e+" "+t.join(", ")+" "+r[1]}(c,w,E)):E[0]+w+E[1]}function u(t){return"["+Error.prototype.toString.call(t)+"]"}function f(t,e,r,n,i,a){var o,s,h;if((h=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]}).get?s=h.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):h.set&&(s=t.stylize("[Setter]","special")),C(n,i)||(o="["+i+"]"),s||(t.seen.indexOf(h.value)<0?(s=g(r)?l(t,h.value,null):l(t,h.value,r-1)).indexOf("\n")>-1&&(s=a?s.split("\n").map((function(t){return"  "+t})).join("\n").substr(2):"\n"+s.split("\n").map((function(t){return"   "+t})).join("\n")):s=t.stylize("[Circular]","special")),b(o)){if(a&&i.match(/^\d+$/))return s;(o=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=t.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=t.stylize(o,"string"))}return o+": "+s}function p(t){return Array.isArray(t)}function d(t){return"boolean"==typeof t}function g(t){return null===t}function m(t){return"number"==typeof t}function v(t){return"string"==typeof t}function b(t){return void 0===t}function y(t){return w(t)&&"[object RegExp]"===_(t)}function w(t){return"object"==R(t)&&null!==t}function x(t){return w(t)&&"[object Date]"===_(t)}function k(t){return w(t)&&("[object Error]"===_(t)||t instanceof Error)}function S(t){return"function"==typeof t}function _(t){return Object.prototype.toString.call(t)}function C(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.debuglog=function(t){if(b(a)&&(a=n.env.NODE_DEBUG||""),t=t.toUpperCase(),!o[t])if(new RegExp("\\b"+t+"\\b","i").test(a)){var r=n.pid;o[t]=function(){var n=e.format.apply(e,arguments);console.error("%s %d: %s",t,r,n)}}else o[t]=function(){};return o[t]},e.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=p,e.isBoolean=d,e.isNull=g,e.isNullOrUndefined=function(t){return null==t},e.isNumber=m,e.isString=v,e.isSymbol=function(t){return"symbol"==R(t)},e.isUndefined=b,e.isRegExp=y,e.isObject=w,e.isDate=x,e.isError=k,e.isFunction=S,e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==R(t)||void 0===t},e.isBuffer=r(52),e.log=function(){},e.inherits=r(4),e._extend=function(t,e){if(!e||!w(e))return t;for(var r=Object.keys(e),n=r.length;n--;)t[r[n]]=e[r[n]];return t}}).call(this,r(2),r(3))},function(t,e,r){t.exports=function(t,e,r,n){for(var i=65535&t|0,a=t>>>16&65535|0,o=0;0!==r;){r-=o=r>2e3?2e3:r;do{a=a+(i=i+e[n++]|0)|0}while(--o);i%=65521,a%=65521}return i|a<<16|0}},function(t,e,r){var n=function(){for(var t,e=[],r=0;r<256;r++){t=r;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;e[r]=t}return e}();t.exports=function(t,e,r,i){var a=n,o=i+r;t^=-1;for(var s=i;s<o;s++)t=t>>>8^a[255&(t^e[s])];return-1^t}},function(r,n,i){r.exports=function(){function r(){var e=arguments.length>0&&arguments[0]!==t?arguments[0]:{};if(M(this,r),!(e.maxSize&&e.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");this.maxSize=e.maxSize,this.cache=new Map,this.oldCache=new Map,this._size=0}return D(r,[{key:"_set",value:function(t,e){this.cache.set(t,e),this._size++,this._size>=this.maxSize&&(this._size=0,this.oldCache=this.cache,this.cache=new Map)}},{key:"get",value:function(t){if(this.cache.has(t))return this.cache.get(t);if(this.oldCache.has(t)){var e=this.oldCache.get(t);return this._set(t,e),e}}},{key:"set",value:function(t,e){return this.cache.has(t)?this.cache.set(t,e):this._set(t,e),this}},{key:"has",value:function(t){return this.cache.has(t)||this.oldCache.has(t)}},{key:"peek",value:function(t){return this.cache.has(t)?this.cache.get(t):this.oldCache.has(t)?this.oldCache.get(t):void 0}},{key:"delete",value:function(t){var e=this.cache.delete(t);return e&&this._size--,this.oldCache.delete(t)||e}},{key:"clear",value:function(){this.cache.clear(),this.oldCache.clear(),this._size=0}},{key:"keys",value:e.mark((function r(){var n,i,a,o,s,h,c;return e.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=!0,i=!1,a=t,e.prev=3,o=this[Symbol.iterator]();case 5:if(n=(s=o.next()).done){e.next=12;break}return h=H(s.value,1),c=h[0],e.next=9,c;case 9:n=!0,e.next=5;break;case 12:e.next=18;break;case 14:e.prev=14,e.t0=e.catch(3),i=!0,a=e.t0;case 18:e.prev=18,e.prev=19,n||null==o.return||o.return();case 21:if(e.prev=21,!i){e.next=24;break}throw a;case 24:return e.finish(21);case 25:return e.finish(18);case 26:case"end":return e.stop()}}),r,this,[[3,14,18,26],[19,,21,25]])}))},{key:"values",value:e.mark((function r(){var n,i,a,o,s,h,c;return e.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=!0,i=!1,a=t,e.prev=3,o=this[Symbol.iterator]();case 5:if(n=(s=o.next()).done){e.next=12;break}return h=H(s.value,2),c=h[1],e.next=9,c;case 9:n=!0,e.next=5;break;case 12:e.next=18;break;case 14:e.prev=14,e.t0=e.catch(3),i=!0,a=e.t0;case 18:e.prev=18,e.prev=19,n||null==o.return||o.return();case 21:if(e.prev=21,!i){e.next=24;break}throw a;case 24:return e.finish(21);case 25:return e.finish(18);case 26:case"end":return e.stop()}}),r,this,[[3,14,18,26],[19,,21,25]])}))},{key:Symbol.iterator,value:e.mark((function r(){var n,i,a,o,s,h,c,l,u,f,p,d,g,m;return e.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=!0,i=!1,a=t,e.prev=3,o=this.cache[Symbol.iterator]();case 5:if(n=(s=o.next()).done){e.next=12;break}return h=s.value,e.next=9,h;case 9:n=!0,e.next=5;break;case 12:e.next=18;break;case 14:e.prev=14,e.t0=e.catch(3),i=!0,a=e.t0;case 18:e.prev=18,e.prev=19,n||null==o.return||o.return();case 21:if(e.prev=21,!i){e.next=24;break}throw a;case 24:return e.finish(21);case 25:return e.finish(18);case 26:c=!0,l=!1,u=t,e.prev=29,f=this.oldCache[Symbol.iterator]();case 31:if(c=(p=f.next()).done){e.next=41;break}if(d=p.value,g=H(d,1),m=g[0],e.t1=this.cache.has(m),e.t1){e.next=38;break}return e.next=38,d;case 38:c=!0,e.next=31;break;case 41:e.next=47;break;case 43:e.prev=43,e.t2=e.catch(29),l=!0,u=e.t2;case 47:e.prev=47,e.prev=48,c||null==f.return||f.return();case 50:if(e.prev=50,!l){e.next=53;break}throw u;case 53:return e.finish(50);case 54:return e.finish(47);case 55:case"end":return e.stop()}}),r,this,[[3,14,18,26],[19,,21,25],[29,43,47,55],[48,,50,54]])}))},{key:"size",get:function(){var e=0,r=!0,n=!1,i=t;try{for(var a,o=this.oldCache.keys()[Symbol.iterator]();!(r=(a=o.next()).done);r=!0){var s=a.value;this.cache.has(s)||e++}}catch(t){n=!0,i=t}finally{try{r||null==o.return||o.return()}finally{if(n)throw i}}return this._size+e}}]),r}()},function(t,e){t.exports=n;var r=null;try{r=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(t){}function n(t,e,r){this.low=0|t,this.high=0|e,this.unsigned=!!r}function i(t){return!0===(t&&t.__isLong__)}n.prototype.__isLong__,Object.defineProperty(n.prototype,"__isLong__",{value:!0}),n.isLong=i;var a={},o={};function s(t,e){var r,n,i;return e?(i=0<=(t>>>=0)&&t<256)&&(n=o[t])?n:(r=c(t,(0|t)<0?-1:0,!0),i&&(o[t]=r),r):(i=-128<=(t|=0)&&t<128)&&(n=a[t])?n:(r=c(t,t<0?-1:0,!1),i&&(a[t]=r),r)}function h(t,e){if(isNaN(t))return e?b:v;if(e){if(t<0)return b;if(t>=d)return S}else{if(t<=-g)return _;if(t+1>=g)return k}return t<0?h(-t,e).neg():c(t%p|0,t/p|0,e)}function c(t,e,r){return new n(t,e,r)}n.fromInt=s,n.fromNumber=h,n.fromBits=c;var l=Math.pow;function u(t,e,r){if(0===t.length)throw Error("empty string");if("NaN"===t||"Infinity"===t||"+Infinity"===t||"-Infinity"===t)return v;if("number"==typeof e?(r=e,e=!1):e=!!e,(r=r||10)<2||36<r)throw RangeError("radix");var n;if((n=t.indexOf("-"))>0)throw Error("interior hyphen");if(0===n)return u(t.substring(1),e,r).neg();for(var i=h(l(r,8)),a=v,o=0;o<t.length;o+=8){var s=Math.min(8,t.length-o),c=parseInt(t.substring(o,o+s),r);if(s<8){var f=h(l(r,s));a=a.mul(f).add(h(c))}else a=(a=a.mul(i)).add(h(c))}return a.unsigned=e,a}function f(t,e){return"number"==typeof t?h(t,e):"string"==typeof t?u(t,e):c(t.low,t.high,"boolean"==typeof e?e:t.unsigned)}n.fromString=u,n.fromValue=f;var p=4294967296,d=p*p,g=d/2,m=s(1<<24),v=s(0);n.ZERO=v;var b=s(0,!0);n.UZERO=b;var y=s(1);n.ONE=y;var w=s(1,!0);n.UONE=w;var x=s(-1);n.NEG_ONE=x;var k=c(-1,2147483647,!1);n.MAX_VALUE=k;var S=c(-1,-1,!0);n.MAX_UNSIGNED_VALUE=S;var _=c(0,-2147483648,!1);n.MIN_VALUE=_;var C=n.prototype;C.toInt=function(){return this.unsigned?this.low>>>0:this.low},C.toNumber=function(){return this.unsigned?(this.high>>>0)*p+(this.low>>>0):this.high*p+(this.low>>>0)},C.toString=function(t){if((t=t||10)<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(_)){var e=h(t),r=this.div(e),n=r.mul(e).sub(this);return r.toString(t)+n.toInt().toString(t)}return"-"+this.neg().toString(t)}for(var i=h(l(t,6),this.unsigned),a=this,o="";;){var s=a.div(i),c=(a.sub(s.mul(i)).toInt()>>>0).toString(t);if((a=s).isZero())return c+o;for(;c.length<6;)c="0"+c;o=""+c+o}},C.getHighBits=function(){return this.high},C.getHighBitsUnsigned=function(){return this.high>>>0},C.getLowBits=function(){return this.low},C.getLowBitsUnsigned=function(){return this.low>>>0},C.getNumBitsAbs=function(){if(this.isNegative())return this.eq(_)?64:this.neg().getNumBitsAbs();for(var t=0!=this.high?this.high:this.low,e=31;e>0&&0==(t&1<<e);e--);return 0!=this.high?e+33:e+1},C.isZero=function(){return 0===this.high&&0===this.low},C.eqz=C.isZero,C.isNegative=function(){return!this.unsigned&&this.high<0},C.isPositive=function(){return this.unsigned||this.high>=0},C.isOdd=function(){return 1==(1&this.low)},C.isEven=function(){return 0==(1&this.low)},C.equals=function(t){return i(t)||(t=f(t)),(this.unsigned===t.unsigned||this.high>>>31!=1||t.high>>>31!=1)&&this.high===t.high&&this.low===t.low},C.eq=C.equals,C.notEquals=function(t){return!this.eq(t)},C.neq=C.notEquals,C.ne=C.notEquals,C.lessThan=function(t){return this.comp(t)<0},C.lt=C.lessThan,C.lessThanOrEqual=function(t){return this.comp(t)<=0},C.lte=C.lessThanOrEqual,C.le=C.lessThanOrEqual,C.greaterThan=function(t){return this.comp(t)>0},C.gt=C.greaterThan,C.greaterThanOrEqual=function(t){return this.comp(t)>=0},C.gte=C.greaterThanOrEqual,C.ge=C.greaterThanOrEqual,C.compare=function(t){if(i(t)||(t=f(t)),this.eq(t))return 0;var e=this.isNegative(),r=t.isNegative();return e&&!r?-1:!e&&r?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1},C.comp=C.compare,C.negate=function(){return!this.unsigned&&this.eq(_)?_:this.not().add(y)},C.neg=C.negate,C.add=function(t){i(t)||(t=f(t));var e=this.high>>>16,r=65535&this.high,n=this.low>>>16,a=65535&this.low,o=t.high>>>16,s=65535&t.high,h=t.low>>>16,l=0,u=0,p=0,d=0;return p+=(d+=a+(65535&t.low))>>>16,u+=(p+=n+h)>>>16,l+=(u+=r+s)>>>16,l+=e+o,c((p&=65535)<<16|(d&=65535),(l&=65535)<<16|(u&=65535),this.unsigned)},C.subtract=function(t){return i(t)||(t=f(t)),this.add(t.neg())},C.sub=C.subtract,C.multiply=function(t){if(this.isZero())return v;if(i(t)||(t=f(t)),r)return c(r.mul(this.low,this.high,t.low,t.high),r.get_high(),this.unsigned);if(t.isZero())return v;if(this.eq(_))return t.isOdd()?_:v;if(t.eq(_))return this.isOdd()?_:v;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(m)&&t.lt(m))return h(this.toNumber()*t.toNumber(),this.unsigned);var e=this.high>>>16,n=65535&this.high,a=this.low>>>16,o=65535&this.low,s=t.high>>>16,l=65535&t.high,u=t.low>>>16,p=65535&t.low,d=0,g=0,b=0,y=0;return b+=(y+=o*p)>>>16,g+=(b+=a*p)>>>16,b&=65535,g+=(b+=o*u)>>>16,d+=(g+=n*p)>>>16,g&=65535,d+=(g+=a*u)>>>16,g&=65535,d+=(g+=o*l)>>>16,d+=e*p+n*u+a*l+o*s,c((b&=65535)<<16|(y&=65535),(d&=65535)<<16|(g&=65535),this.unsigned)},C.mul=C.multiply,C.divide=function(t){if(i(t)||(t=f(t)),t.isZero())throw Error("division by zero");var e,n,a;if(r)return this.unsigned||-2147483648!==this.high||-1!==t.low||-1!==t.high?c((this.unsigned?r.div_u:r.div_s)(this.low,this.high,t.low,t.high),r.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?b:v;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return b;if(t.gt(this.shru(1)))return w;a=b}else{if(this.eq(_))return t.eq(y)||t.eq(x)?_:t.eq(_)?y:(e=this.shr(1).div(t).shl(1)).eq(v)?t.isNegative()?y:x:(n=this.sub(t.mul(e)),a=e.add(n.div(t)));if(t.eq(_))return this.unsigned?b:v;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();a=v}for(n=this;n.gte(t);){e=Math.max(1,Math.floor(n.toNumber()/t.toNumber()));for(var o=Math.ceil(Math.log(e)/Math.LN2),s=o<=48?1:l(2,o-48),u=h(e),p=u.mul(t);p.isNegative()||p.gt(n);)p=(u=h(e-=s,this.unsigned)).mul(t);u.isZero()&&(u=y),a=a.add(u),n=n.sub(p)}return a},C.div=C.divide,C.modulo=function(t){return i(t)||(t=f(t)),r?c((this.unsigned?r.rem_u:r.rem_s)(this.low,this.high,t.low,t.high),r.get_high(),this.unsigned):this.sub(this.div(t).mul(t))},C.mod=C.modulo,C.rem=C.modulo,C.not=function(){return c(~this.low,~this.high,this.unsigned)},C.and=function(t){return i(t)||(t=f(t)),c(this.low&t.low,this.high&t.high,this.unsigned)},C.or=function(t){return i(t)||(t=f(t)),c(this.low|t.low,this.high|t.high,this.unsigned)},C.xor=function(t){return i(t)||(t=f(t)),c(this.low^t.low,this.high^t.high,this.unsigned)},C.shiftLeft=function(t){return i(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?c(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):c(0,this.low<<t-32,this.unsigned)},C.shl=C.shiftLeft,C.shiftRight=function(t){return i(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?c(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):c(this.high>>t-32,this.high>=0?0:-1,this.unsigned)},C.shr=C.shiftRight,C.shiftRightUnsigned=function(t){if(i(t)&&(t=t.toInt()),0==(t&=63))return this;var e=this.high;return t<32?c(this.low>>>t|e<<32-t,e>>>t,this.unsigned):c(32===t?e:e>>>t-32,0,this.unsigned)},C.shru=C.shiftRightUnsigned,C.shr_u=C.shiftRightUnsigned,C.toSigned=function(){return this.unsigned?c(this.low,this.high,!1):this},C.toUnsigned=function(){return this.unsigned?this:c(this.low,this.high,!0)},C.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()},C.toBytesLE=function(){var t=this.high,e=this.low;return[255&e,e>>>8&255,e>>>16&255,e>>>24,255&t,t>>>8&255,t>>>16&255,t>>>24]},C.toBytesBE=function(){var t=this.high,e=this.low;return[t>>>24,t>>>16&255,t>>>8&255,255&t,e>>>24,e>>>16&255,e>>>8&255,255&e]},n.fromBytes=function(t,e,r){return r?n.fromBytesLE(t,e):n.fromBytesBE(t,e)},n.fromBytesLE=function(t,e){return new n(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,e)},n.fromBytesBE=function(t,e){return new n(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],e)}},function(t,e){var r={utf8:{stringToBytes:function(t){return r.bin.stringToBytes(unescape(encodeURIComponent(t)))},bytesToString:function(t){return decodeURIComponent(escape(r.bin.bytesToString(t)))}},bin:{stringToBytes:function(t){for(var e=[],r=0;r<t.length;r++)e.push(255&t.charCodeAt(r));return e},bytesToString:function(t){for(var e=[],r=0;r<t.length;r++)e.push(String.fromCharCode(t[r]));return e.join("")}}};t.exports=r},function(t,e,r){var n=r(87),i=r(94),a=r(97);function o(t){var e=n.parse(t),r=e.protocol,o=e.pathname;return"file:"===r?new a(unescape(o)):new i(t)}t.exports={LocalFile:a,RemoteFile:i,fromUrl:o,open:function(t,e,r){if(r)return r;if(t)return o(t);if(e)return new a(e);throw new Error("no url, path, or filehandle provided, cannot open")}}},function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0});var n="__ES6-PROMISIFY--CUSTOM-ARGUMENTS__";function i(t){if("function"!=typeof t)throw new TypeError("Argument to promisify must be a function");var e=t[n],r=i.Promise||Promise;if("function"!=typeof r)throw new Error("No Promise implementation found; do you need a polyfill?");return function(){for(var n=this,i=arguments.length,a=Array(i),o=0;o<i;o++)a[o]=arguments[o];return new r((function(r,i){a.push((function(t){if(t)return i(t);for(var n=arguments.length,a=Array(n>1?n-1:0),o=1;o<n;o++)a[o-1]=arguments[o];if(1===a.length||!e)return r(a[0]);var s={};a.forEach((function(t,r){var n=e[r];n&&(s[n]=t)})),r(s)})),t.call.apply(t,[n].concat(a))}))}}i.argumentNames=n,i.Promise=void 0,e.promisify=i},function(t,e,r){var n=r(18),i=r(99),a=r(100);t.exports={CramFile:n,IndexedCramFile:i,CraiIndex:a}},function(r,n,i){(function(n){var a=i(20),o=i(61),s=i(30),h=i(0),c=h.CramUnimplementedError,l=h.CramMalformedError,u=i(62),f=i(66),p=f.cramFileDefinition,d=f.getSectionParsers,g=i(71),m=i(33).open,v=i(8),b=v.parseItem,y=v.tinyMemoize,w=i(98).parseHeaderText,x=function(){function r(t){M(this,r),this.file=m(t.url,t.path,t.filehandle),this.validateChecksums=!0,this.fetchReferenceSequenceCallback=t.seqFetch,this.options={checkSequenceMD5:!1!==t.checkSequenceMD5,cacheSize:void 0!==t.cacheSize?t.cacheSize:2e4},this.featureCache=new s({maxSize:this.options.cacheSize})}var i,h,f,v,y,x,k,S,_;return D(r,[{key:"toString",value:function(){return this.file.filename?this.file.filename:this.file.url?this.file.url:"(cram file)"}},{key:"read",value:function(t,e,r,n){return this.file.read(t,e,r,n)}},{key:"stat",value:function(){return this.file.stat()}},{key:"getDefinition",value:(_=I(e.mark((function t(){var r,i;return e.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.allocUnsafe(p.maxLength),t.next=3,this.file.read(r,0,p.maxLength,0);case 3:if(2===(i=p.parser.parse(r).result).majorVersion||3===i.majorVersion){t.next=6;break}throw new c("CRAM version ".concat(i.majorVersion," not supported"));case 6:return t.abrupt("return",i);case 7:case"end":return t.stop()}}),t,this)}))),function(){return _.apply(this,arguments)})},{key:"getSamHeader",value:(S=I(e.mark((function t(){var r,n,i,a,o;return e.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getContainerById(0);case 2:if(r=t.sent){t.next=5;break}throw new l("file contains no containers");case 5:return t.next=7,r.getFirstBlock();case 7:return n=t.sent,i=n.content,a=i.readInt32LE(0),o=i.toString("utf8",4,4+a),t.abrupt("return",w(o));case 12:case"end":return t.stop()}}),t,this)}))),function(){return S.apply(this,arguments)})},{key:"getSectionParsers",value:(k=I(e.mark((function t(){var r,n;return e.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getDefinition();case 2:return r=t.sent,n=r.majorVersion,t.abrupt("return",d(n));case 5:case"end":return t.stop()}}),t,this)}))),function(){return k.apply(this,arguments)})},{key:"getContainerById",value:(x=I(e.mark((function t(r){var n,i,a,o,s,h,c,u,f;return e.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getSectionParsers();case 2:return n=t.sent,i=n.cramFileDefinition.maxLength,t.next=6,this.file.stat();case 6:a=t.sent,o=a.size,s=n.cramContainerHeader1,c=0;case 10:if(!(c<=r)){t.next=35;break}if(!(i+s.maxLength+8>=o)){t.next=13;break}return t.abrupt("return");case 13:return h=this.getContainerAtPosition(i),t.next=16,h.getHeader();case 16:if(u=t.sent){t.next=19;break}throw new l("container ".concat(r," not found in file"));case 19:if(0!==c){t.next=31;break}i=u._endPosition,f=0;case 22:if(!(f<u.numBlocks)){t.next=29;break}return t.next=25,this.readBlock(i);case 25:i=t.sent._endPosition;case 26:f+=1,t.next=22;break;case 29:t.next=32;break;case 31:i+=u._size+u.length;case 32:c+=1,t.next=10;break;case 35:return t.abrupt("return",h);case 36:case"end":return t.stop()}}),t,this)}))),function(t){return x.apply(this,arguments)})},{key:"checkCrc32",value:(y=I(e.mark((function t(r,i,a,s){var h,c;return e.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return h=n.allocUnsafe(i),t.next=3,this.file.read(h,0,i,r);case 3:if((c=o.unsigned(h))===a){t.next=6;break}throw new l("crc mismatch in ".concat(s,": recorded CRC32 = ").concat(a,", but calculated CRC32 = ").concat(c));case 6:case"end":return t.stop()}}),t,this)}))),function(t,e,r,n){return y.apply(this,arguments)})},{key:"containerCount",value:(v=I(e.mark((function t(){var r,n,i,a,o,s,h,c;return e.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getSectionParsers();case 2:return r=t.sent,t.next=5,this.file.stat();case 5:n=t.sent,i=n.size,a=r.cramContainerHeader1,o=0,s=r.cramFileDefinition.maxLength;case 9:if(!(s+a.maxLength+8<i)){t.next=31;break}return t.next=12,this.getContainerAtPosition(s).getHeader();case 12:if(h=t.sent){t.next=15;break}return t.abrupt("break",31);case 15:if(0!==o){t.next=27;break}s=h._endPosition,c=0;case 18:if(!(c<h.numBlocks)){t.next=25;break}return t.next=21,this.readBlock(s);case 21:s=t.sent._endPosition;case 22:c+=1,t.next=18;break;case 25:t.next=28;break;case 27:s+=h._size+h.length;case 28:o+=1;case 29:t.next=9;break;case 31:return t.abrupt("return",o);case 32:case"end":return t.stop()}}),t,this)}))),function(){return v.apply(this,arguments)})},{key:"getContainerAtPosition",value:function(t){return new g(this,t)}},{key:"readBlockHeader",value:(f=I(e.mark((function t(r){var i,a,o,s,h;return e.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getSectionParsers();case 2:return i=t.sent,a=i.cramBlockHeader,t.next=6,this.file.stat();case 6:if(o=t.sent,s=o.size,!(r+a.maxLength>=s)){t.next=10;break}return t.abrupt("return");case 10:return h=n.allocUnsafe(a.maxLength),t.next=13,this.file.read(h,0,a.maxLength,r);case 13:return t.abrupt("return",b(h,a.parser,0,r));case 14:case"end":return t.stop()}}),t,this)}))),function(t){return f.apply(this,arguments)})},{key:"_parseSection",value:(h=I(e.mark((function r(i,a){var o,s,h,c,u,f,p=arguments;return e.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=p.length>2&&p[2]!==t?p[2]:i.maxLength,!(s=p.length>3?p[3]:t)){e.next=6;break}h=s,e.next=15;break;case 6:return e.next=8,this.file.stat();case 8:if(c=e.sent,u=c.size,!(a+o>=u)){e.next=12;break}return e.abrupt("return");case 12:return h=n.allocUnsafe(o),e.next=15,this.file.read(h,0,o,a);case 15:if((f=b(h,i.parser,0,a))._size===o){e.next=18;break}throw new l("section read error: requested size ".concat(o," does not equal parsed size ").concat(f._size));case 18:return e.abrupt("return",f);case 19:case"end":return e.stop()}}),r,this)}))),function(t,e){return h.apply(this,arguments)})},{key:"_uncompress",value:function(t,e,r){if("gzip"===t)a.gunzipSync(e).copy(r);else{if("rans"!==t)throw new c("".concat(t," decompression not yet implemented"));u.uncompress(e,r)}}},{key:"readBlock",value:(i=I(e.mark((function t(r){var i,a,o,s,h,c,l,u;return e.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getDefinition();case 2:return i=t.sent,a=i.majorVersion,t.next=6,this.getSectionParsers();case 6:return o=t.sent,t.next=9,this.readBlockHeader(r);case 9:if(s=t.sent,h=s._endPosition,s.contentPosition=s._endPosition,c=n.allocUnsafe(s.uncompressedSize),"raw"===s.compressionMethod){t.next=20;break}return l=n.allocUnsafe(s.compressedSize),t.next=17,this.read(l,0,s.compressedSize,h);case 17:this._uncompress(s.compressionMethod,l,c),t.next=22;break;case 20:return t.next=22,this.read(c,0,s.uncompressedSize,h);case 22:if(s.content=c,!(a>=3)){t.next=35;break}return t.next=25,this._parseSection(o.cramBlockCrc32,h+s.compressedSize);case 25:if(u=t.sent,s.crc32=u.crc32,t.t0=this.validateChecksums,!t.t0){t.next=31;break}return t.next=31,this.checkCrc32(r,s._size+s.compressedSize,s.crc32,"block data");case 31:s._endPosition=u._endPosition,s._size=s.compressedSize+o.cramBlockCrc32.maxLength,t.next=36;break;case 35:s._endPosition=h+s.compressedSize,s._size=s.compressedSize;case 36:return t.abrupt("return",s);case 37:case"end":return t.stop()}}),t,this)}))),function(t){return i.apply(this,arguments)})}]),r}();"getDefinition getSectionParsers getSamHeader".split(" ").forEach((function(t){return y(x,t)})),r.exports=x}).call(this,i(1).Buffer)},function(t,e,r){e.byteLength=function(t){var e=c(t),r=e[0],n=e[1];return 3*(r+n)/4-n},e.toByteArray=function(t){for(var e,r=c(t),n=r[0],o=r[1],s=new a(function(t,e,r){return 3*(e+r)/4-r}(0,n,o)),h=0,l=o>0?n-4:n,u=0;u<l;u+=4)e=i[t.charCodeAt(u)]<<18|i[t.charCodeAt(u+1)]<<12|i[t.charCodeAt(u+2)]<<6|i[t.charCodeAt(u+3)],s[h++]=e>>16&255,s[h++]=e>>8&255,s[h++]=255&e;return 2===o&&(e=i[t.charCodeAt(u)]<<2|i[t.charCodeAt(u+1)]>>4,s[h++]=255&e),1===o&&(e=i[t.charCodeAt(u)]<<10|i[t.charCodeAt(u+1)]<<4|i[t.charCodeAt(u+2)]>>2,s[h++]=e>>8&255,s[h++]=255&e),s},e.fromByteArray=function(t){for(var e,r=t.length,i=r%3,a=[],o=0,s=r-i;o<s;o+=16383)a.push(l(t,o,o+16383>s?s:o+16383));return 1===i?(e=t[r-1],a.push(n[e>>2]+n[e<<4&63]+"==")):2===i&&(e=(t[r-2]<<8)+t[r-1],a.push(n[e>>10]+n[e>>4&63]+n[e<<2&63]+"=")),a.join("")};for(var n=[],i=[],a="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,h=o.length;s<h;++s)n[s]=o[s],i[o.charCodeAt(s)]=s;function c(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");return-1===r&&(r=e),[r,r===e?0:4-r%4]}function l(t,e,r){for(var i,a,o=[],s=e;s<r;s+=3)i=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),o.push(n[(a=i)>>18&63]+n[a>>12&63]+n[a>>6&63]+n[63&a]);return o.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,r,n,i){var a,o,s=8*i-n-1,h=(1<<s)-1,c=h>>1,l=-7,u=r?i-1:0,f=r?-1:1,p=t[e+u];for(u+=f,a=p&(1<<-l)-1,p>>=-l,l+=s;l>0;a=256*a+t[e+u],u+=f,l-=8);for(o=a&(1<<-l)-1,a>>=-l,l+=n;l>0;o=256*o+t[e+u],u+=f,l-=8);if(0===a)a=1-c;else{if(a===h)return o?NaN:1/0*(p?-1:1);o+=Math.pow(2,n),a-=c}return(p?-1:1)*o*Math.pow(2,a-n)},e.write=function(t,e,r,n,i,a){var o,s,h,c=8*a-i-1,l=(1<<c)-1,u=l>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:a-1,d=n?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,o=l):(o=Math.floor(Math.log(e)/Math.LN2),e*(h=Math.pow(2,-o))<1&&(o--,h*=2),(e+=o+u>=1?f/h:f*Math.pow(2,1-u))*h>=2&&(o++,h/=2),o+u>=l?(s=0,o=l):o+u>=1?(s=(e*h-1)*Math.pow(2,i),o+=u):(s=e*Math.pow(2,u-1)*Math.pow(2,i),o=0));i>=8;t[r+p]=255&s,p+=d,s/=256,i-=8);for(o=o<<i|s,c+=i;c>0;t[r+p]=255&o,p+=d,o/=256,c-=8);t[r+p-d]|=128*g}},function(t,e,r){t.exports=i;var n=r(14).EventEmitter;function i(){n.call(this)}r(4)(i,n),i.Readable=r(15),i.Writable=r(47),i.Duplex=r(48),i.Transform=r(49),i.PassThrough=r(50),i.Stream=i,i.prototype.pipe=function(t,e){var r=this;function i(e){t.writable&&!1===t.write(e)&&r.pause&&r.pause()}function a(){r.readable&&r.resume&&r.resume()}r.on("data",i),t.on("drain",a),t._isStdio||e&&!1===e.end||(r.on("end",s),r.on("close",h));var o=!1;function s(){o||(o=!0,t.end())}function h(){o||(o=!0,"function"==typeof t.destroy&&t.destroy())}function c(t){if(l(),0===n.listenerCount(this,"error"))throw t}function l(){r.removeListener("data",i),t.removeListener("drain",a),r.removeListener("end",s),r.removeListener("close",h),r.removeListener("error",c),t.removeListener("error",c),r.removeListener("end",l),r.removeListener("close",l),t.removeListener("close",l)}return r.on("error",c),t.on("error",c),r.on("end",l),r.on("close",l),t.on("close",l),t.emit("pipe",r),t}},function(t,e){},function(t,e,r){var n=r(10).Buffer,i=r(42);t.exports=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.head=null,this.tail=null,this.length=0}return t.prototype.push=function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length},t.prototype.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},t.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},t.prototype.clear=function(){this.head=this.tail=null,this.length=0},t.prototype.join=function(t){if(0===this.length)return"";for(var e=this.head,r=""+e.data;e=e.next;)r+=t+e.data;return r},t.prototype.concat=function(t){if(0===this.length)return n.alloc(0);if(1===this.length)return this.head.data;for(var e,r,i=n.allocUnsafe(t>>>0),a=this.head,o=0;a;)e=i,r=o,a.data.copy(e,r),o+=a.data.length,a=a.next;return i},t}(),i&&i.inspect&&i.inspect.custom&&(t.exports.prototype[i.inspect.custom]=function(){var t=i.inspect({length:this.length});return this.constructor.name+" "+t})},function(t,e){},function(t,e,r){(function(t){var n=void 0!==t&&t||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function a(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new a(i.call(setTimeout,n,arguments),clearTimeout)},e.setInterval=function(){return new a(i.call(setInterval,n,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},a.prototype.unref=a.prototype.ref=function(){},a.prototype.close=function(){this._clearFn.call(n,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout((function(){t._onTimeout&&t._onTimeout()}),e))},r(44),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,r(2))},function(t,e,r){(function(t,e){!function(t,r){if(!t.setImmediate){var n,i,a,o,s,h=1,c={},l=!1,u=t.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(t);f=f&&f.setTimeout?f:t,"[object process]"==={}.toString.call(t.process)?n=function(t){e.nextTick((function(){d(t)}))}:function(){if(t.postMessage&&!t.importScripts){var e=!0,r=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=r,e}}()?(o="setImmediate$"+Math.random()+"$",s=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(o)&&d(+e.data.slice(o.length))},t.addEventListener?t.addEventListener("message",s,!1):t.attachEvent("onmessage",s),n=function(e){t.postMessage(o+e,"*")}):t.MessageChannel?((a=new MessageChannel).port1.onmessage=function(t){d(t.data)},n=function(t){a.port2.postMessage(t)}):u&&"onreadystatechange"in u.createElement("script")?(i=u.documentElement,n=function(t){var e=u.createElement("script");e.onreadystatechange=function(){d(t),e.onreadystatechange=null,i.removeChild(e),e=null},i.appendChild(e)}):n=function(t){setTimeout(d,0,t)},f.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),r=0;r<e.length;r++)e[r]=arguments[r+1];var i={callback:t,args:e};return c[h]=i,n(h),h++},f.clearImmediate=p}function p(t){delete c[t]}function d(t){if(l)setTimeout(d,0,t);else{var e=c[t];if(e){l=!0;try{!function(t){var e=t.callback,n=t.args;switch(n.length){case 0:e();break;case 1:e(n[0]);break;case 2:e(n[0],n[1]);break;case 3:e(n[0],n[1],n[2]);break;default:e.apply(r,n)}}(e)}finally{p(t),l=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,r(2),r(3))},function(t,e,r){(function(e){function r(t){try{if(!e.localStorage)return!1}catch(t){return!1}var r=e.localStorage[t];return null!=r&&"true"===String(r).toLowerCase()}t.exports=function(t,e){if(r("noDeprecation"))return t;var n=!1;return function(){if(!n){if(r("throwDeprecation"))throw new Error(e);r("traceDeprecation")?console.trace(e):console.warn(e),n=!0}return t.apply(this,arguments)}}}).call(this,r(2))},function(t,e,r){t.exports=a;var n=r(25),i=r(7);function a(t){if(!(this instanceof a))return new a(t);n.call(this,t)}i.inherits=r(4),i.inherits(a,n),a.prototype._transform=function(t,e,r){r(null,t)}},function(t,e,r){t.exports=r(16)},function(t,e,r){t.exports=r(5)},function(t,e,r){t.exports=r(15).Transform},function(t,e,r){t.exports=r(15).PassThrough},function(t,e,r){(function(t,n){var i=r(26),a=r(53),o=r(54),s=r(57),h=r(60);for(var c in h)e[c]=h[c];function l(t){if("number"!=typeof t||t<e.DEFLATE||t>e.UNZIP)throw new TypeError("Bad argument");this.dictionary=null,this.err=0,this.flush=0,this.init_done=!1,this.level=0,this.memLevel=0,this.mode=t,this.strategy=0,this.windowBits=0,this.write_in_progress=!1,this.pending_close=!1,this.gzip_id_bytes_read=0}e.NONE=0,e.DEFLATE=1,e.INFLATE=2,e.GZIP=3,e.GUNZIP=4,e.DEFLATERAW=5,e.INFLATERAW=6,e.UNZIP=7,l.prototype.close=function(){this.write_in_progress?this.pending_close=!0:(this.pending_close=!1,i(this.init_done,"close before init"),i(this.mode<=e.UNZIP),this.mode===e.DEFLATE||this.mode===e.GZIP||this.mode===e.DEFLATERAW?o.deflateEnd(this.strm):this.mode!==e.INFLATE&&this.mode!==e.GUNZIP&&this.mode!==e.INFLATERAW&&this.mode!==e.UNZIP||s.inflateEnd(this.strm),this.mode=e.NONE,this.dictionary=null)},l.prototype.write=function(t,e,r,n,i,a,o){return this._write(!0,t,e,r,n,i,a,o)},l.prototype.writeSync=function(t,e,r,n,i,a,o){return this._write(!1,t,e,r,n,i,a,o)},l.prototype._write=function(r,a,o,s,h,c,l,u){if(i.equal(arguments.length,8),i(this.init_done,"write before init"),i(this.mode!==e.NONE,"already finalized"),i.equal(!1,this.write_in_progress,"write already in progress"),i.equal(!1,this.pending_close,"close is pending"),this.write_in_progress=!0,i.equal(!1,void 0===a,"must provide flush value"),this.write_in_progress=!0,a!==e.Z_NO_FLUSH&&a!==e.Z_PARTIAL_FLUSH&&a!==e.Z_SYNC_FLUSH&&a!==e.Z_FULL_FLUSH&&a!==e.Z_FINISH&&a!==e.Z_BLOCK)throw new Error("Invalid flush value");if(null==o&&(o=t.alloc(0),h=0,s=0),this.strm.avail_in=h,this.strm.input=o,this.strm.next_in=s,this.strm.avail_out=u,this.strm.output=c,this.strm.next_out=l,this.flush=a,!r)return this._process(),this._checkError()?this._afterSync():void 0;var f=this;return n.nextTick((function(){f._process(),f._after()})),this},l.prototype._afterSync=function(){var t=this.strm.avail_out,e=this.strm.avail_in;return this.write_in_progress=!1,[e,t]},l.prototype._process=function(){var t=null;switch(this.mode){case e.DEFLATE:case e.GZIP:case e.DEFLATERAW:this.err=o.deflate(this.strm,this.flush);break;case e.UNZIP:switch(this.strm.avail_in>0&&(t=this.strm.next_in),this.gzip_id_bytes_read){case 0:if(null===t)break;if(31!==this.strm.input[t]){this.mode=e.INFLATE;break}if(this.gzip_id_bytes_read=1,t++,1===this.strm.avail_in)break;case 1:if(null===t)break;139===this.strm.input[t]?(this.gzip_id_bytes_read=2,this.mode=e.GUNZIP):this.mode=e.INFLATE;break;default:throw new Error("invalid number of gzip magic number bytes read")}case e.INFLATE:case e.GUNZIP:case e.INFLATERAW:for(this.err=s.inflate(this.strm,this.flush),this.err===e.Z_NEED_DICT&&this.dictionary&&(this.err=s.inflateSetDictionary(this.strm,this.dictionary),this.err===e.Z_OK?this.err=s.inflate(this.strm,this.flush):this.err===e.Z_DATA_ERROR&&(this.err=e.Z_NEED_DICT));this.strm.avail_in>0&&this.mode===e.GUNZIP&&this.err===e.Z_STREAM_END&&0!==this.strm.next_in[0];)this.reset(),this.err=s.inflate(this.strm,this.flush);break;default:throw new Error("Unknown mode "+this.mode)}},l.prototype._checkError=function(){switch(this.err){case e.Z_OK:case e.Z_BUF_ERROR:if(0!==this.strm.avail_out&&this.flush===e.Z_FINISH)return this._error("unexpected end of file"),!1;break;case e.Z_STREAM_END:break;case e.Z_NEED_DICT:return null==this.dictionary?this._error("Missing dictionary"):this._error("Bad dictionary"),!1;default:return this._error("Zlib error"),!1}return!0},l.prototype._after=function(){if(this._checkError()){var t=this.strm.avail_out,e=this.strm.avail_in;this.write_in_progress=!1,this.callback(e,t),this.pending_close&&this.close()}},l.prototype._error=function(t){this.strm.msg&&(t=this.strm.msg),this.onerror(t,this.err),this.write_in_progress=!1,this.pending_close&&this.close()},l.prototype.init=function(t,r,n,a,o){i(4===arguments.length||5===arguments.length,"init(windowBits, level, memLevel, strategy, [dictionary])"),i(t>=8&&t<=15,"invalid windowBits"),i(r>=-1&&r<=9,"invalid compression level"),i(n>=1&&n<=9,"invalid memlevel"),i(a===e.Z_FILTERED||a===e.Z_HUFFMAN_ONLY||a===e.Z_RLE||a===e.Z_FIXED||a===e.Z_DEFAULT_STRATEGY,"invalid strategy"),this._init(r,t,n,a,o),this._setDictionary()},l.prototype.params=function(){throw new Error("deflateParams Not supported")},l.prototype.reset=function(){this._reset(),this._setDictionary()},l.prototype._init=function(t,r,n,i,h){switch(this.level=t,this.windowBits=r,this.memLevel=n,this.strategy=i,this.flush=e.Z_NO_FLUSH,this.err=e.Z_OK,this.mode!==e.GZIP&&this.mode!==e.GUNZIP||(this.windowBits+=16),this.mode===e.UNZIP&&(this.windowBits+=32),this.mode!==e.DEFLATERAW&&this.mode!==e.INFLATERAW||(this.windowBits=-1*this.windowBits),this.strm=new a,this.mode){case e.DEFLATE:case e.GZIP:case e.DEFLATERAW:this.err=o.deflateInit2(this.strm,this.level,e.Z_DEFLATED,this.windowBits,this.memLevel,this.strategy);break;case e.INFLATE:case e.GUNZIP:case e.INFLATERAW:case e.UNZIP:this.err=s.inflateInit2(this.strm,this.windowBits);break;default:throw new Error("Unknown mode "+this.mode)}this.err!==e.Z_OK&&this._error("Init error"),this.dictionary=h,this.write_in_progress=!1,this.init_done=!0},l.prototype._setDictionary=function(){if(null!=this.dictionary){switch(this.err=e.Z_OK,this.mode){case e.DEFLATE:case e.DEFLATERAW:this.err=o.deflateSetDictionary(this.strm,this.dictionary)}this.err!==e.Z_OK&&this._error("Failed to set dictionary")}},l.prototype._reset=function(){switch(this.err=e.Z_OK,this.mode){case e.DEFLATE:case e.DEFLATERAW:case e.GZIP:this.err=o.deflateReset(this.strm);break;case e.INFLATE:case e.INFLATERAW:case e.GUNZIP:this.err=s.inflateReset(this.strm)}this.err!==e.Z_OK&&this._error("Failed to reset stream")},e.Zlib=l}).call(this,r(1).Buffer,r(3))},function(t,e){t.exports=function(t){return t&&"object"==R(t)&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},function(t,e,r){t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},function(t,e,r){var n,i=r(11),a=r(55),o=r(28),s=r(29),h=r(56),c=0,l=4,u=0,f=-2,p=-1,d=1,g=4,m=2,v=8,b=9,y=286,w=30,x=19,k=2*y+1,S=15,_=3,C=258,E=C+_+1,A=42,T=103,R=113,L=666,I=1,M=2,P=3,D=4;function F(t,e){return t.msg=h[e],e}function N(t){return(t<<1)-(t>4?9:0)}function B(t){for(var e=t.length;--e>=0;)t[e]=0}function O(t){var e=t.state,r=e.pending;r>t.avail_out&&(r=t.avail_out),0!==r&&(i.arraySet(t.output,e.pending_buf,e.pending_out,r,t.next_out),t.next_out+=r,e.pending_out+=r,t.total_out+=r,t.avail_out-=r,e.pending-=r,0===e.pending&&(e.pending_out=0))}function z(t,e){a._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,O(t.strm)}function U(t,e){t.pending_buf[t.pending++]=e}function H(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function $(t,e){var r,n,i=t.max_chain_length,a=t.strstart,o=t.prev_length,s=t.nice_match,h=t.strstart>t.w_size-E?t.strstart-(t.w_size-E):0,c=t.window,l=t.w_mask,u=t.prev,f=t.strstart+C,p=c[a+o-1],d=c[a+o];t.prev_length>=t.good_match&&(i>>=2),s>t.lookahead&&(s=t.lookahead);do{if(c[(r=e)+o]===d&&c[r+o-1]===p&&c[r]===c[a]&&c[++r]===c[a+1]){a+=2,r++;do{}while(c[++a]===c[++r]&&c[++a]===c[++r]&&c[++a]===c[++r]&&c[++a]===c[++r]&&c[++a]===c[++r]&&c[++a]===c[++r]&&c[++a]===c[++r]&&c[++a]===c[++r]&&a<f);if(n=C-(f-a),a=f-C,n>o){if(t.match_start=e,o=n,n>=s)break;p=c[a+o-1],d=c[a+o]}}}while((e=u[e&l])>h&&0!=--i);return o<=t.lookahead?o:t.lookahead}function q(t){var e,r,n,a,h,c,l,u,f,p,d=t.w_size;do{if(a=t.window_size-t.lookahead-t.strstart,t.strstart>=d+(d-E)){i.arraySet(t.window,t.window,d,d,0),t.match_start-=d,t.strstart-=d,t.block_start-=d,e=r=t.hash_size;do{n=t.head[--e],t.head[e]=n>=d?n-d:0}while(--r);e=r=d;do{n=t.prev[--e],t.prev[e]=n>=d?n-d:0}while(--r);a+=d}if(0===t.strm.avail_in)break;if(c=t.strm,l=t.window,u=t.strstart+t.lookahead,f=a,p=void 0,(p=c.avail_in)>f&&(p=f),r=0===p?0:(c.avail_in-=p,i.arraySet(l,c.input,c.next_in,p,u),1===c.state.wrap?c.adler=o(c.adler,l,p,u):2===c.state.wrap&&(c.adler=s(c.adler,l,p,u)),c.next_in+=p,c.total_in+=p,p),t.lookahead+=r,t.lookahead+t.insert>=_)for(h=t.strstart-t.insert,t.ins_h=t.window[h],t.ins_h=(t.ins_h<<t.hash_shift^t.window[h+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[h+_-1])&t.hash_mask,t.prev[h&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=h,h++,t.insert--,!(t.lookahead+t.insert<_)););}while(t.lookahead<E&&0!==t.strm.avail_in)}function V(t,e){for(var r,n;;){if(t.lookahead<E){if(q(t),t.lookahead<E&&e===c)return I;if(0===t.lookahead)break}if(r=0,t.lookahead>=_&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+_-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==r&&t.strstart-r<=t.w_size-E&&(t.match_length=$(t,r)),t.match_length>=_)if(n=a._tr_tally(t,t.strstart-t.match_start,t.match_length-_),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=_){t.match_length--;do{t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+_-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else n=a._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(z(t,!1),0===t.strm.avail_out))return I}return t.insert=t.strstart<_-1?t.strstart:_-1,e===l?(z(t,!0),0===t.strm.avail_out?P:D):t.last_lit&&(z(t,!1),0===t.strm.avail_out)?I:M}function j(t,e){for(var r,n,i;;){if(t.lookahead<E){if(q(t),t.lookahead<E&&e===c)return I;if(0===t.lookahead)break}if(r=0,t.lookahead>=_&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+_-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=_-1,0!==r&&t.prev_length<t.max_lazy_match&&t.strstart-r<=t.w_size-E&&(t.match_length=$(t,r),t.match_length<=5&&(t.strategy===d||t.match_length===_&&t.strstart-t.match_start>4096)&&(t.match_length=_-1)),t.prev_length>=_&&t.match_length<=t.prev_length){i=t.strstart+t.lookahead-_,n=a._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-_),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=i&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+_-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=_-1,t.strstart++,n&&(z(t,!1),0===t.strm.avail_out))return I}else if(t.match_available){if((n=a._tr_tally(t,0,t.window[t.strstart-1]))&&z(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return I}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=a._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<_-1?t.strstart:_-1,e===l?(z(t,!0),0===t.strm.avail_out?P:D):t.last_lit&&(z(t,!1),0===t.strm.avail_out)?I:M}function G(t,e,r,n,i){this.good_length=t,this.max_lazy=e,this.nice_length=r,this.max_chain=n,this.func=i}function W(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=v,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(2*k),this.dyn_dtree=new i.Buf16(2*(2*w+1)),this.bl_tree=new i.Buf16(2*(2*x+1)),B(this.dyn_ltree),B(this.dyn_dtree),B(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(S+1),this.heap=new i.Buf16(2*y+1),B(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(2*y+1),B(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Z(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=m,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?A:R,t.adler=2===e.wrap?0:1,e.last_flush=c,a._tr_init(e),u):F(t,f)}function X(t){var e,r=Z(t);return r===u&&((e=t.state).window_size=2*e.w_size,B(e.head),e.max_lazy_match=n[e.level].max_lazy,e.good_match=n[e.level].good_length,e.nice_match=n[e.level].nice_length,e.max_chain_length=n[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=_-1,e.match_available=0,e.ins_h=0),r}function Y(t,e,r,n,a,o){if(!t)return f;var s=1;if(e===p&&(e=6),n<0?(s=0,n=-n):n>15&&(s=2,n-=16),a<1||a>b||r!==v||n<8||n>15||e<0||e>9||o<0||o>g)return F(t,f);8===n&&(n=9);var h=new W;return t.state=h,h.strm=t,h.wrap=s,h.gzhead=null,h.w_bits=n,h.w_size=1<<h.w_bits,h.w_mask=h.w_size-1,h.hash_bits=a+7,h.hash_size=1<<h.hash_bits,h.hash_mask=h.hash_size-1,h.hash_shift=~~((h.hash_bits+_-1)/_),h.window=new i.Buf8(2*h.w_size),h.head=new i.Buf16(h.hash_size),h.prev=new i.Buf16(h.w_size),h.lit_bufsize=1<<a+6,h.pending_buf_size=4*h.lit_bufsize,h.pending_buf=new i.Buf8(h.pending_buf_size),h.d_buf=1*h.lit_bufsize,h.l_buf=3*h.lit_bufsize,h.level=e,h.strategy=o,h.method=r,X(t)}n=[new G(0,0,0,0,(function(t,e){var r=65535;for(r>t.pending_buf_size-5&&(r=t.pending_buf_size-5);;){if(t.lookahead<=1){if(q(t),0===t.lookahead&&e===c)return I;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var n=t.block_start+r;if((0===t.strstart||t.strstart>=n)&&(t.lookahead=t.strstart-n,t.strstart=n,z(t,!1),0===t.strm.avail_out))return I;if(t.strstart-t.block_start>=t.w_size-E&&(z(t,!1),0===t.strm.avail_out))return I}return t.insert=0,e===l?(z(t,!0),0===t.strm.avail_out?P:D):(t.strstart>t.block_start&&(z(t,!1),t.strm.avail_out),I)})),new G(4,4,8,4,V),new G(4,5,16,8,V),new G(4,6,32,32,V),new G(4,4,16,16,j),new G(8,16,32,32,j),new G(8,16,128,128,j),new G(8,32,128,256,j),new G(32,128,258,1024,j),new G(32,258,258,4096,j)],e.deflateInit=function(t,e){return Y(t,e,v,15,8,0)},e.deflateInit2=Y,e.deflateReset=X,e.deflateResetKeep=Z,e.deflateSetHeader=function(t,e){return t&&t.state?2!==t.state.wrap?f:(t.state.gzhead=e,u):f},e.deflate=function(t,e){var r,i,o,h;if(!t||!t.state||e>5||e<0)return t?F(t,f):f;if(i=t.state,!t.output||!t.input&&0!==t.avail_in||i.status===L&&e!==l)return F(t,0===t.avail_out?-5:f);if(i.strm=t,r=i.last_flush,i.last_flush=e,i.status===A)if(2===i.wrap)t.adler=0,U(i,31),U(i,139),U(i,8),i.gzhead?(U(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),U(i,255&i.gzhead.time),U(i,i.gzhead.time>>8&255),U(i,i.gzhead.time>>16&255),U(i,i.gzhead.time>>24&255),U(i,9===i.level?2:i.strategy>=2||i.level<2?4:0),U(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(U(i,255&i.gzhead.extra.length),U(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(t.adler=s(t.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):(U(i,0),U(i,0),U(i,0),U(i,0),U(i,0),U(i,9===i.level?2:i.strategy>=2||i.level<2?4:0),U(i,3),i.status=R);else{var p=v+(i.w_bits-8<<4)<<8;p|=(i.strategy>=2||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(p|=32),p+=31-p%31,i.status=R,H(i,p),0!==i.strstart&&(H(i,t.adler>>>16),H(i,65535&t.adler)),t.adler=1}if(69===i.status)if(i.gzhead.extra){for(o=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>o&&(t.adler=s(t.adler,i.pending_buf,i.pending-o,o)),O(t),o=i.pending,i.pending!==i.pending_buf_size));)U(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>o&&(t.adler=s(t.adler,i.pending_buf,i.pending-o,o)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73;if(73===i.status)if(i.gzhead.name){o=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>o&&(t.adler=s(t.adler,i.pending_buf,i.pending-o,o)),O(t),o=i.pending,i.pending===i.pending_buf_size)){h=1;break}h=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,U(i,h)}while(0!==h);i.gzhead.hcrc&&i.pending>o&&(t.adler=s(t.adler,i.pending_buf,i.pending-o,o)),0===h&&(i.gzindex=0,i.status=91)}else i.status=91;if(91===i.status)if(i.gzhead.comment){o=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>o&&(t.adler=s(t.adler,i.pending_buf,i.pending-o,o)),O(t),o=i.pending,i.pending===i.pending_buf_size)){h=1;break}h=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,U(i,h)}while(0!==h);i.gzhead.hcrc&&i.pending>o&&(t.adler=s(t.adler,i.pending_buf,i.pending-o,o)),0===h&&(i.status=T)}else i.status=T;if(i.status===T&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&O(t),i.pending+2<=i.pending_buf_size&&(U(i,255&t.adler),U(i,t.adler>>8&255),t.adler=0,i.status=R)):i.status=R),0!==i.pending){if(O(t),0===t.avail_out)return i.last_flush=-1,u}else if(0===t.avail_in&&N(e)<=N(r)&&e!==l)return F(t,-5);if(i.status===L&&0!==t.avail_in)return F(t,-5);if(0!==t.avail_in||0!==i.lookahead||e!==c&&i.status!==L){var d=2===i.strategy?function(t,e){for(var r;;){if(0===t.lookahead&&(q(t),0===t.lookahead)){if(e===c)return I;break}if(t.match_length=0,r=a._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,r&&(z(t,!1),0===t.strm.avail_out))return I}return t.insert=0,e===l?(z(t,!0),0===t.strm.avail_out?P:D):t.last_lit&&(z(t,!1),0===t.strm.avail_out)?I:M}(i,e):3===i.strategy?function(t,e){for(var r,n,i,o,s=t.window;;){if(t.lookahead<=C){if(q(t),t.lookahead<=C&&e===c)return I;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=_&&t.strstart>0&&(n=s[i=t.strstart-1])===s[++i]&&n===s[++i]&&n===s[++i]){o=t.strstart+C;do{}while(n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&i<o);t.match_length=C-(o-i),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=_?(r=a._tr_tally(t,1,t.match_length-_),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(r=a._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),r&&(z(t,!1),0===t.strm.avail_out))return I}return t.insert=0,e===l?(z(t,!0),0===t.strm.avail_out?P:D):t.last_lit&&(z(t,!1),0===t.strm.avail_out)?I:M}(i,e):n[i.level].func(i,e);if(d!==P&&d!==D||(i.status=L),d===I||d===P)return 0===t.avail_out&&(i.last_flush=-1),u;if(d===M&&(1===e?a._tr_align(i):5!==e&&(a._tr_stored_block(i,0,0,!1),3===e&&(B(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),O(t),0===t.avail_out))return i.last_flush=-1,u}return e!==l?u:i.wrap<=0?1:(2===i.wrap?(U(i,255&t.adler),U(i,t.adler>>8&255),U(i,t.adler>>16&255),U(i,t.adler>>24&255),U(i,255&t.total_in),U(i,t.total_in>>8&255),U(i,t.total_in>>16&255),U(i,t.total_in>>24&255)):(H(i,t.adler>>>16),H(i,65535&t.adler)),O(t),i.wrap>0&&(i.wrap=-i.wrap),0!==i.pending?u:1)},e.deflateEnd=function(t){var e;return t&&t.state?(e=t.state.status)!==A&&69!==e&&73!==e&&91!==e&&e!==T&&e!==R&&e!==L?F(t,f):(t.state=null,e===R?F(t,-3):u):f},e.deflateSetDictionary=function(t,e){var r,n,a,s,h,c,l,p,d=e.length;if(!t||!t.state)return f;if(2===(s=(r=t.state).wrap)||1===s&&r.status!==A||r.lookahead)return f;for(1===s&&(t.adler=o(t.adler,e,d,0)),r.wrap=0,d>=r.w_size&&(0===s&&(B(r.head),r.strstart=0,r.block_start=0,r.insert=0),p=new i.Buf8(r.w_size),i.arraySet(p,e,d-r.w_size,r.w_size,0),e=p,d=r.w_size),h=t.avail_in,c=t.next_in,l=t.input,t.avail_in=d,t.next_in=0,t.input=e,q(r);r.lookahead>=_;){n=r.strstart,a=r.lookahead-(_-1);do{r.ins_h=(r.ins_h<<r.hash_shift^r.window[n+_-1])&r.hash_mask,r.prev[n&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=n,n++}while(--a);r.strstart=n,r.lookahead=_-1,q(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=_-1,r.match_available=0,t.next_in=c,t.input=l,t.avail_in=h,r.wrap=s,u},e.deflateInfo="pako deflate (from Nodeca project)"},function(t,e,r){var n=r(11);function i(t){for(var e=t.length;--e>=0;)t[e]=0}var a=0,o=256,s=o+1+29,h=30,c=19,l=2*s+1,u=15,f=16,p=256,d=16,g=17,m=18,v=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],b=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],y=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],w=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],x=new Array(2*(s+2));i(x);var k=new Array(2*h);i(k);var S=new Array(512);i(S);var _=new Array(256);i(_);var C=new Array(29);i(C);var E,A,T,R=new Array(h);function L(t,e,r,n,i){this.static_tree=t,this.extra_bits=e,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=t&&t.length}function I(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function M(t){return t<256?S[t]:S[256+(t>>>7)]}function P(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function D(t,e,r){t.bi_valid>f-r?(t.bi_buf|=e<<t.bi_valid&65535,P(t,t.bi_buf),t.bi_buf=e>>f-t.bi_valid,t.bi_valid+=r-f):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=r)}function F(t,e,r){D(t,r[2*e],r[2*e+1])}function N(t,e){var r=0;do{r|=1&t,t>>>=1,r<<=1}while(--e>0);return r>>>1}function B(t,e,r){var n,i,a=new Array(u+1),o=0;for(n=1;n<=u;n++)a[n]=o=o+r[n-1]<<1;for(i=0;i<=e;i++){var s=t[2*i+1];0!==s&&(t[2*i]=N(a[s]++,s))}}function O(t){var e;for(e=0;e<s;e++)t.dyn_ltree[2*e]=0;for(e=0;e<h;e++)t.dyn_dtree[2*e]=0;for(e=0;e<c;e++)t.bl_tree[2*e]=0;t.dyn_ltree[2*p]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function z(t){t.bi_valid>8?P(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function U(t,e,r,n){var i=2*e,a=2*r;return t[i]<t[a]||t[i]===t[a]&&n[e]<=n[r]}function H(t,e,r){for(var n=t.heap[r],i=r<<1;i<=t.heap_len&&(i<t.heap_len&&U(e,t.heap[i+1],t.heap[i],t.depth)&&i++,!U(e,n,t.heap[i],t.depth));)t.heap[r]=t.heap[i],r=i,i<<=1;t.heap[r]=n}function $(t,e,r){var n,i,a,s,h=0;if(0!==t.last_lit)do{n=t.pending_buf[t.d_buf+2*h]<<8|t.pending_buf[t.d_buf+2*h+1],i=t.pending_buf[t.l_buf+h],h++,0===n?F(t,i,e):(F(t,(a=_[i])+o+1,e),0!==(s=v[a])&&D(t,i-=C[a],s),F(t,a=M(--n),r),0!==(s=b[a])&&D(t,n-=R[a],s))}while(h<t.last_lit);F(t,p,e)}function q(t,e){var r,n,i,a=e.dyn_tree,o=e.stat_desc.static_tree,s=e.stat_desc.has_stree,h=e.stat_desc.elems,c=-1;for(t.heap_len=0,t.heap_max=l,r=0;r<h;r++)0!==a[2*r]?(t.heap[++t.heap_len]=c=r,t.depth[r]=0):a[2*r+1]=0;for(;t.heap_len<2;)a[2*(i=t.heap[++t.heap_len]=c<2?++c:0)]=1,t.depth[i]=0,t.opt_len--,s&&(t.static_len-=o[2*i+1]);for(e.max_code=c,r=t.heap_len>>1;r>=1;r--)H(t,a,r);i=h;do{r=t.heap[1],t.heap[1]=t.heap[t.heap_len--],H(t,a,1),n=t.heap[1],t.heap[--t.heap_max]=r,t.heap[--t.heap_max]=n,a[2*i]=a[2*r]+a[2*n],t.depth[i]=(t.depth[r]>=t.depth[n]?t.depth[r]:t.depth[n])+1,a[2*r+1]=a[2*n+1]=i,t.heap[1]=i++,H(t,a,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],function(t,e){var r,n,i,a,o,s,h=e.dyn_tree,c=e.max_code,f=e.stat_desc.static_tree,p=e.stat_desc.has_stree,d=e.stat_desc.extra_bits,g=e.stat_desc.extra_base,m=e.stat_desc.max_length,v=0;for(a=0;a<=u;a++)t.bl_count[a]=0;for(h[2*t.heap[t.heap_max]+1]=0,r=t.heap_max+1;r<l;r++)(a=h[2*h[2*(n=t.heap[r])+1]+1]+1)>m&&(a=m,v++),h[2*n+1]=a,n>c||(t.bl_count[a]++,o=0,n>=g&&(o=d[n-g]),s=h[2*n],t.opt_len+=s*(a+o),p&&(t.static_len+=s*(f[2*n+1]+o)));if(0!==v){do{for(a=m-1;0===t.bl_count[a];)a--;t.bl_count[a]--,t.bl_count[a+1]+=2,t.bl_count[m]--,v-=2}while(v>0);for(a=m;0!==a;a--)for(n=t.bl_count[a];0!==n;)(i=t.heap[--r])>c||(h[2*i+1]!==a&&(t.opt_len+=(a-h[2*i+1])*h[2*i],h[2*i+1]=a),n--)}}(t,e),B(a,c,t.bl_count)}function V(t,e,r){var n,i,a=-1,o=e[1],s=0,h=7,c=4;for(0===o&&(h=138,c=3),e[2*(r+1)+1]=65535,n=0;n<=r;n++)i=o,o=e[2*(n+1)+1],++s<h&&i===o||(s<c?t.bl_tree[2*i]+=s:0!==i?(i!==a&&t.bl_tree[2*i]++,t.bl_tree[2*d]++):s<=10?t.bl_tree[2*g]++:t.bl_tree[2*m]++,s=0,a=i,0===o?(h=138,c=3):i===o?(h=6,c=3):(h=7,c=4))}function j(t,e,r){var n,i,a=-1,o=e[1],s=0,h=7,c=4;for(0===o&&(h=138,c=3),n=0;n<=r;n++)if(i=o,o=e[2*(n+1)+1],!(++s<h&&i===o)){if(s<c)do{F(t,i,t.bl_tree)}while(0!=--s);else 0!==i?(i!==a&&(F(t,i,t.bl_tree),s--),F(t,d,t.bl_tree),D(t,s-3,2)):s<=10?(F(t,g,t.bl_tree),D(t,s-3,3)):(F(t,m,t.bl_tree),D(t,s-11,7));s=0,a=i,0===o?(h=138,c=3):i===o?(h=6,c=3):(h=7,c=4)}}i(R);var G=!1;function W(t,e,r,i){D(t,(a<<1)+(i?1:0),3),function(t,e,r,i){z(t),P(t,r),P(t,~r),n.arraySet(t.pending_buf,t.window,e,r,t.pending),t.pending+=r}(t,e,r)}e._tr_init=function(t){G||(function(){var t,e,r,n,i,a=new Array(u+1);for(r=0,n=0;n<28;n++)for(C[n]=r,t=0;t<1<<v[n];t++)_[r++]=n;for(_[r-1]=n,i=0,n=0;n<16;n++)for(R[n]=i,t=0;t<1<<b[n];t++)S[i++]=n;for(i>>=7;n<h;n++)for(R[n]=i<<7,t=0;t<1<<b[n]-7;t++)S[256+i++]=n;for(e=0;e<=u;e++)a[e]=0;for(t=0;t<=143;)x[2*t+1]=8,t++,a[8]++;for(;t<=255;)x[2*t+1]=9,t++,a[9]++;for(;t<=279;)x[2*t+1]=7,t++,a[7]++;for(;t<=287;)x[2*t+1]=8,t++,a[8]++;for(B(x,s+1,a),t=0;t<h;t++)k[2*t+1]=5,k[2*t]=N(t,5);E=new L(x,v,o+1,s,u),A=new L(k,b,0,h,u),T=new L(new Array(0),y,0,c,7)}(),G=!0),t.l_desc=new I(t.dyn_ltree,E),t.d_desc=new I(t.dyn_dtree,A),t.bl_desc=new I(t.bl_tree,T),t.bi_buf=0,t.bi_valid=0,O(t)},e._tr_stored_block=W,e._tr_flush_block=function(t,e,r,n){var i,a,s=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=function(t){var e,r=4093624447;for(e=0;e<=31;e++,r>>>=1)if(1&r&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<o;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0}(t)),q(t,t.l_desc),q(t,t.d_desc),s=function(t){var e;for(V(t,t.dyn_ltree,t.l_desc.max_code),V(t,t.dyn_dtree,t.d_desc.max_code),q(t,t.bl_desc),e=c-1;e>=3&&0===t.bl_tree[2*w[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),i=t.opt_len+3+7>>>3,(a=t.static_len+3+7>>>3)<=i&&(i=a)):i=a=r+5,r+4<=i&&-1!==e?W(t,e,r,n):4===t.strategy||a===i?(D(t,2+(n?1:0),3),$(t,x,k)):(D(t,4+(n?1:0),3),function(t,e,r,n){var i;for(D(t,e-257,5),D(t,r-1,5),D(t,n-4,4),i=0;i<n;i++)D(t,t.bl_tree[2*w[i]+1],3);j(t,t.dyn_ltree,e-1),j(t,t.dyn_dtree,r-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,s+1),$(t,t.dyn_ltree,t.dyn_dtree)),O(t),n&&z(t)},e._tr_tally=function(t,e,r){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&r,t.last_lit++,0===e?t.dyn_ltree[2*r]++:(t.matches++,e--,t.dyn_ltree[2*(_[r]+o+1)]++,t.dyn_dtree[2*M(e)]++),t.last_lit===t.lit_bufsize-1},e._tr_align=function(t){D(t,2,3),F(t,p,x),function(t){16===t.bi_valid?(P(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)}},function(t,e,r){t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(t,e,r){var n=r(11),i=r(28),a=r(29),o=r(58),s=r(59),h=1,c=2,l=0,u=-2,f=1,p=12,d=30,g=852,m=592;function v(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function b(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new n.Buf16(320),this.work=new n.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function y(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=f,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new n.Buf32(g),e.distcode=e.distdyn=new n.Buf32(m),e.sane=1,e.back=-1,l):u}function w(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,y(t)):u}function x(t,e){var r,n;return t&&t.state?(n=t.state,e<0?(r=0,e=-e):(r=1+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?u:(null!==n.window&&n.wbits!==e&&(n.window=null),n.wrap=r,n.wbits=e,w(t))):u}function k(t,e){var r,n;return t?(n=new b,t.state=n,n.window=null,(r=x(t,e))!==l&&(t.state=null),r):u}var S,_,C=!0;function E(t){if(C){var e;for(S=new n.Buf32(512),_=new n.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(s(h,t.lens,0,288,S,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;s(c,t.lens,0,32,_,0,t.work,{bits:5}),C=!1}t.lencode=S,t.lenbits=9,t.distcode=_,t.distbits=5}function A(t,e,r,i){var a,o=t.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new n.Buf8(o.wsize)),i>=o.wsize?(n.arraySet(o.window,e,r-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):((a=o.wsize-o.wnext)>i&&(a=i),n.arraySet(o.window,e,r-i,a,o.wnext),(i-=a)?(n.arraySet(o.window,e,r-i,i,0),o.wnext=i,o.whave=o.wsize):(o.wnext+=a,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=a))),0}e.inflateReset=w,e.inflateReset2=x,e.inflateResetKeep=y,e.inflateInit=function(t){return k(t,15)},e.inflateInit2=k,e.inflate=function(t,e){var r,g,m,b,y,w,x,k,S,_,C,T,R,L,I,M,P,D,F,N,B,O,z,U,H=0,$=new n.Buf8(4),q=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return u;(r=t.state).mode===p&&(r.mode=13),y=t.next_out,m=t.output,x=t.avail_out,b=t.next_in,g=t.input,w=t.avail_in,k=r.hold,S=r.bits,_=w,C=x,O=l;t:for(;;)switch(r.mode){case f:if(0===r.wrap){r.mode=13;break}for(;S<16;){if(0===w)break t;w--,k+=g[b++]<<S,S+=8}if(2&r.wrap&&35615===k){r.check=0,$[0]=255&k,$[1]=k>>>8&255,r.check=a(r.check,$,2,0),k=0,S=0,r.mode=2;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&k)<<8)+(k>>8))%31){t.msg="incorrect header check",r.mode=d;break}if(8!=(15&k)){t.msg="unknown compression method",r.mode=d;break}if(S-=4,B=8+(15&(k>>>=4)),0===r.wbits)r.wbits=B;else if(B>r.wbits){t.msg="invalid window size",r.mode=d;break}r.dmax=1<<B,t.adler=r.check=1,r.mode=512&k?10:p,k=0,S=0;break;case 2:for(;S<16;){if(0===w)break t;w--,k+=g[b++]<<S,S+=8}if(r.flags=k,8!=(255&r.flags)){t.msg="unknown compression method",r.mode=d;break}if(57344&r.flags){t.msg="unknown header flags set",r.mode=d;break}r.head&&(r.head.text=k>>8&1),512&r.flags&&($[0]=255&k,$[1]=k>>>8&255,r.check=a(r.check,$,2,0)),k=0,S=0,r.mode=3;case 3:for(;S<32;){if(0===w)break t;w--,k+=g[b++]<<S,S+=8}r.head&&(r.head.time=k),512&r.flags&&($[0]=255&k,$[1]=k>>>8&255,$[2]=k>>>16&255,$[3]=k>>>24&255,r.check=a(r.check,$,4,0)),k=0,S=0,r.mode=4;case 4:for(;S<16;){if(0===w)break t;w--,k+=g[b++]<<S,S+=8}r.head&&(r.head.xflags=255&k,r.head.os=k>>8),512&r.flags&&($[0]=255&k,$[1]=k>>>8&255,r.check=a(r.check,$,2,0)),k=0,S=0,r.mode=5;case 5:if(1024&r.flags){for(;S<16;){if(0===w)break t;w--,k+=g[b++]<<S,S+=8}r.length=k,r.head&&(r.head.extra_len=k),512&r.flags&&($[0]=255&k,$[1]=k>>>8&255,r.check=a(r.check,$,2,0)),k=0,S=0}else r.head&&(r.head.extra=null);r.mode=6;case 6:if(1024&r.flags&&((T=r.length)>w&&(T=w),T&&(r.head&&(B=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),n.arraySet(r.head.extra,g,b,T,B)),512&r.flags&&(r.check=a(r.check,g,T,b)),w-=T,b+=T,r.length-=T),r.length))break t;r.length=0,r.mode=7;case 7:if(2048&r.flags){if(0===w)break t;T=0;do{B=g[b+T++],r.head&&B&&r.length<65536&&(r.head.name+=String.fromCharCode(B))}while(B&&T<w);if(512&r.flags&&(r.check=a(r.check,g,T,b)),w-=T,b+=T,B)break t}else r.head&&(r.head.name=null);r.length=0,r.mode=8;case 8:if(4096&r.flags){if(0===w)break t;T=0;do{B=g[b+T++],r.head&&B&&r.length<65536&&(r.head.comment+=String.fromCharCode(B))}while(B&&T<w);if(512&r.flags&&(r.check=a(r.check,g,T,b)),w-=T,b+=T,B)break t}else r.head&&(r.head.comment=null);r.mode=9;case 9:if(512&r.flags){for(;S<16;){if(0===w)break t;w--,k+=g[b++]<<S,S+=8}if(k!==(65535&r.check)){t.msg="header crc mismatch",r.mode=d;break}k=0,S=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=p;break;case 10:for(;S<32;){if(0===w)break t;w--,k+=g[b++]<<S,S+=8}t.adler=r.check=v(k),k=0,S=0,r.mode=11;case 11:if(0===r.havedict)return t.next_out=y,t.avail_out=x,t.next_in=b,t.avail_in=w,r.hold=k,r.bits=S,2;t.adler=r.check=1,r.mode=p;case p:if(5===e||6===e)break t;case 13:if(r.last){k>>>=7&S,S-=7&S,r.mode=27;break}for(;S<3;){if(0===w)break t;w--,k+=g[b++]<<S,S+=8}switch(r.last=1&k,S-=1,3&(k>>>=1)){case 0:r.mode=14;break;case 1:if(E(r),r.mode=20,6===e){k>>>=2,S-=2;break t}break;case 2:r.mode=17;break;case 3:t.msg="invalid block type",r.mode=d}k>>>=2,S-=2;break;case 14:for(k>>>=7&S,S-=7&S;S<32;){if(0===w)break t;w--,k+=g[b++]<<S,S+=8}if((65535&k)!=(k>>>16^65535)){t.msg="invalid stored block lengths",r.mode=d;break}if(r.length=65535&k,k=0,S=0,r.mode=15,6===e)break t;case 15:r.mode=16;case 16:if(T=r.length){if(T>w&&(T=w),T>x&&(T=x),0===T)break t;n.arraySet(m,g,b,T,y),w-=T,b+=T,x-=T,y+=T,r.length-=T;break}r.mode=p;break;case 17:for(;S<14;){if(0===w)break t;w--,k+=g[b++]<<S,S+=8}if(r.nlen=257+(31&k),k>>>=5,S-=5,r.ndist=1+(31&k),k>>>=5,S-=5,r.ncode=4+(15&k),k>>>=4,S-=4,r.nlen>286||r.ndist>30){t.msg="too many length or distance symbols",r.mode=d;break}r.have=0,r.mode=18;case 18:for(;r.have<r.ncode;){for(;S<3;){if(0===w)break t;w--,k+=g[b++]<<S,S+=8}r.lens[q[r.have++]]=7&k,k>>>=3,S-=3}for(;r.have<19;)r.lens[q[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,z={bits:r.lenbits},O=s(0,r.lens,0,19,r.lencode,0,r.work,z),r.lenbits=z.bits,O){t.msg="invalid code lengths set",r.mode=d;break}r.have=0,r.mode=19;case 19:for(;r.have<r.nlen+r.ndist;){for(;M=(H=r.lencode[k&(1<<r.lenbits)-1])>>>16&255,P=65535&H,!((I=H>>>24)<=S);){if(0===w)break t;w--,k+=g[b++]<<S,S+=8}if(P<16)k>>>=I,S-=I,r.lens[r.have++]=P;else{if(16===P){for(U=I+2;S<U;){if(0===w)break t;w--,k+=g[b++]<<S,S+=8}if(k>>>=I,S-=I,0===r.have){t.msg="invalid bit length repeat",r.mode=d;break}B=r.lens[r.have-1],T=3+(3&k),k>>>=2,S-=2}else if(17===P){for(U=I+3;S<U;){if(0===w)break t;w--,k+=g[b++]<<S,S+=8}S-=I,B=0,T=3+(7&(k>>>=I)),k>>>=3,S-=3}else{for(U=I+7;S<U;){if(0===w)break t;w--,k+=g[b++]<<S,S+=8}S-=I,B=0,T=11+(127&(k>>>=I)),k>>>=7,S-=7}if(r.have+T>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=d;break}for(;T--;)r.lens[r.have++]=B}}if(r.mode===d)break;if(0===r.lens[256]){t.msg="invalid code -- missing end-of-block",r.mode=d;break}if(r.lenbits=9,z={bits:r.lenbits},O=s(h,r.lens,0,r.nlen,r.lencode,0,r.work,z),r.lenbits=z.bits,O){t.msg="invalid literal/lengths set",r.mode=d;break}if(r.distbits=6,r.distcode=r.distdyn,z={bits:r.distbits},O=s(c,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,z),r.distbits=z.bits,O){t.msg="invalid distances set",r.mode=d;break}if(r.mode=20,6===e)break t;case 20:r.mode=21;case 21:if(w>=6&&x>=258){t.next_out=y,t.avail_out=x,t.next_in=b,t.avail_in=w,r.hold=k,r.bits=S,o(t,C),y=t.next_out,m=t.output,x=t.avail_out,b=t.next_in,g=t.input,w=t.avail_in,k=r.hold,S=r.bits,r.mode===p&&(r.back=-1);break}for(r.back=0;M=(H=r.lencode[k&(1<<r.lenbits)-1])>>>16&255,P=65535&H,!((I=H>>>24)<=S);){if(0===w)break t;w--,k+=g[b++]<<S,S+=8}if(M&&0==(240&M)){for(D=I,F=M,N=P;M=(H=r.lencode[N+((k&(1<<D+F)-1)>>D)])>>>16&255,P=65535&H,!(D+(I=H>>>24)<=S);){if(0===w)break t;w--,k+=g[b++]<<S,S+=8}k>>>=D,S-=D,r.back+=D}if(k>>>=I,S-=I,r.back+=I,r.length=P,0===M){r.mode=26;break}if(32&M){r.back=-1,r.mode=p;break}if(64&M){t.msg="invalid literal/length code",r.mode=d;break}r.extra=15&M,r.mode=22;case 22:if(r.extra){for(U=r.extra;S<U;){if(0===w)break t;w--,k+=g[b++]<<S,S+=8}r.length+=k&(1<<r.extra)-1,k>>>=r.extra,S-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=23;case 23:for(;M=(H=r.distcode[k&(1<<r.distbits)-1])>>>16&255,P=65535&H,!((I=H>>>24)<=S);){if(0===w)break t;w--,k+=g[b++]<<S,S+=8}if(0==(240&M)){for(D=I,F=M,N=P;M=(H=r.distcode[N+((k&(1<<D+F)-1)>>D)])>>>16&255,P=65535&H,!(D+(I=H>>>24)<=S);){if(0===w)break t;w--,k+=g[b++]<<S,S+=8}k>>>=D,S-=D,r.back+=D}if(k>>>=I,S-=I,r.back+=I,64&M){t.msg="invalid distance code",r.mode=d;break}r.offset=P,r.extra=15&M,r.mode=24;case 24:if(r.extra){for(U=r.extra;S<U;){if(0===w)break t;w--,k+=g[b++]<<S,S+=8}r.offset+=k&(1<<r.extra)-1,k>>>=r.extra,S-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=d;break}r.mode=25;case 25:if(0===x)break t;if(T=C-x,r.offset>T){if((T=r.offset-T)>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=d;break}T>r.wnext?(T-=r.wnext,R=r.wsize-T):R=r.wnext-T,T>r.length&&(T=r.length),L=r.window}else L=m,R=y-r.offset,T=r.length;T>x&&(T=x),x-=T,r.length-=T;do{m[y++]=L[R++]}while(--T);0===r.length&&(r.mode=21);break;case 26:if(0===x)break t;m[y++]=r.length,x--,r.mode=21;break;case 27:if(r.wrap){for(;S<32;){if(0===w)break t;w--,k|=g[b++]<<S,S+=8}if(C-=x,t.total_out+=C,r.total+=C,C&&(t.adler=r.check=r.flags?a(r.check,m,C,y-C):i(r.check,m,C,y-C)),C=x,(r.flags?k:v(k))!==r.check){t.msg="incorrect data check",r.mode=d;break}k=0,S=0}r.mode=28;case 28:if(r.wrap&&r.flags){for(;S<32;){if(0===w)break t;w--,k+=g[b++]<<S,S+=8}if(k!==(4294967295&r.total)){t.msg="incorrect length check",r.mode=d;break}k=0,S=0}r.mode=29;case 29:O=1;break t;case d:O=-3;break t;case 31:return-4;case 32:default:return u}return t.next_out=y,t.avail_out=x,t.next_in=b,t.avail_in=w,r.hold=k,r.bits=S,(r.wsize||C!==t.avail_out&&r.mode<d&&(r.mode<27||4!==e))&&A(t,t.output,t.next_out,C-t.avail_out)?(r.mode=31,-4):(_-=t.avail_in,C-=t.avail_out,t.total_in+=_,t.total_out+=C,r.total+=C,r.wrap&&C&&(t.adler=r.check=r.flags?a(r.check,m,C,t.next_out-C):i(r.check,m,C,t.next_out-C)),t.data_type=r.bits+(r.last?64:0)+(r.mode===p?128:0)+(20===r.mode||15===r.mode?256:0),(0===_&&0===C||4===e)&&O===l&&(O=-5),O)},e.inflateEnd=function(t){if(!t||!t.state)return u;var e=t.state;return e.window&&(e.window=null),t.state=null,l},e.inflateGetHeader=function(t,e){var r;return t&&t.state?0==(2&(r=t.state).wrap)?u:(r.head=e,e.done=!1,l):u},e.inflateSetDictionary=function(t,e){var r,n=e.length;return t&&t.state?0!==(r=t.state).wrap&&11!==r.mode?u:11===r.mode&&i(1,e,n,0)!==r.check?-3:A(t,e,n,n)?(r.mode=31,-4):(r.havedict=1,l):u},e.inflateInfo="pako inflate (from Nodeca project)"},function(t,e,r){t.exports=function(t,e){var r,n,i,a,o,s,h,c,l,u,f,p,d,g,m,v,b,y,w,x,k,S,_,C,E;r=t.state,n=t.next_in,C=t.input,i=n+(t.avail_in-5),a=t.next_out,E=t.output,o=a-(e-t.avail_out),s=a+(t.avail_out-257),h=r.dmax,c=r.wsize,l=r.whave,u=r.wnext,f=r.window,p=r.hold,d=r.bits,g=r.lencode,m=r.distcode,v=(1<<r.lenbits)-1,b=(1<<r.distbits)-1;t:do{d<15&&(p+=C[n++]<<d,d+=8,p+=C[n++]<<d,d+=8),y=g[p&v];e:for(;;){if(p>>>=w=y>>>24,d-=w,0==(w=y>>>16&255))E[a++]=65535&y;else{if(!(16&w)){if(0==(64&w)){y=g[(65535&y)+(p&(1<<w)-1)];continue e}if(32&w){r.mode=12;break t}t.msg="invalid literal/length code",r.mode=30;break t}x=65535&y,(w&=15)&&(d<w&&(p+=C[n++]<<d,d+=8),x+=p&(1<<w)-1,p>>>=w,d-=w),d<15&&(p+=C[n++]<<d,d+=8,p+=C[n++]<<d,d+=8),y=m[p&b];r:for(;;){if(p>>>=w=y>>>24,d-=w,!(16&(w=y>>>16&255))){if(0==(64&w)){y=m[(65535&y)+(p&(1<<w)-1)];continue r}t.msg="invalid distance code",r.mode=30;break t}if(k=65535&y,d<(w&=15)&&(p+=C[n++]<<d,(d+=8)<w&&(p+=C[n++]<<d,d+=8)),(k+=p&(1<<w)-1)>h){t.msg="invalid distance too far back",r.mode=30;break t}if(p>>>=w,d-=w,k>(w=a-o)){if((w=k-w)>l&&r.sane){t.msg="invalid distance too far back",r.mode=30;break t}if(S=0,_=f,0===u){if(S+=c-w,w<x){x-=w;do{E[a++]=f[S++]}while(--w);S=a-k,_=E}}else if(u<w){if(S+=c+u-w,(w-=u)<x){x-=w;do{E[a++]=f[S++]}while(--w);if(S=0,u<x){x-=w=u;do{E[a++]=f[S++]}while(--w);S=a-k,_=E}}}else if(S+=u-w,w<x){x-=w;do{E[a++]=f[S++]}while(--w);S=a-k,_=E}for(;x>2;)E[a++]=_[S++],E[a++]=_[S++],E[a++]=_[S++],x-=3;x&&(E[a++]=_[S++],x>1&&(E[a++]=_[S++]))}else{S=a-k;do{E[a++]=E[S++],E[a++]=E[S++],E[a++]=E[S++],x-=3}while(x>2);x&&(E[a++]=E[S++],x>1&&(E[a++]=E[S++]))}break}}break}}while(n<i&&a<s);n-=x=d>>3,p&=(1<<(d-=x<<3))-1,t.next_in=n,t.next_out=a,t.avail_in=n<i?i-n+5:5-(n-i),t.avail_out=a<s?s-a+257:257-(a-s),r.hold=p,r.bits=d}},function(t,e,r){var n=r(11),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],o=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],s=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(t,e,r,h,c,l,u,f){var p,d,g,m,v,b,y,w,x,k=f.bits,S=0,_=0,C=0,E=0,A=0,T=0,R=0,L=0,I=0,M=0,P=null,D=0,F=new n.Buf16(16),N=new n.Buf16(16),B=null,O=0;for(S=0;S<=15;S++)F[S]=0;for(_=0;_<h;_++)F[e[r+_]]++;for(A=k,E=15;E>=1&&0===F[E];E--);if(A>E&&(A=E),0===E)return c[l++]=20971520,c[l++]=20971520,f.bits=1,0;for(C=1;C<E&&0===F[C];C++);for(A<C&&(A=C),L=1,S=1;S<=15;S++)if(L<<=1,(L-=F[S])<0)return-1;if(L>0&&(0===t||1!==E))return-1;for(N[1]=0,S=1;S<15;S++)N[S+1]=N[S]+F[S];for(_=0;_<h;_++)0!==e[r+_]&&(u[N[e[r+_]]++]=_);if(0===t?(P=B=u,b=19):1===t?(P=i,D-=257,B=a,O-=257,b=256):(P=o,B=s,b=-1),M=0,_=0,S=C,v=l,T=A,R=0,g=-1,m=(I=1<<A)-1,1===t&&I>852||2===t&&I>592)return 1;for(;;){y=S-R,u[_]<b?(w=0,x=u[_]):u[_]>b?(w=B[O+u[_]],x=P[D+u[_]]):(w=96,x=0),p=1<<S-R,C=d=1<<T;do{c[v+(M>>R)+(d-=p)]=y<<24|w<<16|x|0}while(0!==d);for(p=1<<S-1;M&p;)p>>=1;if(0!==p?(M&=p-1,M+=p):M=0,_++,0==--F[S]){if(S===E)break;S=e[r+u[_]]}if(S>A&&(M&m)!==g){for(0===R&&(R=A),v+=C,L=1<<(T=S-R);T+R<E&&!((L-=F[T+R])<=0);)T++,L<<=1;if(I+=1<<T,1===t&&I>852||2===t&&I>592)return 1;c[g=M&m]=A<<24|T<<16|v-l|0}}return 0!==M&&(c[v+M]=S-R<<24|64<<16|0),f.bits=A,0}},function(t,e,r){t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(t,e,r){var n=r(1).Buffer,i=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];function a(t){if(n.isBuffer(t))return t;var e="function"==typeof n.alloc&&"function"==typeof n.from;if("number"==typeof t)return e?n.alloc(t):new n(t);if("string"==typeof t)return e?n.from(t):new n(t);throw new Error("input must be buffer, number, or string, received "+R(t))}function o(t,e){t=a(t),n.isBuffer(e)&&(e=e.readUInt32BE(0));for(var r=-1^~~e,o=0;o<t.length;o++)r=i[255&(r^t[o])]^r>>>8;return-1^r}function s(){return t=o.apply(null,arguments),(e=a(4)).writeInt32BE(t,0),e;var t,e}"undefined"!=typeof Int32Array&&(i=new Int32Array(i)),s.signed=function(){return o.apply(null,arguments)},s.unsigned=function(){return o.apply(null,arguments)>>>0},t.exports=s},function(e,r,n){(function(r){var i=n(0).CramMalformedError,a=n(12),o=n(63),s=n(64),h=n(65),c=function(){function e(r){var n=arguments.length>1&&arguments[1]!==t?arguments[1]:0;M(this,e),this._buffer=r,this._position=n,this.length=r.length}return D(e,[{key:"get",value:function(){var t=this._buffer[this._position];return this._position+=1,t}},{key:"getByte",value:function(){return this.get()}},{key:"getByteAt",value:function(t){return this._buffer[t]}},{key:"position",value:function(){return this._position}},{key:"put",value:function(t){return this._buffer[this._position]=t,this._position+=1,t}},{key:"putAt",value:function(t,e){return this._buffer[t]=e,e}},{key:"setPosition",value:function(t){return this._position=t,t}},{key:"getInt",value:function(){var t=this._buffer.readInt32LE(this._position);return this._position+=4,t}},{key:"remaining",value:function(){return this._buffer.length-this._position}}]),e}();e.exports={uncompress:function(e,n){var l=arguments.length>2&&arguments[2]!==t?arguments[2]:0;if(0===e.length)return n.fill(0),n;var u=new c(e,l),f=u.get();if(0!==f&&1!==f)throw new i("Invalid rANS order ".concat(f));if(u.getInt()!==u.remaining()-4)throw new i("Incorrect input length.");var p=u.getInt(),d=new c(n||r.allocUnsafe(p));if(d.length<p)throw new i("Output buffer too small to fit ".concat(p," bytes."));switch(f){case 0:return function(t,e){for(var r=new a.AriDecoder,n=new Array(256),i=0;i<n.length;i+=1)n[i]=new a.Symbol;return o.readStatsO0(t,r,n),s.uncompress(t,r,n,e),e}(u,d);case 1:return function(t,e){for(var r=new Array(256),n=0;n<r.length;n+=1)r[n]=new a.AriDecoder;for(var i=new Array(256),s=0;s<i.length;s+=1){i[s]=new Array(256);for(var c=0;c<i[s].length;c+=1)i[s][c]=new a.Symbol}return o.readStatsO1(t,r,i),h.uncompress(t,e,r,i),e}(u,d);default:throw new i("Invalid rANS order: ".concat(f))}}}}).call(this,n(1).Buffer)},function(t,e,r){var n=r(0).CramMalformedError,i=r(13),a=r(12);function o(t){if(!t)throw new n("assertion failed")}t.exports={readStatsO0:function(t,e,r){var n=0,s=0,h=255&t.get();do{null==e.fc[h]&&(e.fc[h]=new a.FC),e.fc[h].F=255&t.get(),e.fc[h].F>=128&&(e.fc[h].F&=-129,e.fc[h].F=(127&e.fc[h].F)<<8|255&t.get()),e.fc[h].C=s,a.symbolInit(r[h],e.fc[h].C,e.fc[h].F),e.R||(e.R=new Array(i.TOTFREQ)),e.R.fill(h,s,s+e.fc[h].F),s+=e.fc[h].F,0===n&&h+1===(255&t.getByteAt(t.position()))?(h=255&t.get(),n=255&t.get()):0!==n?(n-=1,h+=1):h=255&t.get()}while(0!==h);o(s<i.TOTFREQ)},readStatsO1:function(t,e,r){var n=0,s=255&t.get();do{var h=0,c=0,l=255&t.get();null==e[s]&&(e[s]=new a.AriDecoder);do{null==e[s].fc[l]&&(e[s].fc[l]=new a.FC),e[s].fc[l].F=255&t.get(),e[s].fc[l].F>=128&&(e[s].fc[l].F&=-129,e[s].fc[l].F=(127&e[s].fc[l].F)<<8|255&t.get()),e[s].fc[l].C=c,0===e[s].fc[l].F&&(e[s].fc[l].F=i.TOTFREQ),null==r[s][l]&&(r[s][l]=new a.RansDecSymbol),a.symbolInit(r[s][l],e[s].fc[l].C,e[s].fc[l].F),null==e[s].R&&(e[s].R=new Array(i.TOTFREQ)),e[s].R.fill(l,c,c+e[s].fc[l].F),o((c+=e[s].fc[l].F)<=i.TOTFREQ),0===h&&l+1===(255&t.getByteAt(t.position()))?(l=255&t.get(),h=255&t.get()):0!==h?(h-=1,l+=1):l=255&t.get()}while(0!==l);0===n&&s+1===(255&t.getByteAt(t.position()))?(s=255&t.get(),n=255&t.get()):0!==n?(n-=1,s+=1):s=255&t.get()}while(0!==s)}}},function(t,e,r){var n=r(0).CramMalformedError,i=r(13),a=r(12);t.exports={uncompress:function(t,e,r,o){for(var s,h=t.getInt(),c=t.getInt(),l=t.getInt(),u=t.getInt(),f=o.remaining(),p=-4&f,d=0;d<p;d+=4){var g=e.R[a.get(h,i.TF_SHIFT)],m=e.R[a.get(c,i.TF_SHIFT)],v=e.R[a.get(l,i.TF_SHIFT)],b=e.R[a.get(u,i.TF_SHIFT)];o.putAt(d,g),o.putAt(d+1,m),o.putAt(d+2,v),o.putAt(d+3,b),h=a.advanceSymbolStep(h,r[255&g],i.TF_SHIFT),c=a.advanceSymbolStep(c,r[255&m],i.TF_SHIFT),l=a.advanceSymbolStep(l,r[255&v],i.TF_SHIFT),u=a.advanceSymbolStep(u,r[255&b],i.TF_SHIFT),h=a.renormalize(h,t),c=a.renormalize(c,t),l=a.renormalize(l,t),u=a.renormalize(u,t)}switch(o.setPosition(p),3&f){case 0:break;case 1:s=e.R[a.get(h,i.TF_SHIFT)],a.advanceSymbol(h,t,r[255&s],i.TF_SHIFT),o.put(s);break;case 2:s=e.R[a.get(h,i.TF_SHIFT)],a.advanceSymbol(h,t,r[255&s],i.TF_SHIFT),o.put(s),s=e.R[a.get(c,i.TF_SHIFT)],a.advanceSymbol(c,t,r[255&s],i.TF_SHIFT),o.put(s);break;case 3:s=e.R[a.get(h,i.TF_SHIFT)],a.advanceSymbol(h,t,r[255&s],i.TF_SHIFT),o.put(s),s=e.R[a.get(c,i.TF_SHIFT)],a.advanceSymbol(c,t,r[255&s],i.TF_SHIFT),o.put(s),s=e.R[a.get(l,i.TF_SHIFT)],a.advanceSymbol(l,t,r[255&s],i.TF_SHIFT),o.put(s);break;default:throw new n("invalid output size encountered during rANS decoding")}o.setPosition(0)}}},function(t,e,r){var n=r(13),i=r(12);t.exports={uncompress:function(t,e,r,a){for(var o=e.remaining(),s=t.getInt(),h=t.getInt(),c=t.getInt(),l=t.getInt(),u=o>>2,f=0,p=u,d=2*u,g=3*u,m=0,v=0,b=0,y=0;f<u;f+=1,p+=1,d+=1,g+=1){var w=255&r[m].R[i.get(s,n.TF_SHIFT)],x=255&r[v].R[i.get(h,n.TF_SHIFT)],k=255&r[b].R[i.get(c,n.TF_SHIFT)],S=255&r[y].R[i.get(l,n.TF_SHIFT)];e.putAt(f,w),e.putAt(p,x),e.putAt(d,k),e.putAt(g,S),s=i.advanceSymbolStep(s,a[m][w],n.TF_SHIFT),h=i.advanceSymbolStep(h,a[v][x],n.TF_SHIFT),c=i.advanceSymbolStep(c,a[b][k],n.TF_SHIFT),l=i.advanceSymbolStep(l,a[y][S],n.TF_SHIFT),s=i.renormalize(s,t),h=i.renormalize(h,t),c=i.renormalize(c,t),l=i.renormalize(l,t),m=w,v=x,b=k,y=S}for(;g<o;g+=1){var _=255&r[y].R[i.get(l,n.TF_SHIFT)];e.putAt(g,_),l=i.advanceSymbol(l,t,a[y][_],n.TF_SHIFT),y=_}}}},function(t,e,r){var n=r(67).Parser,i=(new n).itf8(),a={parser:(new n).string("magic",{length:4}).uint8("majorVersion").uint8("minorVersion").string("fileId",{length:20,stripNull:!0}),maxLength:26},o={parser:(new n).uint8("compressionMethod",{formatter:function(t){var e=["raw","gzip","bzip2","lzma","rans"][t];if(!e)throw new Error("compression method number ".concat(t," not implemented"));return e}}).uint8("contentType",{formatter:function(t){var e=["FILE_HEADER","COMPRESSION_HEADER","MAPPED_SLICE_HEADER","UNMAPPED_SLICE_HEADER","EXTERNAL_DATA","CORE_DATA"][t];if(!e)throw new Error("invalid block content type id ".concat(t));return e}}).itf8("contentId").itf8("compressedSize").itf8("uncompressedSize"),maxLength:17},s={parser:(new n).uint32("crc32"),maxLength:4},h=(new n).itf8("size").buffer("entries",{length:"size",formatter:function(t){function e(e,r){for(var n=t.toString("utf8",e,r),i=[],a=0;a<n.length;a+=3)i.push(n.substr(a,3));return i}var r,n=[],i=0;for(r=0;r<t.length;r+=1)t[r]||(n.push(e(i,r)),i=r+1);return r>i&&n.push(e(i,r)),n}}),c=(new n).uint8(null,{formatter:function(t){return!!t}}),l=(new n).itf8("mapSize").itf8("mapCount").array("entries",{length:"mapCount",type:(new n).string("key",{length:2,stripNull:!1}).choice("value",{tag:"key",choices:{MI:c,UI:c,PI:c,RN:c,AP:c,RR:c,SM:(new n).array(null,{type:"uint8",length:5}),TD:(new n).nest(null,{type:h,formatter:function(t){return t.entries}})}})});function u(t){var e={};return t.entries.forEach((function(t){var r=t.key,n=t.value;e[r]&&console.warn("duplicate key ".concat(r," in map")),e[r]=n})),e}var f={cramFileDefinition:a,cramBlockHeader:o,cramBlockCrc32:s},p={cramUnmappedSliceHeader:function(t){var e=0,r=(new n).itf8("numRecords");return e+=5,t>=3?(r=r.ltf8("recordCounter"),e+=9):2===t&&(r=r.itf8("recordCounter"),e+=5),r=r.itf8("numBlocks").itf8("numContentIds").array("contentIds",{type:i,length:"numContentIds"}),e+=10,t>=2&&(r=r.array("md5",{type:"uint8",length:16}),e+=16),{parser:r,maxLength:function(t){return e+5*t}}},cramMappedSliceHeader:function(t){var e=(new n).itf8("refSeqId").itf8("refSeqStart").itf8("refSeqSpan").itf8("numRecords"),r=20;return t>=3?(e=e.ltf8("recordCounter"),r+=9):2===t&&(e=e.itf8("recordCounter"),r+=5),e=e.itf8("numBlocks").itf8("numContentIds").array("contentIds",{type:i,length:"numContentIds"}).itf8("refBaseBlockId"),r+=15,t>=2&&(e=e.array("md5",{type:"uint8",length:16}),r+=16),{parser:e,maxLength:function(t){return r+5*t}}},cramEncoding:function(t){return{parser:(new n).namely("cramEncoding").itf8("codecId").itf8("parametersBytes").choice("parameters",{tag:"codecId",choices:{0:new n,1:(new n).itf8("blockContentId"),2:(new n).itf8("offset").itf8("M"),3:n.start().itf8("numCodes").array("symbols",{length:"numCodes",type:i}).itf8("numLengths").array("bitLengths",{length:"numLengths",type:i}),4:n.start().nest("lengthsEncoding",{type:"cramEncoding"}).nest("valuesEncoding",{type:"cramEncoding"}),5:(new n).uint8("stopByte")[t>1?"itf8":"int"]("blockContentId"),6:(new n).itf8("offset").itf8("length"),7:(new n).itf8("offset").itf8("K"),8:(new n).itf8("offset").itf8("log2m"),9:(new n).itf8("offset")}})}},cramDataSeriesEncodingMap:function(t){return(new n).itf8("mapSize").itf8("mapCount").array("entries",{length:"mapCount",type:(new n).string("key",{length:2,stripNull:!1}).nest("value",{type:this.cramEncoding(t).parser})})},cramTagEncodingMap:function(t){return(new n).itf8("mapSize").itf8("mapCount").array("entries",{length:"mapCount",type:(new n).itf8("key",{formatter:function(t){return String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(255&t)}}).nest("value",{type:this.cramEncoding(t).parser})})},cramCompressionHeader:function(t){var e=new n;return{parser:e=e.nest("preservation",{type:l,formatter:u}).nest("dataSeriesEncoding",{type:this.cramDataSeriesEncodingMap(t),formatter:u}).nest("tagEncoding",{type:this.cramTagEncodingMap(t),formatter:u})}},cramContainerHeader1:function(t){var e=(new n).int32("length").itf8("refSeqId").itf8("refSeqStart").itf8("alignmentSpan").itf8("numRecords"),r=24;return t>=3?(e=e.ltf8("recordCounter"),r+=9):2===t&&(e=e.itf8("recordCounter"),r+=5),t>1&&(e=e.ltf8("numBases"),r+=9),{parser:e=e.itf8("numBlocks").itf8("numLandmarks"),maxLength:r+=10}},cramContainerHeader2:function(t){var e=(new n).itf8("numLandmarks").array("landmarks",{type:(new n).itf8(),length:"numLandmarks"}),r=0;return t>=3&&(e=e.uint32("crc32"),r=4),{parser:e,maxLength:function(t){return 5+5*t+r}}}};t.exports={cramFileDefinition:a,getSectionParsers:function(t){var e=Object.assign({},f);return Object.keys(p).forEach((function(r){e[r]=p[r](t)})),e}}},function(t,e,r){(function(t){var n=r(68),i=r(70).Context,a=r(31);"undefined"!=typeof window&&(window.Buffer=t);var o={UInt8:1,UInt16LE:2,UInt16BE:2,UInt32LE:4,UInt32BE:4,Int8:1,Int16LE:2,Int16BE:2,Int32LE:4,Int32BE:4,FloatLE:4,FloatBE:4,DoubleLE:8,DoubleBE:8},s={},h=[];!function(){var t;for(t=1;t<=32;t++)h.push(t)}();var c={};Object.keys(o).concat(Object.keys({String:null,Buffer:null,Array:null,Skip:null,Choice:null,Nest:null,Bit:null,Itf8:null,Ltf8:null})).forEach((function(t){c[t.toLowerCase()]=t}));var l=function(){this.varName="",this.type="",this.options={},this.next=null,this.head=null,this.compiled=null,this.endian="le",this.constructorFn=null,this.alias=null};l.start=function(){return new l},Object.keys(o).forEach((function(t){l.prototype[t.toLowerCase()]=function(e,r){return this.setNextParser(t.toLowerCase(),e,r)};var e=t.replace(/BE|LE/,"").toLowerCase();e in l.prototype||(l.prototype[e]=function(t,r){return this[e+this.endian](t,r)})})),h.forEach((function(t){l.prototype["bit"+t.toString()]=function(e,r){return r||(r={}),r.length=t,this.setNextParser("bit",e,r)}})),l.prototype.namely=function(t){return s[t]=this,this.alias=t,this},l.prototype.skip=function(t,e){if(e&&e.assert)throw new Error("assert option on skip is not allowed.");return this.setNextParser("skip","",{length:t})},l.prototype.string=function(t,e){if(!e.zeroTerminated&&!e.length&&!e.greedy)throw new Error("Neither length, zeroTerminated, nor greedy is defined for string.");if((e.zeroTerminated||e.length)&&e.greedy)throw new Error("greedy is mutually exclusive with length and zeroTerminated for string.");if(e.stripNull&&!e.length&&!e.greedy)throw new Error("Length or greedy must be defined if stripNull is defined.");return e.encoding=e.encoding||"utf8",this.setNextParser("string",t,e)},l.prototype.buffer=function(t,e){if(!e.length&&!e.readUntil)throw new Error("Length nor readUntil is defined in buffer parser");return this.setNextParser("buffer",t,e)},l.prototype.array=function(t,e){if(!e.readUntil&&!e.length&&!e.lengthInBytes)throw new Error("Length option of array is not defined.");if(!e.type)throw new Error("Type option of array is not defined.");if("string"==typeof e.type&&!s[e.type]&&Object.keys(o).indexOf(c[e.type])<0)throw new Error('Specified primitive type "'+e.type+'" is not supported.');return this.setNextParser("array",t,e)},l.prototype.choice=function(t,e){if(1==arguments.length&&"object"==R(t)&&(e=t,t=null),!e.tag)throw new Error("Tag option of array is not defined.");if(!e.choices)throw new Error("Choices option of array is not defined.");return Object.keys(e.choices).forEach((function(r){if(!e.choices[r])throw new Error("Choice Case "+r+" of "+t+" is not valid.");if("string"==typeof e.choices[r]&&!s[e.choices[r]]&&Object.keys(o).indexOf(c[e.choices[r]])<0)throw new Error('Specified primitive type "'+e.choices[r]+'" is not supported.')}),this),this.setNextParser("choice",t,e)},l.prototype.nest=function(t,e){if(1==arguments.length&&"object"==R(t)&&(e=t,t=null),!e.type)throw new Error("Type option of nest is not defined.");if(!(e.type instanceof l||s[e.type]))throw new Error("Type option of nest must be a Parser object.");if(!(e.type instanceof l||t))throw new Error("options.type must be a object if variable name is omitted.");return this.setNextParser("nest",t,e)},l.prototype.endianess=function(t){switch(t.toLowerCase()){case"little":this.endian="le";break;case"big":this.endian="be";break;default:throw new Error("Invalid endianess: "+t)}return this},l.prototype.create=function(t){if(!(t instanceof Function))throw new Error("Constructor must be a Function object.");return this.constructorFn=t,this},l.prototype.getCode=function(){var t=new i;return t.pushCode("if (!Buffer.isBuffer(buffer)) {"),t.generateError('"argument buffer is not a Buffer object"'),t.pushCode("}"),this.alias?this.addAliasedCode(t):this.addRawCode(t),this.alias?t.pushCode("return {0}(0)","___parser_"+this.alias):t.pushCode("return { offset: offset, result: vars };"),t.code},l.prototype.addRawCode=function(t){t.pushCode("var offset = 0;"),this.constructorFn?t.pushCode("var vars = new constructorFn();"):t.pushCode("var vars = {};"),this.generate(t),this.resolveReferences(t),t.pushCode("return { offset: offset, result: vars };")},l.prototype.addAliasedCode=function(t){return t.pushCode("function {0}(offset) {","___parser_"+this.alias),this.constructorFn?t.pushCode("var vars = new constructorFn();"):t.pushCode("var vars = {};"),this.generate(t),t.markResolved(this.alias),this.resolveReferences(t),t.pushCode("return { offset: offset, result: vars };"),t.pushCode("}"),t},l.prototype.resolveReferences=function(t){var e=t.getUnresolvedReferences();t.markRequested(e),e.forEach((function(e){s[e].addAliasedCode(t)}))},l.prototype.compile=function(){var t="(function(buffer, constructorFn, Long) { "+this.getCode()+" })";this.compiled=n.runInThisContext(t)},l.prototype.sizeOf=function(){var t=NaN;if(Object.keys(o).indexOf(this.type)>=0)t=o[this.type];else if("String"===this.type&&"number"==typeof this.options.length)t=this.options.length;else if("Buffer"===this.type&&"number"==typeof this.options.length)t=this.options.length;else if("Array"===this.type&&"number"==typeof this.options.length){var e=NaN;"string"==typeof this.options.type?e=o[c[this.options.type]]:this.options.type instanceof l&&(e=this.options.type.sizeOf()),t=this.options.length*e}else"Skip"===this.type?t=this.options.length:"Nest"===this.type?t=this.options.type.sizeOf():this.type||(t=0);return this.next&&(t+=this.next.sizeOf()),t},l.prototype.parse=function(t){return this.compiled||this.compile(),this.compiled(t,this.constructorFn,a)},l.prototype.setNextParser=function(t,e,r){var n=new l;return n.type=c[t],n.varName=e,n.options=r||n.options,n.endian=this.endian,this.head?this.head.next=n:this.next=n,this.head=n,this},l.prototype.generate=function(t){this.type&&(this["generate"+this.type](t),this.generateAssert(t));var e=t.generateVariable(this.varName);return this.options.formatter&&this.generateFormatter(t,e,this.options.formatter),this.generateNext(t)},l.prototype.generateAssert=function(t){if(this.options.assert){var e=t.generateVariable(this.varName);switch(R(this.options.assert)){case"function":t.pushCode("if (!({0}).call(vars, {1})) {",this.options.assert,e);break;case"number":t.pushCode("if ({0} !== {1}) {",this.options.assert,e);break;case"string":t.pushCode('if ("{0}" !== {1}) {',this.options.assert,e);break;default:throw new Error("Assert option supports only strings, numbers and assert functions.")}t.generateError('"Assert error: {0} is " + {0}',e),t.pushCode("}")}},l.prototype.generateNext=function(t){return this.next&&(t=this.next.generate(t)),t},Object.keys(o).forEach((function(t){l.prototype["generate"+t]=function(e){e.pushCode("{0} = buffer.read{1}(offset);",e.generateVariable(this.varName),t),e.pushCode("offset += {0};",o[t])}})),l.prototype.generateBit=function(t){var e=JSON.parse(JSON.stringify(this));if(e.varName=t.generateVariable(e.varName),t.bitFields.push(e),!this.next||this.next&&["Bit","Nest"].indexOf(this.next.type)<0){var r=0;t.bitFields.forEach((function(t){r+=t.options.length}));var n=t.generateTmpVariable();if(r<=8)t.pushCode("var {0} = buffer.readUInt8(offset);",n),r=8;else if(r<=16)t.pushCode("var {0} = buffer.readUInt16BE(offset);",n),r=16;else if(r<=24){var i=t.generateTmpVariable(),a=t.generateTmpVariable();t.pushCode("var {0} = buffer.readUInt16BE(offset);",i),t.pushCode("var {0} = buffer.readUInt8(offset + 2);",a),t.pushCode("var {2} = ({0} << 8) | {1};",i,a,n),r=24}else{if(!(r<=32))throw new Error("Currently, bit field sequence longer than 4-bytes is not supported.");t.pushCode("var {0} = buffer.readUInt32BE(offset);",n),r=32}t.pushCode("offset += {0};",r/8);var o=0,s="be"===this.endian;t.bitFields.forEach((function(e){t.pushCode("{0} = {1} >> {2} & {3};",e.varName,n,s?r-o-e.options.length:o,(1<<e.options.length)-1),o+=e.options.length})),t.bitFields=[]}},l.prototype.generateSkip=function(t){var e=t.generateOption(this.options.length);t.pushCode("offset += {0};",e)},l.prototype.generateString=function(t){var e=t.generateVariable(this.varName),r=t.generateTmpVariable();this.options.length&&this.options.zeroTerminated?(t.pushCode("var {0} = offset;",r),t.pushCode("while(buffer.readUInt8(offset++) !== 0 && offset - {0}  < {1});",r,this.options.length),t.pushCode("{0} = buffer.toString('{1}', {2}, offset - {2} < {3} ? offset - 1 : offset);",e,this.options.encoding,r,this.options.length)):this.options.length?(t.pushCode("{0} = buffer.toString('{1}', offset, offset + {2});",e,this.options.encoding,t.generateOption(this.options.length)),t.pushCode("offset += {0};",t.generateOption(this.options.length))):this.options.zeroTerminated?(t.pushCode("var {0} = offset;",r),t.pushCode("while(buffer.readUInt8(offset++) !== 0);"),t.pushCode("{0} = buffer.toString('{1}', {2}, offset - 1);",e,this.options.encoding,r)):this.options.greedy&&(t.pushCode("var {0} = offset;",r),t.pushCode("while(buffer.length > offset++);"),t.pushCode("{0} = buffer.toString('{1}', {2}, offset);",e,this.options.encoding,r)),this.options.stripNull&&t.pushCode("{0} = {0}.replace(/\\x00+$/g, '')",e)},l.prototype.generateBuffer=function(t){"eof"===this.options.readUntil?t.pushCode("{0} = buffer.slice(offset);",t.generateVariable(this.varName)):(t.pushCode("{0} = buffer.slice(offset, offset + {1});",t.generateVariable(this.varName),t.generateOption(this.options.length)),t.pushCode("offset += {0};",t.generateOption(this.options.length))),this.options.clone&&t.pushCode("{0} = Buffer.from({0});",t.generateVariable(this.varName))},l.prototype.generateArray=function(t){var e=t.generateOption(this.options.length),r=t.generateOption(this.options.lengthInBytes),n=this.options.type,i=t.generateTmpVariable(),a=t.generateVariable(this.varName),h=t.generateTmpVariable(),u=this.options.key,f="string"==typeof u;if(f?t.pushCode("{0} = {};",a):t.pushCode("{0} = [];",a),"function"==typeof this.options.readUntil?t.pushCode("do {"):"eof"===this.options.readUntil?t.pushCode("for (var {0} = 0; offset < buffer.length; {0}++) {",i):void 0!==r?t.pushCode("for (var {0} = offset; offset - {0} < {1}; ) {",i,r):t.pushCode("for (var {0} = 0; {0} < {1}; {0}++) {",i,e),"string"==typeof n)if(s[n]){var p=t.generateTmpVariable();t.pushCode("var {0} = {1}(offset);",p,"___parser_"+n),t.pushCode("var {0} = {1}.result; offset = {1}.offset;",h,p),n!==this.alias&&t.addReference(n)}else t.pushCode("var {0} = buffer.read{1}(offset);",h,c[n]),t.pushCode("offset += {0};",o[c[n]]);else n instanceof l&&(t.pushCode("var {0} = {};",h),t.pushScope(h),n.generate(t),t.popScope());f?t.pushCode("{0}[{2}.{1}] = {2};",a,u,h):t.pushCode("{0}.push({1});",a,h),t.pushCode("}"),"function"==typeof this.options.readUntil&&t.pushCode(" while (!({0}).call(this, {1}, buffer.slice(offset)));",this.options.readUntil,h)},l.prototype.generateChoiceCase=function(t,e,r){if("string"==typeof r)if(s[r]){var n=t.generateTmpVariable();t.pushCode("var {0} = {1}(offset);",n,"___parser_"+r),t.pushCode("{0} = {1}.result; offset = {1}.offset;",t.generateVariable(this.varName),n),r!==this.alias&&t.addReference(r)}else t.pushCode("{0} = buffer.read{1}(offset);",t.generateVariable(this.varName),c[r]),t.pushCode("offset += {0};",o[c[r]]);else r instanceof l&&(t.pushPath(e),r.generate(t),t.popPath(e))},l.prototype.generateChoice=function(t){var e=t.generateOption(this.options.tag);this.varName&&t.pushCode("{0} = {};",t.generateVariable(this.varName)),t.pushCode("switch({0}) {",e),Object.keys(this.options.choices).forEach((function(e){var r=this.options.choices[e];isNaN(parseInt(e,10))?t.pushCode("case '{0}':",e):t.pushCode("case {0}:",e),this.generateChoiceCase(t,this.varName,r),t.pushCode("break;")}),this),t.pushCode("default:"),this.options.defaultChoice?this.generateChoiceCase(t,this.varName,this.options.defaultChoice):t.generateError('"Met undefined tag value " + {0} + " at choice"',e),t.pushCode("}")},l.prototype.generateNest=function(t){var e=t.generateVariable(this.varName);if(this.options.type instanceof l)this.varName&&t.pushCode("{0} = {};",e),t.pushPath(this.varName),this.options.type.generate(t),t.popPath(this.varName);else if(s[this.options.type]){var r=t.generateTmpVariable();t.pushCode("var {0} = {1}(offset);",r,"___parser_"+this.options.type),t.pushCode("{0} = {1}.result; offset = {1}.offset;",e,r),this.options.type!==this.alias&&t.addReference(this.options.type)}},l.prototype.generateFormatter=function(t,e,r){"function"==typeof r&&t.pushCode("{0} = ({1}).call(this, {0});",e,r)},l.prototype.isInteger=function(){return!!this.type.match(/U?Int[8|16|32][BE|LE]?|Bit\d+/)},l.prototype.itf8=function(t,e){return this.setNextParser("itf8",t,e)},l.prototype.generateItf8=function(t){var e=t.generateVariable(this.varName),r=t.generateTmpVariable();t.pushCode("\n    var ".concat(r," = buffer[offset];\n    if (").concat(r," < 0x80) {\n      ").concat(e," = ").concat(r,";\n      offset += 1;\n    } else if (").concat(r," < 0xc0) {\n      ").concat(e," = ((").concat(r,"<<8) | buffer[offset+1]) & 0x3fff;\n      offset += 2;\n    } else if (").concat(r," < 0xe0) {\n      ").concat(e," = ((").concat(r,"<<16) | (buffer[offset+1]<< 8) |  buffer[offset+2]) & 0x1fffff;\n      offset += 3;\n    } else if (").concat(r," < 0xf0) {\n      ").concat(e," = ((").concat(r,"<<24) | (buffer[offset+1]<<16) | (buffer[offset+2]<<8) | buffer[offset+3]) & 0x0fffffff;\n      offset += 4\n    } else {\n      ").concat(e," = ((").concat(r," & 0x0f)<<28) | (buffer[offset+1]<<20) | (buffer[offset+2]<<12) | (buffer[offset+3]<<4) | (buffer[offset+4] & 0x0f);\n      // x=((0xff & 0x0f)<<28) | (0xff<<20) | (0xff<<12) | (0xff<<4) | (0x0f & 0x0f);\n      // TODO *val_p = uv < 0x80000000UL ? uv : -((int32_t) (0xffffffffUL - uv)) - 1;\n      offset += 5\n    }\n  "))},l.prototype.ltf8=function(t,e){return this.setNextParser("ltf8",t,e)},l.prototype.generateLtf8=function(t){var e=t.generateVariable(this.varName),r=t.generateTmpVariable();t.pushCode("\n  var ".concat(r," = buffer[offset];\n  if (").concat(r," < 0x80) {\n    ").concat(e," = ").concat(r,";\n    offset += 1;\n  } else if (").concat(r," < 0xc0) {\n    ").concat(e," = ((buffer[offset]<<8) | buffer[offset+1]) & 0x3fff;\n    offset += 2;\n  } else if (").concat(r," < 0xe0) {\n    ").concat(e," = ((buffer[offset]<<16) | (buffer[offset+1]<<8) | buffer[offset+2]) & 0x1fffff;\n    ").concat(e," = (((").concat(r," & 63) << 16) | buffer.readUInt16LE(offset + 1));\n    offset += 3;\n  } else if (").concat(r," < 0xf0) {\n    ").concat(e," = ((buffer[offset]<<24) | (buffer[offset+1]<<16) | (buffer[offset+2]<<8) | buffer[offset+3]) & 0x0fffffff;\n    offset += 4;\n  } else if (").concat(r," < 0xf8) {\n    ").concat(e," = (((buffer[offset] & 15) * Math.pow(2,32))) +\n      (buffer[offset+1]<<24) | (buffer[offset+2]<<16 | buffer[offset+3]<<8 | buffer[offset+4])\n    // TODO *val_p = uv < 0x80000000UL ? uv : -((int32_t) (0xffffffffUL - uv)) - 1;\n    offset += 5;\n  } else if (").concat(r," < 0xfc) {\n    ").concat(e," = ((((buffer[offset] & 7) << 8) | buffer[offset+1] )) * Math.pow(2,32) +\n      (buffer[offset+2]<<24) | (buffer[offset+3]<<16 | buffer[offset+4]<<8 | buffer[offset+5])\n    offset += 6;\n  } else if (").concat(r," < 0xfe) {\n    ").concat(e," = ((((buffer[offset] & 3) << 16) | buffer[offset+1]<<8 | buffer[offset+2])) * Math.pow(2,32) +\n      (buffer[offset+3]<<24) | (buffer[offset+4]<<16 | buffer[offset+5]<<8 | buffer[offset+6])\n    offset += 7;\n  } else if (").concat(r," < 0xff) {\n    ").concat(e," = Long.fromBytesBE(buffer.slice(offset+1,offset+8));\n    if (").concat(e,".greaterThan(Number.MAX_SAFE_INTEGER) || ").concat(e,".lessThan(Number.MIN_SAFE_INTEGER))\n      throw new Error('integer overflow')\n    ").concat(e," = ").concat(e,".toNumber()\n    offset += 8;\n  } else {\n    ").concat(e," = Long.fromBytesBE(buffer.slice(offset+1,offset+9));\n    if (").concat(e,".greaterThan(Number.MAX_SAFE_INTEGER) || ").concat(e,".lessThan(Number.MIN_SAFE_INTEGER))\n      throw new Error('integer overflow')\n    ").concat(e," = ").concat(e,".toNumber()\n    offset += 9;\n  }\n  "))},e.Parser=l}).call(this,r(1).Buffer)},function(t,e,r){var n=r(69),i=function(t){if(Object.keys)return Object.keys(t);var e=[];for(var r in t)e.push(r);return e},a=function(t,e){if(t.forEach)return t.forEach(e);for(var r=0;r<t.length;r++)e(t[r],r,t)},o=function(){try{return Object.defineProperty({},"_",{}),function(t,e,r){Object.defineProperty(t,e,{writable:!0,enumerable:!1,configurable:!0,value:r})}}catch(t){return function(t,e,r){t[e]=r}}}(),s=["Array","Boolean","Date","Error","EvalError","Function","Infinity","JSON","Math","NaN","Number","Object","RangeError","ReferenceError","RegExp","String","SyntaxError","TypeError","URIError","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","eval2","isFinite","isNaN","parseFloat","parseInt","undefined","unescape"];function h(){}h.prototype={};var c=e.Script=function(t){if(!(this instanceof c))return new c(t);this.code=t};c.prototype.runInContext=function(t){if(!(t instanceof h))throw new TypeError("needs a 'context' argument.");var e=document.createElement("iframe");e.style||(e.style={}),e.style.display="none",document.body.appendChild(e);var r=e.contentWindow,c=r.eval2,l=r.execScript;!c&&l&&(l.call(r,"null"),c=r.eval2),a(i(t),(function(e){r[e]=t[e]})),a(s,(function(e){t[e]&&(r[e]=t[e])}));var u=i(r),f=c.call(r,this.code);return a(i(r),(function(e){(e in t||-1===n(u,e))&&(t[e]=r[e])})),a(s,(function(e){e in t||o(t,e,r[e])})),document.body.removeChild(e),f},c.prototype.runInThisContext=function(){return Js(this.code)},c.prototype.runInNewContext=function(t){var e=c.createContext(t),r=this.runInContext(e);return a(i(e),(function(r){t[r]=e[r]})),r},a(i(c.prototype),(function(t){e[t]=c[t]=function(e){var r=c(e);return r[t].apply(r,[].slice.call(arguments,1))}})),e.createScript=function(t){return e.Script(t)},e.createContext=c.createContext=function(t){var e=new h;return"object"==R(t)&&a(i(t),(function(r){e[r]=t[r]})),e}},function(t,e){var r=[].indexOf;t.exports=function(t,e){if(r)return t.indexOf(e);for(var n=0;n<t.length;++n)if(t[n]===e)return n;return-1}},function(t,e){var r=function(){this.code="",this.scopes=[["vars"]],this.isAsync=!1,this.bitFields=[],this.tmpVariableCount=0,this.references={}};r.prototype.generateVariable=function(t){var e=[];for(Array.prototype.push.apply(e,this.scopes[this.scopes.length-1]);/^\$parent\./.test(t);)e.pop(),t=t.replace(/^\$parent\./,"");return t&&e.push(t),e.join(".")},r.prototype.generateOption=function(t){switch(R(t)){case"number":return t.toString();case"string":return this.generateVariable(t);case"function":return"("+t+").call("+this.generateVariable()+", vars)"}},r.prototype.generateError=function(){var t=Array.prototype.slice.call(arguments),e=r.interpolate.apply(this,t);this.isAsync?this.pushCode("return process.nextTick(function() { callback(new Error("+e+"), vars); });"):this.pushCode("throw new Error("+e+");")},r.prototype.generateTmpVariable=function(){return"$tmp"+this.tmpVariableCount++},r.prototype.pushCode=function(){var t=Array.prototype.slice.call(arguments);this.code+=r.interpolate.apply(this,t)+"\n"},r.prototype.pushPath=function(t){t&&this.scopes[this.scopes.length-1].push(t)},r.prototype.popPath=function(t){t&&this.scopes[this.scopes.length-1].pop()},r.prototype.pushScope=function(t){this.scopes.push([t])},r.prototype.popScope=function(){this.scopes.pop()},r.prototype.addReference=function(t){this.references[t]||(this.references[t]={resolved:!1,requested:!1})},r.prototype.markResolved=function(t){this.references[t].resolved=!0},r.prototype.markRequested=function(t){t.forEach(function(t){this.references[t].requested=!0}.bind(this))},r.prototype.getUnresolvedReferences=function(){var t=this.references;return Object.keys(this.references).filter((function(e){return!t[e].resolved&&!t[e].requested}))},r.interpolate=function(t){var e=t.match(/{\d+}/g),r=Array.prototype.slice.call(arguments,1);return e&&e.forEach((function(e){var n=parseInt(e.substr(1,e.length-2),10);t=t.replace(e,r[n].toString())})),t},e.Context=r},function(t,r,n){(function(r){var i=n(0).CramMalformedError,a=n(8),o=a.itf8Size,s=a.parseItem,h=a.tinyMemoize,c=n(75),l=n(78),u=function(){function t(e,r){M(this,t),this.file=e,this.filePosition=r}var n,a,h,u;return D(t,[{key:"getHeader",value:function(){return this._readContainerHeader(this.filePosition)}},{key:"getCompressionHeaderBlock",value:(u=I(e.mark((function t(){var r,n,a;return e.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getHeader();case 2:if(t.sent.numRecords){t.next=4;break}return t.abrupt("return",null);case 4:return t.next=6,this.file.getSectionParsers();case 6:return r=t.sent,t.next=9,this.getFirstBlock();case 9:if("COMPRESSION_HEADER"===(n=t.sent).contentType){t.next=12;break}throw new i("invalid content type ".concat(n.contentType," in what is supposed to be the compression header block"));case 12:return a=s(n.content,r.cramCompressionHeader.parser,0,n.contentPosition),t.abrupt("return",(n.content=a,n));case 14:case"end":return t.stop()}}),t,this)}))),function(){return u.apply(this,arguments)})},{key:"getFirstBlock",value:(h=I(e.mark((function t(){var r;return e.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getHeader();case 2:return r=t.sent,t.abrupt("return",this.file.readBlock(r._endPosition));case 4:case"end":return t.stop()}}),t,this)}))),function(){return h.apply(this,arguments)})},{key:"getCompressionScheme",value:(a=I(e.mark((function t(){var r;return e.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getCompressionHeaderBlock();case 2:if(!(r=t.sent)){t.next=5;break}return t.abrupt("return",new l(r.content));case 5:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)})},{key:"getSlice",value:function(t,e){return new c(this,t,e)}},{key:"_readContainerHeader",value:(n=I(e.mark((function t(n){var i,a,h,c,l,u,f,p,d,g;return e.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.file.getSectionParsers();case 2:return i=t.sent,a=i.cramContainerHeader1,h=i.cramContainerHeader2,t.next=7,this.file.stat();case 7:if(c=t.sent,l=c.size,!(n>=l)){t.next=11;break}return t.abrupt("return");case 11:return u=r.allocUnsafe(a.maxLength),t.next=14,this.file.read(u,0,a.maxLength,n);case 14:if(f=s(u,a.parser),p=o(f.numLandmarks),!(n+f.length>=l)){t.next=17;break}return t.abrupt("return",void console.warn("".concat(this.file,": container header at ").concat(n," indicates that the container has length ").concat(f.length,", which extends beyond the length of the file. Skipping this container.")));case 17:return d=r.allocUnsafe(h.maxLength(f.numLandmarks)),t.next=20,this.file.read(d,0,h.maxLength(f.numLandmarks),n+f._size-p);case 20:if(g=s(d,h.parser),t.t0=this.file.validateChecksums&&void 0!==g.crc32,!t.t0){t.next=25;break}return t.next=25,this.file.checkCrc32(n,f._size+g._size-p-4,g.crc32,"container header beginning at position ".concat(n));case 25:return t.abrupt("return",Object.assign(f,g,{_size:f._size+g._size-p,_endPosition:f._size+g._size-p+n}));case 26:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})}]),t}();"getHeader getCompressionHeaderBlock getCompressionScheme".split(" ").forEach((function(t){return h(u,t)})),t.exports=u}).call(this,n(1).Buffer)},function(t,e,r){var n,i,a,o,s;n=r(73),i=r(32).utf8,a=r(74),o=r(32).bin,(s=function(t,e){t.constructor==String?t=e&&"binary"===e.encoding?o.stringToBytes(t):i.stringToBytes(t):a(t)?t=Array.prototype.slice.call(t,0):Array.isArray(t)||(t=t.toString());for(var r=n.bytesToWords(t),h=8*t.length,c=1732584193,l=-271733879,u=-1732584194,f=271733878,p=0;p<r.length;p++)r[p]=16711935&(r[p]<<8|r[p]>>>24)|4278255360&(r[p]<<24|r[p]>>>8);r[h>>>5]|=128<<h%32,r[14+(h+64>>>9<<4)]=h;var d=s._ff,g=s._gg,m=s._hh,v=s._ii;for(p=0;p<r.length;p+=16){var b=c,y=l,w=u,x=f;c=d(c,l,u,f,r[p+0],7,-680876936),f=d(f,c,l,u,r[p+1],12,-389564586),u=d(u,f,c,l,r[p+2],17,606105819),l=d(l,u,f,c,r[p+3],22,-1044525330),c=d(c,l,u,f,r[p+4],7,-176418897),f=d(f,c,l,u,r[p+5],12,1200080426),u=d(u,f,c,l,r[p+6],17,-1473231341),l=d(l,u,f,c,r[p+7],22,-45705983),c=d(c,l,u,f,r[p+8],7,1770035416),f=d(f,c,l,u,r[p+9],12,-1958414417),u=d(u,f,c,l,r[p+10],17,-42063),l=d(l,u,f,c,r[p+11],22,-1990404162),c=d(c,l,u,f,r[p+12],7,1804603682),f=d(f,c,l,u,r[p+13],12,-40341101),u=d(u,f,c,l,r[p+14],17,-1502002290),c=g(c,l=d(l,u,f,c,r[p+15],22,1236535329),u,f,r[p+1],5,-165796510),f=g(f,c,l,u,r[p+6],9,-1069501632),u=g(u,f,c,l,r[p+11],14,643717713),l=g(l,u,f,c,r[p+0],20,-373897302),c=g(c,l,u,f,r[p+5],5,-701558691),f=g(f,c,l,u,r[p+10],9,38016083),u=g(u,f,c,l,r[p+15],14,-660478335),l=g(l,u,f,c,r[p+4],20,-405537848),c=g(c,l,u,f,r[p+9],5,568446438),f=g(f,c,l,u,r[p+14],9,-1019803690),u=g(u,f,c,l,r[p+3],14,-187363961),l=g(l,u,f,c,r[p+8],20,1163531501),c=g(c,l,u,f,r[p+13],5,-1444681467),f=g(f,c,l,u,r[p+2],9,-51403784),u=g(u,f,c,l,r[p+7],14,1735328473),c=m(c,l=g(l,u,f,c,r[p+12],20,-1926607734),u,f,r[p+5],4,-378558),f=m(f,c,l,u,r[p+8],11,-2022574463),u=m(u,f,c,l,r[p+11],16,1839030562),l=m(l,u,f,c,r[p+14],23,-35309556),c=m(c,l,u,f,r[p+1],4,-1530992060),f=m(f,c,l,u,r[p+4],11,1272893353),u=m(u,f,c,l,r[p+7],16,-155497632),l=m(l,u,f,c,r[p+10],23,-1094730640),c=m(c,l,u,f,r[p+13],4,681279174),f=m(f,c,l,u,r[p+0],11,-358537222),u=m(u,f,c,l,r[p+3],16,-722521979),l=m(l,u,f,c,r[p+6],23,76029189),c=m(c,l,u,f,r[p+9],4,-640364487),f=m(f,c,l,u,r[p+12],11,-421815835),u=m(u,f,c,l,r[p+15],16,530742520),c=v(c,l=m(l,u,f,c,r[p+2],23,-995338651),u,f,r[p+0],6,-198630844),f=v(f,c,l,u,r[p+7],10,1126891415),u=v(u,f,c,l,r[p+14],15,-1416354905),l=v(l,u,f,c,r[p+5],21,-57434055),c=v(c,l,u,f,r[p+12],6,1700485571),f=v(f,c,l,u,r[p+3],10,-1894986606),u=v(u,f,c,l,r[p+10],15,-1051523),l=v(l,u,f,c,r[p+1],21,-2054922799),c=v(c,l,u,f,r[p+8],6,1873313359),f=v(f,c,l,u,r[p+15],10,-30611744),u=v(u,f,c,l,r[p+6],15,-1560198380),l=v(l,u,f,c,r[p+13],21,1309151649),c=v(c,l,u,f,r[p+4],6,-145523070),f=v(f,c,l,u,r[p+11],10,-1120210379),u=v(u,f,c,l,r[p+2],15,718787259),l=v(l,u,f,c,r[p+9],21,-343485551),c=c+b>>>0,l=l+y>>>0,u=u+w>>>0,f=f+x>>>0}return n.endian([c,l,u,f])})._ff=function(t,e,r,n,i,a,o){var s=t+(e&r|~e&n)+(i>>>0)+o;return(s<<a|s>>>32-a)+e},s._gg=function(t,e,r,n,i,a,o){var s=t+(e&n|r&~n)+(i>>>0)+o;return(s<<a|s>>>32-a)+e},s._hh=function(t,e,r,n,i,a,o){var s=t+(e^r^n)+(i>>>0)+o;return(s<<a|s>>>32-a)+e},s._ii=function(t,e,r,n,i,a,o){var s=t+(r^(e|~n))+(i>>>0)+o;return(s<<a|s>>>32-a)+e},s._blocksize=16,s._digestsize=16,t.exports=function(t,e){if(null==t)throw new Error("Illegal argument "+t);var r=n.wordsToBytes(s(t,e));return e&&e.asBytes?r:e&&e.asString?o.bytesToString(r):n.bytesToHex(r)}},function(t,e){var r,n;r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n={rotl:function(t,e){return t<<e|t>>>32-e},rotr:function(t,e){return t<<32-e|t>>>e},endian:function(t){if(t.constructor==Number)return 16711935&n.rotl(t,8)|4278255360&n.rotl(t,24);for(var e=0;e<t.length;e++)t[e]=n.endian(t[e]);return t},randomBytes:function(t){for(var e=[];t>0;t--)e.push(Math.floor(256*Math.random()));return e},bytesToWords:function(t){for(var e=[],r=0,n=0;r<t.length;r++,n+=8)e[n>>>5]|=t[r]<<24-n%32;return e},wordsToBytes:function(t){for(var e=[],r=0;r<32*t.length;r+=8)e.push(t[r>>>5]>>>24-r%32&255);return e},bytesToHex:function(t){for(var e=[],r=0;r<t.length;r++)e.push((t[r]>>>4).toString(16)),e.push((15&t[r]).toString(16));return e.join("")},hexToBytes:function(t){for(var e=[],r=0;r<t.length;r+=2)e.push(parseInt(t.substr(r,2),16));return e},bytesToBase64:function(t){for(var e=[],n=0;n<t.length;n+=3)for(var i=t[n]<<16|t[n+1]<<8|t[n+2],a=0;a<4;a++)8*n+6*a<=8*t.length?e.push(r.charAt(i>>>6*(3-a)&63)):e.push("=");return e.join("")},base64ToBytes:function(t){t=t.replace(/[^A-Z0-9+\/]/gi,"");for(var e=[],n=0,i=0;n<t.length;i=++n%4)0!=i&&e.push((r.indexOf(t.charAt(n-1))&Math.pow(2,-2*i+8)-1)<<2*i|r.indexOf(t.charAt(n))>>>6-2*i);return e}},t.exports=n},function(t,e){function r(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}t.exports=function(t){return null!=t&&(r(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&r(t.slice(0,0))}(t)||!!t._isBuffer)}},function(t,r,n){var i=n(0),a=i.CramMalformedError,o=i.CramBufferOverrunError,s=i.CramArgumentError,h=n(8),c=h.parseItem,l=h.tinyMemoize,u=h.sequenceMD5,f=n(17),p=n(76);function d(t,e,r,n){if(!n)throw new a("could not resolve intra-slice mate pairs, file seems truncated or malformed");var i=!!(n.mate||void 0!==n.mateRecordNumber&&n.mateRecordNumber!==e);r.readName||(r.readName=String(r.uniqueId),n.readName=r.readName),r.mate={sequenceId:n.sequenceId,alignmentStart:n.alignmentStart,uniqueId:n.uniqueId},n.readName&&(r.mate.readName=n.readName),n.mate||void 0!==n.mateRecordNumber||(n.mate={sequenceId:r.sequenceId,alignmentStart:r.alignmentStart,uniqueId:r.uniqueId},r.readName&&(n.mate.readName=r.readName)),r.flags|=f.BAM_FPAIRED,n.flags&f.BAM_FUNMAP&&(r.flags|=f.BAM_FMUNMAP),r.flags&f.BAM_FUNMAP&&(n.flags|=f.BAM_FMUNMAP),n.flags&f.BAM_FREVERSE&&(r.flags|=f.BAM_FMREVERSE),r.flags&f.BAM_FREVERSE&&(n.flags|=f.BAM_FMREVERSE),void 0===r.templateLength&&(i?function(t,e,r){var n=function e(r){var n=[r];if(r.mateRecordNumber>=0){var i=t[r.mateRecordNumber];if(!i)throw new a("intra-slice mate record not found, this file seems malformed");n.push.apply(n,$(e(i)))}return n}(r),i=n.map((function(t){return t.alignmentStart})),o=n.map((function(t){return t.alignmentStart+t.readLength-1})),s=Math.max.apply(Math,$(o))-Math.min.apply(Math,$(i))+1;s>=0&&n.forEach((function(t){if(void 0!==t.templateLength)throw new a("mate pair group has some members that have template lengths already, this file seems malformed");t.templateLength=s}))}(t,0,r):function(t,e){var r=Math.min(t.alignmentStart,e.alignmentStart),n=Math.max(t.alignmentStart+t.readLength-1,e.alignmentStart+e.readLength-1)-r+1;t.templateLength=n,e.templateLength=n}(r,n)),delete r.mateRecordNumber}var g=function(){function t(e,r){M(this,t),this.container=e,this.file=e.file,this.containerPosition=r}var r,n,i,h,l,f,g;return D(t,[{key:"getHeader",value:function(){var t=I(e.mark((function t(){var r,n,i;return e.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.file.getSectionParsers();case 2:return r=t.sent,t.next=5,this.container.getHeader();case 5:return n=t.sent,t.next=8,this.file.readBlock(n._endPosition+this.containerPosition);case 8:if("MAPPED_SLICE_HEADER"!==(i=t.sent).contentType){t.next=13;break}i.content=c(i.content,r.cramMappedSliceHeader.parser,0,n._endPosition),t.next=16;break;case 13:if("UNMAPPED_SLICE_HEADER"===i.contentType){t.next=15;break}throw new a("error reading slice header block, invalid content type ".concat(i._contentType));case 15:i.content=c(i.content,r.cramUnmappedSliceHeader.parser,0,n._endPosition);case 16:return t.abrupt("return",i);case 17:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"getBlocks",value:(g=I(e.mark((function t(){var r,n,i,a;return e.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getHeader();case 2:r=t.sent,n=r._endPosition,i=new Array(r.content.numBlocks),a=0;case 6:if(!(a<i.length)){t.next=14;break}return t.next=9,this.file.readBlock(n);case 9:i[a]=t.sent,n=i[a]._endPosition;case 11:a+=1,t.next=6;break;case 14:return t.abrupt("return",i);case 15:case"end":return t.stop()}}),t,this)}))),function(){return g.apply(this,arguments)})},{key:"getCoreDataBlock",value:(f=I(e.mark((function t(){return e.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getBlocks();case 2:return t.abrupt("return",t.sent[0]);case 3:case"end":return t.stop()}}),t,this)}))),function(){return f.apply(this,arguments)})},{key:"_getBlocksContentIdIndex",value:(l=I(e.mark((function t(){var r,n;return e.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getBlocks();case 2:return r=t.sent,n={},t.abrupt("return",(r.forEach((function(t){"EXTERNAL_DATA"===t.contentType&&(n[t.contentId]=t)})),n));case 5:case"end":return t.stop()}}),t,this)}))),function(){return l.apply(this,arguments)})},{key:"getBlockByContentId",value:(h=I(e.mark((function t(r){return e.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._getBlocksContentIdIndex();case 2:return t.t0=r,t.abrupt("return",t.sent[t.t0]);case 4:case"end":return t.stop()}}),t,this)}))),function(t){return h.apply(this,arguments)})},{key:"getReferenceRegion",value:(i=I(e.mark((function t(){var r,n,i,o;return e.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getHeader();case 2:if(!((r=t.sent.content).refSeqId<0)){t.next=5;break}return t.abrupt("return");case 5:return t.next=7,this.container.getCompressionScheme();case 7:if(n=t.sent,!(r.refBaseBlockId>=0)){t.next=15;break}if(i=this.getBlockByContentId(r.refBaseBlockId)){t.next=12;break}throw new a("embedded reference specified, but reference block does not exist");case 12:if(!(r.span>i.uncompressedSize)){t.next=14;break}throw new a("Embedded reference is too small");case 14:return t.abrupt("return",{seq:i.data.toString("utf8"),start:r.refSeqStart,end:r.refSeqStart+r.refSeqSpan-1,span:r.refSeqSpan});case 15:if(!n.referenceRequired&&!this.file.fetchReferenceSequenceCallback){t.next=24;break}if(this.file.fetchReferenceSequenceCallback){t.next=18;break}throw new Error("reference sequence not embedded, and seqFetch callback not provided, cannot fetch reference sequence");case 18:return t.next=20,this.file.fetchReferenceSequenceCallback(r.refSeqId,r.refSeqStart,r.refSeqStart+r.refSeqSpan-1);case 20:if((o=t.sent).length===r.refSeqSpan){t.next=23;break}throw new s("seqFetch callback returned a reference sequence of the wrong length");case 23:return t.abrupt("return",{seq:o,start:r.refSeqStart,end:r.refSeqStart+r.refSeqSpan-1,span:r.refSeqSpan});case 24:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"getAllRecords",value:function(){return this.getRecords((function(){return!0}))}},{key:"_fetchRecords",value:(n=I(e.mark((function t(){var r,n,i,s,h,c,l,f,g,m,v,b,y,w,x,k,S,_,C=this;return e.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.file.getDefinition();case 2:return r=t.sent,n=r.majorVersion,t.next=6,this.container.getCompressionScheme();case 6:return i=t.sent,t.next=9,this.getHeader();case 9:return s=t.sent,t.next=12,this._getBlocksContentIdIndex();case 12:if(h=t.sent,!(n>1&&this.file.options.checkSequenceMD5&&s.content.refSeqId>=0&&"0000000000000000"!==s.content.md5.join(""))){t.next=21;break}return t.next=16,this.getReferenceRegion();case 16:if(!(c=t.sent)){t.next=21;break}if(l=c.seq,f=c.start,g=c.end,m=u(l),v=s.content.md5.map((function(t){return(t<16?"0":"")+t.toString(16)})).join(""),m===v){t.next=21;break}throw new a("MD5 checksum reference mismatch for ref ".concat(s.content.refSeqId," pos ").concat(f,"..").concat(g,". recorded MD5: ").concat(v,", calculated MD5: ").concat(m));case 21:return t.next=23,this.getCoreDataBlock();case 23:b=t.sent,y={lastAlignmentStart:s.content.refSeqStart||0,coreBlock:{bitPosition:7,bytePosition:0},externalBlocks:{getCursor:function(t){return this[t]||(this[t]={bitPosition:7,bytePosition:0}),this[t]}}},w=function(t){var e=i.getCodecForDataSeries(t);if(!e)throw new a("no codec defined for ".concat(t," data series"));return e.decode(C,b,h,y)},x=new Array(s.content.numRecords),k=0;case 28:if(!(k<x.length)){t.next=42;break}t.prev=29,x[k]=p(this,w,i,s,b,h,y,n,k),x[k].uniqueId=s.contentPosition+s.content.recordCounter+k+1,t.next=39;break;case 33:if(t.prev=33,t.t0=t.catch(29),!(t.t0 instanceof o)){t.next=38;break}return console.warn("read attempted beyond end of buffer, file seems truncated."),x=x.filter((function(t){return!!t})),t.abrupt("break",42);case 38:throw t.t0;case 39:k+=1,t.next=28;break;case 42:for(S=0;S<x.length;S+=1)(_=x[S].mateRecordNumber)>=0&&d(x,S,x[S],x[_]);return t.abrupt("return",x);case 44:case"end":return t.stop()}}),t,this,[[29,33]])}))),function(){return n.apply(this,arguments)})},{key:"getRecords",value:(r=I(e.mark((function t(r){var n,i,a,o,s,h,c,l,u,f,p,d,g,m=this;return e.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.container.filePosition+this.containerPosition,(i=this.file.featureCache.get(n))||(i=this._fetchRecords(),this.file.featureCache.set(n,i)),t.next=5,i;case 5:if(t.t0=r,!(a=t.sent.filter(t.t0)).length||!this.file.fetchReferenceSequenceCallback){t.next=21;break}return t.next=10,this.getHeader();case 10:if(!((o=t.sent).content.refSeqId>=0||-2===o.content.refSeqId)){t.next=21;break}return s=o.content.refSeqId>=0?o.content.refSeqId:void 0,t.next=15,this.container.getCompressionScheme();case 15:for(h=t.sent,c={},l=0;l<a.length;l+=1)u=void 0!==s?s:a[l].sequenceId,(f=c[u])||(f={id:u,start:a[l].alignmentStart,end:-1/0},c[u]=f),(p=a[l].alignmentStart+(a[l].lengthOnRef||a[l].readLength)-1)>f.end&&(f.end=p),a[l].alignmentStart<f.start&&(f.start=a[l].alignmentStart);return t.next=20,Promise.all(Object.values(c).map(function(){var t=I(e.mark((function t(r){return e.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=-1!==r.id&&r.start<=r.end,!t.t0){t.next=5;break}return t.next=4,m.file.fetchReferenceSequenceCallback(r.id,r.start,r.end);case 4:r.seq=t.sent;case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 20:for(d=0;d<a.length;d+=1)(g=c[void 0!==s?s:a[d].sequenceId])&&g.seq&&a[d].addReferenceSequence(g,h);case 21:return t.abrupt("return",a);case 22:case"end":return t.stop()}}),t,this)}))),function(t){return r.apply(this,arguments)})}]),t}();"getHeader getBlocks _getBlocksContentIdIndex".split(" ").forEach((function(t){return l(g,t)})),t.exports=g},function(t,e,r){(function(e){var n=r(0),i=n.CramMalformedError,a=n.CramUnimplementedError,o=r(31),s=r(77),h=r(17);function c(t){var e=t.indexOf(0);return-1===e?t.toString("utf8"):t.toString("utf8",0,e)}function l(t,r){if(r.readInt32LE||(r=e.from(r)),"Z"===t)return c(r);if("A"===t)return String.fromCharCode(r[0]);if("I"===t){var n=o.fromBytesLE(r);if(n.greaterThan(Number.MAX_SAFE_INTEGER)||n.lessThan(Number.MIN_SAFE_INTEGER))throw new a("integer overflow");return n.toNumber()}if("i"===t)return r.readInt32LE(0);if("s"===t)return r.readInt16LE(0);if("S"===t)return r.readUInt16LE(0);if("c"===t)return r.readInt8(0);if("C"===t)return r.readUInt8(0);if("f"===t)return r.readFloatLE(0);if("H"===t){var s=c(r);return Number.parseInt(s.replace(/^0x/,""),16)}if("B"===t)return function(t){var e=String.fromCharCode(t[0]),r=t.readInt32LE(1),n={c:["readInt8",1],C:["readUInt8",1],s:["readInt16LE",2],S:["readUInt16LE",2],i:["readInt32LE",4],I:["readUInt32LE",4],f:["readFloatLE",4]}[e];if(!n)throw new i("invalid tag value array type '".concat(e,"'"));for(var a=H(n,2),o=a[0],s=a[1],h=new Array(r),c=5,l=0;l<r;l+=1)h[l]=t[o](c),c+=s;return h}(r);throw new i("Unrecognized tag type ".concat(t))}function u(t){if(t instanceof e)return c(t);if(t.length&&t.indexOf){if(!t[t.length-1]){var r=t.indexOf(0);return String.fromCharCode.apply(String,$(t.slice(0,r)))}return String.fromCharCode.apply(String,$(t))}return String(t)}t.exports=function(t,e,r,n,a,o,c,f,p){var d=new s;if(d.flags=e("BF"),d.cramFlags=e("CF"),f>1&&-2===n.content.refSeqId?d.sequenceId=e("RI"):d.sequenceId=n.content.refSeqId,d.readLength=e("RL"),d.alignmentStart=e("AP"),r.APdelta&&(d.alignmentStart+=c.lastAlignmentStart),c.lastAlignmentStart=d.alignmentStart,d.readGroupId=e("RG"),r.readNamesIncluded&&(d.readName=u(e("RN"))),d.isDetached()){var g={};g.flags=e("MF"),r.readNamesIncluded||(g.readName=u(e("RN")),d.readName=g.readName),g.sequenceId=e("NS"),g.alignmentStart=e("NP"),(g.flags||g.sequenceId>-1)&&(d.mate=g),d.templateSize=e("TS"),g.flags&h.CRAM_M_UNMAP&&(d.flags|=h.BAM_FMUNMAP),g.flags&h.CRAM_M_REVERSE&&(d.flags|=h.BAM_FMREVERSE)}else d.hasMateDownStream()&&(d.mateRecordNumber=e("NF")+p+1);var m=e("TL");if(m<0)throw new i("invalid TL index");for(var v=r.getTagNames(m),b=v.length,y=0;y<b;y+=1){var w=v[y],x=w.substr(0,2),k=w.substr(2,1),S=r.getCodecForTag(w);if(!S)throw new i("no codec defined for auxiliary tag ".concat(w));var _=S.decode(t,a,o,c);d.tags[x]=l(k,_)}if(d.isSegmentUnmapped())if(d.isUnknownBases())d.readBases=null,d.qualityScores=null;else{for(var C=new Array(d.readLength),E=0;E<C.length;E+=1)C[E]=e("BA");if(d.readBases=String.fromCharCode.apply(String,C),d.isPreservingQualityScores()){for(var A=0;A<C.length;A+=1)C[A]=e("QS");d.qualityScores=C}}else{var T=e("FN");T&&(d.readFeatures=function(t,e,r,n,a){var o=0,s=t.alignmentStart-1,h=new Array(e);function c(t){var e=H(t,2),n=e[0],i=e[1],a=r(i);return"character"===n?String.fromCharCode(a):"string"===n?a.toString("utf8"):"numArray"===n?a.toArray():a}for(var l=0;l<e;l+=1){var u=String.fromCharCode(r("FC")),f=r("FP"),p={code:u},d={B:["character","BA"],S:["string",a>1?"SC":"IN"],X:["number","BS"],D:["number","DL"],I:["string","IN"],i:["character","BA"],b:["string","BB"],q:["numArray","QQ"],Q:["number","QS"],H:["number","HC"],P:["number","PD"],N:["number","RS"]}[u];if(!d)throw new i('invalid read feature code "'.concat(u,'"'));p.data=c(d);var g={B:["number","QS"]}[u];g&&(p.data=[p.data,c(g)]),o+=f,p.pos=o,s+=f,p.refPos=s,"D"===u||"N"===u?s+=p.data:"H"===u?s-=p.data:"I"===u||"S"===u?s-=p.data.length:"i"===u&&(s-=1),h[l]=p}return h}(d,T,e,0,f));var R=d.readLength;if(d.readFeatures&&d.readFeatures.forEach((function(t){var e=t.code,r=t.data;"D"===e||"N"===e?R+=r:"I"===e||"S"===e?R-=r.length:"i"===e&&(R-=1)})),Number.isNaN(R)&&(console.warn("".concat(d.readName||"".concat(d.sequenceId,":").concat(d.alignmentStart)," record has invalid read features")),R=d.readLength),d.lengthOnRef=R,d.mappingQuality=e("MQ"),d.isPreservingQualityScores()){for(var L=new Array(d.readLength),I=0;I<L.length;I+=1)L[I]=e("QS");d.qualityScores=L}}return d}}).call(this,r(1).Buffer)},function(t,e,r){var n=r(17),i={a:0,A:0,c:1,C:1,g:2,G:2,t:3,T:3,n:4,N:4};t.exports=function(){function t(){M(this,t),this.tags={}}return D(t,[{key:"isPaired",value:function(){return!!(this.flags&n.BAM_FPAIRED)}},{key:"isProperlyPaired",value:function(){return!!(this.flags&n.BAM_FPROPER_PAIR)}},{key:"isSegmentUnmapped",value:function(){return!!(this.flags&n.BAM_FUNMAP)}},{key:"isMateUnmapped",value:function(){return!!(this.flags&n.BAM_FMUNMAP)}},{key:"isReverseComplemented",value:function(){return!!(this.flags&n.BAM_FREVERSE)}},{key:"isMateReverseComplemented",value:function(){return!!(this.flags&n.BAM_FMREVERSE)}},{key:"isRead1",value:function(){return!!(this.flags&n.BAM_FREAD1)}},{key:"isRead2",value:function(){return!!(this.flags&n.BAM_FREAD2)}},{key:"isSecondary",value:function(){return!!(this.flags&n.BAM_FSECONDARY)}},{key:"isFailedQc",value:function(){return!!(this.flags&n.BAM_FQCFAIL)}},{key:"isDuplicate",value:function(){return!!(this.flags&n.BAM_FDUP)}},{key:"isSupplementary",value:function(){return!!(this.flags&n.BAM_FSUPPLEMENTARY)}},{key:"isDetached",value:function(){return!!(this.cramFlags&n.CRAM_FLAG_DETACHED)}},{key:"hasMateDownStream",value:function(){return!!(this.cramFlags&n.CRAM_FLAG_MATE_DOWNSTREAM)}},{key:"isPreservingQualityScores",value:function(){return!!(this.cramFlags&n.CRAM_FLAG_PRESERVE_QUAL_SCORES)}},{key:"isUnknownBases",value:function(){return!!(this.cramFlags&n.CRAM_FLAG_NO_SEQ)}},{key:"getReadBases",value:function(){return!this.readBases&&this._refRegion&&(this.readBases=function(t,e){if((t.lengthOnRef||t.readLength)&&!t.isUnknownBases()){var r=t.alignmentStart-e.start;if(!t.readFeatures)return e.seq.substr(r,t.lengthOnRef).toUpperCase();for(var n="",i=r,a=0;n.length<t.readLength;)if(a<t.readFeatures.length&&t.readFeatures[a].pos===n.length+1){var o=t.readFeatures[a];a+=1,"b"===o.code?(n+=o.data,i+=1):"B"===o.code?(n+=o.data[0],i+=1):"X"===o.code?(n+=o.sub,i+=1):"I"===o.code?n+=o.data:"D"===o.code?i+=o.data:"i"===o.code?n+=o.data:"N"===o.code?i+=o.data:"S"===o.code?n+=o.data:"P"===o.code||o.code}else if(a<t.readFeatures.length){var s=e.seq.substr(i,t.readFeatures[a].pos-n.length-1);n+=s,i+=s.length}else{var h=e.seq.substr(i,t.readLength-n.length);n+=h,i+=h.length}return n.toUpperCase()}}(this,this._refRegion)),this.readBases}},{key:"getPairOrientation",value:function(){if(!this.isSegmentUnmapped()&&this.isPaired()&&!this.isMateUnmapped()&&this.sequenceId===this.mate.sequenceId){var t=this.isReverseComplemented()?"R":"F",e=this.isMateReverseComplemented()?"R":"F",r=" ",n=" ";this.isRead1()?(r="1",n="2"):this.isRead2()&&(r="2",n="1");var i=[],a=this.templateLength||this.templateSize;return this.alignmentStart>this.mate.alignmentStart&&a>0&&(a=-a),a>0?(i[0]=t,i[1]=r,i[2]=e,i[3]=n):(i[2]=t,i[3]=r,i[0]=e,i[1]=n),i.join("")}return null}},{key:"addReferenceSequence",value:function(t,e){this.readFeatures&&this.readFeatures.forEach((function(r){"X"===r.code&&function(t,e,r,n){if(e){var a=n.refPos-e.start,o=e.seq.charAt(a);o&&(n.ref=o);var s=i[o];void 0===s&&(s=4);var h=r.substitutionMatrix[s][n.data];h&&(n.sub=h)}}(0,t,e,r)})),!this.readBases&&t.start<=this.alignmentStart&&t.end>=this.alignmentStart+(this.lengthOnRef||this.readLength)-1&&(this._refRegion=t)}},{key:"toJSON",value:function(){var t=this,e={};return Object.keys(this).forEach((function(r){"_"!==r.charAt(0)&&(e[r]=t[r])})),e.readBases=this.getReadBases(),e}}]),t}()},function(t,e,r){var n=r(0).CramMalformedError,i=r(79).instantiateCodec,a={BF:"int",CF:"int",RI:"int",RL:"int",AP:"int",RG:"int",MF:"int",NS:"int",NP:"int",TS:"int",NF:"int",TC:"byte",TN:"int",FN:"int",FC:"byte",FP:"int",BS:"byte",IN:"byteArray",SC:"byteArray",DL:"int",BA:"byte",BB:"byteArray",RS:"int",PD:"int",HC:"int",MQ:"int",RN:"byteArray",QS:"byte",QQ:"byteArray",TL:"int",TM:"ignore",TV:"ignore"};t.exports=function(){function t(e){M(this,t),Object.assign(this,e),this.readNamesIncluded=e.preservation.RN,this.APdelta=e.preservation.AP,this.referenceRequired=!!e.preservation.RR,this.tagIdsDictionary=e.preservation.TD,this.substitutionMatrix=function(t){for(var e=new Array(5),r=0;r<5;r+=1)e[r]=new Array(4);return e[0][t[0]>>6&3]="C",e[0][t[0]>>4&3]="G",e[0][t[0]>>2&3]="T",e[0][t[0]>>0&3]="N",e[1][t[1]>>6&3]="A",e[1][t[1]>>4&3]="G",e[1][t[1]>>2&3]="T",e[1][t[1]>>0&3]="N",e[2][t[2]>>6&3]="A",e[2][t[2]>>4&3]="C",e[2][t[2]>>2&3]="T",e[2][t[2]>>0&3]="N",e[3][t[3]>>6&3]="A",e[3][t[3]>>4&3]="C",e[3][t[3]>>2&3]="G",e[3][t[3]>>0&3]="N",e[4][t[4]>>6&3]="A",e[4][t[4]>>4&3]="C",e[4][t[4]>>2&3]="G",e[4][t[4]>>0&3]="T",e}(e.preservation.SM),this.dataSeriesCodecCache={},this.tagCodecCache={}}return D(t,[{key:"getCodecForTag",value:function(t){if(!this.tagCodecCache[t]){var e=this.tagEncoding[t];e&&(this.tagCodecCache[t]=i(e,"byteArray"))}return this.tagCodecCache[t]}},{key:"getTagNames",value:function(t){return this.tagIdsDictionary[t]}},{key:"getCodecForDataSeries",value:function(t){if(!this.dataSeriesCodecCache[t]){var e=this.dataSeriesEncoding[t];if(e){var r=a[t];if(!r)throw new n("data series name ".concat(t," not defined in file compression header"));this.dataSeriesCodecCache[t]=i(e,r)}}return this.dataSeriesCodecCache[t]}},{key:"toJSON",value:function(){var t=this,e={};return Object.keys(this).forEach((function(r){/Cache$/.test(r)||(e[r]=t[r])})),e}}]),t}()},function(t,e,r){var n=r(0).CramUnimplementedError,i=r(80),a=r(81),o=r(82),s=r(83),h=r(84),c=r(85),l={1:a,3:i,4:s,5:o,6:h,7:r(86),9:c};function u(t){return l[t]}t.exports={getCodecClassWithId:u,instantiateCodec:function t(e,r){var i=u("ignore"===r?0:e.codecId);if(!i)throw new n("no codec implemented for codec ID ".concat(e.codecId));return new i(e.parameters,r,t)}}},function(e,r,n){var i=n(0).CramMalformedError,a=n(6);e.exports=function(e){function r(){var e,n=arguments.length>0&&arguments[0]!==t?arguments[0]:{},i=arguments.length>1?arguments[1]:t;if(M(this,r),e=U(this,N(r).call(this,n,i)),!["byte","int"].includes(e.dataType))throw new TypeError("".concat(e.dataType," decoding not yet implemented by HUFFMAN_INT codec"));return e.buildCodeBook(),e.buildCodes(),e.buildCaches(),0===e.sortedCodes[0].bitLength&&(e._decode=e._decodeZeroLengthCode),U(e)}return F(r,e),D(r,[{key:"buildCodeBook",value:function(){for(var t=this,e=new Array(this.parameters.numCodes),r=0;r<this.parameters.numCodes;r+=1)e[r]={symbol:this.parameters.symbols[r],bitLength:this.parameters.bitLengths[r]};e=e.sort((function(t,e){return t.bitLength-e.bitLength||t.symbol-e.symbol})),this.codeBook={},e.forEach((function(e){t.codeBook[e.bitLength]||(t.codeBook[e.bitLength]=[]),t.codeBook[e.bitLength].push(e.symbol)}))}},{key:"buildCodes",value:function(){var t=this;this.codes={};var e=0,r=-1;Object.entries(this.codeBook).forEach((function(n){var a=H(n,2),o=a[0],s=a[1];o=parseInt(o,10),s.forEach((function(n){var a={bitLength:o,value:n};r+=1;var s=o-e;if(r<<=s,a.bitCode=r,e+=s,function(t){var e=t-(t>>1)&1431655765;return 16843009*((e=(858993459&e)+(e>>2&858993459))+(e>>4)&252645135)>>24}(r)>o)throw new i("Symbol out of range");t.codes[n]=a}))}))}},{key:"buildCaches",value:function(){this.sortedCodes=Object.values(this.codes).sort((function(t,e){return t.bitLength-e.bitLength||t.bitCode-e.bitCode})),this.sortedByValue=Object.values(this.codes).sort((function(t,e){return t.value-e.value})),this.sortedValuesByBitCode=this.sortedCodes.map((function(t){return t.value})),this.sortedBitCodes=this.sortedCodes.map((function(t){return t.bitCode})),this.sortedBitLengthsByBitCode=this.sortedCodes.map((function(t){return t.bitLength}));var t=Math.max.apply(Math,$(this.sortedBitCodes));this.bitCodeToValue=new Array(t+1).fill(-1);for(var e=0;e<this.sortedBitCodes.length;e+=1)this.bitCodeToValue[this.sortedCodes[e].bitCode]=e}},{key:"decode",value:function(t,e,r,n){return this._decode(t,e,n.coreBlock)}},{key:"_decodeZeroLengthCode",value:function(){return this.sortedCodes[0].value}},{key:"_decode",value:function(t,e,r){for(var n=e.content,a=0,o=0,s=0;s<this.sortedCodes.length;s+=1){var h=this.sortedCodes[s].bitLength;o<<=h-a,o|=this._getBits(n,r,h-a),a=h;var c=this.bitCodeToValue[o];if(c>-1&&this.sortedBitLengthsByBitCode[c]===h)return this.sortedValuesByBitCode[c];for(var l=s;this.sortedCodes[l+1].bitLength===h&&l<this.sortedCodes.length;l+=1)s+=1}throw new i("Huffman symbol not found.")}}]),r}(a)},function(e,r,n){var i=n(0),a=i.CramUnimplementedError,o=i.CramMalformedError,s=i.CramBufferOverrunError,h=n(6),c=n(8).parseItf8;e.exports=function(e){function r(){var e,n=arguments.length>0&&arguments[0]!==t?arguments[0]:{},i=arguments.length>1?arguments[1]:t;if(M(this,r),"int"===(e=U(this,N(r).call(this,n,i))).dataType)e._decodeData=e._decodeInt;else{if("byte"!==e.dataType)throw new a("".concat(e.dataType," decoding not yet implemented by EXTERNAL codec"));e._decodeData=e._decodeByte}return U(e)}return F(r,e),D(r,[{key:"decode",value:function(t,e,r,n){var i=this.parameters.blockContentId,a=r[i];if(!a)throw new o("no block found with content ID ".concat(i));var s=n.externalBlocks.getCursor(i);return this._decodeData(a,s)}},{key:"_decodeInt",value:function(t,e){var r=H(c(t.content,e.bytePosition),2),n=r[0],i=r[1];return e.bytePosition+=i,n}},{key:"_decodeByte",value:function(t,e){if(e.bytePosition>=t.content.length)throw new s("attempted to read beyond end of block. this file seems truncated.");var r=t.content[e.bytePosition];return e.bytePosition+=1,r}}]),r}(h)},function(e,r,n){var i=n(0),a=i.CramBufferOverrunError,o=i.CramMalformedError,s=n(6);e.exports=function(e){function r(){var e,n=arguments.length>0&&arguments[0]!==t?arguments[0]:{},i=arguments.length>1?arguments[1]:t;if(M(this,r),e=U(this,N(r).call(this,n,i)),"byteArray"!==i)throw new TypeError("byteArrayStop codec does not support data type ".concat(i));return e._decode=e._decodeByteArray,U(e)}return F(r,e),D(r,[{key:"decode",value:function(t,e,r,n){var i=this.parameters.blockContentId,a=r[i];if(!a)throw new o("no block found with content ID ".concat(i));var s=n.externalBlocks.getCursor(i);return this._decode(a,s)}},{key:"_decodeByteArray",value:function(t,e){for(var r=t.content,n=this.parameters.stopByte,i=e.bytePosition,o=e.bytePosition;r[o]!==n&&o<r.length;){if(o===r.length)throw new a("byteArrayStop reading beyond length of data buffer?");o+=1}return e.bytePosition=o+1,r.slice(i,o)}}]),r}(s)},function(e,r,n){var i=n(8).tinyMemoize,a=function(e){function r(){var e,n=arguments.length>0&&arguments[0]!==t?arguments[0]:{},i=arguments.length>1?arguments[1]:t,a=arguments.length>2?arguments[2]:t;if(M(this,r),(e=U(this,N(r).call(this,n,i))).instantiateCodec=a,"byteArray"!==i)throw new TypeError("byteArrayLength does not support data type ".concat(i));return U(e)}return F(r,e),D(r,[{key:"decode",value:function(t,e,r,n){for(var i=this._getLengthCodec().decode(t,e,r,n),a=this._getDataCodec(),o=new Array(i),s=0;s<i;s+=1)o[s]=a.decode(t,e,r,n);return o}},{key:"_getLengthCodec",value:function(){var t=this.parameters.lengthsEncoding;return this.instantiateCodec(t,"int")}},{key:"_getDataCodec",value:function(){var t=this.parameters.valuesEncoding;return this.instantiateCodec(t,"byte")}}]),r}(n(6));"_getLengthCodec _getDataCodec".split(" ").forEach((function(t){return i(a,t)})),e.exports=a},function(e,r,n){var i=n(0).CramUnimplementedError,a=n(6);e.exports=function(e){function r(){var e,n=arguments.length>0&&arguments[0]!==t?arguments[0]:{},a=arguments.length>1?arguments[1]:t;if(M(this,r),"int"!==(e=U(this,N(r).call(this,n,a))).dataType)throw new i("".concat(e.dataType," decoding not yet implemented by BETA codec"));return U(e)}return F(r,e),D(r,[{key:"decode",value:function(t,e,r,n){return this._getBits(e.content,n.coreBlock,this.parameters.length)-this.parameters.offset}}]),r}(a)},function(e,r,n){var i=n(0).CramUnimplementedError,a=n(6);e.exports=function(e){function r(){var e,n=arguments.length>0&&arguments[0]!==t?arguments[0]:{},a=arguments.length>1?arguments[1]:t;if(M(this,r),"int"!==(e=U(this,N(r).call(this,n,a))).dataType)throw new i("".concat(e.dataType," decoding not yet implemented by GAMMA codec"));return U(e)}return F(r,e),D(r,[{key:"decode",value:function(t,e,r,n){for(var i=1;0===this._getBits(e.content,n.coreBlock,1);)i+=1;return(this._getBits(e.content,n.coreBlock,i-1)|1<<i-1)-this.parameters.offset}}]),r}(a)},function(e,r,n){var i=n(0).CramUnimplementedError,a=n(6);e.exports=function(e){function r(){var e,n=arguments.length>0&&arguments[0]!==t?arguments[0]:{},a=arguments.length>1?arguments[1]:t;if(M(this,r),"int"!==(e=U(this,N(r).call(this,n,a))).dataType)throw new i("".concat(e.dataType," decoding not yet implemented by SUBEXP codec"));return U(e)}return F(r,e),D(r,[{key:"decode",value:function(t,e,r,n){for(var i,a,o=0;this._getBits(e.content,n.coreBlock,1);)o+=1;return 0===o?(i=this.parameters.K,a=this._getBits(e.content,n.coreBlock,i)):a=1<<(i=o+this.parameters.K-1)|this._getBits(e.content,n.coreBlock,i),a-this.parameters.offset}}]),r}(a)},function(t,e,r){var n=r(88),i=r(90);function a(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}e.parse=y,e.resolve=function(t,e){return y(t,!1,!0).resolve(e)},e.resolveObject=function(t,e){return t?y(t,!1,!0).resolveObject(e):e},e.format=function(t){return i.isString(t)&&(t=y(t)),t instanceof a?t.format():a.prototype.format.call(t)},e.Url=a;var o=/^([a-z0-9.+-]+:)/i,s=/:[0-9]*$/,h=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,c=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),l=["'"].concat(c),u=["%","/","?",";","#"].concat(l),f=["/","?","#"],p=/^[+a-z0-9A-Z_-]{0,63}$/,d=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,g={javascript:!0,"javascript:":!0},m={javascript:!0,"javascript:":!0},v={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},b=r(91);function y(t,e,r){if(t&&i.isObject(t)&&t instanceof a)return t;var n=new a;return n.parse(t,e,r),n}a.prototype.parse=function(t,e,r){if(!i.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+R(t));var a=t.indexOf("?"),s=-1!==a&&a<t.indexOf("#")?"?":"#",c=t.split(s);c[0]=c[0].replace(/\\/g,"/");var y=t=c.join(s);if(y=y.trim(),!r&&1===t.split("#").length){var w=h.exec(y);if(w)return this.path=y,this.href=y,this.pathname=w[1],w[2]?(this.search=w[2],this.query=e?b.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var x=o.exec(y);if(x){var k=(x=x[0]).toLowerCase();this.protocol=k,y=y.substr(x.length)}if(r||x||y.match(/^\/\/[^@\/]+@[^@\/]+/)){var S="//"===y.substr(0,2);!S||x&&m[x]||(y=y.substr(2),this.slashes=!0)}if(!m[x]&&(S||x&&!v[x])){for(var _,C,E=-1,A=0;A<f.length;A++)-1!==(T=y.indexOf(f[A]))&&(-1===E||T<E)&&(E=T);for(-1!==(C=-1===E?y.lastIndexOf("@"):y.lastIndexOf("@",E))&&(_=y.slice(0,C),y=y.slice(C+1),this.auth=decodeURIComponent(_)),E=-1,A=0;A<u.length;A++){var T;-1!==(T=y.indexOf(u[A]))&&(-1===E||T<E)&&(E=T)}-1===E&&(E=y.length),this.host=y.slice(0,E),y=y.slice(E),this.parseHost(),this.hostname=this.hostname||"";var L="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!L)for(var I=this.hostname.split(/\./),M=(A=0,I.length);A<M;A++){var P=I[A];if(P&&!P.match(p)){for(var D="",F=0,N=P.length;F<N;F++)P.charCodeAt(F)>127?D+="x":D+=P[F];if(!D.match(p)){var B=I.slice(0,A),O=I.slice(A+1),z=P.match(d);z&&(B.push(z[1]),O.unshift(z[2])),O.length&&(y="/"+O.join(".")+y),this.hostname=B.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),L||(this.hostname=n.toASCII(this.hostname));var U=this.port?":"+this.port:"",H=this.hostname||"";this.host=H+U,this.href+=this.host,L&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==y[0]&&(y="/"+y))}if(!g[k])for(A=0,M=l.length;A<M;A++){var $=l[A];if(-1!==y.indexOf($)){var q=encodeURIComponent($);q===$&&(q=escape($)),y=y.split($).join(q)}}var V=y.indexOf("#");-1!==V&&(this.hash=y.substr(V),y=y.slice(0,V));var j=y.indexOf("?");if(-1!==j?(this.search=y.substr(j),this.query=y.substr(j+1),e&&(this.query=b.parse(this.query)),y=y.slice(0,j)):e&&(this.search="",this.query={}),y&&(this.pathname=y),v[k]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){U=this.pathname||"";var G=this.search||"";this.path=U+G}return this.href=this.format(),this},a.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",r=this.pathname||"",n=this.hash||"",a=!1,o="";this.host?a=t+this.host:this.hostname&&(a=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(a+=":"+this.port)),this.query&&i.isObject(this.query)&&Object.keys(this.query).length&&(o=b.stringify(this.query));var s=this.search||o&&"?"+o||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||v[e])&&!1!==a?(a="//"+(a||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):a||(a=""),n&&"#"!==n.charAt(0)&&(n="#"+n),s&&"?"!==s.charAt(0)&&(s="?"+s),e+a+(r=r.replace(/[?#]/g,(function(t){return encodeURIComponent(t)})))+(s=s.replace("#","%23"))+n},a.prototype.resolve=function(t){return this.resolveObject(y(t,!1,!0)).format()},a.prototype.resolveObject=function(t){if(i.isString(t)){var e=new a;e.parse(t,!1,!0),t=e}for(var r=new a,n=Object.keys(this),o=0;o<n.length;o++){var s=n[o];r[s]=this[s]}if(r.hash=t.hash,""===t.href)return r.href=r.format(),r;if(t.slashes&&!t.protocol){for(var h=Object.keys(t),c=0;c<h.length;c++){var l=h[c];"protocol"!==l&&(r[l]=t[l])}return v[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(t.protocol&&t.protocol!==r.protocol){if(!v[t.protocol]){for(var u=Object.keys(t),f=0;f<u.length;f++){var p=u[f];r[p]=t[p]}return r.href=r.format(),r}if(r.protocol=t.protocol,t.host||m[t.protocol])r.pathname=t.pathname;else{for(var d=(t.pathname||"").split("/");d.length&&!(t.host=d.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==d[0]&&d.unshift(""),d.length<2&&d.unshift(""),r.pathname=d.join("/")}if(r.search=t.search,r.query=t.query,r.host=t.host||"",r.auth=t.auth,r.hostname=t.hostname||t.host,r.port=t.port,r.pathname||r.search){var g=r.pathname||"",b=r.search||"";r.path=g+b}return r.slashes=r.slashes||t.slashes,r.href=r.format(),r}var y=r.pathname&&"/"===r.pathname.charAt(0),w=t.host||t.pathname&&"/"===t.pathname.charAt(0),x=w||y||r.host&&t.pathname,k=x,S=r.pathname&&r.pathname.split("/")||[],_=(d=t.pathname&&t.pathname.split("/")||[],r.protocol&&!v[r.protocol]);if(_&&(r.hostname="",r.port=null,r.host&&(""===S[0]?S[0]=r.host:S.unshift(r.host)),r.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===d[0]?d[0]=t.host:d.unshift(t.host)),t.host=null),x=x&&(""===d[0]||""===S[0])),w)r.host=t.host||""===t.host?t.host:r.host,r.hostname=t.hostname||""===t.hostname?t.hostname:r.hostname,r.search=t.search,r.query=t.query,S=d;else if(d.length)S||(S=[]),S.pop(),S=S.concat(d),r.search=t.search,r.query=t.query;else if(!i.isNullOrUndefined(t.search))return _&&(r.hostname=r.host=S.shift(),(R=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=R.shift(),r.host=r.hostname=R.shift())),r.search=t.search,r.query=t.query,i.isNull(r.pathname)&&i.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r;if(!S.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var C=S.slice(-1)[0],E=(r.host||t.host||S.length>1)&&("."===C||".."===C)||""===C,A=0,T=S.length;T>=0;T--)"."===(C=S[T])?S.splice(T,1):".."===C?(S.splice(T,1),A++):A&&(S.splice(T,1),A--);if(!x&&!k)for(;A--;A)S.unshift("..");!x||""===S[0]||S[0]&&"/"===S[0].charAt(0)||S.unshift(""),E&&"/"!==S.join("/").substr(-1)&&S.push("");var R,L=""===S[0]||S[0]&&"/"===S[0].charAt(0);return _&&(r.hostname=r.host=L?"":S.length?S.shift():"",(R=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=R.shift(),r.host=r.hostname=R.shift())),(x=x||r.host&&S.length)&&!L&&S.unshift(""),S.length?r.pathname=S.join("/"):(r.pathname=null,r.path=null),i.isNull(r.pathname)&&i.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=t.auth||r.auth,r.slashes=r.slashes||t.slashes,r.href=r.format(),r},a.prototype.parseHost=function(){var t=this.host,e=s.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},function(t,e,r){(function(t,n){var i;!function(a){e&&e.nodeType,t&&t.nodeType;var o="object"==R(n)&&n;o.global!==o&&o.window!==o&&o.self;var s,h=2147483647,c=36,l=1,u=26,f=38,p=700,d=72,g=128,m="-",v=/^xn--/,b=/[^\x20-\x7E]/,y=/[\x2E\u3002\uFF0E\uFF61]/g,w={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},x=c-l,k=Math.floor,S=String.fromCharCode;function _(t){throw new RangeError(w[t])}function C(t,e){for(var r=t.length,n=[];r--;)n[r]=e(t[r]);return n}function E(t,e){var r=t.split("@"),n="";return r.length>1&&(n=r[0]+"@",t=r[1]),n+C((t=t.replace(y,".")).split("."),e).join(".")}function A(t){for(var e,r,n=[],i=0,a=t.length;i<a;)(e=t.charCodeAt(i++))>=55296&&e<=56319&&i<a?56320==(64512&(r=t.charCodeAt(i++)))?n.push(((1023&e)<<10)+(1023&r)+65536):(n.push(e),i--):n.push(e);return n}function T(t){return C(t,(function(t){var e="";return t>65535&&(e+=S((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+S(t)})).join("")}function L(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function I(t,e,r){var n=0;for(t=r?k(t/p):t>>1,t+=k(t/e);t>x*u>>1;n+=c)t=k(t/x);return k(n+(x+1)*t/(t+f))}function M(t){var e,r,n,i,a,o,s,f,p,v,b,y=[],w=t.length,x=0,S=g,C=d;for((r=t.lastIndexOf(m))<0&&(r=0),n=0;n<r;++n)t.charCodeAt(n)>=128&&_("not-basic"),y.push(t.charCodeAt(n));for(i=r>0?r+1:0;i<w;){for(a=x,o=1,s=c;i>=w&&_("invalid-input"),((f=(b=t.charCodeAt(i++))-48<10?b-22:b-65<26?b-65:b-97<26?b-97:c)>=c||f>k((h-x)/o))&&_("overflow"),x+=f*o,!(f<(p=s<=C?l:s>=C+u?u:s-C));s+=c)o>k(h/(v=c-p))&&_("overflow"),o*=v;C=I(x-a,e=y.length+1,0==a),k(x/e)>h-S&&_("overflow"),S+=k(x/e),x%=e,y.splice(x++,0,S)}return T(y)}function P(t){var e,r,n,i,a,o,s,f,p,v,b,y,w,x,C,E=[];for(y=(t=A(t)).length,e=g,r=0,a=d,o=0;o<y;++o)(b=t[o])<128&&E.push(S(b));for(n=i=E.length,i&&E.push(m);n<y;){for(s=h,o=0;o<y;++o)(b=t[o])>=e&&b<s&&(s=b);for(s-e>k((h-r)/(w=n+1))&&_("overflow"),r+=(s-e)*w,e=s,o=0;o<y;++o)if((b=t[o])<e&&++r>h&&_("overflow"),b==e){for(f=r,p=c;!(f<(v=p<=a?l:p>=a+u?u:p-a));p+=c)C=f-v,x=c-v,E.push(S(L(v+C%x,0))),f=k(C/x);E.push(S(L(f,0))),a=I(r,w,n==i),r=0,++n}++r,++e}return E.join("")}s={version:"1.4.1",ucs2:{decode:A,encode:T},decode:M,encode:P,toASCII:function(t){return E(t,(function(t){return b.test(t)?"xn--"+P(t):t}))},toUnicode:function(t){return E(t,(function(t){return v.test(t)?M(t.slice(4).toLowerCase()):t}))}},void 0===(i=function(){return s}.call(e,r,e,t))||(t.exports=i)}()}).call(this,r(89)(t),r(2))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,r){t.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==R(t)&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},function(t,e,r){e.decode=e.parse=r(92),e.encode=e.stringify=r(93)},function(t,e,r){function n(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,r,a){e=e||"&",r=r||"=";var o={};if("string"!=typeof t||0===t.length)return o;var s=/\+/g;t=t.split(e);var h=1e3;a&&"number"==typeof a.maxKeys&&(h=a.maxKeys);var c=t.length;h>0&&c>h&&(c=h);for(var l=0;l<c;++l){var u,f,p,d,g=t[l].replace(s,"%20"),m=g.indexOf(r);m>=0?(u=g.substr(0,m),f=g.substr(m+1)):(u=g,f=""),p=decodeURIComponent(u),d=decodeURIComponent(f),n(o,p)?i(o[p])?o[p].push(d):o[p]=[o[p],d]:o[p]=d}return o};var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},function(t,e,r){var n=function(t){switch(R(t)){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,r,s){return e=e||"&",r=r||"=",null===t&&(t=void 0),"object"==R(t)?a(o(t),(function(o){var s=encodeURIComponent(n(o))+r;return i(t[o])?a(t[o],(function(t){return s+encodeURIComponent(n(t))})).join(e):s+encodeURIComponent(n(t[o]))})).join(e):s?encodeURIComponent(n(s))+r+encodeURIComponent(n(t)):""};var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function a(t,e){if(t.map)return t.map(e);for(var r=[],n=0;n<t.length;n++)r.push(e(t[n],n));return r}var o=Object.keys||function(t){var e=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.push(r);return e}},function(r,n,i){(function(n){var a=i(95),o=i(96);r.exports=function(){function r(t){var e=this;M(this,r),this.position=0,this.url=t,this.cache=new o({fetch:function(t,r){return e._fetch(t,r)}})}var i,s,h;return D(r,[{key:"_fetch",value:(h=I(e.mark((function t(r,i){var o,s,h,c;return e.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o={},i<1/0?o.range="bytes=".concat(r,"-").concat(r+i):i===1/0&&0!==r&&(o.range="bytes=".concat(r,"-")),t.next=4,a(this.url,{method:"GET",headers:o,redirect:"follow",mode:"cors"});case 4:if((200!==(s=t.sent).status||0!==r)&&206!==s.status){t.next=13;break}return t.t0=n,t.next=9,s.arrayBuffer();case 9:return t.t1=t.sent,h=t.t0.from.call(t.t0,t.t1),c=/\/(\d+)$/.exec(s.headers.get("content-range")),t.abrupt("return",(c&&c[1]?this._stat={size:parseInt(c[1],10)}:this._stat={size:void 0},h));case 13:throw new Error("HTTP ".concat(s.status," fetching ").concat(this.url));case 14:case"end":return t.stop()}}),t,this)}))),function(t,e){return h.apply(this,arguments)})},{key:"read",value:function(e){var r=arguments.length>1&&arguments[1]!==t?arguments[1]:0,n=arguments.length>2&&arguments[2]!==t?arguments[2]:1/0,i=arguments.length>3&&arguments[3]!==t?arguments[3]:0;return null===i&&(this.position,this.position+=n),this.cache.get(e,r,n,i)}},{key:"readFile",value:(s=I(e.mark((function t(){var r;return e.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a(this.url,{method:"GET",redirect:"follow",mode:"cors"});case 2:return r=t.sent,t.t0=n,t.next=6,r.arrayBuffer();case 6:return t.t1=t.sent,t.abrupt("return",t.t0.from.call(t.t0,t.t1));case 8:case"end":return t.stop()}}),t,this)}))),function(){return s.apply(this,arguments)})},{key:"stat",value:(i=I(e.mark((function t(){var r;return e.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._stat){t.next=6;break}return r=n.allocUnsafe(10),t.next=4,this.read(r,0,10,0);case 4:if(this._stat){t.next=6;break}throw new Error("unable to determine size of file at ".concat(this.url));case 6:return t.abrupt("return",this._stat);case 7:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})}]),r}()}).call(this,i(1).Buffer)},function(t,e){var r=function(t){function e(){this.fetch=!1}return e.prototype=t,new e}("undefined"!=typeof self?self:this);!function(t){!function(e){var r={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};if(r.arrayBuffer)var n=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],i=ArrayBuffer.isView||function(t){return t&&n.indexOf(Object.prototype.toString.call(t))>-1};function a(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function o(t){return"string"!=typeof t&&(t=String(t)),t}function s(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return r.iterable&&(e[Symbol.iterator]=function(){return e}),e}function h(t){this.map={},t instanceof h?t.forEach((function(t,e){this.append(e,t)}),this):Array.isArray(t)?t.forEach((function(t){this.append(t[0],t[1])}),this):t&&Object.getOwnPropertyNames(t).forEach((function(e){this.append(e,t[e])}),this)}function c(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function l(t){return new Promise((function(e,r){t.onload=function(){e(t.result)},t.onerror=function(){r(t.error)}}))}function u(t){var e=new FileReader,r=l(e);return e.readAsArrayBuffer(t),r}function f(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function p(){return this.bodyUsed=!1,this._initBody=function(t){var e;this._bodyInit=t,t?"string"==typeof t?this._bodyText=t:r.blob&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:r.formData&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:r.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():r.arrayBuffer&&r.blob&&(e=t)&&DataView.prototype.isPrototypeOf(e)?(this._bodyArrayBuffer=f(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):r.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(t)||i(t))?this._bodyArrayBuffer=f(t):this._bodyText=t=Object.prototype.toString.call(t):this._bodyText="",this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},r.blob&&(this.blob=function(){var t=c(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?c(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(u)}),this.text=function(){var t,e,r,n=c(this);if(n)return n;if(this._bodyBlob)return t=this._bodyBlob,r=l(e=new FileReader),e.readAsText(t),r;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),r=new Array(e.length),n=0;n<e.length;n++)r[n]=String.fromCharCode(e[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},r.formData&&(this.formData=function(){return this.text().then(m)}),this.json=function(){return this.text().then(JSON.parse)},this}h.prototype.append=function(t,e){t=a(t),e=o(e);var r=this.map[t];this.map[t]=r?r+", "+e:e},h.prototype.delete=function(t){delete this.map[a(t)]},h.prototype.get=function(t){return t=a(t),this.has(t)?this.map[t]:null},h.prototype.has=function(t){return this.map.hasOwnProperty(a(t))},h.prototype.set=function(t,e){this.map[a(t)]=o(e)},h.prototype.forEach=function(t,e){for(var r in this.map)this.map.hasOwnProperty(r)&&t.call(e,this.map[r],r,this)},h.prototype.keys=function(){var t=[];return this.forEach((function(e,r){t.push(r)})),s(t)},h.prototype.values=function(){var t=[];return this.forEach((function(e){t.push(e)})),s(t)},h.prototype.entries=function(){var t=[];return this.forEach((function(e,r){t.push([r,e])})),s(t)},r.iterable&&(h.prototype[Symbol.iterator]=h.prototype.entries);var d=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function g(t,e){var r,n,i=(e=e||{}).body;if(t instanceof g){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new h(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,i||null==t._bodyInit||(i=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",!e.headers&&this.headers||(this.headers=new h(e.headers)),this.method=(n=(r=e.method||this.method||"GET").toUpperCase(),d.indexOf(n)>-1?n:r),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i)}function m(t){var e=new FormData;return t.trim().split("&").forEach((function(t){if(t){var r=t.split("="),n=r.shift().replace(/\+/g," "),i=r.join("=").replace(/\+/g," ");e.append(decodeURIComponent(n),decodeURIComponent(i))}})),e}function v(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new h(e.headers),this.url=e.url||"",this._initBody(t)}g.prototype.clone=function(){return new g(this,{body:this._bodyInit})},p.call(g.prototype),p.call(v.prototype),v.prototype.clone=function(){return new v(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new h(this.headers),url:this.url})},v.error=function(){var t=new v(null,{status:0,statusText:""});return t.type="error",t};var b=[301,302,303,307,308];v.redirect=function(t,e){if(-1===b.indexOf(e))throw new RangeError("Invalid status code");return new v(null,{status:e,headers:{location:t}})},e.DOMException=t.DOMException;try{new e.DOMException}catch(t){e.DOMException=function(t,e){this.message=t,this.name=e;var r=Error(t);this.stack=r.stack},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}function y(t,n){return new Promise((function(i,a){var o=new g(t,n);if(o.signal&&o.signal.aborted)return a(new e.DOMException("Aborted","AbortError"));var s=new XMLHttpRequest;function c(){s.abort()}s.onload=function(){var t,e,r={status:s.status,statusText:s.statusText,headers:(t=s.getAllResponseHeaders()||"",e=new h,t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(t){var r=t.split(":"),n=r.shift().trim();if(n){var i=r.join(":").trim();e.append(n,i)}})),e)};r.url="responseURL"in s?s.responseURL:r.headers.get("X-Request-URL");var n="response"in s?s.response:s.responseText;i(new v(n,r))},s.onerror=function(){a(new TypeError("Network request failed"))},s.ontimeout=function(){a(new TypeError("Network request failed"))},s.onabort=function(){a(new e.DOMException("Aborted","AbortError"))},s.open(o.method,o.url,!0),"include"===o.credentials?s.withCredentials=!0:"omit"===o.credentials&&(s.withCredentials=!1),"responseType"in s&&r.blob&&(s.responseType="blob"),o.headers.forEach((function(t,e){s.setRequestHeader(e,t)})),o.signal&&(o.signal.addEventListener("abort",c),s.onreadystatechange=function(){4===s.readyState&&o.signal.removeEventListener("abort",c)}),s.send(void 0===o._bodyInit?null:o._bodyInit)}))}y.polyfill=!0,t.fetch||(t.fetch=y,t.Headers=h,t.Request=g,t.Response=v),e.Headers=h,e.Request=g,e.Response=v,e.fetch=y}({})}(r),delete r.fetch.polyfill,t.exports=e=r.fetch,e.fetch=r.fetch,e.Headers=r.Headers,e.Request=r.Request,e.Response=r.Response,e.default=r.fetch},function(t,r,n){var i=n(30);t.exports=function(){function t(e){var r=e.fetch,n=e.size,a=void 0===n?1e7:n,o=e.chunkSize,s=void 0===o?32768:o;if(M(this,t),!r)throw new Error("fetch function required");this.fetch=r,this.chunkSize=s,this.lruCache=new i({maxSize:Math.floor(a/s)})}var r;return D(t,[{key:"get",value:(r=I(e.mark((function t(r,n,i,a){var o,s,h,c,l,u,f,p=this;return e.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r.length<n+i)){t.next=2;break}throw new Error("output buffer not big enough for request");case 2:for(o=Math.floor(a/this.chunkSize),s=Math.floor((a+i)/this.chunkSize),h=new Array(s-o+1),c=function(t){h[t-o]=p._getChunk(t).then((function(e){return{data:e,chunkNumber:t}}))},l=o;l<=s;l+=1)c(l);return t.next=7,Promise.all(h);case 7:u=t.sent,f=a-u[0].chunkNumber*this.chunkSize,u.forEach((function(t){var e=t.data,h=t.chunkNumber,c=h*p.chunkSize,l=0,u=p.chunkSize,d=n+(h-o)*p.chunkSize-f;h===o&&(d=n,l=f),h===s&&(u=a+i-c),e.copy(r,d,l,u)}));case 10:case"end":return t.stop()}}),t,this)}))),function(t,e,n,i){return r.apply(this,arguments)})},{key:"_getChunk",value:function(t){var e=this.lruCache.get(t);if(e)return e;var r=this.fetch(t*this.chunkSize,this.chunkSize);return this.lruCache.set(t,r),r}}]),t}()},function(r,n,i){i(34).promisify;var a=null,o=a;r.exports=function(){function r(t){M(this,r),this.position=0,this.filename=t,this.fd=o(this.filename,"r")}var n,i,a;return D(r,[{key:"read",value:(a=I(e.mark((function r(n){var i,a,o,s=arguments;return e.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=s.length>1&&s[1]!==t?s[1]:0,a=s.length>2?s[2]:t,null===(o=s.length>3?s[3]:t)&&(this.position,this.position+=a),e.t0=null,e.next=8,this.fd;case 8:return e.t1=e.sent,e.t2=n,e.t3=i,e.t4=a,e.t5=o,e.abrupt("return",(0,e.t0)(e.t1,e.t2,e.t3,e.t4,e.t5));case 14:case"end":return e.stop()}}),r,this)}))),function(t){return a.apply(this,arguments)})},{key:"readFile",value:(i=I(e.mark((function t(){return e.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=null,t.next=3,this.fd;case 3:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1));case 5:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"stat",value:(n=I(e.mark((function t(){return e.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=this._stat,t.t0){t.next=9;break}return t.t1=null,t.next=5,this.fd;case 5:return t.t2=t.sent,t.next=8,(0,t.t1)(t.t2);case 8:this._stat=t.sent;case 9:return t.abrupt("return",this._stat);case 10:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})}]),r}()},function(t,e){t.exports={parseHeaderText:function(t){var e=t.split(/\r?\n/),r=[];return e.forEach((function(t){var e=function(t){return q(t)||V(t)||j()}(t.split(/\t/)),n=e[0],i=e.slice(1).map((function(t){var e=H(t.split(":",2),2);return{tag:e[0],value:e[1]}}));n&&r.push({tag:n.substr(1),data:i})})),r}}},function(r,n,i){var a=i(0),o=a.CramUnimplementedError,s=a.CramSizeLimitError,h=i(18);r.exports=function(){function r(t){if(M(this,r),t.cram?this.cram=t.cram:this.cram=new h({url:t.cramUrl,path:t.cramPath,filehandle:t.cramFilehandle,seqFetch:t.seqFetch,checkSequenceMD5:t.checkSequenceMD5,cacheSize:t.cacheSize}),!(this.cram instanceof h))throw new Error("invalid arguments: no cramfile");if(this.index=t.index,!this.index.getEntriesForRange)throw new Error("invalid arguments: not an index");this.fetchSizeLimit=t.fetchSizeLimit||3e6}var n;return D(r,[{key:"getRecordsForRange",value:(n=I(e.mark((function r(n,i,a){var h,c,l,u,f,p,d,g,m,v,b,y,w,x,k,S,_,C,E,A,T,R,L,I,M,P,D,F=this,N=arguments;return e.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((c=N.length>3&&N[3]!==t?N[3]:{}).viewAsPairs=c.viewAsPairs||!1,c.pairAcrossChr=c.pairAcrossChr||!1,c.maxInsertSize=c.maxInsertSize||2e5,"string"!=typeof n){e.next=3;break}throw new o("string sequence names not yet supported");case 3:return l=n,e.next=6,this.index.getEntriesForRange(l,i,a);case 6:if(u=e.sent,!((f=u.map((function(t){return t.sliceBytes})).reduce((function(t,e){return t+e}),0))>this.fetchSizeLimit)){e.next=10;break}throw new s("data size of ".concat(f.toLocaleString()," bytes exceeded fetch size limit of ").concat(this.fetchSizeLimit.toLocaleString()," bytes"));case 10:return p=function(t){return t.sequenceId===n&&t.alignmentStart<=a&&t.alignmentStart+t.lengthOnRef>=i},e.next=13,Promise.all(u.map((function(t){return F.getRecordsInSlice(t,p)})));case 13:if(d=e.sent,g=(h=Array.prototype).concat.apply(h,$(d)),!c.viewAsPairs){e.next=36;break}for(m={},v={},b=0;b<g.length;b+=1)y=g[b].readName,w=g[b].uniqueId,m[y]||(m[y]=0),m[y]+=1,v[w]=1;for(x={},Object.entries(m).forEach((function(t){var e=H(t,2),r=e[0];1===e[1]&&(x[r]=!0)})),k=[],S=0;S<g.length;S+=1)_=g[S].readName,x[_]&&g[S].mate&&(g[S].mate.sequenceId===l||c.pairAcrossChr)&&Math.abs(g[S].alignmentStart-g[S].mate.alignmentStart)<c.maxInsertSize&&(C=this.index.getEntriesForRange(g[S].mate.sequenceId,g[S].mate.alignmentStart,g[S].mate.alignmentStart+1),k.push(C));return e.next=24,Promise.all(k);case 24:for(E=e.sent,A=[],T=0;T<E.length;T+=1)(R=A).push.apply(R,$(E[T]));if(A=A.sort((function(t,e){return t.toString().localeCompare(e.toString())})).filter((function(t,e,r){return!e||t.toString()!==r[e-1].toString()})),L=[],I=[],!((M=A.map((function(t){return t.sliceBytes})).reduce((function(t,e){return t+e}),0))>this.fetchSizeLimit)){e.next=31;break}throw new Error("mate data size of ".concat(M.toLocaleString()," bytes exceeded fetch size limit of ").concat(this.fetchSizeLimit.toLocaleString()," bytes"));case 31:return A.forEach((function(t){var e=F.cram.featureCache.get(t.toString());e||(e=F.getRecordsInSlice(t,(function(){return!0})),F.cram.featureCache.set(t.toString(),e)),L.push(e);var r=e.then((function(t){for(var e=[],r=0;r<t.length;r+=1){var n=t[r];x[n.readName]&&!v[n.uniqueId]&&e.push(n)}return e}));I.push(r)})),e.next=34,Promise.all(I);case 34:(P=e.sent).length&&(D=P.reduce((function(t,e){return t.concat(e)})),g=g.concat(D));case 36:return e.abrupt("return",g);case 37:case"end":return e.stop()}}),r,this)}))),function(t,e,r){return n.apply(this,arguments)})},{key:"getRecordsInSlice",value:function(t,e){var r=t.containerStart,n=t.sliceStart,i=t.sliceBytes;return this.cram.getContainerAtPosition(r).getSlice(n,i).getRecords(e)}},{key:"hasDataForReferenceSequence",value:function(t){return this.index.hasDataForReferenceSequence(t)}}]),r}()},function(t,r,n){var i=(0,n(34).promisify)(n(20).gunzip),a=n(33).open,o=n(0).CramMalformedError,s=function(){function t(e){M(this,t),Object.assign(this,e)}return D(t,[{key:"toString",value:function(){return"".concat(this.start,":").concat(this.span,":").concat(this.containerStart,":").concat(this.sliceStart,":").concat(this.sliceBytes)}}]),t}();function h(t,e){if(e.some((function(t){return void 0===t})))throw new o("invalid .crai index file");var r=H(e,6),n=r[0],i=r[1],a=r[2],h=r[3],c=r[4],l=r[5];t[n]||(t[n]=[]),t[n].push(new s({start:i,span:a,containerStart:h,sliceStart:c,sliceBytes:l}))}t.exports=function(){function t(e){M(this,t);var r=a(e.url,e.path,e.filehandle);this.readFile=r.readFile.bind(r),this.index=this.parseIndex()}var r,n;return D(t,[{key:"parseIndex",value:function(){var t={};return this.readFile().then((function(t){return 31===t[0]&&139===t[1]?i(t):t})).then((function(e){for(var r=[],n="",i=0;i<e.length;i+=1){var a=e[i];if(a>=48&&a<=57||!n&&45===a)n+=String.fromCharCode(a);else if(9===a)r.push(Number.parseInt(n,10)),n="";else if(10===a)r.push(Number.parseInt(n,10)),n="",h(t,r),r=[];else if(13!==a&&32!==a)throw new o("invalid .crai index file")}return n&&r.push(Number.parseInt(n,10)),6===r.length&&h(t,r),Object.entries(t).forEach((function(e){var r=H(e,2),n=r[0],i=r[1];t[n]=i.sort((function(t,e){return t.start-e.start||t.span-e.span}))})),t}))}},{key:"getIndex",value:function(){return this.index}},{key:"hasDataForReferenceSequence",value:(n=I(e.mark((function t(r){return e.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.index;case 2:return t.t0=r,t.abrupt("return",!!t.sent[t.t0]);case 4:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"getEntriesForRange",value:(r=I(e.mark((function t(r,n,i){var a,o,s,h,c,l,u,f,p,d;return e.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.index;case 2:if(t.t0=r,a=t.sent[t.t0]){t.next=6;break}return t.abrupt("return",[]);case 6:o=a.length,s=function(t){var e=t.start,r=t.start+t.span;return e>=i?-1:r<=n?1:0},c=0,l=o-1;case 8:if(!(c<=l)){t.next=19;break}if(!((u=s(a[h=Math.round((l+c)/2)]))>0)){t.next=14;break}c=h+1,t.next=17;break;case 14:if(u<0){t.next=16;break}return t.abrupt("break",19);case 16:l=h-1;case 17:t.next=8;break;case 19:for(f=h;f&&!s(a[f-1]);)f-=1;for(p=h;p<o-1&&!s(a[p+1]);)p+=1;return d=a[f].start,t.abrupt("return",a[p].start+a[p].span>=n&&i>=d?a.slice(f,p+1):[]);case 25:case"end":return t.stop()}}),t,this)}))),function(t,e,n){return r.apply(this,arguments)})}]),t}()}]),eh=16,rh=32,nh=1,ih=function(e,r,n){this.config=e,this.browser=n,this.genome=r,this.cramFile=new th.CramFile({filehandle:new oh(e.url,e),seqFetch:e.seqFetch||ah.bind(this),checkSequenceMD5:e.checkSequenceMD5===t||e.checkSequenceMD5});var i=new oh(e.indexURL,e);this.indexedCramFile=new th.IndexedCramFile({cram:this.cramFile,index:new th.CraiIndex({filehandle:i}),fetchSizeLimit:3e7}),Fs.setReaderDefaults(this,e)};function ah(t,e,r){var n=this.genome.sequence,i=this.genome;return this.getHeader().then((function(a){var o=i.getChromosomeName(a.chrNames[t]);return n.getSequence(o,e-1,r)}))}ih.prototype.getHeader=function(){if(this.header)return Promise.resolve(this.header);var e=this,r=this.genome;return this.cramFile.getSamHeader().then((function(n){var i={},a=[],o={},s=[],h=!0,c=!1,l=t;try{for(var u,f=n[Symbol.iterator]();!(h=(u=f.next()).done);h=!0){var p=u.value;if("SQ"===p.tag){var d=!0,g=!1,m=t;try{for(var v,b=p.data[Symbol.iterator]();!(d=(v=b.next()).done);d=!0){var y=v.value;if("SN"===y.tag){var w=y.value;if(i[w]=a.length,a.push(w),r)o[r.getChromosomeName(w)]=w;break}}}catch(t){g=!0,m=t}finally{try{d||null==b.return||b.return()}finally{if(g)throw m}}}else"RG"===p.tag&&s.push(p.data)}}catch(t){c=!0,l=t}finally{try{h||null==f.return||f.return()}finally{if(c)throw l}}return e.header={chrNames:a,chrToIndex:i,chrAliasTable:o,readGroups:s},e.header}))},ih.prototype.readAlignments=function(e,r,n){var i=this,a=this.browser;return this.getHeader().then((function(o){var s=o.chrAliasTable.hasOwnProperty(e)?o.chrAliasTable[e]:e,h=o.chrToIndex[s],c=new bs(e,r,n,i.samplingWindowSize,i.samplingDepth,i.pairsSupported,i.alleleFreqThreshold);return h===t?Promise.resolve(c):i.indexedCramFile.getRecordsForRange(h,r,n).then((function(e){var i=!0,a=!1,s=t;try{for(var u,f=e[Symbol.iterator]();!(i=(u=f.next()).done);i=!0){var p=u.value,d=p.sequenceId,g=p.alignmentStart,m=g+p.lengthOnRef;if(!(d<0)){if(d>h||g>n)return;if(!(d<h||m<r)){var v=l(p,o.chrNames);c.push(v)}}}}catch(t){a=!0,s=t}finally{try{i||null==f.return||f.return()}finally{if(a)throw s}}return c.finish(),c})).catch((function(t){var e=t.message;throw e&&e.indexOf("MD5")>=0&&(e="Sequence mismatch. Is this the correct genome for the loaded CRAM?"),a.presentAlert(e),t}));function l(e,r){var n=new Cs;if(n.chr=r[e.sequenceId],n.start=e.alignmentStart-1,n.lengthOnRef=e.lengthOnRef,n.flags=e.flags,n.strand=!(e.flags&eh),n.fragmentLength=e.templateLength||e.templateSize,n.mq=e.mappingQuality,n.end=e.alignmentStart+e.lengthOnRef,n.readGroupId=e.readGroupId,e.mate&&e.mate.sequenceId!==t){var i=e.mate.flags!==t?!(e.mate.flags&nh):!(e.flags&rh);n.mate={chr:r[e.mate.sequenceId],position:e.mate.alignmentStart,strand:i}}return n.seq=e.getReadBases(),n.qual=e.qualityScores,n.tagDict=e.tags,n.readName=e.readName,function(e,r){var n,i,a=[],o=0,s="";if(r.scStart=r.start,r.scLengthOnRef=r.lengthOnRef,e.readFeatures){var h=!0,c=!1,l=t;try{for(var u,f=e.readFeatures[Symbol.iterator]();!(h=(u=f.next()).done);h=!0){var p=u.value,d=p.code,g=p.data,m=p.pos-1,v=p.refPos-1;switch(r.readName,d){case"S":case"I":case"i":case"N":case"D":if(m>o){var b=m-o;a.push(new Ls({start:v-b,seqOffset:o,len:b,type:"M",gapType:i})),o+=b,s+=b+"M"}if("S"===d){var y=v;r.scLengthOnRef+=g.length,0===m&&(r.scStart-=g.length,y-=g.length);var w=g.length;a.push(new Ls({start:y,seqOffset:o,len:w,type:"S"})),o+=w,i="S",s+=w+d}else if("I"===d||"i"===d){n===t&&(n=[]);var x="i"===d?1:g.length;n.push(new Ls({start:v-1,len:x,seqOffset:o,type:"I"})),o+=x,i="I",s+=x+d}else"D"!==d&&"N"!==d||(i=d,s+=g+d);break;case"H":case"P":s+=g+d}}}catch(t){c=!0,l=t}finally{try{h||null==f.return||f.return()}finally{if(c)throw l}}}var k=e.readLength-o;k>0&&(a.push(new Ls({start:e.alignmentStart+e.lengthOnRef-k-1,seqOffset:o,len:k,type:"M",gapType:i})),s+=k+"M");r.blocks=a,r.insertions=n,r.cigar=s}(e,n),n.mate&&n.start>n.mate.position&&n.fragmentLength>0&&(n.fragmentLength=-n.fragmentLength),Fs.setPairOrientation(n),n}}))};var oh=function(){function r(t,e){var n=this;M(this,r),this.position=0,this.url=t,this.config=e,this.cache=new sh({fetch:function(t,e){return n._fetch(t,e)}})}var n,i,a,o;return D(r,[{key:"_fetch",value:(o=I(e.mark((function r(n,i){var a,o;return e.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={start:n,size:i},this._stat={size:t},e.next=4,On.loadArrayBuffer(this.url,nn(this.config,{range:a}));case 4:return o=e.sent,e.abrupt("return",Buffer.from(o));case 6:case"end":return e.stop()}}),r,this)}))),function(t,e){return o.apply(this,arguments)})},{key:"read",value:(a=I(e.mark((function r(n){var i,a,o,s=arguments;return e.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=s.length>1&&s[1]!==t?s[1]:0,a=s.length>2&&s[2]!==t?s[2]:1/0,null===(o=s.length>3&&s[3]!==t?s[3]:0)&&(this.position,this.position+=a),e.abrupt("return",this.cache.get(n,i,a,o));case 6:case"end":return e.stop()}}),r,this)}))),function(t){return a.apply(this,arguments)})},{key:"readFile",value:(i=I(e.mark((function t(){var r;return e.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,On.loadArrayBuffer(this.url,nn(this.config));case 2:return r=t.sent,t.abrupt("return",Buffer.from(r));case 4:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"stat",value:(n=I(e.mark((function t(){var r;return e.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._stat){t.next=6;break}return r=Buffer.allocUnsafe(10),t.next=4,this.read(r,0,10,0);case 4:if(this._stat){t.next=6;break}throw new Error("unable to determine size of file at ".concat(this.url));case 6:return t.abrupt("return",this._stat);case 7:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})}]),r}(),sh=function(){function t(e){var r=e.fetch,n=e.size,i=void 0===n?1e7:n,a=e.chunkSize,o=void 0===a?32768:a;M(this,t),this.fetch=r,this.chunkSize=o,this.lruCache=new hh({maxSize:Math.floor(i/o)})}var r;return D(t,[{key:"get",value:(r=I(e.mark((function t(r,n,i,a){var o,s,h,c,l,u,f,p=this;return e.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r.length<n+i)){t.next=2;break}throw new Error("output buffer not big enough for request");case 2:for(o=Math.floor(a/this.chunkSize),s=Math.floor((a+i)/this.chunkSize),h=new Array(s-o+1),c=function(t){h[t-o]=p._getChunk(t).then((function(e){return{data:e,chunkNumber:t}}))},l=o;l<=s;l+=1)c(l);return t.next=9,Promise.all(h);case 9:u=t.sent,f=a-u[0].chunkNumber*this.chunkSize,u.forEach((function(t){var e=t.data,h=t.chunkNumber,c=h*p.chunkSize,l=0,u=p.chunkSize,d=n+(h-o)*p.chunkSize-f;h===o&&(d=n,l=f),h===s&&(u=a+i-c),e.copy(r,d,l,u)}));case 12:case"end":return t.stop()}}),t,this)}))),function(t,e,n,i){return r.apply(this,arguments)})},{key:"_getChunk",value:function(t){var e=this.lruCache.get(t);if(e)return e;var r=this.fetch(t*this.chunkSize,this.chunkSize);return this.lruCache.set(t,r),r}}]),t}(),hh=function(){function r(){var e=arguments.length>0&&arguments[0]!==t?arguments[0]:{};if(M(this,r),!(e.maxSize&&e.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");this.maxSize=e.maxSize,this.cache=new Map,this.oldCache=new Map,this._size=0}return D(r,[{key:"_set",value:function(t,e){this.cache.set(t,e),this._size++,this._size>=this.maxSize&&(this._size=0,this.oldCache=this.cache,this.cache=new Map)}},{key:"get",value:function(t){if(this.cache.has(t))return this.cache.get(t);if(this.oldCache.has(t)){var e=this.oldCache.get(t);return this._set(t,e),e}}},{key:"set",value:function(t,e){return this.cache.has(t)?this.cache.set(t,e):this._set(t,e),this}},{key:"has",value:function(t){return this.cache.has(t)||this.oldCache.has(t)}},{key:"peek",value:function(t){return this.cache.has(t)?this.cache.get(t):this.oldCache.has(t)?this.oldCache.get(t):void 0}},{key:"delete",value:function(t){var e=this.cache.delete(t);return e&&this._size--,this.oldCache.delete(t)||e}},{key:"clear",value:function(){this.cache.clear(),this.oldCache.clear(),this._size=0}},{key:"keys",value:e.mark((function r(){var n,i,a,o,s,h,c;return e.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=!0,i=!1,a=t,e.prev=3,o=this[Symbol.iterator]();case 5:if(n=(s=o.next()).done){e.next=12;break}return h=H(s.value,1),c=h[0],e.next=9,c;case 9:n=!0,e.next=5;break;case 12:e.next=18;break;case 14:e.prev=14,e.t0=e.catch(3),i=!0,a=e.t0;case 18:e.prev=18,e.prev=19,n||null==o.return||o.return();case 21:if(e.prev=21,!i){e.next=24;break}throw a;case 24:return e.finish(21);case 25:return e.finish(18);case 26:case"end":return e.stop()}}),r,this,[[3,14,18,26],[19,,21,25]])}))},{key:"values",value:e.mark((function r(){var n,i,a,o,s,h,c;return e.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=!0,i=!1,a=t,e.prev=3,o=this[Symbol.iterator]();case 5:if(n=(s=o.next()).done){e.next=12;break}return h=H(s.value,2),c=h[1],e.next=9,c;case 9:n=!0,e.next=5;break;case 12:e.next=18;break;case 14:e.prev=14,e.t0=e.catch(3),i=!0,a=e.t0;case 18:e.prev=18,e.prev=19,n||null==o.return||o.return();case 21:if(e.prev=21,!i){e.next=24;break}throw a;case 24:return e.finish(21);case 25:return e.finish(18);case 26:case"end":return e.stop()}}),r,this,[[3,14,18,26],[19,,21,25]])}))},{key:Symbol.iterator,value:e.mark((function r(){var n,i,a,o,s,h,c,l,u,f,p,d,g,m;return e.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=!0,i=!1,a=t,e.prev=3,o=this.cache[Symbol.iterator]();case 5:if(n=(s=o.next()).done){e.next=12;break}return h=s.value,e.next=9,h;case 9:n=!0,e.next=5;break;case 12:e.next=18;break;case 14:e.prev=14,e.t0=e.catch(3),i=!0,a=e.t0;case 18:e.prev=18,e.prev=19,n||null==o.return||o.return();case 21:if(e.prev=21,!i){e.next=24;break}throw a;case 24:return e.finish(21);case 25:return e.finish(18);case 26:c=!0,l=!1,u=t,e.prev=29,f=this.oldCache[Symbol.iterator]();case 31:if(c=(p=f.next()).done){e.next=40;break}if(d=p.value,g=H(d,1),m=g[0],this.cache.has(m)){e.next=37;break}return e.next=37,d;case 37:c=!0,e.next=31;break;case 40:e.next=46;break;case 42:e.prev=42,e.t1=e.catch(29),l=!0,u=e.t1;case 46:e.prev=46,e.prev=47,c||null==f.return||f.return();case 49:if(e.prev=49,!l){e.next=52;break}throw u;case 52:return e.finish(49);case 53:return e.finish(46);case 54:case"end":return e.stop()}}),r,this,[[3,14,18,26],[19,,21,25],[29,42,46,54],[47,,49,53]])}))},{key:"size",get:function(){var e=0,r=!0,n=!1,i=t;try{for(var a,o=this.oldCache.keys()[Symbol.iterator]();!(r=(a=o.next()).done);r=!0){var s=a.value;this.cache.has(s)||e++}}catch(t){n=!0,i=t}finally{try{r||null==o.return||o.return()}finally{if(n)throw i}}return this._size+e}}]),r}(),ch={ALIGNMENT_MATCH:"M",INSERT:"I",DELETE:"D",SKIP:"N",CLIP_SOFT:"S",CLIP_HARD:"H",PAD:"P",SEQUENCE_MATCH:"=",SEQUENCE_MISMATCH:"X"},lh=function(e,r){this.config=e,this.genome=r,this.url=e.url,this.filter=new Is(e.filter),this.readGroupSetIds=e.readGroupSetIds,this.authKey=e.authKey,this.samplingWindowSize=e.samplingWindowSize===t?100:e.samplingWindowSize,this.samplingDepth=e.samplingDepth===t?1e3:e.samplingDepth,e.viewAsPairs?this.pairsSupported=!0:this.pairsSupported=e.pairsSupported===t||e.pairsSupported};lh.prototype.readAlignments=function(e,r,n){var i=this.genome,a=this;return(a.chrAliasTable?Promise.resolve(a.chrAliasTable):a.readMetadata().then((function(t){if(a.chrAliasTable={},i&&t.readGroups&&t.readGroups.length>0){var e=t.readGroups[0].referenceSetId;return e?mo({url:a.url+"/references/search",body:{referenceSetId:e},decode:function(t){return t.references}}).then((function(t){return t.forEach((function(t){var e=t.name,r=i.getChromosomeName(e);a.chrAliasTable[r]=e})),a.chrAliasTable})):(function(t,e){var r;if("461916304629"===e||"337315832689"===e){for(r=1;r<23;r++)t["chr"+r]=r;t.chrX="X",t.chrY="Y",t.chrM="MT"}}(a.chrAliasTable,a.config.datasetId),a.chrAliasTable)}return a.chrAliasTable}))).then((function(t){var i=t.hasOwnProperty(e)?t[e]:e;return mo({url:a.url+"/reads/search",body:{readGroupSetIds:[a.readGroupSetIds],referenceName:i,start:r,end:n,pageSize:"10000"},decode:o,results:new bs(e,r,n,a.samplingWindowSize,a.samplingDepth,a.pairsSupported,a.alleleFreqThreshold)})}));function o(e){var r,n,o,s,h,c=e.alignments,l=c.length,u=[];for(r=0;r<l;r++){var f=c[r];(n=new Cs).readName=f.fragmentName,n.properPlacement=f.properPlacement,n.duplicateFragment=f.duplicateFragment,n.numberReads=f.numberReads,n.fragmentLength=f.fragmentLength,n.readNumber=f.readNumber,n.failedVendorQualityChecks=f.failedVendorQualityChecks,n.secondaryAlignment=f.secondaryAlignment,n.supplementaryAlignment=f.supplementaryAlignment,n.seq=f.alignedSequence,n.qual=f.alignedQuality,n.matePos=f.nextMatePosition,n.tagDict=f.info,n.flags=0,f.alignment?(n.mapped=!0,n.chr=f.alignment.position.referenceName,i&&(n.chr=i.getChromosomeName(n.chr)),n.start=parseInt(f.alignment.position.position),n.strand=!f.alignment.position.reverseStrand,n.mq=f.alignment.mappingQuality,n.cigar=p(f.alignment.cigar),o=d(f.alignment.cigar),n.lengthOnRef=o.lengthOnRef,h=g(n,o.array),n.blocks=h.blocks,n.insertions=h.insertions):n.mapped=!1,(s=f.nextMatePosition)&&(n.mate={chr:s.referenceFrame,position:parseInt(s.position),strand:!s.reverseStrand}),a.filter.pass(n)&&u.push(n)}return u;function p(t){var e="";return t.forEach((function(t){var r=ch[t.operation],n=t.operationLength;e+=n+r})),e}function d(t){var e,r,n,i,a=0,o=[];for(i=0;i<t.length;i++)e=t[i],n=ch[e.operation],r=parseInt(e.operationLength),"M"!==n&&"EQ"!==n&&"X"!==n&&"D"!==n&&"N"!==n&&"="!==n||(a+=r),o.push({len:r,ltr:n});return{lengthOnRef:a,array:o}}function g(e,r){for(var n,i,a=[],o=0,s=e.start,h=r.length,c=0;c<h;c++){var l=r[c];switch(l.ltr){case"H":case"P":break;case"S":o+=l.len,i="S";break;case"N":s+=l.len,i="N";break;case"D":s+=l.len,i="D";break;case"I":n===t&&(n=[]),n.push(new Ls({start:s,len:l.len,seqOffset:o})),o+=l.len;break;case"M":case"EQ":case"=":case"X":a.push(new Ls({start:s,len:l.len,seqOffset:o,gapType:i})),o+=l.len,s+=l.len}}return{blocks:a,insertions:n}}}},lh.prototype.readMetadata=function(){return go({url:this.url,entity:"readgroupsets",entityId:this.readGroupSetIds})};var uh=function(){this.alignments=[],this.score=t};uh.prototype.findAlignment=function(t){var e,r,n;for(n=0;n<this.alignments.length;n++)if(i(r=this.alignments[n],t)){r.paired?r.firstAlignment&&i(r.firstAlignment,t)?e=r.firstAlignment:r.secondAlignment&&i(r.secondAlignment,t)&&(e=r.secondAlignment):e=r;break}return e;function i(t,e){return e>=t.start&&e<t.start+t.lengthOnRef}},uh.prototype.updateScore=function(t,e){this.score=this.calculateScore(t,e)},uh.prototype.calculateScore=function(e,r){var n,i=Math.floor(e.position),a=e.sortOption,o=e.direction,s=this.findAlignment(i);if(t===s)return o?Number.MAX_VALUE:-Number.MAX_VALUE;switch(a){case"NUCLEOTIDE":var h=s.readBaseAt(i),c=s.readBaseQualityAt(i);return h?function(e,r,n,i){var a,o,s;(a=Math.floor(i)-n.start)<n.sequence.length&&(o=n.sequence.charAt(a));if(!o)return t;if(t===e)return Number.MAX_VALUE;if("N"===e)return 2;if(o===e||"="===e)return 4-r/1e3;if("X"===e||o!==e)return(a=Math.floor(i)-n.coverageMap.bpStart)>0&&a<n.coverageMap.coverage.length?(s=n.coverageMap.coverage[a],-(s["pos"+e]+s["neg"+e]+r/1e3)):-(1+r/1e3);return 0}(h,c,r,i):o?Number.MAX_VALUE:-Number.MAX_VALUE;case"STRAND":return s.strand?1:-1;case"START":return s.start;case"TAG":var l=e.tag,u=s.tags()[l];return u!==t?zr(u)?qr(u):u:Number.MAX_VALUE;case"INSERT_SIZE":return-Math.abs(s.fragmentLength);case"MATE_CHR":return(n=s.mate)?n.chr===s.chr?Number.MAX_VALUE-1:qr(n.chr):Number.MAX_VALUE;case"MQ":return s.mq===t?Number.MAX_VALUE:-s.mq;default:return Number.MAX_VALUE}};var fh=function(e,r){var n=r.genome;if(this.config=e,this.genome=n,this.alignmentContainer=t,zr(e.url)&&e.url.startsWith("data:")){if("cram"===e.format)throw"CRAM data uris are not supported";this.config.indexed=!1}"ga4gh"===e.sourceType?this.bamReader=new lh(e,n):"pysam"===e.sourceType?this.bamReader=new Ys(e,n):"htsget"===e.sourceType?this.bamReader=new Qs(e,n):"shardedBam"===e.sourceType?this.bamReader=new Xs(e,n):"cram"===e.format?this.bamReader=new ih(e,n,r):!1===this.config.indexed?this.bamReader=new Us(e,n):this.bamReader=new $s(e,n),this.viewAsPairs=e.viewAsPairs,this.showSoftClips=e.showSoftClips};function ph(e){var r=[],n=!0,i=!1,a=t;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var h=o.value,c=!0,l=!1,u=t;try{for(var f,p=h.alignments[Symbol.iterator]();!(c=(f=p.next()).done);c=!0){var d=f.value;d instanceof ms?(d.firstAlignment&&r.push(d.firstAlignment),d.secondAlignment&&r.push(d.secondAlignment)):r.push(d)}}catch(t){l=!0,u=t}finally{try{c||null==p.return||p.return()}finally{if(l)throw u}}}}catch(t){i=!0,a=t}finally{try{n||null==s.return||s.return()}finally{if(i)throw a}}return r}function dh(t){return t.isPaired()&&t.isMateMapped()&&t.chr===t.mate.chr&&(t.isFirstOfPair()||t.isSecondOfPair())&&!(t.isSecondary()||t.isSupplementary())}function gh(e,r,n,i){if(e){if(0===e.length)return[];e.sort((function(t,e){return i?t.scStart-e.scStart:t.start-e.start}));var a=e[0],o=Math.max(r,i?a.scStart:a.start),s=o,h=[],c=!0,l=!1,u=t;try{for(var f,p=e[Symbol.iterator]();!(c=(f=p.next()).done);c=!0){var d=f.value,g=i?d.scStart:d.start,m=Math.max(0,g-o);h[m]===t&&(h[m]=[]),h[m].push(d)}}catch(t){l=!0,u=t}finally{try{c||null==p.return||p.return()}finally{if(l)throw u}}var v=0,b=0,y=[];try{for(;v<e.length;){for(var w=new uh;s<=n;){for(var x=t,k=void 0;!x&&s<=n;)h[k=s-o]===t?++s:x=h[k];if(!x)break;var S=x.pop();0===x.length&&(h[k]=t),w.alignments.push(S),s=i?S.scStart+S.scLengthOnRef+2:S.start+S.lengthOnRef+2,++v}if(w.alignments.length>0&&y.push(w),s=o,v===b)break;b=v}}catch(t){throw console.error(t),t}return y}return t}fh.prototype.setViewAsPairs=function(e){if(this.viewAsPairs!==e&&(this.viewAsPairs=e,this.alignmentContainer)){var r,n=this.alignmentContainer;r=e?function(e){var r={},n=[],i=!0,a=!1,o=t;try{for(var s,h=e[Symbol.iterator]();!(i=(s=h.next()).done);i=!0){var c=s.value,l=!0,u=!1,f=t;try{for(var p,d=c.alignments[Symbol.iterator]();!(l=(p=d.next()).done);l=!0){var g=p.value;if(dh(g)){var m=r[g.readName];m?(m.setSecondAlignment(g),r[g.readName]=t):(m=new ms(g),r[g.readName]=m,n.push(m))}else n.push(g)}}catch(t){u=!0,f=t}finally{try{l||null==d.return||d.return()}finally{if(u)throw f}}}}catch(t){a=!0,o=t}finally{try{i||null==h.return||h.return()}finally{if(a)throw o}}return n}(n.packedAlignmentRows):ph(n.packedAlignmentRows),n.packedAlignmentRows=gh(r,n.start,n.end)}},fh.prototype.setShowSoftClips=function(e){if(this.showSoftClips!==e&&(this.showSoftClips=e,this.alignmentContainer)){var r=function(e){var r=[],n=!0,i=!1,a=t;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var h=o.value,c=!0,l=!1,u=t;try{for(var f,p=h.alignments[Symbol.iterator]();!(c=(f=p.next()).done);c=!0){var d=f.value;r.push(d)}}catch(t){l=!0,u=t}finally{try{c||null==p.return||p.return()}finally{if(l)throw u}}}}catch(t){i=!0,a=t}finally{try{n||null==s.return||s.return()}finally{if(i)throw a}}return r}(this.alignmentContainer.packedAlignmentRows),n=this.alignmentContainer;n.packedAlignmentRows=gh(r,n.start,n.end,e)}},fh.prototype.getAlignments=function(){var r=I(e.mark((function r(n,i,a){var o,s,h,c,l,u;return e.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,o=this.genome,s=this.showSoftClips,!this.alignmentContainer||!this.alignmentContainer.contains(n,i,a)){e.next=7;break}return e.abrupt("return",this.alignmentContainer);case 7:return e.next=9,this.bamReader.readAlignments(n,i,a);case 9:if(h=e.sent,c=h.alignments,this.viewAsPairs||(c=ph([{alignments:c}])),l=c.length>0,h.packedAlignmentRows=gh(c,h.start,h.end,s),h.alignments=t,this.alignmentContainer=h,l){e.next=20;break}return e.abrupt("return",h);case 20:return e.next=22,o.sequence.getSequence(n,h.start,h.end);case 22:if(!(u=e.sent)){e.next=29;break}return h.coverageMap.refSeq=u,h.sequence=u,e.abrupt("return",h);case 29:console.error("No sequence for: "+n+":"+h.start+"-"+h.end);case 30:e.next=36;break;case 32:throw e.prev=32,e.t0=e.catch(0),console.error(e.t0),e.t0;case 36:case"end":return e.stop()}}),r,this,[[0,32]])})));return function(t,e,n){return r.apply(this,arguments)}}();var mh=en(Ia,(function(e,r){if(this.type="alignment",e.height===t&&(e.height=300),Ia.call(this,e,r),e.coverageTrackHeight===t&&(e.coverageTrackHeight=50),this.featureSource=new fh(e,r),this.coverageTrack=new bh(e,this),this.alignmentTrack=new yh(e,this),this.visibilityWindow=e.visibilityWindow||3e4,this.viewAsPairs=e.viewAsPairs,this.pairsSupported=t===e.pairsSupported,this.showSoftClips=e.showSoftClips,this.showAllBases=e.showAllBases,this.color=e.color||"rgb(185, 185, 185)",this.coverageColor=e.coverageColor||"rgb(150, 150, 150)",this.minFragmentLength=e.minFragmentLength,this.maxFragmentLength=e.maxFragmentLength,this.sortObjects={},e.sort){if(Array.isArray(e.sort)){var n=!0,i=!1,a=t;try{for(var o,s=e.sort[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var h=o.value;c(this.sortObjects,h)}}catch(t){i=!0,a=t}finally{try{n||null==s.return||s.return()}finally{if(i)throw a}}}else c(this.sortObjects,e.sort);e.sort=t}function c(e,n){var i=function(t){var e=t.split(":"),r=e[1].split("-"),n={chr:e[0],start:Number.parseInt(r[0].replace(/,/g,""))-1};return r.length>1?n.end=Number.parseInt(r[1].replace(/,/g,"")):n.end=n.start+1,n}(n.locus),a=!0,o=!1,s=t;try{for(var h,c=r.genomicStateList[Symbol.iterator]();!(a=(h=c.next()).done);a=!0){var l=h.value;if(l.chromosome.name===i.chr&&i.start>=l.start&&i.start<=l.end){e[l.id]={chr:i.chr,position:i.start,sortOption:n.option||"NUCLEOTIDE",direction:n.direction===t||"ASC"===n.direction,tag:n.tag?n.tag.toUpperCase():t};break}}}catch(t){o=!0,s=t}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}}}));function vh(e,r){var n,i;if(n=e<5?.1:Math.max(.1,Math.min(1,.1+.9*(e-5)/15)),(n=Math.round(10*n)/10)>=1)i=Rr[r];else{var a=Tr[r];if(!a)return t;i="rgba("+a[0]+","+a[1]+","+a[2]+","+n+")"}return i}mh.prototype.getFeatures=function(){var r=I(e.mark((function r(n,i,a,o,s){var h,c,l;return e.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h=this,e.next=3,this.featureSource.getAlignments(n,i,a);case 3:return(c=e.sent).alignments&&c.alignments.length>99&&(t===h.minFragmentLength&&(h.minFragmentLength=c.pairedEndStats.lowerFragmentLength),t===h.maxFragmentLength&&(h.maxFragmentLength=c.pairedEndStats.upperFragmentLength)),(l=h.sortObjects[s.genomicState.id])&&(l.chr===n&&l.position>=i&&l.position<=a?(h.alignmentTrack.sortAlignmentRows(l,c),h.trackView.repaintViews()):delete h.sortObjects[s.genomicState.id]),e.abrupt("return",c);case 8:case"end":return e.stop()}}),r,this)})));return function(t,e,n,i,a){return r.apply(this,arguments)}}(),mh.filters={noop:function(){return function(t){return!1}},strand:function(t){return function(e){return e.strand===t}},mappingQuality:function(t,e){return function(r){return!!(t&&r.mq<t)||!!(e&&r.mq>e)}}},mh.prototype.computePixelHeight=function(t){return this.coverageTrack.computePixelHeight(t)+this.alignmentTrack.computePixelHeight(t)+15},mh.prototype.draw=function(t){Ri.fillRect(t.context,0,t.pixelTop,t.pixelWidth,t.pixelHeight,{fillStyle:"rgb(255, 255, 255)"}),this.coverageTrack.height>0&&this.coverageTrack.draw(t),this.alignmentTrack.draw(t)},mh.prototype.paintAxis=function(t,e,r){this.browser.isMultiLocusMode()?t.clearRect(0,0,e,r):this.coverageTrack.paintAxis(t,e,this.coverageTrack.height)},mh.prototype.contextMenuItemList=function(t){return this.alignmentTrack.contextMenuItemList(t)},mh.prototype.popupData=function(t){return t.y>=this.coverageTrack.top&&t.y<this.coverageTrack.height?this.coverageTrack.popupData(t):this.alignmentTrack.popupData(t)},mh.prototype.menuItemList=function(){var e=this,r=[],n=cr('<div class="igv-track-menu-category igv-track-menu-border-top">');n.text("Color by"),r.push({name:t,object:n,click:t,init:t});var i=[{key:"strand",label:"read strand"}];e.alignmentTrack.hasPairs&&(i.push({key:"firstOfPairStrand",label:"first-of-pair strand"}),i.push({key:"pairOrientation",label:"pair orientation"}),i.push({key:"fragmentLength",label:"insert size (TLEN)"}));var a="tag"+(e.alignmentTrack.colorByTag?" ("+e.alignmentTrack.colorByTag+")":"");return i.push({key:"tag",label:a}),i.forEach((function(n){var i=e.alignmentTrack.colorBy===n.key;r.push(function(r,n){var i=Sr(r.label,n);return{name:t,object:i,click:function(){if(r.key===e.alignmentTrack.colorBy)e.alignmentTrack.colorBy="none",e.config.colorBy="none",e.trackView.repaintViews();else if("tag"===r.key){var t={label:"Tag Name",input:e.alignmentTrack.colorByTag?e.alignmentTrack.colorByTag:"",click:function(){e.alignmentTrack.colorBy="tag",e.config.colorBy="tag";var t=e.browser.inputDialog.$input.val().trim();t!==e.alignmentTrack.colorByTag&&(e.alignmentTrack.colorByTag=t,e.config.colorByTag=t,e.alignmentTrack.tagColors=new Ir("Set1"),cr("#color-by-tag").text(e.alignmentTrack.colorByTag)),e.trackView.repaintViews()}};e.browser.inputDialog.configure(t),e.browser.inputDialog.present(cr(e.trackView.trackDiv))}else e.alignmentTrack.colorBy=r.key,e.config.colorBy=r.key,e.trackView.repaintViews()},init:t}}(n,i))})),r.push({object:cr('<div class="igv-track-menu-border-top">')}),r.push({object:Sr("Show all bases",e.showAllBases),click:function(){e.showAllBases=!e.showAllBases,e.config.showAllBases=e.showAllBases,e.trackView.updateViews(!0)}}),r.push({object:cr('<div class="igv-track-menu-border-top">')}),e.pairsSupported&&e.alignmentTrack.hasPairs&&r.push({object:Sr("View as pairs",e.viewAsPairs),click:function(){e.viewAsPairs=!e.viewAsPairs,e.config.viewAsPairs=e.viewAsPairs,e.featureSource.setViewAsPairs(e.viewAsPairs),e.trackView.updateViews(!0)}}),r.push({object:Sr("Show soft clips",e.showSoftClips),click:function(){e.showSoftClips=!e.showSoftClips,e.config.showSoftClips=e.showSoftClips,e.featureSource.setShowSoftClips(e.showSoftClips),e.trackView.updateViews(!0)}}),r},mh.prototype.dispose=function(){this.trackView=t},mh.prototype.getState=function(){var e=Object.assign({},this.config);e.sort=t;var r=!0,n=!1,i=t;try{for(var a,o=this.browser.genomicStateList[Symbol.iterator]();!(r=(a=o.next()).done);r=!0){var s=a.value,h=this.sortObjects[s.id];h&&(e.sort=e.sort||[],e.sort.push({locus:h.chr+":"+(h.position+1),option:h.sortOption,direction:h.direction?"ASC":"DESC",tag:h.tag}))}}catch(t){n=!0,i=t}finally{try{r||null==o.return||o.return()}finally{if(n)throw i}}return e};var bh=function(t,e){this.parent=e,this.featureSource=e.featureSource,this.top=0,this.height=t.coverageTrackHeight,this.dataRange={min:0},this.paintAxis=cs};bh.prototype.computePixelHeight=function(t){return this.height},bh.prototype.draw=function(t){var e=t.context;this.top&&e.translate(0,top);t.top,t.pixelHeight;var r,n=t.features.coverageMap;this.dataRange.max=n.maximum,n.refSeq&&(r=n.refSeq.toUpperCase());var i=t.bpPerPixel,a=t.bpStart,o=a+t.pixelWidth*i+1,s=this.parent.coverageColor;"rgb(185, 185, 185)"!==this.parent.color&&(s=Vr.darkenLighten(this.parent.color,-35)),Ri.setProperties(e,{fillStyle:s,strokeStyle:s});for(var h=Math.max(1,Math.ceil(1/i)),c=0,l=n.coverage.length;c<l;c++){var u=n.bpStart+c;if(!(u<a)){if(u>o)break;var f=n.coverage[c];if(f){var p=Math.round(f.total/this.dataRange.max*this.height),d=this.height-p,g=Math.floor((u-a)/i);Ri.fillRect(e,g,d,h,p)}}}if(r)for(var m=0,v=n.coverage.length;m<v;m++){var b=n.bpStart+m;if(!(b<a)){if(b>o)break;var y=n.coverage[m];if(y){var w=y.total/this.dataRange.max*this.height,x=this.height-w,k=Math.floor((b-a)/i),S=r[m];if(y.isMismatch(S)){Ri.setProperties(e,{fillStyle:Rr[S]}),Ri.fillRect(e,k,x,h,w);for(var _=0,C=0,E=["A","C","T","G"];C<E.length;C++){var A=E[C],T=(y["pos"+A]+y["neg"+A])/this.dataRange.max*this.height;x=this.height-T-_,_+=T,Ri.setProperties(e,{fillStyle:Rr[A]}),Ri.fillRect(e,k,x,h,T)}}}}}},bh.prototype.popupData=function(t){var e=t.viewport.getCachedFeatures();if(e&&0!==e.length){var r=Math.floor(t.genomicLocation),n=t.viewport.genomicState.referenceFrame,i=e.coverageMap,a=[],o=Math.floor(r-i.bpStart),s=i.coverage[o];if(s){a.push(n.chrName+":"+Ur(1+r)),a.push({name:"Total Count",value:s.total});var h=s.posA+s.negA;h>0&&(h=h.toString()+" ("+Math.round(h/s.total*100)+"%, "+s.posA+"+, "+s.negA+"- )"),a.push({name:"A",value:h}),(h=s.posC+s.negC)>0&&(h=h.toString()+" ("+Math.round(h/s.total*100)+"%, "+s.posC+"+, "+s.negC+"- )"),a.push({name:"C",value:h}),(h=s.posG+s.negG)>0&&(h=h.toString()+" ("+Math.round(h/s.total*100)+"%, "+s.posG+"+, "+s.negG+"- )"),a.push({name:"G",value:h}),(h=s.posT+s.negT)>0&&(h=h.toString()+" ("+Math.round(h/s.total*100)+"%, "+s.posT+"+, "+s.negT+"- )"),a.push({name:"T",value:h}),(h=s.posN+s.negN)>0&&(h=h.toString()+" ("+Math.round(h/s.total*100)+"%, "+s.posN+"+, "+s.negN+"- )"),a.push({name:"N",value:h}),a.push("<HR/>"),a.push({name:"DEL",value:s.del.toString()}),a.push({name:"INS",value:s.ins.toString()})}return a}};var yh=function(e,r){this.parent=r,this.browser=r.browser,this.featureSource=r.featureSource,this.top=0===e.coverageTrackHeight?0:e.coverageTrackHeight+5,this.alignmentRowHeight=e.alignmentRowHeight||14,this.negStrandColor=e.negStrandColor||"rgba(150, 150, 230, 0.75)",this.posStrandColor=e.posStrandColor||"rgba(230, 150, 150, 0.75)",this.insertionColor=e.insertionColor||"rgb(138, 94, 161)",this.deletionColor=e.deletionColor||"black",this.skippedColor=e.skippedColor||"rgb(150, 170, 170)",this.pairConnectorColor=e.pairConnectorColor,this.smallFragmentLengthColor=e.smallFragmentLengthColor||"rgb(0, 0, 150)",this.largeFragmentLengthColor=e.largeFragmentLengthColor||"rgb(200, 0, 0)",this.pairOrientation=e.pairOrienation||"fr",this.pairColors={},this.pairColors.RL=e.rlColor||"rgb(0, 150, 0)",this.pairColors.RR=e.rrColor||"rgb(20, 50, 200)",this.pairColors.LL=e.llColor||"rgb(0, 150, 150)",this.colorBy=e.colorBy||"pairOrientation",this.colorByTag=e.colorByTag?e.colorByTag.toUpperCase():t,this.bamColorTag=e.bamColorTag===t?"YC":e.bamColorTag,this.hideSmallIndels=e.hideSmallIndels,this.indelSizeThreshold=e.indelSizeThreshold||1,this.hasPairs=!1};yh.prototype.computePixelHeight=function(t){if(t.packedAlignmentRows){var e=0;return t.hasDownsampledIntervals()&&(e+=10),e+this.alignmentRowHeight*t.packedAlignmentRows.length+5}return this.height},yh.prototype.draw=function(e){var r=e.features,n=e.context,i=e.bpPerPixel,a=e.bpStart,o=e.pixelWidth,s=a+o*i+1,h=r.packedAlignmentRows,c=this.parent.showSoftClips,l=this.parent.showAllBases,u=(e.top,e.pixelHeight,r.sequence);u&&(u=u.toUpperCase());var f=0;if(n.save(),this.top&&n.translate(0,this.top),r.hasDownsampledIntervals()?(f=10,r.downsampledIntervals.forEach((function(t){var e=(t.start-a)/i,r=(t.end-a)/i;r-e>5&&(e+=1,r-=1),Ri.fillRect(n,e,2,r-e,3,{fillStyle:"black"})}))):f=0,this.alignmentsYOffset=f,h)for(var p=h.length,d=0;d<p;d++){var g=h[d],m=f+this.alignmentRowHeight*d,v=this.alignmentRowHeight<=4?this.alignmentRowHeight:this.alignmentRowHeight-2,b=!0,y=!1,w=t;try{for(var x,k=g.alignments[Symbol.iterator]();!(b=(x=k.next()).done);b=!0){var S=x.value;if(this.hasPairs=this.hasPairs||S.isPaired(),!(S.start+S.lengthOnRef<a)){if(S.start>s)break;!0!==S.hidden&&(S instanceof ms?(_.call(this,S,m,v),C.call(this,S.firstAlignment,m,v),S.secondAlignment&&C.call(this,S.secondAlignment,m,v)):C.call(this,S,m,v))}}}catch(t){y=!0,w=t}finally{try{b||null==k.return||k.return()}finally{if(y)throw w}}}function _(t,e,r){var o=this.getConnectorColor(t.firstAlignment),h=(t.connectingStart-a)/i,c=(t.connectingEnd-a)/i,l=e+r/2;t.connectingEnd<a||t.connectingStart>s||(t.mq<=0&&(o=Vr.addAlpha(o,.15)),Ri.setProperties(n,{fillStyle:o,strokeStyle:o}),Ri.strokeLine(n,h,l,c,l))}function C(e,o,h){if(!(e.start+e.lengthOnRef<a||e.start>s)){var f,p=c?e.blocks:e.blocks.filter((function(t){return"S"!==t.type})),d=this.getAlignmentColor(e),g=d;e.mq<=0&&(d=Vr.addAlpha(d,.15)),Ri.setProperties(n,{fillStyle:d,strokeStyle:g});for(var m=0;m<p.length;m++){var v=p[m];if(!(m!==p.length-1&&p[m+1].start<a)){if(E.call(this,v,m),v.start+v.len>s)break;if(e.insertions){var b=-1,y=!0,w=!1,x=t;try{for(var k,S=e.insertions[Symbol.iterator]();!(y=(k=S.next()).done);y=!0){var _=k.value;if(!(this.hideSmallIndels&&_.len<=this.indelSizeThreshold)&&!(_.start<a)){if(_.start>s)break;var C=(_.start-a)/i-1;if(C-b>2){Ri.fillRect(n,C,o-1,3,h+2,{fillStyle:this.insertionColor}),b=C}}}}catch(t){w=!0,x=t}finally{try{y||null==S.return||S.return()}finally{if(w)throw x}}}}}}function E(s,c){var m=s.start-r.start,v=(s.start-a)/i,b=(s.start+s.len-a)/i,y=Math.max(1,b-v),w=this.alignmentRowHeight/2,x=o+h/2,k="S"===s.type,S=e.mq<=0||this.highlightedAlignmentReadNamed===e.readName||k,_=g;if(this.highlightedAlignmentReadNamed===e.readName?_="red":k&&(_="rgb(50,50,50)"),s.gapType!==t&&b!==t&&f!==t)if("D"===s.gapType){if(y<2&&this.hideSmallIndels&&s.len<this.indelSizeThreshold)return;Ri.strokeLine(n,f,x,v,x,{strokeStyle:this.deletionColor})}else"N"===s.gapType&&Ri.strokeLine(n,f,x,v,x,{strokeStyle:this.skippedColor});f=b;var C,E,T=!0===e.strand&&c===p.length-1,R=!1===e.strand&&0===c;T|R?(T?(C=[v,b,b+w,b,v,v],E=[o,o,o+h/2,o+h,o+h,o]):R&&(C=[b,v,v-w,v,b,b],E=[o,o,o+h/2,o+h,o+h,o]),Ri.fillPolygon(n,C,E,{fillStyle:d}),S&&Ri.strokePolygon(n,C,E,{strokeStyle:_})):(Ri.fillRect(n,v,o,y,h,{fillStyle:d}),S&&(n.save(),n.strokeStyle=_,n.strokeRect(v,o,y,h),n.restore()));if(k||l||u&&e.seq&&"*"!==e.seq)for(var L=e.seq?e.seq.toUpperCase():t,I=e.qual,M=s.seqOffset,P=0,D=s.len;P<D;P++)if(!(m+P<0)){var F=L?L.charAt(M+P):"",N=u.charAt(m+P);if("="===F&&(F=N),"X"===F||N!==F||k||l){var B=void 0;if(!k&&I!==t&&I.length>M+P)B=vh(I[M+P],F,s.start);else B=Rr[F];if(B){var O=(s.start+P-a)/i,z=Math.max(1,1/i);A(n,i,{x:O,y:o,width:z,height:h},B,F)}}}}function A(t,e,r,n,i){var a;if(.1,e<=.1&&r.height>=8){var o=Math.min(10,r.height);t.font=o+"px sans-serif",a=r.x+r.width/2,Ri.strokeText(t,i,a-t.measureText(i).width/2,o-1+r.y,{strokeStyle:n})}else Ri.fillRect(t,r.x,r.y,r.width,r.height,{fillStyle:n})}}n.restore()},yh.prototype.sortAlignmentRows=function(e,r){var n=e.direction;null===r&&(r=this.featureSource.alignmentContainer);var i=!0,a=!1,o=t;try{for(var s,h=r.packedAlignmentRows[Symbol.iterator]();!(i=(s=h.next()).done);i=!0){s.value.updateScore(e,r)}}catch(t){a=!0,o=t}finally{try{i||null==h.return||h.return()}finally{if(a)throw o}}r.packedAlignmentRows.sort((function(t,e){var r=t.score>e.score?1:t.score<e.score?-1:0;return!0===n?r:-r}))},yh.prototype.popupData=function(e){var r=this.getClickedObject(e.viewport,e.y,e.genomicLocation);return r?r.popupData(e.genomicLocation):t},yh.prototype.contextMenuItemList=function(e){var r=this,n=e.viewport,i=e.viewport.genomicState,a=this.getClickedObject(e.viewport,e.y,e.genomicLocation),o=a&&!a.paired&&"function"==typeof a.isPaired,s=[];return s.push("<b>Sort by...</b>"),s.push({label:"&nbsp; base",click:function(){return h("NUCLEOTIDE")}}),s.push({label:"&nbsp; read strand",click:function(){return h("STRAND")}}),s.push({label:"&nbsp; insert size",click:function(){return h("INSERT_SIZE")}}),s.push({label:"&nbsp; chromosome of mate",click:function(){return h("MATE_CHR")}}),s.push({label:"&nbsp; mapping quality",click:function(){return h("MQ")}}),s.push({label:"&nbsp; tag",click:function(){var t={label:"Tag Name",input:r.sortByTag?r.sortByTag:"",click:function(){var t=r.browser.inputDialog.$input.val().trim();r.sortByTag=t,c({chr:i.referenceFrame.chrName,position:Math.floor(e.genomicLocation),sortOption:"TAG",tag:t})}};r.browser.inputDialog.configure(t),r.browser.inputDialog.present(cr(r.parent.trackView.trackDiv))}}),s.push("<hr/>"),o&&a.isMateMapped()&&s.push({label:"View mate in split screen",click:function(){a.mate&&(r.highlightedAlignmentReadNamed=a.readName,r.browser.presentSplitScreenMultiLocusPanel(a,e.viewport.genomicState))},init:t}),s.push({label:"View read sequence",click:function(){var t=a;if(!t||!t.seq)return;var e=t.seq;r.browser.presentAlert(e)}}),s.push("<hr/>"),s;function h(t){c({chr:i.referenceFrame.chrName,position:Math.floor(e.genomicLocation),sortOption:t})}function c(t){if(e.viewport.tile){var i=r.parent.sortObjects,a=i[n.genomicState.id];t.direction=!a||!a.direction,r.sortAlignmentRows(t,e.viewport.getCachedFeatures()),r.parent.trackView.repaintViews(),i[n.genomicState.id]=t}}},yh.prototype.getClickedObject=function(e,r,n){var i=this.parent.showSoftClips,a=e.getCachedFeatures();if(a&&0!==a.length){var o=a.packedAlignmentRows,s=a.downsampledIntervals,h=Math.floor((r-this.top-this.alignmentsYOffset)/this.alignmentRowHeight);if(h<0){for(var c=0;c<s.length;c++)if(s[c].start<=n&&s[c].end>=n)return s[c]}else if(h<o.length){var l=o[h].alignments.filter((function(t){var e=i?t.scStart:t.start,r=i?t.scLengthOnRef:t.lengthOnRef;return n>=e&&n<=e+r}));if(l.length>0)return l[0]}return t}},yh.prototype.getConnectorColor=function(t){if(this.pairConnectorColor)return this.pairConnectorColor;switch(this.colorBy){case"strand":case"firstOfPairStrand":case"pairOrientation":case"tag":return this.parent.color||"rgb(200, 200, 200)";default:return this.getAlignmentColor(t)}},yh.prototype.getAlignmentColor=function(e){var r,n=this.parent.color;switch(this.colorBy){case"strand":n=e.strand?this.posStrandColor:this.negStrandColor;break;case"firstOfPairStrand":e instanceof ms?n=e.firstOfPairStrand()?this.posStrandColor:this.negStrandColor:e.isPaired()&&(e.isFirstOfPair()?n=e.strand?this.posStrandColor:this.negStrandColor:e.isSecondOfPair()?n=e.strand?this.negStrandColor:this.posStrandColor:console.error("ERROR. Paired alignments are either first or second."));break;case"pairOrientation":if(e.mate&&e.isMateMapped()&&e.mate.chr!==e.chr)n=xh(e.mate.chr);else if(this.pairOrientation&&e.pairOrientation){var i=wh[this.pairOrientation];if(i){var a=this.pairColors[i[e.pairOrientation]];a&&(n=a)}}break;case"fragmentLength":e.mate&&e.isMateMapped()&&e.mate.chr!==e.chr?n=xh(e.mate.chr):this.parent.minFragmentLength&&Math.abs(e.fragmentLength)<this.parent.minFragmentLength?n=this.smallFragmentLengthColor:this.parent.maxFragmentLength&&Math.abs(e.fragmentLength)>this.parent.maxFragmentLength&&(n=this.largeFragmentLengthColor);break;case"tag":(r=e.tags()[this.colorByTag])!==t&&(this.bamColorTag===this.colorByTag?n="rgb("+r+")":(this.tagColors||(this.tagColors=new Ir("Set1")),n=this.tagColors.getColor(r)));break;default:n=this.parent.color}return n};var wh={fr:{F1R2:"LR",F2R1:"LR",F1F2:"LL",F2F1:"LL",R1R2:"RR",R2R1:"RR",R1F2:"RL",R2F1:"RL"},rf:{R1F2:"LR",R2F1:"LR",R1R2:"LL",R2R1:"LL",F1F2:"RR",F2F1:"RR",F1R2:"RL",F2R1:"RL"},ff:{F2F1:"LR",R1R2:"LR",F2R1:"LL",R1F2:"LL",R2F1:"RR",F1R2:"RR",R2R1:"RL",F1F2:"RL"}};function xh(t){if(kh[t])return kh[t];if(kh["chr"+t]){var e=kh["chr"+t];return kh[t]=e,e}var r=Vr.randomRGB();return kh[t]=r,r}var kh={chrX:"rgb(204, 153, 0)",chrY:"rgb(153, 204, 0",chrUn:"rgb(50, 50, 50)",chr1:"rgb(80, 80, 255)",chrI:"rgb(139, 155, 187)",chr2:"rgb(206, 61, 50)",chrII:"rgb(206, 61, 50)",chr2a:"rgb(216, 71, 60)",chr2b:"rgb(226, 81, 70)",chr3:"rgb(116, 155, 88)",chrIII:"rgb(116, 155, 88)",chr4:"rgb(240, 230, 133)",chrIV:"rgb(240, 230, 133)",chr5:"rgb(70, 105, 131)",chr6:"rgb(186, 99, 56)",chr7:"rgb(93, 177, 221)",chr8:"rgb(128, 34, 104)",chr9:"rgb(107, 215, 107)",chr10:"rgb(213, 149, 167)",chr11:"rgb(146, 72, 34)",chr12:"rgb(131, 123, 141)",chr13:"rgb(199, 81, 39)",chr14:"rgb(213, 143, 92)",chr15:"rgb(122, 101, 165)",chr16:"rgb(228, 175, 105)",chr17:"rgb(59, 27, 83)",chr18:"rgb(205, 222, 183)",chr19:"rgb(97, 42, 121)",chr20:"rgb(174, 31, 99)",chr21:"rgb(231, 199, 111)",chr22:"rgb(90, 101, 94)",chr23:"rgb(204, 153, 0)",chr24:"rgb(153, 204, 0)",chr25:"rgb(51, 204, 0)",chr26:"rgb(0, 204, 51)",chr27:"rgb(0, 204, 153)",chr28:"rgb(0, 153, 204)",chr29:"rgb(10, 71, 255)",chr30:"rgb(71, 117, 255)",chr31:"rgb(255, 194, 10)",chr32:"rgb(255, 209, 71)",chr33:"rgb(153, 0, 51)",chr34:"rgb(153, 26, 0)",chr35:"rgb(153, 102, 0)",chr36:"rgb(128, 153, 0)",chr37:"rgb(51, 153, 0)",chr38:"rgb(0, 153, 26)",chr39:"rgb(0, 153, 102)",chr40:"rgb(0, 128, 153)",chr41:"rgb(0, 51, 153)",chr42:"rgb(26, 0, 153)",chr43:"rgb(102, 0, 153)",chr44:"rgb(153, 0, 128)",chr45:"rgb(214, 0, 71)",chr46:"rgb(255, 20, 99)",chr47:"rgb(0, 214, 143)",chr48:"rgb(20, 255, 177)"},Sh=en(Ia,(function(e,r){Ia.call(this,e,r),this.theta=e.theta||Math.PI/4,this.sinTheta=Math.sin(this.theta),this.cosTheta=Math.cos(this.theta),this.height=e.height||250,this.autoHeight=!0,this.arcOrientation=e.arcOrientation===t||e.arcOrientation,this.thickness=e.thickness||2,this.color=e.color||"rgb(180,25,137)",this.visibilityWindow=-1,this.colorAlphaCache={}}));function _h(t,e){var r=this.colorAlphaCache[t];return r||(r=Vr.addAlpha(t,e),this.colorAlphaCache[t]=r),r}Sh.prototype.getState=function(){var t=this.config||{};return t.arcOrientation=this.arcOrientation,t.thickness=this.thickness,t.color=this.color,t},Sh.prototype.getFeatures=function(t,e,r){var n=this,i=this.browser.genome;if(n.featureCache)return Promise.resolve(n.featureCache.queryFeatures(t,e,r));var a=nn(n.config);return On.loadString(n.config.url,a).then((function(a){var o=new na("bedpe"),s=(o.parseHeader(a),o.parseFeatures(a));return n.featureCache=new Qa(s,i),n.featureCache.queryFeatures(t,e,r)}))},Sh.prototype.draw=function(t){var e=this,r=t.context,n=t.pixelWidth,i=t.pixelHeight,a=t.viewportWidth,o=t.bpPerPixel,s=t.bpStart,h=o;Ri.fillRect(r,0,t.pixelTop,n,i,{fillStyle:"rgb(255, 255, 255)"});var c=t.features;c&&(!function(){var t=0;c.forEach((function(e){var r=(e.start-s)/h,i=(e.end-s)/h;i>=0&&r<=n&&(t=Math.max(t,i-r))}));var r=Math.min(a,t)/2;if(t>0){var o=i/r;e.theta=function(t){var e,r=[.01570925532366355,.15838444032453644,.3249196962329063,.5095254494944288,.7265425280053609,.9999999999999999],n=[.031415926535897934,.3141592653589793,.6283185307179586,.9424777960769379,1.2566370614359172,1.5707963267948966];for(e=0;e<r.length&&!(r[e]>t);e++);var i=0===e?0:r[e-1],a=(t-i)/((e<r.length?r[e]:1)-i),o=0===e?0:n[e-1],s=e<n.length?n[e]:Math.PI/2;return o+a*(s-o)}(o),e.sinTheta=Math.sin(e.theta),e.cosTheta=Math.cos(e.theta)}}(),c.forEach((function(t){var n=Math.round((t.m1-s)/h),i=Math.round((t.m2-s)/h),o=e.arcOrientation,c=i-n;c<3&&(c=3,n--);var l,u,f,p=c/2,d=p/e.sinTheta,g=e.cosTheta*d,m=n+p;o?(l=e.height+g,u=Math.PI+Math.PI/2-e.theta,f=Math.PI+Math.PI/2+e.theta):(l=-g,u=Math.PI/2-e.theta,f=Math.PI/2+e.theta);var v=t.color||e.color;v&&c>a&&(v=_h.call(e,v,"0.1")),r.strokeStyle=v,r.lineWidth=t.thickness||e.thicknewss||1,r.beginPath(),r.arc(m,l,d,u,f,!1),r.stroke()})))},Sh.prototype.menuItemList=function(){var t=this;return[{name:"Toggle arc direction",click:function(){t.arcOrientation=!t.arcOrientation,t.trackView.repaintViews()}},{name:"Set track color",click:function(){t.trackView.presentColorPicker()}}]};var Ch=en(Ia,(function(e,r){this.type="variant",this.visibilityWindow=e.visibilityWindow,Ia.call(this,e,r),this.displayMode=e.displayMode||"EXPANDED",this.labelDisplayMode=e.labelDisplayMode,this.variantHeight=e.variantHeight||10,this.squishedCallHeight=e.squishedCallHeight||1,this.expandedCallHeight=e.expandedCallHeight||10,this.expandedVGap=e.expandedVGap!==t?e.expandedVGap:2,this.squishedVGap=e.squishedVGap!==t?e.squishedVGap:1,this.expandedGroupGap=e.expandedGroupGap||10,this.squishedGroupGap=e.squishedGroupGap||5,this.featureHeight=e.featureHeight||14,this.visibilityWindow=e.visibilityWindow,this.featureSource=new xo(e,r.genome),this.nonRefColor=e.nonRefColor||"rgb(200, 200, 215)",this.mixedColor=e.mixedColor||"rgb(200, 220, 200)",this.homrefColor=e.homrefColor||"rgb(200, 200, 200)",this.homvarColor=e.homvarColor||"rgb(17,248,254)",this.hetvarColor=e.hetvarColor||"rgb(34,12,253)",this.sortDirection="ASC",this.nRows=1}));function Eh(e,r,n,i){var a,o="",s=[];a=[];var h=r.alternateBases.split(",");if(e.genotype.forEach((function(t){if(0===t)o+=r.referenceBases;else{var e=h[t-1].replace("<","&lt;");o+=e}})),e.callSetName!==t&&a.push({name:"Name",value:e.callSetName}),a.push({name:"Genotype",value:o}),e.phaseset!==t&&a.push({name:"Phase set",value:e.phaseset}),e.genotypeLikelihood!==t&&a.push({name:"genotypeLikelihood",value:e.genotypeLikelihood.toString()}),i){var c=i.getAttributes(e.callSetName);c&&Object.keys(c).forEach((function(t){var e=t.replace(/([A-Z])/g," $1");e=e.charAt(0).toUpperCase()+e.slice(1),a.push({name:e,value:c[t]})}))}var l=Object.keys(e.info);return l.length&&a.push("<hr>"),l.forEach((function(t){a.push({name:t,value:e.info[t]})})),s.length>0&&(a.push("<HR/>"),a=a.concat(s)),a}Ch.prototype.postInit=I(e.mark((function r(){var n,i;return e.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getFileHeader();case 2:return e.sent,t===this.visibilityWindow&&(zr(n=this.config.url instanceof File?this.config.url.name:this.config.url)&&n.toLowerCase().includes("gnomad")?this.visibilityWindow=1e3:this.callSets?(i=this.callSets.length,this.visibilityWindow=Math.max(1e3,1e6-1e4*i)):this.visibilityWindow=1e6),e.abrupt("return",this);case 5:case"end":return e.stop()}}),r,this)}))),Ch.prototype.getFileHeader=I(e.mark((function r(){var n;return e.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.header){e.next=4;break}return e.abrupt("return",this.header);case 4:if("function"!=typeof this.featureSource.getFileHeader){e.next=13;break}return e.next=7,this.featureSource.getFileHeader();case 7:return(n=e.sent)&&(n.name&&!this.config.name&&(this.name=n.name),n.color&&!this.config.color&&(this.color="rgb("+n.color+")"),this.callSets=n.callSets||[]),this.header=n,e.abrupt("return",n);case 13:return this.callSets=[],e.abrupt("return",t);case 15:case"end":return e.stop()}}),r,this)}))),Ch.prototype.getCallsetsLength=function(){return this.callSets.length},Ch.prototype.getFeatures=function(){var r=I(e.mark((function r(n,i,a,o){return e.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.header!==t){e.next=4;break}return e.next=3,this.getFileHeader();case 3:this.header=e.sent;case 4:return e.abrupt("return",this.featureSource.getFeatures(n,i,a,o,this.visibilityWindow));case 5:case"end":return e.stop()}}),r,this)})));return function(t,e,n,i){return r.apply(this,arguments)}}(),Ch.prototype.computePixelHeight=function(e){if("COLLAPSED"===this.displayMode)return this.nRows=1,10+this.variantHeight;var r=0;if(e){var n=!0,i=!1,a=t;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var h=o.value;h.row&&h.row>r&&(r=h.row)}}catch(t){i=!0,a=t}finally{try{n||null==s.return||s.return()}finally{if(i)throw a}}}var c="EXPANDED"===this.displayMode?this.expandedVGap:this.squishedVGap;this.nRows=r+1;var l=10+this.nRows*(this.variantHeight+c);this.variantBandHeight=l;var u="EXPANDED"===this.displayMode?this.expandedCallHeight:this.squishedCallHeight;return l+c+(this.getCallsetsLength()*this.nRows+1)*(u+c)},Ch.prototype.draw=function(e){var r=e.context,n=this.callSets,i=this.getCallsetsLength(),a=e.pixelWidth,o=e.pixelHeight,s="EXPANDED"===this.displayMode?this.expandedCallHeight:this.squishedCallHeight,h=e.bpPerPixel,c=e.bpStart,l=c+a*h+1;Ri.fillRect(r,0,e.pixelTop,a,o,{fillStyle:"rgb(255, 255, 255)"});var u="EXPANDED"===this.displayMode?this.expandedVGap:this.squishedVGap;n&&i>0&&"COLLAPSED"!==this.displayMode&&Ri.strokeLine(r,0,this.variantBandHeight,a,this.variantBandHeight,{strokeStyle:"rgb(224,224,224) "});var f=e.features;if(f){var p=!0,d=!1,g=t;try{for(var m,v=f[Symbol.iterator]();!(p=(m=v.next()).done);p=!0){var b=m.value;if(!(b.end<c)){if(b.start>l)break;var y=10+("COLLAPSED"===this.displayMode?0:b.row*(this.variantHeight+u)),w=this.variantHeight,x=Math.round((b.start-c)/h),k=Math.round((b.end-c)/h),S=Math.max(1,k-x);if(S<3?(S=3,x-=1):S>5&&(x+=1,S-=2),"NONVARIANT"===b.type?r.fillStyle=this.nonRefColor:"MIXED"===b.type?r.fillStyle=this.mixedColor:r.fillStyle=this.color,r.fillRect(x,y,S,w),i>0&&b.calls&&"COLLAPSED"!==this.displayMode){var _=0,C=!0,E=!1,A=t;try{for(var T,R=n[Symbol.iterator]();!(C=(T=R.next()).done);C=!0){var L=T.value,I=b.calls[L.id];if(I){var M=this.variantBandHeight+u+(_+b.row)*(s+u),P=!0,D=!0;I.genotype.forEach((function(t){0!==t&&(D=!1),0===t&&(P=!1)})),r.fillStyle=D?this.homrefColor:P?this.homvarColor:this.hetvarColor,r.fillRect(x,M,S,s)}_++}}catch(t){E=!0,A=t}finally{try{C||null==R.return||R.return()}finally{if(E)throw A}}}}}}catch(t){d=!0,g=t}finally{try{p||null==v.return||v.return()}finally{if(d)throw g}}}},Ch.prototype.popupData=function(e,r){r||(r=this.clickedFeatures(e));var n=e.genomicLocation,i=this.browser.genome.id,a=[],o=this.browser.sampleInformation,s=!0,h=!1,c=t;try{for(var l,u=r[Symbol.iterator]();!(s=(l=u.next()).done);s=!0){var f=l.value;if(a.length>0&&a.push("<HR>"),"COLLAPSED"===self.displayMode)Array.prototype.push.apply(a,f.popupData(n,this.type));else{var p=e.y,d="EXPANDED"===this.displayMode?this.expandedVGap:this.squishedVGap;if(p<=this.variantBandHeight){var g=Math.floor((p-10)/(this.variantHeight+d));f.row===g&&Array.prototype.push.apply(a,f.popupData(n,i),this.type)}else{var m=this.callSets;if(m&&f.calls){var v=this.nRows*("SQUISHED"===this.displayMode?this.squishedCallHeight:this.expandedCallHeight),b=Math.floor((p-this.variantBandHeight)/(v+d));if(b>=0&&b<m.length){var y=m[b],w=f.calls[y.id];Array.prototype.push.apply(a,Eh(w,f,i,o))}}}}}}catch(t){h=!0,c=t}finally{try{s||null==u.return||u.return()}finally{if(h)throw c}}return a},Ch.prototype.menuItemList=function(){var t=this,e=[];return e.push({object:cr('<div class="igv-track-menu-border-top">')}),["COLLAPSED","SQUISHED","EXPANDED"].forEach((function(r){e.push({object:Sr({COLLAPSED:"Collapse",SQUISHED:"Squish",EXPANDED:"Expand"}[r],r===t.displayMode),click:function(){t.displayMode=r,t.trackView.checkContentHeight(),t.trackView.repaintViews()}})})),e};var Ah=xr.dataRangeMenuItem,Th=en(Ia,(function(e,r){var n=e.url,i=e.name;this.config=e,this.url=n,this.name=i,this.pValueField=e.pValueField||"pValue",this.geneField=e.geneField||"geneSymbol",this.snpField=e.snpField||"snp";var a=e.minLogP||e.min,o=e.maxLogP||e.max;this.dataRange={min:a||3.5,max:o||25},this.autoscale=!o||e.autoscale,this.autoscalePercentile=e.autoscalePercentile===t?98:e.autoscalePercentile,this.background=e.background,this.divider=e.divider||"rgb(225,225,225)",this.dotSize=e.dotSize||2,this.height=e.height||100,this.autoHeight=!1,this.disableButtons=e.disableButtons,this.visibilityWindow=e.visibilityWindow===t?2e6:e.visibilityWindow>=0?Math.min(2e6,e.visibilityWindow):2e6,this.featureSource=new xo(e,r.genome),Oo.gtexLoaded=!0}));Th.prototype.paintAxis=function(t,e,r){var n=(this.dataRange.max-this.dataRange.min)/r,i={font:"normal 10px Arial",textAlign:"right",strokeStyle:"black"};Ri.fillRect(t,0,0,e,r,{fillStyle:"rgb(255, 255, 255)"});for(var a=Math.ceil(10*(this.dataRange.max-this.dataRange.min)/r),o=4;o<=this.dataRange.max;o+=a){var s,h,c,l,u;s=(u=.85*e)-5,h=u,c=l=r-Math.round((o-this.dataRange.min)/n),Ri.strokeLine(t,s,c,h,l,i),c>8&&Ri.fillText(t,o,s-1,c+2,i)}i.textAlign="center",Ri.fillText(t,"-log10(pvalue)",e/4,r/2,i,{rotate:{angle:-90}})},Th.prototype.getFeatures=function(t,e,r){var n=this.pValueField;return this.featureSource.getFeatures(t,e,r).then((function(t){return t.forEach((function(t){t.value=t[n]})),t}))},Th.prototype.draw=function(t){var e=this,r=t.features,n=t.context,i=t.bpPerPixel,a=t.bpStart,o=t.pixelWidth,s=t.pixelHeight,h=(e.dataRange.max-e.dataRange.min)/s,c=t.genomicState.selection;if(this.background&&Ri.fillRect(n,0,0,o,s,{fillStyle:this.background}),Ri.strokeLine(n,0,s-1,o,s-1,{strokeStyle:this.divider}),n){var l=r.length;n.save(),u(!1),u(!0),n.restore()}function u(t){var u,f,p,d,g,m,v,b,y,w=t?2*e.dotSize:e.dotSize;for(f=0;f<l;f++)if(u=r[f],!((p=Math.round(u.position-a+.5)/i)<0)){if(p>o)break;if(v=u.snp.toUpperCase(),b=u[e.geneField].toUpperCase(),m=c&&(c.snp===v||c.gene===b),!t||m){c&&c.snp===v&&c.addGene(b);var x=-Math.log(u[e.pValueField])/Math.LN10;x>=e.dataRange.min&&(x>e.dataRange.max?(x=e.dataRange.max,y=!0):y=!1,d=Math.max(0+w,s-Math.round((x-e.dataRange.min)/h)),u.px=p,u.py=d,t&&c?(g=c.colorForGene(b),Ri.setProperties(n,{fillStyle:g,strokeStyle:"black"})):(g=y?"rgb(150, 150, 150)":"rgb(180, 180, 180)",Ri.setProperties(n,{fillStyle:g,strokeStyle:g})),Ri.fillCircle(n,p,d,w),Ri.strokeCircle(n,p,d,w))}}}},Th.prototype.popupData=function(t){var e=t.viewport.getCachedFeatures();if(!e||0===e.length)return[];var r=t.genomicLocation,n=(t.x,t.y),i=t.viewport.genomicState.referenceFrame,a=2*this.dotSize*i.bpPerPixel,o=this.dotSize,s=this.name,h=[];return e.forEach((function(t){t.end>=r-a&&t.start<=r+a&&t.py-n<2*o&&(h.length>0&&h.push("<hr>"),h.push({name:"snp id",value:t.snp},{name:"gene id",value:t.geneId},{name:"gene name",value:t.geneName},{name:"p value",value:t.pValue},{name:"tissue",value:s}))})),h},Th.prototype.menuItemList=function(){var e=this,r=[];return r.push(Ah(this.trackView)),r.push({object:Sr("Autoscale",e.autoscale),click:function(){e.autoscale=!e.autoscale,e.config.autoscale=e.autoscale,e.trackView.setDataRange(t,t,e.autoscale)}}),r},Th.prototype.doAutoscale=function(t){if(t.length>0){var e=t.map((function(t){return-Math.log(t.value)/Math.LN10}));this.dataRange.max=Pr(e,this.autoscalePercentile)}else{var r=this.config.maxLogP||this.config.max;this.dataRange.max=r||25}return this.dataRange};var Rh="VARIANT",Lh="TRAIT",Ih=function(e){this.config=e,this.url=e.url,this.trait=e.trait,this.dataset=e.dataset,this.pvalue=e.pvalue,e.valueThreshold===t&&(e.valueThreshold=.05),e.dataset===t?(this.queryJson=e.queryJson||Fh,this.jsonToVariants=e.jsonToVariants||Nh):(this.queryJson=e.queryJson||Dh,this.jsonToVariants=e.jsonToVariants||Ph)};Ih.prototype.getFeatures=function(e,r,n){var i=this;this.genome;return new Promise((function(a,o){if(i.cache&&i.cache.chr===e&&i.cache.end>n&&i.cache.start<r)a(i.cache.featuresBetween(r,n));else{var s=Math.max(n-r,1e7)/2,h=(n+r)/2,c=e.startsWith("chr")?e.substring(3):e,l=Math.max(0,h-s),u=h+s,f=i.config.proxy?i.config.proxy:i.url,p=i.queryJson(c,l,u,i.config);On.loadJson(f,{sendData:p,withCredentials:i.config.withCredentials}).then((function(r){var n;r?r.error_code?(Mn.presentAlert("Error querying trait "+i.trait+"  (error_code="+r.error_code+")",t),a(null)):((n=i.jsonToVariants(r,i.config)).sort((function(t,e){return t.POS-e.POS})),i.cache=new Mh(e,l,u,n),a(n)):a(null)})).catch(o)}}))};var Mh=function(t,e,r,n){var i,a,o;for(this.chr=t,this.start=e,this.end=r,this.binSize=(r-e)/100,this.binIndeces=[0],this.features=n,o=0,i=0;i<n.length;i++)(a=Math.max(0,Math.floor((n[i].POS-this.start)/this.binSize)))>o&&(this.binIndeces.push(i),o=a)};function Ph(e,r){var n=[];return e.variants.forEach((function(e){var i={};e.forEach((function(t){for(var e in t)t.hasOwnProperty(e)&&("POS"===e&&(i.start=t[e]-1),i[e]=t[e])})),i.pvalue=i[r.pvalue][r.dataset][r.trait],i[r.pvalue]=t,n.push(i)})),n}function Dh(t,e,r,n){var i=n.trait,a=n.pvalue,o=n.dataset,s={passback:"x",entity:"variant",properties:{cproperty:["VAR_ID","DBSNP_ID","CHROM","POS"],orderBy:["CHROM"],dproperty:{},pproperty:JSON.parse('{"'+a+'": {"'+o+'": ["'+i+'"]}}')},filters:[{dataset_id:"x",phenotype:"x",operand:"CHROM",operator:"EQ",value:t,operand_type:"STRING"},{dataset_id:"x",phenotype:"x",operand:"POS",operator:"GTE",value:e,operand_type:"INTEGER"},{dataset_id:"x",phenotype:"x",operand:"POS",operator:"LTE",value:r,operand_type:"INTEGER"},{dataset_id:o,phenotype:i,operand:a,operator:"LT",value:n.valueThreshold,operand_type:"FLOAT"}]};return JSON.stringify(s)}function Fh(t,e,r,n){var i=n.url.includes("variant")?Rh:Lh,a=n.pvalue?n.pvalue:"PVALUE",o={user_group:"ui",filters:[{operand:"CHROM",operator:"EQ",value:t,filter_type:"STRING"},{operand:"POS",operator:"GT",value:e,filter_type:"FLOAT"},{operand:"POS",operator:"LT",value:r,filter_type:"FLOAT"},{operand:a,operator:"LTE",value:n.valueThreshold,filter_type:"FLOAT"}],columns:i===Lh?["CHROM","POS","DBSNP_ID","PVALUE","ZSCORE"]:["CHROM","POS",a,"DBSNP_ID"]};return i===Lh&&(o.trait=n.trait),n.proxy?"url="+n.url+"&data="+JSON.stringify(o):JSON.stringify(o)}function Nh(t,e){return t.variants.forEach((function(t){t.chr=t.CHROM,t.start=t.POS-1})),t.variants}Mh.prototype.featuresBetween=function(t,e){var r=Math.max(0,Math.min(Math.floor((t-this.start)/this.binSize)-1,this.binIndeces.length-1)),n=Math.max(0,Math.min(Math.floor((e-this.start)/this.binSize),this.binIndeces.length-1));this.binIndeces[r],this.binIndeces[n];return this.features};var Bh=en(Ia,(function(e,r){this.config=e,this.url=e.url,this.name=e.name,this.trait=e.trait,this.height=e.height||100,this.minLogP=e.minLogP||0,this.maxLogP=e.maxLogP||15,this.background=e.background,this.divider=e.divider||"rgb(225,225,225)",this.dotSize=e.dotSize||4,this.popoverWindow=e.popoverWindow===t?1e8:e.popoverWindow,this.description=e.description,this.proxy=e.proxy,this.portalURL=e.portalURL?e.portalURL:window.location.origin,this.variantURL=e.variantURL||"http://www.type2diabetesgenetics.org/variant/variantInfo/",this.traitURL=e.traitURL||"http://www.type2diabetesgenetics.org/trait/traitInfo/";var n=e.colorScale||{thresholds:[5e-8,5e-4,.5],colors:["rgb(255,50,50)","rgb(251,100,100)","rgb(251,170,170)","rgb(227,238,249)"]};this.pvalue=e.pvalue?e.pvalue:"PVALUE",this.colorScale=new fs(n),e.format&&"gtexgwas"===e.format.toLowerCase()?this.featureSource=new xo(e,r.genome):this.featureSource=new Ih(e,r.genome)}));Bh.prototype.getFeatures=function(t,e,r){return this.featureSource.getFeatures(t,e,r)},Bh.prototype.draw=function(e){var r,n,i,a,o,s,h,c,l,u=e.features,f=e.context,p=e.bpPerPixel,d=e.bpStart,g=e.pixelWidth,m=e.pixelHeight,v=d+g*p+1,b=(this.maxLogP-this.minLogP)/m,y=v-d<1e8;if(this.po=y?[]:t,this.background&&Ri.fillRect(f,0,0,g,m,{fillStyle:this.background}),Ri.strokeLine(f,0,m-1,g,m-1,{strokeStyle:this.divider}),u){i=u.length;for(var w=0;w<i;w++)if(!((n=(r=u[w]).start)<d)){if(n>v)break;(c=r.pvalue||r[this.pvalue])&&(h=this.colorScale.getColor(c),l=-Math.log(c)/2.302585092994046,a=p,o=Math.round((n-d)/a),s=Math.max(this.dotSize,m-Math.round((l-this.minLogP)/b)),h&&Ri.setProperties(f,{fillStyle:h,strokeStyle:"black"}),Ri.fillCircle(f,o,s,this.dotSize),y&&this.po.push({x:o,y:s,feature:r}))}}},Bh.prototype.paintAxis=function(t,e,r){var n=(this.maxLogP-this.minLogP)/r,i={font:"normal 10px Arial",textAlign:"right",strokeStyle:"black"};Ri.fillRect(t,0,0,e,r,{fillStyle:"rgb(255, 255, 255)"});for(var a=2;a<this.maxLogP;a+=2){var o=r-Math.round((a-this.minLogP)/n);Ri.strokeLine(t,45,o-2,50,o-2,i),Ri.fillText(t,a,44,o+2,i)}i.textAlign="center",Ri.fillText(t,"-log10(pvalue)",e/2,r/2,i,{rotate:{angle:-90}})},Bh.prototype.popupData=function(t){t.genomicLocation;var e,r,n,i,a,o,s,h,c=t.x,l=t.y,u=(t.viewport.genomicState.referenceFrame,[]);if(this.po)for(e=0,r=this.po.length;e<r;e++)n=this.po[e],Math.abs(c-n.x)<this.dotSize&&Math.abs(l-n.y)<=this.dotSize&&(o=n.feature.CHROM||n.feature.chr,s=n.feature.POS||n.feature.start,h=n.feature[this.pvalue]||n.feature.pvalue,(i=n.feature.DBSNP_ID)&&(a=this.variantURL.startsWith("http")?this.variantURL:this.portalURL+"/"+this.variantURL,u.push("<a target='_blank' href='"+a+(a.endsWith("/")?"":"/")+i+"' >"+i+"</a>")),u.push(o+":"+s.toString()),u.push({name:"p-value",value:h}),n.feature.ZSCORE&&u.push({name:"z-score",value:n.feature.ZSCORE}),i&&(a=this.traitURL.startsWith("http")?this.traitURL:this.portalURL+"/"+this.traitURL,u.push("<a target='_blank' href='"+a+(a.endsWith("/")?"":"/")+i+"'>see all available statistics for this variant</a>")),e<r-1&&u.push("<p/>"));else u.push("Popover not available at this resolution.");return u};var Oh=en(Ia,(function(t,e){Ia.call(this,t,e),t.height||(this.height=300),this.arcOrientation=!1,this.theta=Math.PI/2,t.format,this.featureSource=new Uh(t,e.genome)}));function zh(e,r){e.sort((function(e,n){var i=e.score===t?-Number.MAX_VALUE:e.score,a=n.score===t?-Number.MAX_VALUE:n.score;return(r===t?1:r)*(i-a)}))}function Uh(t,e){this.config=t,this.genome=e}Oh.prototype.getFeatures=function(t,e,r){return this.featureSource.getFeatures(t,e,r)},Oh.prototype.draw=function(t){var e=this,r=Math.PI/2,n=t.context,i=t.pixelWidth,a=t.pixelHeight,o=(t.viewportWidth,t.bpPerPixel),s=t.bpStart,h=o,c=e.arcOrientation;Ri.fillRect(n,0,t.pixelTop,i,a,{fillStyle:"rgb(255, 255, 255)"});var l=t.features;l&&(zh(l,1),l.forEach((function(t){if(t.startLeft){var i=Math.round((t.startLeft-s)/h),a=Math.round((t.startRight-s)/h),o=Math.round((t.endLeft-s)/h),l=Math.round((t.endRight-s)/h);n.fillStyle=t.color,n.strokeStyle=t.color,n.beginPath();var u=(i+l)/2,f=(l-i)/2,p=e.height,d=Math.PI+(Math.PI/2-r),g=2*Math.PI-(Math.PI/2-r);c?(p=0,n.arc(u,p,f,g,d),n.lineTo(l,p)):(n.arc(u,p,f,d,g),n.lineTo(o,p));var m=(a+o)/2,v=(o-a)/2,b=p;c?(n.arc(m,b,v,d,g,!0),n.lineTo(o,b)):(n.arc(m,b,v,g,d,!0),n.lineTo(i,b)),n.stroke(),n.fill(),t.drawState={x1:u,y1:p,r1:f,x2:m,y2:b,r2:v,sa:d,ea:g}}else{var y=Math.round((t.start-s)/h),w=Math.round((t.end-s)/h);n.strokeStyle=t.color,n.beginPath();var x=(y+w)/2,k=(w-y)/2,S=e.height,_=Math.PI+(Math.PI/2-r),C=2*Math.PI-(Math.PI/2-r);c?(S=0,n.arc(x,S,k,C,_)):n.arc(x,S,k,_,C),n.stroke(),t.drawState={x1:x,y1:S,r1:k,sa:_,ea:C}}})))},Oh.prototype.clickedFeatures=function(e){var r=Ia.prototype.clickedFeatures.call(this,e),n=[];zh(r,-1);var i=!0,a=!1,o=t;try{for(var s,h=r[Symbol.iterator]();!(i=(s=h.next()).done);i=!0){var c=s.value,l=c.drawState,u=e.canvasX-l.x1,f=e.canvasY-l.y1,p=Math.sqrt(u*u+f*f),d=l.r1+3,g=void 0,m=void 0;if(l.x2===t)g=p,m=l.r1-3;else{var v=e.canvasX-l.x2,b=e.canvasY-l.y2;g=Math.sqrt(v*v+b*b),m=l.r2-3}if(p<d&&g>m){n.push(c);break}}}catch(t){a=!0,o=t}finally{try{i||null==h.return||h.return()}finally{if(a)throw o}}return n},Oh.prototype.popupData=function(t,e){if(e||(e=this.clickedFeatures(t)),e&&e.length>0)return Ia.extractPopupData(e[0],this.getGenomeId())},Oh.prototype.menuItemList=function(){var t=this;return[{name:"Toggle arc direction",click:function(){t.arcOrientation=!t.arcOrientation,t.trackView.repaintViews()}}]},Oh.prototype.getState=function(){var t=this._super.getState.call(this);return t.arcOrientation=this.arcOrientation,t.thickness=this.thickness,t.color=this.color,t},Uh.prototype.getFeatures=function(t,e,r){var n=this,i=this.genome;if(this.featureCache)return Promise.resolve(n.featureCache.queryFeatures(t,e,r));var a=nn(this.config);return On.loadString(n.config.url,a).then((function(a){return n.featureCache=new Qa(function(t){if(!t)return null;var e,r=Gi(t),n=!0,i=[],a=[],o=[];for(;e=r.nextLine();){var s=e.split("\t");if(n&&e.startsWith("color:")){var h="rgb("+s[1]+","+s[2]+","+s[3]+")";i.push(h),s.length>4&&a.push(s[4])}else{n=!1;var c=s[0],l=Number.parseInt(s[1])-1,u=Number.parseInt(s[2])-1,f=Number.parseInt(s[3]),p=Number.parseInt(s[4]),d=Number.parseInt(s[5]),g=i[d],m=void 0;(m=l<=p?{chr:c,startLeft:Math.min(l,u),startRight:Math.max(l,u),endLeft:Math.min(f,p),endRight:Math.max(f,p),color:g,score:d}:{chr:c,startLeft:Math.min(f,p),startRight:Math.max(f,p),endLeft:Math.min(l,u),endRight:Math.max(l,u),color:g,score:d}).start=m.startLeft,m.end=m.endRight,a.length>d&&(m.description=a[d]),o.push(m)}}return o}(a),i),n.featureCache.queryFeatures(t,e,r)}))};var Hh={sequence:function(t,e){return new Ko(t,e)},feature:function(t,e){return new Uo(t,e)},seg:function(t,e){return new ds(t,e)},wig:function(t,e){return new us(t,e)},merged:function(t,e){return new gs(t,e)},alignment:function(t,e){return new mh(t,e)},interaction:function(t,e){return new Sh(t,e)},variant:function(t,e){return new Ch(t,e)},eqtl:function(t,e){return new Th(t,e)},gwas:function(t,e){return new Bh(t,e)},arc:function(t,e){return new Oh(t,e)}},$h=function(t,e){this.config=t,this.name=t.name,this.roiSource=new xo(t,e),this.color=t.color||"rgba(68, 134, 247, 0.25)"};function qh(t,e,r){var n,i;return n=Math.round((t.start-e)/r),(i=Math.round((t.end-e)/r)-n)<3&&(i=3,n-=1),{x:n,width:i}}$h.prototype.getFeatures=function(t,e,r){return this.roiSource.getFeatures(t,e,r)},$h.prototype.draw=function(t){var e,r,n,i;if(i=t.features){e=t.bpStart+(t.pixelWidth*t.bpPerPixel+1);for(var a=0,o=i.length;a<o;a++)if(!((r=i[a]).end<t.bpStart)){if(r.start>e)break;n=qh(r,t.bpStart,t.bpPerPixel),Ri.fillRect(t.context,n.x,0,n.width,t.pixelHeight,{fillStyle:this.color})}}};var Vh=function(t,e){this.geneColors={},this.gene=null,this.snp=null,this.genesCount=0,t&&(this.gene=t.toUpperCase(),this.geneColors[this.gene]=jh[this.genesCount++]),e&&(this.snp=e.toUpperCase())};Vh.prototype.addGene=function(t){this.geneColors[t.toUpperCase()]||(this.geneColors[t.toUpperCase()]=jh[this.genesCount++])},Vh.prototype.colorForGene=function(t){return this.geneColors[t.toUpperCase()]};var jh=new Array;jh.push("rgb(228,26,28)"),jh.push("rgb(55,126,184)"),jh.push("rgb(77,175,74)"),jh.push("rgb(166,86,40)"),jh.push("rgb(152,78,163)"),jh.push("rgb(255,127,0)"),jh.push("rgb(247,129,191)"),jh.push("rgb(153,153,153)"),jh.push("rgb(255,255,51)"),jh.push("rgb(102, 194, 165"),jh.push("rgb(252, 141, 98"),jh.push("rgb(141, 160, 203"),jh.push("rgb(231, 138, 195"),jh.push("rgb(166, 216, 84"),jh.push("rgb(255, 217, 47"),jh.push("rgb(229, 196, 148"),jh.push("rgb(179, 179, 179"),jh.push("rgb( 141, 211, 199"),jh.push("rgb(255, 255, 179"),jh.push("rgb(190, 186, 218"),jh.push("rgb(251, 128, 114"),jh.push("rgb(128, 177, 211"),jh.push("rgb(253, 180, 98"),jh.push("rgb(179, 222, 105"),jh.push("rgb(252, 205, 229"),jh.push("rgb(217, 217, 217"),jh.push("rgb(188, 128, 189"),jh.push("rgb(204, 235, 197"),jh.push("rgb(255, 237, 111");var Gh=function(t,e){var r,n,i,a=this;r=new DOMParser,n=r.parseFromString(t,"text/xml"),function(){var t,r,i,o,s;!(t=n.getElementsByTagName("Session"))||t.length;r=t.item(0),i=r.getAttribute("genome"),o=r.getAttribute("locus"),s=r.getAttribute("ucscID"),e&&e.hasOwnProperty(i)?a.genome=i:(a.reference={fastaURL:i},s&&(a.reference.id=s));o&&(a.locus=o)}(),i=n.getElementsByTagName("Resource"),a.tracks=[];var o={};function s(t,e){var r,n,i,a,o,s,h,c,l,u;e.name=t.getAttribute("name"),(r=t.getAttribute("color"))&&(e.color="rgb("+r+")"),a=t.getAttribute("altColor"),r&&(e.altColor="rgb("+a+")"),(n=t.getAttribute("height"))&&(e.height=parseInt(n)),(i=t.getAttribute("autoScale"))&&(e.autoScale="true"===i),(u=t.getAttribute("autoscaleGroup"))&&(e.autoscaleGroup=u),(h=t.getAttribute("windowFunction"))&&(e.windowFunction=h),(c=t.getAttribute("visibilityWindow")||t.getAttribute("featureVisibilityWindow"))&&(e.visibilityWindow=c),(l=t.getAttribute("indexed"))&&(e.indexed="true"===l),(s=t.getElementsByTagName("DataRange")).length>0&&(o=s.item(0),i||(e.min=parseInt(o.getAttribute("minimum")),e.max=parseInt(o.getAttribute("maximum"))),e.logScale="LOG"===o.getAttribute("type"))}Array.from(i).forEach((function(t,e){var r={url:t.getAttribute("path"),indexURL:t.getAttribute("index"),order:e};a.tracks.push(r),o[r.url]=r})),(i=n.getElementsByTagName("Track"))&&i.length>0&&(a.tracks=[],Array.from(i).forEach((function(t){var e,r,n,i;(n=t.getElementsByTagName("Track"))&&n.length>0?(s(t,i={type:"merged",tracks:[]}),a.tracks.push(i),Array.from(n).forEach((function(t){var e,r;t.processed=!0,e=t.getAttribute("id"),(r=o[e])&&(i.tracks.push(r),s(t,r),r.autoscale=!1,i.height=r.height)}))):t.processed||(e=t.getAttribute("id"),(r=o[e])&&(a.tracks.push(r),s(t,r)))})))},Wh=function(){this.attributes={},this.plinkLoaded=!1};function Zh(t,e){return(new Wh).loadPlinkFile(t,e)}Wh.prototype.loadPlinkFile=function(){var r=I(e.mark((function r(n,i){var a,o,s,h,c,l,u,f,p,d;return e.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i||(i={}),a=nn(i),e.next=4,On.loadString(n,a);case 4:for(o=e.sent,s=Hr(o),h=!0,c=!1,l=t,e.prev=9,u=s[Symbol.iterator]();!(h=(f=u.next()).done);h=!0)p=f.value,d=p.split(" "),this.attributes[d[1]]={familyId:d[0],fatherId:d[2],motherId:d[3],sex:d[4],phenotype:d[5]};e.next=17;break;case 13:e.prev=13,e.t0=e.catch(9),c=!0,l=e.t0;case 17:e.prev=17,e.prev=18,h||null==u.return||u.return();case 20:if(e.prev=20,!c){e.next=23;break}throw l;case 23:return e.finish(20);case 24:return e.finish(17);case 25:return this.plinkLoaded=!0,e.abrupt("return",this);case 27:case"end":return e.stop()}}),r,this,[[9,13,17,25],[18,,20,24]])})));return function(t,e){return r.apply(this,arguments)}}(),Wh.prototype.getAttributes=function(t){return this.attributes[t]},Wh.prototype.getAttributeNames=function(){return this.hasAttributes()?Object.keys(this.attributes[Object.keys(this.attributes)[0]]):[]},Wh.prototype.hasAttributes=function(){return Object.keys(this.attributes).length>0};var Xh=function(t,e,r){this.browser=r,this.$parent=t,this.buildPanels(t,e)};function Yh(t,e,r){var n,i,a,o,s=this.browser;return(n={}).genomicState=e,n.$ideogram=cr('<div class="igv-ideogram-content"></div>'),t.append(n.$ideogram),i=n.$ideogram,a=s.genomicStateList.indexOf(e),o=s.genomicStateList.length,a<o&&1+a!==o?i.addClass("igv-ideogram-content-border-right"):i.removeClass("igv-ideogram-content-border-right"),n.$ideogram.outerWidth(r),n.$canvas=cr("<canvas>"),n.$ideogram.append(n.$canvas),tc(n),n.ideograms={},n.$ideogram.on("click",(function(t){!function(t,e,r){var n=Xr(r,e.$ideogram.get(0)),i=e.genomicState.referenceFrame,a=i.bpPerPixel*e.$ideogram.width(),o=t.genome.getChromosome(i.chrName),s=a/o.bpLength,h=n.x/e.$ideogram.width();h-s/2<0&&(h=s/2);h+s/2>1&&(h=1-s/2);var c=Math.round((h-s/2)*o.bpLength),l=Math.round((h+s/2)*o.bpLength);i.start=Math.round((h-s/2)*o.bpLength),i.bpPerPixel=(l-c)/e.$ideogram.width(),t.updateLocusSearchWidget(e.genomicState),t.updateViews()}(s,n,t)})),n}function Kh(t){t.forEach((function(e,r){1===t.length||1+r===t.length?e.$ideogram.removeClass("igv-ideogram-content-border-right"):e.$ideogram.addClass("igv-ideogram-content-border-right")}))}function Qh(e){var r=e.ctx,n=e.width,i=e.height,a=e.genome,o=e.referenceFrame,s=e.ideogramWidth;if(n>0&&i>0&&a&&o&&a.getChromosome(o.chrName)&&i>0){if(Ri.fillRect(r,0,0,n,i,{fillStyle:Vr.greyScale(255)}),"all"!==o.chrName.toLowerCase()){!function(e){var r,n,i,a,o,s,h,c,l,u,f=e.ctx,p=e.referenceFrame,d=e.genome,g=e.width,m=e.height,v=e.stainColors;if(1,.5,0,t===d)return;if(Ri.fillRect(f,0,0,g,m,{fillStyle:Vr.greyScale(255)}),r=d.getCytobands(p.chrName)){if(i=0+m/2,a=[],o=[],0===r.length)return;for(s=r[r.length-1].end,h=g/s,f.beginPath(),Ri.roundRect(f,.5,.5,g-1,m-1,(m-1)/2,0,1),f.clip(),u=0;u<r.length;u++)n=r[u],c=h*n.start,l=h*n.end,"c"===n.type?("p"===n.name.charAt(0)?(a[0]=c,o[0]=m+0,a[1]=c,o[1]=0,a[2]=l,o[2]=i):(a[0]=l,o[0]=m+0,a[1]=l,o[1]=0,a[2]=c,o[2]=i),f.fillStyle="rgb(150, 0, 0)",f.strokeStyle="rgb(150, 0, 0)",Ri.polygon(f,a,o,1,0)):(f.fillStyle=Jh(v,n),Ri.fillRect(f,c,1,l-c,m-2))}f.strokeStyle=Vr.greyScale(41),Ri.roundRect(f,.5,.5,g-1,m-1,(m-1)/2,0,1)}({ctx:r,referenceFrame:o,genome:a,width:n,height:i,stainColors:[]});var h=a.getChromosome(o.chrName),c=Math.round(o.bpPerPixel*s),l=o.start,u=h.bpLength,f=a.getCytobands(o.chrName);if(f&&f.length>0&&(u=Math.max(u,f[f.length-1].end)),c<u){var p=c/u,d=l/u,g=Math.floor(d*n),m=Math.floor(p*n);g=Math.max(0,g),g=Math.min(n-m,g),r.save(),r.strokeStyle="red",r.lineWidth=m<2?1:2;var v=g+r.lineWidth/2;m=m<2?1:m-r.lineWidth;var b=r.lineWidth/2,y=i-r.lineWidth;r.strokeRect(v,b,m,y),r.restore()}}}}function Jh(t,e){if("c"===e.type)return"rgb(150, 10, 10)";var r=e.stain,n=230;"p"===e.type&&(n=Math.floor(230-r/100*230));var i=t[n];return i||(i="rgb("+n+","+n+","+n+")",t[n]=i),i}function tc(t){var e=t.$canvas.get(0),r=+t.$ideogram.width(),n=+t.$ideogram.height();e.style.width=r+"px",e.style.height=n+"px",e.width=window.devicePixelRatio*r,e.height=window.devicePixelRatio*n,t.ctx=e.getContext("2d"),t.ctx.scale(window.devicePixelRatio,window.devicePixelRatio)}Xh.prototype.renderSVGContext=function(t,e){var r=this;this.panels.forEach((function(n,i){var a=n.$ideogram.get(0).getBoundingClientRect(),o=e.deltaX+i*(n.$canvas.width()+t.multiLocusGap),s=e.deltaY;t.addTrackGroupWithTranslationAndClipRect("ideogram",o,s,a.width,a.height,0),t.save(),Qh({ctx:t,width:n.$canvas.width(),height:n.$canvas.height(),genome:r.browser.genome,referenceFrame:n.genomicState.referenceFrame,ideogramWidth:n.$ideogram.width()}),t.restore()}))},Xh.prototype.buildPanels=function(t,e){var r=this;t.append(cr('<div class="igv-ideogram-shim"></div>')),this.panels=this.browser.genomicStateList.map((function(n){return Yh.call(r,t,n,e)}))},Xh.prototype.setWidth=function(t,e){this.panels.forEach((function(e){e.$ideogram.outerWidth(t),tc(e),e.ideograms={}})),!0===e&&this.repaint()},Xh.prototype.resize=function(){this.setWidth(this.browser.viewportContainerWidth()/this.browser.genomicStateList.length,!0)},Xh.prototype.repaint=function(){var t=this;this.panels.forEach((function(e){Qh({ctx:e.ctx,width:e.$canvas.width(),height:e.$canvas.height(),genome:t.browser.genome,referenceFrame:e.genomicState.referenceFrame,ideogramWidth:e.$ideogram.width()})}))},Xh.prototype.discardPanels=function(){this.panels.forEach((function(t){t.$ideogram.remove()})),this.panels=t},Xh.prototype.addPanelWithGenomicStateAtIndex=function(t,e,r){var n;n=Yh.call(this,this.$parent,t,r),e===this.panels.length?this.panels.push(n):(this.panels.splice(e,0,n),n.$ideogram.detach().insertAfter(this.panels[e-1].$ideogram)),Kh(this.panels)},Xh.prototype.removePanelWithLocusIndex=function(t){this.panels[t].$ideogram.remove(),this.panels.splice(t,1),Kh(this.panels)},Xh.prototype.repaintPanelWithGenomicState=function(t){var e=this.panels[this.browser.genomicStateList.indexOf(t)];Qh({ctx:e.ctx,width:e.$canvas.width(),height:e.$canvas.height(),genome:this.browser.genome,referenceFrame:e.genomicState.referenceFrame,ideogramWidth:e.$ideogram.width()})};var ec=function(t,e,r,n,i){this.genome=t,this.chrName=e,this.start=r,this.initialEnd=n,this.bpPerPixel=i};ec.prototype.calculateEnd=function(t){return this.start+this.bpPerPixel*t},ec.prototype.calculateBPP=function(t,e){return(t-this.start)/e},ec.prototype.set=function(t){this.chrName=t.chrName,this.start=t.start,this.bpPerPixel=t.bpPerPixel},ec.prototype.toPixels=function(t){return t/this.bpPerPixel},ec.prototype.toBP=function(t){return this.bpPerPixel*t},ec.prototype.shiftPixels=function(t,e){this.start+=t*this.bpPerPixel,this.clamp(e)},ec.prototype.clamp=function(t){var e=this.genome.getChromosome(this.chrName).bpStart||0;if(this.start=Math.max(e,this.start),t){var r=this.genome.getChromosome(this.chrName).bpLength-t*this.bpPerPixel;this.start>r&&(this.start=r)}},ec.prototype.getChromosome=function(){return this.genome.getChromosome(this.chrName)},ec.prototype.showLocus=function(t){if("all"===this.chrName.toLowerCase())return this.chrName.toLowerCase();var e=Ur(Math.floor(this.start)+1),r=Ur(Math.round(this.start+this.bpPerPixel*t));return this.chrName+":"+e+"-"+r},ec.prototype.description=function(){return"ReferenceFrame "+this.chrName+" "+Ur(Math.floor(this.start))+" bpp "+this.bpPerPixel};var rc=function(t,e){this.guid=Yr(),this.namespace=".browser_"+this.guid,this.config=t,this.parent=e,this.$root=cr('<div class="igv-root-div">'),cr(e).append(this.$root),this.$content=cr('<div class="igv-content-div">'),this.$root.append(this.$content),this.$contentHeader=cr("<div>",{class:"igv-content-header"}),this.$content.append(this.$contentHeader);var r=cr('<div class="igv-track-container-div">');this.$content.append(r),this.trackContainerDiv=r.get(0),nc.call(this,t),this.trackViews=[],this.trackLabelsVisible=!0,this.isCenterGuideVisible=!1,this.cursorGuideVisible=!1,this.featureDB={},this.constants={dragThreshold:3,scrollThreshold:5,defaultColor:"rgb(0,0,150)",doubleClickDelay:t.doubleClickDelay||500},this.eventHandlers={},this.$spinner=cr('<div class="igv-track-container-spinner">'),r.append(this.$spinner),this.$spinner.append(_r("spinner")),this.stopSpinner(),oc.call(this)};function nc(e){e.gtex&&(Oo.gtexLoaded=!0),this.flanking=e.flanking,this.crossDomainProxy=e.crossDomainProxy,this.formats=e.formats,this.trackDefaults=e.trackDefaults,e.search?this.searchConfig={type:"json",url:e.search.url,coords:e.search.coords===t?1:e.search.coords,chromosomeField:e.search.chromosomeField||"chromosome",startField:e.search.startField||"start",endField:e.search.endField||"end",geneField:e.search.geneField||"gene",snpField:e.search.snpField||"snp",resultsField:e.search.resultsField}:(e.reference&&e.reference.id?e.reference.id:e.genome?e.genome:"hg19",this.searchConfig={type:"plain",url:"https://igv.org/genomes/locus.php?genome=$GENOME$&name=$FEATURE$",coords:0,chromosomeField:"chromosome",startField:"start",endField:"end",geneField:"gene",snpField:"snp"})}function ic(e,r){var n=!0,i=!1,a=t;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var h=o.value,c=!0,l=!1,u=t;try{for(var f,p=h.viewports[Symbol.iterator]();!(c=(f=p.next()).done);c=!0){var d=f.value;d.$trackLabel&&(0===h.viewports.indexOf(d)&&!0===r?d.$trackLabel.show():d.$trackLabel.hide())}}catch(t){l=!0,u=t}finally{try{c||null==p.return||p.return()}finally{if(l)throw u}}}}catch(t){i=!0,a=t}finally{try{n||null==s.return||s.return()}finally{if(i)throw a}}}function ac(e){zr(e)&&(e=JSON.parse(e));var r=e.url;e.features;return t===r||zr(r)||r instanceof File}function oc(){var t=this;function e(e){var r,n,i,a;if(e.preventDefault(),!t.loadInProgress()&&(r=Zr(e),t.vpMouseDown)){var o=Math.abs(r.x-t.vpMouseDown.mouseDownX)>Math.abs(r.y-t.vpMouseDown.mouseDownY);if(i=(n=t.vpMouseDown.viewport).$viewport.width(),a=n.genomicState.referenceFrame,!t.isDragging&&!t.isScrolling)if(o)t.vpMouseDown.mouseDownX&&Math.abs(r.x-t.vpMouseDown.mouseDownX)>t.constants.dragThreshold&&(t.isDragging=!0);else if(t.vpMouseDown.mouseDownY&&Math.abs(r.y-t.vpMouseDown.mouseDownY)>t.constants.scrollThreshold){t.isScrolling=!0;var s=n.trackView,h=s.$viewportContainer.height(),c=s.maxContentHeight();t.vpMouseDown.r=h/c}if(t.isDragging&&(a.shiftPixels(t.vpMouseDown.lastMouseX-r.x,i),t.updateLocusSearchWidget(t.vpMouseDown.genomicState),t.updateViews(),t.fireEvent("trackdrag")),t.isScrolling){var l=t.vpMouseDown.r*(t.vpMouseDown.lastMouseY-r.y);t.vpMouseDown.viewport.trackView.scrollBy(l)}t.vpMouseDown.lastMouseX=r.x,t.vpMouseDown.lastMouseY=r.y}}function r(e){t.cancelTrackPan(),t.endTrackDrag()}cr(window).on("resize"+this.namespace,(function(){t.resize()})),cr(this.root).on("mouseup",r),cr(this.root).on("mouseleave",r),cr(this.trackContainerDiv).on("mousemove",e),cr(this.trackContainerDiv).on("touchmove",e),cr(this.trackContainerDiv).on("mouseleave",r),cr(this.trackContainerDiv).on("mouseup",r),cr(this.trackContainerDiv).on("touchend",r)}rc.prototype.startSpinner=function(){var t=this.$spinner;t&&(t.addClass("igv-fa5-spin"),t.show())},rc.prototype.stopSpinner=function(){var t=this.$spinner;t&&(t.hide(),t.removeClass("igv-fa5-spin"))},rc.prototype.isMultiLocusMode=function(){return this.genomicStateList&&this.genomicStateList.length>1},rc.prototype.isMultiLocusWholeGenomeView=function(){if(t===this.genomicStateList||1===this.genomicStateList.length)return!1;var e=!0,r=!1,n=t;try{for(var i,a=this.genomicStateList[Symbol.iterator]();!(e=(i=a.next()).done);e=!0){if("all"===i.value.referenceFrame.chrName.toLowerCase())return!0}}catch(t){r=!0,n=t}finally{try{e||null==a.return||a.return()}finally{if(r)throw n}}return!1},rc.prototype.toSVG=function(){var e=this.trackContainerDiv.getBoundingClientRect(),r=this.trackViews[0].$viewportContainer.get(0).getBoundingClientRect(),n=this.ideoPanel?this.ideoPanel.panels[0].$ideogram.get(0).getBoundingClientRect():{height:0,width:0},i=e.width+8*(this.genomicStateList.length-1),a=e.height+n.height,o=new gr({width:i,height:8e3,backdropColor:"white",multiLocusGap:8,viewbox:{x:0,y:0,width:i,height:8e3}}),s=r.x-e.x;this.ideoPanel&&this.ideoPanel.renderSVGContext(o,{deltaX:s,deltaY:0});var h=!0,c=!1,l=t;try{for(var u,f=this.trackViews[Symbol.iterator]();!(h=(u=f.next()).done);h=!0){u.value.renderSVGContext(o,{deltaX:s,deltaY:n.height-e.y})}}catch(t){c=!0,l=t}finally{try{h||null==f.return||f.return()}finally{if(c)throw l}}return o.setHeight(a),o.getSerializedSvg(!0)},rc.prototype.renderSVG=function(t){var e=this.toSVG();if(t.$container){var r=this.trackContainerDiv.getBoundingClientRect();t.$container.empty(),t.$container.width(r.width),t.$container.append(e)}an(t.filename||"igv.svg",URL.createObjectURL(new Blob([e],{type:"application/octet-stream"})))},rc.prototype.loadSession=function(){var r=I(e.mark((function r(n){var i,a,o,s;return e.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(s=function(){return(s=I(e.mark((function r(n){var i,a,o,s,h;return e.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n.url||n.file,!n.url||!n.url.startsWith("blob:")&&!n.url.startsWith("data:")){e.next=6;break}return a=rc.uncompressSession(n.url),e.abrupt("return",JSON.parse(a));case 6:if((o=n.filename)||(o=n.url?kn(n.url):n.file.name),!o.endsWith(".xml")){e.next=18;break}return e.next=11,ri.getKnownGenomes();case 11:return s=e.sent,e.next=14,On.loadString(i);case 14:return h=e.sent,e.abrupt("return",new Gh(h,s));case 18:if(!o.endsWith(".json")){e.next=22;break}return e.abrupt("return",On.loadJson(i));case 22:return e.abrupt("return",t);case 23:case"end":return e.stop()}}),r)})))).apply(this,arguments)},o=function(t){return s.apply(this,arguments)},i=this,!n.url&&!n.file){r.next=9;break}return r.next=6,o(n);case 6:a=r.sent,r.next=10;break;case 9:a=n;case 10:return r.abrupt("return",i.loadSessionObject(a));case 11:case"end":return r.stop()}}),r,this)})));return function(t){return r.apply(this,arguments)}}(),rc.prototype.loadSessionObject=function(){var r=I(e.mark((function r(n){var i,a,o,s,h,c,l,u,f,p,d,g,m,v,b,y,w,x,k,S,_,C,E,A;return e.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.removeAllTracks(!0),e.next=3,this.loadGenome(n.reference||n.genome,n.locus);case 3:if(i=e.sent,!n.gtexSelections){e.next=44;break}for(a={},o=!0,s=!1,h=t,e.prev=9,c=this.genomicStateList[Symbol.iterator]();!(o=(l=c.next()).done);o=!0)u=l.value,a[u.locusSearchString]=u;e.next=17;break;case 13:e.prev=13,e.t0=e.catch(9),s=!0,h=e.t0;case 17:e.prev=17,e.prev=18,o||null==c.return||c.return();case 20:if(e.prev=20,!s){e.next=23;break}throw h;case 23:return e.finish(20);case 24:return e.finish(17);case 25:for(f=!0,p=!1,d=t,e.prev=28,g=Object.getOwnPropertyNames(n.gtexSelections)[Symbol.iterator]();!(f=(m=g.next()).done);f=!0)v=m.value,(b=a[v])&&(y=n.gtexSelections[v].gene,w=n.gtexSelections[v].snp,b.selection=new Vh(y,w));e.next=36;break;case 32:e.prev=32,e.t1=e.catch(28),p=!0,d=e.t1;case 36:e.prev=36,e.prev=37,f||null==g.return||g.return();case 39:if(e.prev=39,!p){e.next=42;break}throw d;case 42:return e.finish(39);case 43:return e.finish(36);case 44:if(!n.roi){e.next=65;break}for(this.roi=[],x=!0,k=!1,S=t,e.prev=49,_=n.roi[Symbol.iterator]();!(x=(C=_.next()).done);x=!0)E=C.value,this.roi.push(new $h(E,i));e.next=57;break;case 53:e.prev=53,e.t2=e.catch(49),k=!0,S=e.t2;case 57:e.prev=57,e.prev=58,x||null==_.return||_.return();case 60:if(e.prev=60,!k){e.next=63;break}throw S;case 63:return e.finish(60);case 64:return e.finish(57);case 65:return n.tracks||(n.tracks=[]),0===n.tracks.filter((function(t){return"sequence"===t.type})).length&&n.tracks.push({type:"sequence",order:-Number.MAX_VALUE}),e.next=69,this.loadTrackList(n.tracks);case 69:!1===n.showIdeogram||this.ideoPanel||(A=this.viewportContainerWidth()/this.genomicStateList.length,this.ideoPanel=new Xh(this.$contentHeader,A,this),this.ideoPanel.repaint()),this.updateLocusSearchWidget(this.genomicStateList[0]),this.windowSizePanel.updateWithGenomicState(this.genomicStateList[0]),this.resize();case 73:case"end":return e.stop()}}),r,this,[[9,13,17,25],[18,,20,24],[28,32,36,44],[37,,39,43],[49,53,57,65],[58,,60,64]])})));return function(t){return r.apply(this,arguments)}}(),rc.prototype.loadGenome=function(){var r=I(e.mark((function r(n,i){var a,o,s,h,c,l,u,f;return e.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(f=function(t,e){return t?Array.isArray(t)?t.join(" "):t:e.getHomeChromosomeName()},u=function(){return(u=I(e.mark((function r(n){var i,a,o;return e.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(zr(n)?i=n:n.genome?i=n.genome:n.id!==t&&n.fastaURL===t&&(i=n.id),!i){e.next=10;break}return e.next=4,ri.getKnownGenomes();case 4:return a=e.sent,(o=a[i])||this.presentAlert("Uknown genome id: "+i,t),e.abrupt("return",o);case 10:return e.abrupt("return",n);case 11:case"end":return e.stop()}}),r,this)})))).apply(this,arguments)},l=function(t){return u.apply(this,arguments)},zr(n)&&n.startsWith("{"))try{n=JSON.parse(n)}catch(t){}return r.next=6,l.call(this,n);case 6:return a=r.sent,r.next=9,ri.loadGenome(a);case 9:return o=r.sent,s=this.genome&&this.genome.id!==o.id,this.genome=o,this.$current_genome.text(o.id||""),this.$current_genome.attr("title",o.id||""),this.chromosomeSelectWidget.update(o),s&&this.removeAllTracks(),this.genome=o,r.prev=17,r.next=20,this.search(f(i,o),!0);case 20:h=r.sent,r.next=29;break;case 23:return r.prev=23,r.t0=r.catch(17),console.error(r.t0),r.next=28,this.search(this.genome.getHomeChromosomeName());case 28:h=r.sent;case 29:if(this.genomicStateList=h,this.genomicStateList.length>0?this.rulerTrack||!1===this.config.showRuler||(this.rulerTrack=new Ii(this),this.addTrack(this.rulerTrack)):(c="Unrecognized locus "+this.config.locus,this.presentAlert(c,t)),!a.tracks){r.next=34;break}return r.next=34,this.loadTrackList(a.tracks);case 34:return this.resize(),r.abrupt("return",this.genome);case 36:case"end":return r.stop()}}),r,this,[[17,23]])})));return function(t,e){return r.apply(this,arguments)}}(),rc.prototype.updateUIWithGenomicStateListChange=function(t){var e=this.isMultiLocusWholeGenomeView()||ri.isWholeGenomeView(t[0].referenceFrame);e||this.isMultiLocusMode()?this.centerGuide.forcedHide():this.centerGuide.forcedShow(),this.navbarManager.navbarDidResize(this.$navigation.width(),e),ic(this.trackViews,this.trackLabelsVisible)},rc.prototype.setTrackLabelName=function(t,e){t.viewports.forEach((function(t){t.setTrackLabel(e)}))},rc.prototype.hideTrackLabels=function(){this.trackLabelsVisible=!1,ic(this.trackViews,this.trackLabelsVisible)},rc.prototype.showTrackLabels=function(){this.trackLabelsVisible=!0,ic(this.trackViews,this.trackLabelsVisible)},rc.prototype.hideCursorGuide=function(){this.cursorGuide.$guide.hide(),this.cursorGuideVisible=!1},rc.prototype.showCursorGuide=function(){this.cursorGuide.$guide.show(),this.cursorGuideVisible=!0},rc.prototype.setCustomCursorGuideMouseHandler=function(t){this.cursorGuide.customMouseHandler=t},rc.prototype.hideCenterGuide=function(){this.centerGuide.$container.hide(),this.isCenterGuideVisible=!1},rc.prototype.showCenterGuide=function(){this.centerGuide.$container.show(),this.centerGuide.resize(),this.isCenterGuideVisible=!0},rc.prototype.loadTrackList=function(){var t=I(e.mark((function t(r){var n,i,a,o,s,h;return e.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this,(i=r.filter((function(t){return!ac(t)}))).length>0&&(a="The following tracks could not be loaded.  Are these local files?",i.forEach((function(t){a+=", "+t.name})),n.presentAlert(a)),t.prev=3,this.startSpinner(),o=[],r.filter(ac).forEach((function(t){t.noSpinner=!0,o.push(n.loadTrack(t))})),t.next=9,Promise.all(o);case 9:return s=t.sent,(h=n.trackViews.filter((function(t){return t.track.autoscaleGroup}))).length>0&&n.updateViews(n.genomicStateList[0],h),t.abrupt("return",s);case 13:return t.prev=13,this.stopSpinner(),t.finish(13);case 16:case"end":return t.stop()}}),t,this,[[3,,13,16]])})));return function(e){return t.apply(this,arguments)}}(),rc.prototype.loadROI=function(){var r=I(e.mark((function r(n){var i,a,o,s,h,c;return e.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.roi||(this.roi=[]),!Array.isArray(n)){e.next=23;break}for(i=!0,a=!1,o=t,e.prev=5,s=n[Symbol.iterator]();!(i=(h=s.next()).done);i=!0)c=h.value,this.roi.push(new $h(c,this.genome));e.next=13;break;case 9:e.prev=9,e.t0=e.catch(5),a=!0,o=e.t0;case 13:e.prev=13,e.prev=14,i||null==s.return||s.return();case 16:if(e.prev=16,!a){e.next=19;break}throw o;case 19:return e.finish(16);case 20:return e.finish(13);case 21:e.next=24;break;case 23:this.roi.push(new $h(n,this.genome));case 24:return e.next=26,this.updateViews(t,t,!0);case 26:case"end":return e.stop()}}),r,this,[[5,9,13,21],[14,,16,20]])})));return function(t){return r.apply(this,arguments)}}(),rc.prototype.removeROI=function(e){for(var r=0;r<this.roi.length;r++)if(this.roi[r].name===e.name){this.roi.splice(r,1);break}var n=!0,i=!1,a=t;try{for(var o,s=this.trackViews[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){o.value.updateViews(!0)}}catch(t){i=!0,a=t}finally{try{n||null==s.return||s.return()}finally{if(i)throw a}}},rc.prototype.loadTrack=function(){var r=I(e.mark((function r(n){var i,a,o,s,h,c;return e.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(zr(n)&&(n=JSON.parse(n)),zr(n.url)&&(n.url=n.url.trim()),n.indexURL&&zr(n.indexURL)&&(n.indexURL=n.indexURL.trim()),ac(n)){e.next=6;break}return this.presentAlert("The following track could not be loaded.  Is this a local file? "+n.name),e.abrupt("return");case 6:if(!zr(n.url)||!n.url.startsWith("https://drive.google.com")){e.next=16;break}return e.next=9,pn.getDriveFileInfo(n.url);case 9:i=e.sent,n.url="https://www.googleapis.com/drive/v3/files/"+i.id+"?alt=media",n.filename||(n.filename=i.originalFileName||i.name),n.format||(n.format=Qi(n.filename)),n.indexURL&&n.indexURL.startsWith("https://drive.google.com")&&(n.indexURL=pn.driveDownloadURL(n.indexURL)),e.next=17;break;case 16:n.url&&!n.filename&&(n.filename=kn(n.url));case 17:if(Ki(n),this.trackDefaults&&n.type&&(a=this.trackDefaults[n.type]))for(o in a)a.hasOwnProperty(o)&&n[o]===t&&(n[o]=a[o]);if(e.prev=19,n.noSpinner||this.startSpinner(),s=this.createTrack(n),t!==s){e.next=25;break}return this.presentAlert("Unknown file type: "+n.url,t),e.abrupt("return",s);case 25:if(t===s.order&&(s.order=this.trackViews.length),"function"!=typeof s.postInit){e.next=29;break}return e.next=29,s.postInit();case 29:if(!n.sync){e.next=34;break}return e.next=32,this.addTrack(s);case 32:e.next=35;break;case 34:this.addTrack(s);case 35:return e.abrupt("return",s);case 38:e.prev=38,e.t0=e.catch(19),h={401:"Access unauthorized",403:"Access forbidden",404:"Not found"},console.error(e.t0),c=e.t0.message||e.t0.toString(),h.hasOwnProperty(c)&&(c=h[c]+": "+n.url),this.presentAlert(c,t);case 45:return e.prev=45,n.noSpinner||this.stopSpinner(),e.finish(45);case 48:case"end":return e.stop()}}),r,this,[[19,38,45,48]])})));return function(t){return r.apply(this,arguments)}}(),rc.prototype.createTrack=function(e){e.format&&(e.format=e.format.toLowerCase());var r=t===e.type?"unknown_type":e.type.toLowerCase();"data"===r&&(r="wig");var n,i=Object.assign({},e);switch(i.browser=this,r){case"annotation":case"genes":case"fusionjuncspan":case"junctions":case"splicejunctions":case"snp":n=Hh.feature(i,this);break;default:n=Hh.hasOwnProperty(r)?Hh[r](i,this):t}if(e.roi&&n){n.roi=[];var a=!0,o=!1,s=t;try{for(var h,c=e.roi[Symbol.iterator]();!(a=(h=c.next()).done);a=!0){var l=h.value;n.roi.push(new $h(l,this.genome))}}catch(t){o=!0,s=t}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}}return n},rc.prototype.addTrack=function(){var t=I(e.mark((function t(r){var n;return e.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=new Oi(this,cr(this.trackContainerDiv),r),this.trackViews.push(n),ic(this.trackViews,this.trackLabelsVisible),this.reorderTracks(),r.autoscaleGroup){t.next=6;break}return t.abrupt("return",n.updateViews());case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),rc.prototype.reorderTracks=function(){var t=this;this.trackViews.sort((function(t,e){return(t.track.order||0)-(e.track.order||0)})),cr(this.trackContainerDiv).children("igv-track-div").detach(),this.trackViews.forEach((function(e){t.trackContainerDiv.appendChild(e.trackDiv)}))},rc.prototype.removeTrackByName=function(e){var r=this.trackViews.slice(),n=!0,i=!1,a=t;try{for(var o,s=r[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var h=o.value;e===h.track.name&&this.removeTrack(h.track)}}catch(t){i=!0,a=t}finally{try{n||null==s.return||s.return()}finally{if(i)throw a}}},rc.prototype.removeTrack=function(t){for(var e,r=0;r<this.trackViews.length;r++)if(t===this.trackViews[r].track){e=this.trackViews[r];break}e&&(this.trackViews.splice(r,1),cr(e.trackDiv).remove(),this.fireEvent("trackremoved",[e.track]),e.dispose())},rc.prototype.removeAllTracks=function(e){var r=[],n=!0,i=!1,a=t;try{for(var o,s=this.trackViews[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var h=o.value;!e&&"sequence"===h.track.id||"ruler"===h.track.id?r.push(h):(this.trackContainerDiv.removeChild(h.trackDiv),this.fireEvent("trackremoved",[h.track]),h.dispose())}}catch(t){i=!0,a=t}finally{try{n||null==s.return||s.return()}finally{if(i)throw a}}this.trackViews=r},rc.prototype.findTracks=function(t,e){var r=[];return this.trackViews.forEach((function(n){e===n.track[t]&&r.push(n.track)})),r},rc.prototype.setTrackHeight=function(t){this.trackHeight=t,this.trackViews.forEach((function(e){e.setTrackHeight(t)}))},rc.prototype.visibilityChange=function(){this.resize()},rc.prototype.resize=I(e.mark((function r(){var n,i,a,o;return e.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=function(t){return n.viewportContainerWidth()*t.referenceFrame.bpPerPixel>t.chromosome.bpLength},n=this,0!==(i=this.viewportWidth())){e.next=5;break}return e.abrupt("return");case 5:return this.genomicStateList&&i>0&&((a=this.isMultiLocusWholeGenomeView()||ri.isWholeGenomeView(this.genomicStateList[0].referenceFrame))||this.isMultiLocusMode()?this.centerGuide.forcedHide():this.centerGuide.forcedShow(),this.navbarManager.navbarDidResize(this.$navigation.width(),a),this.genomicStateList.forEach((function(e){var r=e.referenceFrame;isFinite(r.bpPerPixel)||t===r.initialEnd||(r.bpPerPixel=(r.initialEnd-r.start)/i)}))),this.genomicStateList&&1===this.genomicStateList.length&&o(this.genomicStateList[0])?this.search(this.genomicStateList[0].chromosome.name):(this.ideoPanel&&this.ideoPanel.resize(),this.centerGuide&&this.centerGuide.resize(),this.trackViews.forEach((function(t){t.resize()}))),this.genomicStateList&&this.genomicStateList.length>0&&(this.updateLocusSearchWidget(this.genomicStateList[0]),this.windowSizePanel.updateWithGenomicState(this.genomicStateList[0])),e.next=10,this.updateViews();case 10:case"end":return e.stop()}}),r,this)}))),rc.prototype.updateViews=function(){var r=I(e.mark((function r(n,i,a){var o,s,h,c,l,u,f,p,d,g,m,v,b,y,w,x,k,S,_,C,E,A,T,R,L,I,M,P,D,F,N,B,O,z,U,H;return e.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=this,i||(i=this.trackViews),!n&&this.genomicStateList&&1==this.genomicStateList.length&&(n=this.genomicStateList[0]),n&&(this.updateLocusSearchWidget(n),this.windowSizePanel.updateWithGenomicState(n)),this.ideoPanel&&this.ideoPanel.repaint(),this.centerGuide&&this.centerGuide.repaint(),!o.isDragging){e.next=35;break}c=!0,l=!1,u=t,e.prev=10,f=i[Symbol.iterator]();case 12:if(c=(p=f.next()).done){e.next=19;break}return d=p.value,e.next=16,d.updateViews();case 16:c=!0,e.next=12;break;case 19:e.next=25;break;case 21:e.prev=21,e.t0=e.catch(10),l=!0,u=e.t0;case 25:e.prev=25,e.prev=26,c||null==f.return||f.return();case 28:if(e.prev=28,!l){e.next=31;break}throw u;case 31:return e.finish(28);case 32:return e.finish(25);case 33:e.next=126;break;case 35:s={},h=[],i.forEach((function(t){var e=t.track.autoscaleGroup;if(e){var r=s[e];r||(r=[],s[e]=r),r.push(t)}else h.push(t)})),g=Object.keys(s),m=0,v=g;case 40:if(!(m<v.length)){e.next=100;break}return b=v[m],y=s[b],w=[],y.forEach((function(t){w.push(t.getInViewFeatures())})),e.next=47,Promise.all(w);case 47:for(x=e.sent,k=[],_=!0,C=!1,E=t,e.prev=52,A=x[Symbol.iterator]();!(_=(T=A.next()).done);_=!0)R=T.value,k=k.concat(R);e.next=60;break;case 56:e.prev=56,e.t1=e.catch(52),C=!0,E=e.t1;case 60:e.prev=60,e.prev=61,_||null==A.return||A.return();case 63:if(e.prev=63,!C){e.next=66;break}throw E;case 66:return e.finish(63);case 67:return e.finish(60);case 68:S=on(k),L=!0,I=!1,M=t,e.prev=72,P=y[Symbol.iterator]();case 74:if(L=(D=P.next()).done){e.next=83;break}return(F=D.value).track.dataRange=S,F.track.autoscale=!1,e.next=80,F.updateViews();case 80:L=!0,e.next=74;break;case 83:e.next=89;break;case 85:e.prev=85,e.t2=e.catch(72),I=!0,M=e.t2;case 89:e.prev=89,e.prev=90,L||null==P.return||P.return();case 92:if(e.prev=92,!I){e.next=95;break}throw M;case 95:return e.finish(92);case 96:return e.finish(89);case 97:m++,e.next=40;break;case 100:N=!0,B=!1,O=t,e.prev=103,z=h[Symbol.iterator]();case 105:if(N=(U=z.next()).done){e.next=112;break}return H=U.value,e.next=109,H.updateViews(a);case 109:N=!0,e.next=105;break;case 112:e.next=118;break;case 114:e.prev=114,e.t3=e.catch(103),B=!0,O=e.t3;case 118:e.prev=118,e.prev=119,N||null==z.return||z.return();case 121:if(e.prev=121,!B){e.next=124;break}throw O;case 124:return e.finish(121);case 125:return e.finish(118);case 126:case"end":return e.stop()}}),r,this,[[10,21,25,33],[26,,28,32],[52,56,60,68],[61,,63,67],[72,85,89,97],[90,,92,96],[103,114,118,126],[119,,121,125]])})));return function(t,e,n){return r.apply(this,arguments)}}(),rc.prototype.loadInProgress=function(){var t;for(t=0;t<this.trackViews.length;t++)if(this.trackViews[t].isLoading())return!0;return!1},rc.prototype.updateLocusSearchWidget=function(t){var e,r,n,i,a,o;this.rulerTrack&&this.rulerTrack.updateLocusLabel(),0===this.genomicStateList.indexOf(t)&&1===this.genomicStateList.length?t.locusSearchString&&"all"===t.locusSearchString.toLowerCase()?(this.$searchInput.val(t.locusSearchString),this.chromosomeSelectWidget.$select.val("all")):(e=t.referenceFrame,this.chromosomeSelectWidget.$select.val(e.chrName),this.$searchInput&&(a=e.start+e.bpPerPixel*(this.viewportContainerWidth()/this.genomicStateList.length),this.genome&&(o=this.genome.getChromosome(e.chrName))&&(a=Math.min(a,o.bpLength)),r=Ur(Math.floor(e.start+1)),n=Ur(Math.floor(a)),i=e.chrName+":"+r+"-"+n,this.$searchInput.val(i)),this.fireEvent("locuschange",[{chr:e.chrName,start:r,end:n,label:i}])):(this.$searchInput.val(""),this.chromosomeSelectWidget.$select.val(""))},rc.prototype.viewportContainerWidth=function(){return this.trackViews&&this.trackViews.length>0?this.trackViews[0].$viewportContainer.width():function(){var t,e,r;return t=cr('<div class="igv-track-div">'),cr(this.trackContainerDiv).append(t),e=cr('<div class="igv-viewport-container">'),t.append(e),r=e.width(),t.remove(),r}.call(this)},rc.prototype.viewportWidth=function(){var e;return e=this.viewportContainerWidth(),t===this.genomicStateList||1===this.genomicStateList.length?e:Math.round(e/this.genomicStateList.length)},rc.prototype.minimumBases=function(){return this.config.minimumBases},rc.prototype.updateZoomSlider=function(t){var e=this.trackViews[0].viewports[0],r=e.genomicState.referenceFrame,n=e.$viewport.width()*r.bpPerPixel,i=r.getChromosome().bpLength,a=(i-n)/(i-this.minimumBases()),o=Math.round(100*a);t.val(o)},rc.prototype.zoom=function(t){this.zoomWithScaleFactor(t)},rc.prototype.zoomIn=function(){this.zoomWithScaleFactor(.5)},rc.prototype.zoomOut=function(){this.zoomWithScaleFactor(2)},rc.prototype.zoomWithRangePercentage=function(t){var e=this;if(!this.loadInProgress()){var r=this;this.trackViews[0].viewports.forEach((function(n){var i,a,o,s=n.genomicState.referenceFrame,h=s.start+s.toBP(n.$viewport.width()/2),c=s.getChromosome(),l=(i=(c.bpLength-c.bpStart)/n.$viewport.width(),a=e.minimumBases()/n.$viewport.width(),(1-(o=t))*i+o*a),u=l*n.$viewport.width();s.start=h-u/2,s.bpPerPixel=l,r.updateViews(n.genomicState)}))}},rc.prototype.zoomWithScaleFactor=function(e,r,n){var i=n?[n]:this.trackViews[0].viewports,a=!0,o=!1,s=t;try{for(var h,c=i[Symbol.iterator]();!(a=(h=c.next()).done);a=!0){var l=h.value,u=l.genomicState.referenceFrame,f=u.getChromosome(),p=f.bpLength-f.bpStart,d=e<1?this.minimumBases()/l.$viewport.width():p/l.$viewport.width(),g=t===r?u.start+u.toBP(l.$viewport.width()/2):r,m=void 0,v=(m=e<1?Math.max(u.bpPerPixel*e,d):Math.min(u.bpPerPixel*e,d))*l.$viewport.width();u.start=g-v/2,u.bpPerPixel=m,u.clamp(l.$viewport.width()),this.updateViews(l.genomicState)}}catch(t){o=!0,s=t}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}},rc.prototype.presentSplitScreenMultiLocusPanel=function(t,e){var r,n,i,a,o=this.genome;n=this.viewportContainerWidth()/(1+this.genomicStateList.length),r=(i=e).referenceFrame;var s=o.getChromosomeName(t.chr);i.referenceFrame=c(s,r.bpPerPixel,n,t.start,t.lengthOnRef);var h=o.getChromosomeName(t.mate.chr);function c(t,e,r,n,i){var a;return new ec(o,t,a=(n+(n+i))/2-e*(r/2),a+e*r,e)}(a={}).chromosome=i.chromosome,a.referenceFrame=c(h,r.bpPerPixel,n,t.mate.position,t.lengthOnRef),this.addMultiLocusPanelWithGenomicStateAtIndex(a,1+this.genomicStateList.indexOf(i),n)},rc.prototype.selectMultiLocusPanelWithGenomicState=function(t){var e=this;this.genomicStateList.filter((function(e){return t!==e})).forEach((function(t){e.removeMultiLocusPanelWithGenomicState(t,!1)})),this.resize()},rc.prototype.removeMultiLocusPanelWithGenomicState=function(t,e){var r,n,i,a=this.genome,o=this;r=this.genomicStateList.indexOf(t),this.ideoPanel&&this.ideoPanel.removePanelWithLocusIndex(r),this.trackViews.forEach((function(t){t.removeViewportWithLocusIndex(r)})),n=this.viewportContainerWidth(),i=this.genomicStateList.length,this.genomicStateList.splice(r,1),this.genomicStateList.forEach((function(t,e){var r=t.referenceFrame.calculateEnd(n/i),s=t.referenceFrame.calculateBPP(r,n/o.genomicStateList.length);o.genomicStateList[e].referenceFrame=new ec(a,t.chromosome.name,t.referenceFrame.start,r,s)})),this.updateUIWithGenomicStateListChange(this.genomicStateList),!0===e&&this.resize()},rc.prototype.addMultiLocusPanelWithGenomicStateAtIndex=function(t,e,r){e===this.genomicStateList.length?(this.genomicStateList.push(t),this.ideoPanel&&this.ideoPanel.addPanelWithGenomicStateAtIndex(t,e,r),this.trackViews.forEach((function(e){var n;n=new si(e,e.$viewportContainer,t,r),e.viewports.push(n),e.decorateViewports(),e.configureViewportContainer(e.$viewportContainer,e.viewports)}))):(this.genomicStateList.splice(e,0,t),this.ideoPanel&&this.ideoPanel.addPanelWithGenomicStateAtIndex(t,e,r),this.trackViews.forEach((function(n){var i;i=new si(n,n.$viewportContainer,t,r),n.viewports.splice(e,0,i),i.$viewport.detach().insertAfter(n.viewports[e-1].$viewport),n.decorateViewports(),n.configureViewportContainer(n.$viewportContainer,n.viewports)}))),this.rulerTrack&&this.rulerTrack.updateLocusLabel(),this.updateUIWithGenomicStateListChange(this.genomicStateList),this.resize()},rc.prototype.emptyViewportContainers=function(){var e=!0,r=!1,n=t;try{for(var i,a=this.trackViews[Symbol.iterator]();!(e=(i=a.next()).done);e=!0){var o=i.value;o.$outerScroll&&o.$outerScroll.remove();var s=!0,h=!1,c=t;try{for(var l,u=o.viewports[Symbol.iterator]();!(s=(l=u.next()).done);s=!0){var f=l.value;f.rulerSweeper&&f.rulerSweeper.$rulerSweeper.remove(),f.popover&&(f.popover.$popover.off(),f.popover.$popover.empty(),f.popover.$popover.remove()),f.$viewport.remove()}}catch(t){h=!0,c=t}finally{try{s||null==u.return||u.return()}finally{if(h)throw c}}delete o.viewports,o.viewports=[],delete o.scrollbar}}catch(t){r=!0,n=t}finally{try{e||null==a.return||a.return()}finally{if(r)throw n}}this.$contentHeader.empty()},rc.prototype.buildViewportsWithGenomicStateList=function(t){var e;e=this.viewportContainerWidth()/this.genomicStateList.length,this.trackViews.forEach((function(r){t.forEach((function(t){var n;n=new si(r,r.$viewportContainer,t,e),r.viewports.push(n)})),r.decorateViewports(),r.configureViewportContainer(r.$viewportContainer,r.viewports)}))},rc.prototype.getViewportWithGUID=function(e){var r=t,n=!0,i=!1,a=t;try{for(var o,s=this.trackViews[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var h=o.value,c=!0,l=!1,u=t;try{for(var f,p=h.viewports[Symbol.iterator]();!(c=(f=p.next()).done);c=!0){var d=f.value;e===d.guid&&(r=d)}}catch(t){l=!0,u=t}finally{try{c||null==p.return||p.return()}finally{if(l)throw u}}}}catch(t){i=!0,a=t}finally{try{n||null==s.return||s.return()}finally{if(i)throw a}}return r},rc.prototype.goto=function(t,e,r){return this.search(t+":"+e+"-"+r)},rc.prototype.search=function(){var r=I(e.mark((function r(n,i){var a,o,s,h,c,l,u,f,p,d,g,m;return e.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return m=function(){return(m=I(e.mark((function r(n){var i,s,h,c,l,u,f,p,d,g,m,v,b,y,w,x,k,S;return e.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:S=function(e,r){var n,i,o,s,h,c;if(c={},s=(n=e.split(":"))[0],!(h=r.getChromosome(s)))return t;if(c.chromosome=h,c.start=0,c.end=h.bpLength,1===n.length)return c;if((i=n[1].split("-")).length>2)return t;if(c.start=c.end=t,o=i[0].replace(/,/g,""),isNaN(o))return t;if(c.start=parseInt(o,10)-1,isNaN(c.start))return t;if(2===i.length){if(o=i[1].replace(/,/g,""),isNaN(o))return!1;c.end=parseInt(o,10)}return sn(c.chromosome.bpLength,c,a.minimumBases()),c},k=function(e,r){var n;if(n="plain"===i.type?function(t){var e=[],r=[];return Hr(t).forEach((function(t){""===t||e.push(t)})),e.forEach((function(t){var e,n,i,o,s=t.split("\t");s.length>=3&&(i=(n=s[1].split(":"))[1].split("-"),e=s[2].trim(),o={gene:s[0],chromosome:a.genome.getChromosomeName(n[0].trim()),start:parseInt(i[0].replace(/,/g,"")),end:parseInt(i[1].replace(/,/g,"")),type:"gtex"===e?"snp":"gene"},r.push(o))})),r}(e):JSON.parse(e),i.resultsField&&(n=n[i.resultsField]),n&&0!==n.length){var o=n[0];if(!o.hasOwnProperty(i.chromosomeField)||!o.hasOwnProperty(i.startField))return t;var s=o[i.chromosomeField],h=o[i.startField]-i.coords,c=o[i.endField];t===c&&(c=h+1),a.flanking&&(h=Math.max(0,h-a.flanking),c+=a.flanking);var l=Object.assign({},o);return l.chromosome=a.genome.getChromosome(s),l.start=h,l.end=c,l.locusSearchString=r,l.selection=new Vh(o[i.geneField],o[i.snpField]),l}return t},x=function(){return(x=I(e.mark((function t(r){var n,o;return e.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(n=i.url.replace("$FEATURE$",r.toUpperCase())).indexOf("$GENOME$")>-1&&(n=n.replace("$GENOME$",a.genome.id?a.genome.id:"hg19")),t.next=4,On.loadString(n);case 4:return o=t.sent,t.abrupt("return",{result:o,locusSearchString:r});case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)},w=function(t){return x.apply(this,arguments)},y=function(t){var e=a.viewportContainerWidth()/t.length;return t.forEach((function(t){t.referenceFrame=new ec(o,t.chromosome.name,t.start,t.end,(t.end-t.start)/e)})),t},i=a.searchConfig,s=[],h=!0,c=!1,l=t,r.prev=10,u=n[Symbol.iterator]();case 12:if(h=(f=u.next()).done){r.next=35;break}if(p=f.value,!(d=S(p,a.genome))){r.next=20;break}d.locusSearchString=p,s.push(d),r.next=31;break;case 20:if(!(g=a.featureDB[p.toUpperCase()])){r.next=26;break}(m=a.genome.getChromosome(g.chr))&&(d={chromosome:m,start:g.start,end:g.end,locusSearchString:p},sn(d.chromosome.bpLength,d,a.minimumBases()),s.push(d)),r.next=31;break;case 26:return r.next=28,w(p);case 28:v=r.sent,(b=k(v.result,v.locusSearchString))&&s.push(b);case 31:y(s);case 32:h=!0,r.next=12;break;case 35:r.next=41;break;case 37:r.prev=37,r.t0=r.catch(10),c=!0,l=r.t0;case 41:r.prev=41,r.prev=42,h||null==u.return||u.return();case 44:if(r.prev=44,!c){r.next=47;break}throw l;case 47:return r.finish(44);case 48:return r.finish(41);case 49:return r.abrupt("return",s);case 50:case"end":return r.stop()}}),r,null,[[10,37,41,49],[42,,44,48]])})))).apply(this,arguments)},g=function(t){return m.apply(this,arguments)},a=this,o=this.genome,n&&"all"===n.trim().toLowerCase()&&(n="all"),s=n.split(" "),r.next=8,g(s);case 8:if((h=r.sent)&&0!==h.length){r.next=13;break}return r.next=12,g([n]);case 12:h=r.sent;case 13:if(!(h.length>0)){r.next=38;break}for(this.emptyViewportContainers(),this.genomicStateList=h,this.buildViewportsWithGenomicStateList(h),c=!0,l=!1,u=t,r.prev=20,f=h[Symbol.iterator]();!(c=(p=f.next()).done);c=!0)p.value.id=Yr();r.next=28;break;case 24:r.prev=24,r.t0=r.catch(20),l=!0,u=r.t0;case 28:r.prev=28,r.prev=29,c||null==f.return||f.return();case 31:if(r.prev=31,!l){r.next=34;break}throw u;case 34:return r.finish(31);case 35:return r.finish(28);case 36:r.next=39;break;case 38:throw new Error("Unrecognized locus "+n);case 39:return this.ideoPanel&&(this.ideoPanel.discardPanels(),d=a.viewportContainerWidth()/h.length,this.ideoPanel.buildPanels(this.$contentHeader,d)),this.updateUIWithGenomicStateListChange(h),i||this.updateViews(),r.abrupt("return",h);case 43:case"end":return r.stop()}}),r,this,[[20,24,28,36],[29,,31,35]])})));return function(t,e){return r.apply(this,arguments)}}(),rc.prototype.loadSampleInformation=function(){var t=I(e.mark((function t(r){var n;return e.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r,r instanceof File&&(n=r.name),"fam"!==n.substr(n.lastIndexOf(".")+1)){t.next=7;break}return t.next=6,Zh(r);case 6:this.sampleInformation=t.sent;case 7:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),rc.prototype.on=function(t,e){this.eventHandlers[t]||(this.eventHandlers[t]=[]),this.eventHandlers[t].push(e)},rc.prototype.un=function(t,e){if(this.eventHandlers[t]){var r=this.eventHandlers[t].indexOf(e);-1!==r&&this.eventHandlers[t].splice(r,1)}},rc.prototype.off=function(t,e){if(t)if(e){var r=this.eventHandlers[t].indexOf(e);-1!==r&&this.eventHandlers[t].splice(r,1)}else this.eventHandlers[t]=[];else this.eventHandlers={}},rc.prototype.fireEvent=function(e,r,n){var i,a=this.eventHandlers[e];return t===a||0===a.length?t:(i=n||window,a.map((function(t){return t.apply(i,r)}))[0])},rc.prototype.dispose=function(){cr(window).off(this.namespace),cr(document).off(this.namespace),this.eventHandlers=t,this.trackViews.forEach((function(t){t.dispose()}))},rc.prototype.toJSON=function(){var t,e;t={reference:this.genome.toJSON()};var r=[],n={};return this.trackViews[0].viewports.forEach((function(t){var e=t.genomicState,i=t.$viewport[0].clientWidth,a=e.referenceFrame.showLocus(i);if(r.push(a),e.selection){var o={gene:e.selection.gene,snp:e.selection.snp};n[a]=o}})),t.locus=r,Object.getOwnPropertyNames(n).length>0&&(t.gtexSelections=n),e=[],this.trackViews.forEach((function(t){var r,n;(n="function"==typeof(r=t.track).getState?r.getState():r.config)&&(n.browser&&delete n.browser,n.order=r.order,e.push(n))})),t.tracks=e,t},rc.prototype.compressedSession=function(){return function(t){for(var e=[],r=0;r<t.length;r++)e.push(t.charCodeAt(r));var n=new Br.RawDeflate(e).compress(),i=String.fromCharCode.apply(null,n);return btoa(i).replace(/\+/g,".").replace(/\//g,"_").replace(/=/g,"-")}(JSON.stringify(this.toJSON()))},rc.uncompressSession=function(e){var r;if(e.indexOf("/gzip;base64")>0){r=_n(e);var n="",i=!0,a=!1,o=t;try{for(var s,h=r[Symbol.iterator]();!(i=(s=h.next()).done);i=!0){var c=s.value;n+=String.fromCharCode(c)}}catch(t){a=!0,o=t}finally{try{i||null==h.return||h.return()}finally{if(a)throw o}}return n}return function(e){e=e.replace(/\./g,"+").replace(/_/g,"/").replace(/-/g,"=");for(var r=atob(e),n=[],i=0;i<r.length;i++)n.push(r.charCodeAt(i));var a=new Br.RawInflate(n).decompress(),o="",s=!0,h=!1,c=t;try{for(var l,u=a[Symbol.iterator]();!(s=(l=u.next()).done);s=!0){var f=l.value;o+=String.fromCharCode(f)}}catch(t){h=!0,c=t}finally{try{s||null==u.return||u.return()}finally{if(h)throw c}}return o}(e.substring(5))},rc.prototype.sessionURL=function(){var t,e;return((e=(t=window.location.href.slice()).indexOf("?"))>0?t.substring(0,e):t)+"?sessionURL=data:"+this.compressedSession()},rc.prototype.presentAlert=function(t){this.alertDialog.present(t)},rc.prototype.mouseDownOnViewport=function(t,e){var r;r=Zr(t),this.vpMouseDown={viewport:e,lastMouseX:r.x,mouseDownX:r.x,lastMouseY:r.y,mouseDownY:r.y,genomicState:e.genomicState,referenceFrame:e.genomicState.referenceFrame}},rc.prototype.cancelTrackPan=function(){var e=this.isDragging;this.isDragging=!1,this.isScrolling=!1,this.vpMouseDown=t,e&&(this.updateViews(),this.fireEvent("trackdragend"))},rc.prototype.startTrackDrag=function(t){this.dragTrack=t},rc.prototype.updateTrackDrag=function(t){if(t&&this.dragTrack){var e=this.dragTrack,r=this.trackViews.indexOf(t),n=this.trackViews.indexOf(e),i=this.trackViews;i[r]=e,i[n]=t;var a=this.trackViews[r].track.order;this.trackViews[n].track.order=a;var o=i.length,s=a;if(r<n)for(var h=r+1;h<o;h++){var c=i[h].track;if(!(c.order<=s))break;c.order=Math.min(Number.MAX_VALUE,s+1),s=c.order}else for(var l=r-1;l>0;l--){var u=i[l].track;if(!(u.order>=s))break;u.order=Math.max(-Number.MAX_VALUE,s-1),s=u.order}this.reorderTracks()}},rc.prototype.endTrackDrag=function(){this.dragTrack&&this.dragTrack.$trackDragScrim.hide(),this.dragTrack=t};var sc=function(t,e){this.$content=cr('<div class="igv-windowsizepanel-content-div">'),t.append(this.$content),this.browser=e};sc.prototype.show=function(){this.$content.show()},sc.prototype.hide=function(){this.$content.hide()},sc.prototype.updateWithGenomicState=function(t){this.$content.text(function(t){var e,r,n;if(!(t>1e7))return t>1e4?(r=" kb",n=t/(e=1e3),Ur(Math.floor(n))+r):Ur(t)+" bp";e=1e6,r=" mb";return n=t/e,Math.floor(n).toString()+r}(Math.round(this.browser.viewportWidth()*t.referenceFrame.bpPerPixel)))};var hc=function(e){var r,n,i=this;this.$container=cr("<div>",{class:"igv-generic-dialog-container"}),e.append(this.$container),this.$container.offset({left:0,top:0}),r=cr("<div>",{class:"igv-generic-dialog-header"}),this.$container.append(r),jr(r,(function(){i.$input.val(t),i.$container.offset({left:0,top:0}),i.$container.hide()})),this.$label=cr("<div>",{class:"igv-generic-dialog-one-liner"}),this.$container.append(this.$label),this.$label.text("Unlabeled"),this.$input_container=cr("<div>",{class:"igv-generic-dialog-input"}),this.$container.append(this.$input_container),this.$input=cr("<input>"),this.$input_container.append(this.$input),n=cr("<div>",{class:"igv-generic-dialog-ok-cancel"}),this.$container.append(n),this.$ok=cr("<div>"),n.append(this.$ok),this.$ok.text("OK"),this.$cancel=cr("<div>"),n.append(this.$cancel),this.$cancel.text("Cancel"),this.$cancel.on("click",(function(){i.$input.val(t),i.$container.offset({left:0,top:0}),i.$container.hide()})),vr(this.$container.get(0),r.get(0)),this.$container.hide()};hc.prototype.configure=function(e){var r=this;this.$label.text(e.label),this.$input.val(e.input),this.$input.unbind(),this.$input.on("keyup",(function(n){13===n.keyCode&&(e.click(),r.$input.val(t),r.$container.offset({left:0,top:0}),r.$container.hide())})),this.$ok.unbind(),this.$ok.on("click",(function(){e.click(),r.$input.val(t),r.$container.offset({left:0,top:0}),r.$container.hide()}))},hc.prototype.present=function(t){var e,r;e=t.offset().top,r=cr("body").scrollTop(),this.$container.offset({left:t.width()-this.$container.width(),top:e+r}),this.$container.show()};var cc=function(e,r){var n,i,a,o=this;this.browser=r,this.$container=cr("<div>",{class:"igv-generic-dialog-container"}),e.append(this.$container),this.$container.offset({left:0,top:0}),n=cr("<div>",{class:"igv-generic-dialog-header"}),this.$container.append(n),jr(n,(function(){o.$minimum_input.val(t),o.$maximum_input.val(t),o.$container.offset({left:0,top:0}),o.$container.hide()})),this.$minimum=cr("<div>",{class:"igv-generic-dialog-label-input"}),this.$container.append(this.$minimum),(a=cr("<div>")).text("Minimum"),this.$minimum.append(a),this.$minimum_input=cr("<input>"),this.$minimum.append(this.$minimum_input),this.$maximum=cr("<div>",{class:"igv-generic-dialog-label-input"}),this.$container.append(this.$maximum),(a=cr("<div>")).text("Maximum"),this.$maximum.append(a),this.$maximum_input=cr("<input>"),this.$maximum.append(this.$maximum_input),i=cr("<div>",{class:"igv-generic-dialog-ok-cancel"}),this.$container.append(i),this.$ok=cr("<div>"),i.append(this.$ok),this.$ok.text("OK"),this.$cancel=cr("<div>"),i.append(this.$cancel),this.$cancel.text("Cancel"),this.$cancel.on("click",(function(){o.$minimum_input.val(t),o.$maximum_input.val(t),o.$container.offset({left:0,top:0}),o.$container.hide()})),vr(this.$container.get(0),n.get(0)),this.$container.hide()};function lc(e){var r,n;r=parseFloat(this.$minimum_input.val()),n=parseFloat(this.$maximum_input.val()),isNaN(r)||isNaN(n)?this.browser.presentAlert("Must input numeric values",t):(!0===e.trackView.track.autoscale&&cr("#datarange-autoscale").trigger("click"),e.trackView.setDataRange(r,n,!1)),this.$minimum_input.val(t),this.$maximum_input.val(t),this.$container.offset({left:0,top:0}),this.$container.hide()}cc.prototype.configure=function(t){var e,r,n,i=this;(e=t.trackView.dataRange())?(r=e.min,n=e.max):(r=0,n=100),this.$minimum_input.val(r),this.$maximum_input.val(n),this.$minimum_input.unbind(),this.$minimum_input.on("keyup",(function(e){13===e.keyCode&&lc.call(i,t)})),this.$maximum_input.unbind(),this.$maximum_input.on("keyup",(function(e){13===e.keyCode&&lc.call(i,t)})),this.$ok.unbind(),this.$ok.on("click",(function(){lc.call(i,t)}))},cc.prototype.present=function(t){var e,r;e=t.offset().top,r=cr("body").scrollTop(),this.$container.offset({left:t.width()-this.$container.width(),top:e+r}),this.$container.show()};var uc=function(e){var r,n,i=this;this.$container=cr("<div>",{class:"igv-generic-dialog-container"}),e.append(this.$container),this.$container.offset({left:0,top:0}),r=cr("<div>",{class:"igv-generic-dialog-header"}),this.$container.append(r),jr(r,(function(){i.$track_name.text(t),i.$container.offset({left:0,top:0}),i.$container.hide()})),this.$label=cr("<div>",{class:"igv-generic-dialog-one-liner"}),this.$container.append(this.$label),this.$label.text("Remove track:"),this.$track_name=cr("<div>",{class:"igv-generic-dialog-one-liner igv-ellipsis"}),this.$container.append(this.$track_name),n=cr("<div>",{class:"igv-generic-dialog-ok-cancel"}),this.$container.append(n),this.$ok=cr("<div>"),n.append(this.$ok),this.$ok.text("OK"),this.$cancel=cr("<div>"),n.append(this.$cancel),this.$cancel.text("Cancel"),this.$cancel.on("click",(function(){i.$track_name.text(t),i.$container.offset({left:0,top:0}),i.$container.hide()})),vr(this.$container.get(0),r.get(0)),this.$container.hide()};uc.prototype.configure=function(e){var r=this;this.$track_name.text(e.name||"unnamed"),this.$ok.unbind(),this.$ok.on("click",(function(){e.click(),r.$track_name.text(t),r.$container.offset({left:0,top:0}),r.$container.hide()}))},uc.prototype.present=function(t){var e,r;e=t.offset().top,r=cr("body").scrollTop(),this.$container.offset({left:t.width()-this.$container.width(),top:e+r}),this.$container.show()};var fc=function(t){this.$container=cr('<div class="igv-user-feedback">'),t.append(this.$container);var e=cr("<div>");this.$container.append(e);var r=cr("<div>");e.append(r);var n=_r("exclamation-triangle","red");r.append(n);var i=cr("<div>");e.append(i);var a=_r("times-circle","grey");i.append(a);var o=cr("<div>");this.$container.append(o);var s=cr("<div>");o.append(s),s.text("i am user feedback"),i.click((function(){s.html(""),(void 0).$container.hide()}))};fc.prototype.show=function(){this.$container.show()},fc.prototype.hide=function(){this.$container.hide()};var pc=function(t,e){var r=cr('<div class="igv-nav-bar-button">');t.append(r),r.text("Save SVG"),r.on("click.svg-save-control",(function(){e.renderSVG({})}))},dc=function(e,r){var n;this.$zoomContainer=cr('<div class="igv-zoom-widget">'),r.append(this.$zoomContainer),n=cr("<div>"),this.$zoomContainer.append(n),n.append(_r("minus-circle")),n.on("click",(function(){e.zoomOut()})),n=cr("<div>"),this.$zoomContainer.append(n),this.$slider=cr('<input type="range"/>'),n.append(this.$slider),this.$slider.on("change",(function(t){e.zoomWithRangePercentage(t.target.value/100)})),n=cr("<div>"),this.$zoomContainer.append(n),n.append(_r("plus-circle")),n.on("click",(function(){e.zoomIn()})),this.currentChr=t;var i=this;e.on("locuschange",(function(){e.updateZoomSlider(i.$slider)}))};dc.prototype.hide=function(){this.$zoomContainer.hide()},dc.prototype.show=function(){this.$zoomContainer.show()},dc.prototype.hideSlider=function(){this.$slider.hide()},dc.prototype.showSlider=function(){this.$slider.show()};var gc=function(t,e){this.showAllChromosomes=t.config.showAllChromosomes,this.$container=cr("<div>",{class:"igv-chromosome-select-widget-container"}),e.append(this.$container),this.$select=cr("<select>",{name:"chromosome-select-widget"}),this.$container.append(this.$select),this.$select.on("change",(function(){""!==cr(this).val()&&(t.search(cr(this).val()),cr(this).blur())}))};gc.prototype.update=function(e){this.$select.empty();var r=this.showAllChromosomes?e.chromosomeNames.slice():e.wgChromosomeNames.slice();e.showWholeGenomeView()&&(r.unshift("all"),r.unshift(""));var n=!0,i=!1,a=t;try{for(var o,s=r[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var h,c=o.value;h=cr("<option>",{value:c}),this.$select.append(h),h.text(c)}}catch(t){i=!0,a=t}finally{try{n||null==s.return||s.return()}finally{if(i)throw a}}};var mc=function(t,e){var r=this;this.browser=e,this.$button=cr('<div class="igv-nav-bar-button">'),t.append(this.$button),this.$button.text("track labels"),this.$button.on("click",(function(){!0===e.trackLabelsVisible?r.doHide():r.doShow()}))};mc.prototype.doHide=function(){this.$button.removeClass("igv-nav-bar-button-clicked"),this.browser.hideTrackLabels()},mc.prototype.doShow=function(){this.$button.addClass("igv-nav-bar-button-clicked"),this.browser.showTrackLabels()},mc.prototype.setState=function(t){!0===t?this.$button.addClass("igv-nav-bar-button-clicked"):this.$button.removeClass("igv-nav-bar-button-clicked")},mc.prototype.disable=function(){this.doHide(),this.$button.hide()},mc.prototype.enable=function(){this.$button.show()};var vc=function(t,e,r,n){var i=this;this.browser=n,this.$container=cr('<div class="igv-center-guide igv-center-guide-thin">'),t.append(this.$container),!0===r.showCenterGuideButton&&(this.$centerGuideToggle=cr('<div class="igv-nav-bar-button">'),e.append(this.$centerGuideToggle),this.$centerGuideToggle.text("center line"),this.$centerGuideToggle.on("click",(function(){!0===n.isCenterGuideVisible?i.doHide():i.doShow()})))};vc.prototype.doHide=function(){this.$centerGuideToggle&&this.$centerGuideToggle.removeClass("igv-nav-bar-button-clicked"),this.browser.hideCenterGuide()},vc.prototype.doShow=function(){this.$centerGuideToggle&&this.$centerGuideToggle.addClass("igv-nav-bar-button-clicked"),this.browser.showCenterGuide()},vc.prototype.setState=function(t){this.$centerGuideToggle&&(!0===t?this.$centerGuideToggle.addClass("igv-nav-bar-button-clicked"):this.$centerGuideToggle.removeClass("igv-nav-bar-button-clicked"))},vc.prototype.forcedHide=function(){this.$centerGuideToggle&&this.$centerGuideToggle.hide(),!0===this.browser.isCenterGuideVisible&&this.$container.hide()},vc.prototype.forcedShow=function(){this.$centerGuideToggle&&this.$centerGuideToggle.show(),!0===this.browser.isCenterGuideVisible&&this.$container.show()},vc.prototype.repaint=function(){var t,e,r,n,i,a,o;this.browser.genomicStateList&&(1/(o=this.browser.genomicStateList[0].referenceFrame).bpPerPixel>1?(t=this.browser.trackViews[0].$viewportContainer.position(),e=Math.round(this.browser.trackViews[0].$viewportContainer.width()/2),n=t.left+e-.5*(r=o.toPixels(1)),i=Math.round(n).toString()+"px",a=Math.round(r).toString()+"px",this.$container.css({left:i,width:a}),this.$container.removeClass("igv-center-guide-thin"),this.$container.addClass("igv-center-guide-wide")):(this.$container.css({left:"50%",width:"1px"}),this.$container.removeClass("igv-center-guide-wide"),this.$container.addClass("igv-center-guide-thin")))},vc.prototype.resize=function(){this.repaint()};var bc=function(e,r,n,i){var a=this,o=this;this.browser=i,this.$guide=cr('<div class="igv-cursor-tracking-guide">'),e.append(this.$guide),e.on("mousemove.cursor-guide",(function(r){r.preventDefault();var n=cr(document.elementFromPoint(r.clientX,r.clientY)),o=n.parent(),s=t;o.hasClass("igv-viewport-content-div")?s=o.parent():o.hasClass("igv-viewport-div")&&n.hasClass("igv-viewport-content-div")?s=o:o.hasClass("igv-viewport-container")&&n.hasClass("igv-viewport-div")&&(s=n);n.attr("class"),o.attr("class");if(s){var h=yc(r,s,a.$guide,e,i);if(h){var c=h.bp,l=h.start,u=h.end,f=h.interpolant;a.customMouseHandler&&a.customMouseHandler({bp:c,start:l,end:u,interpolant:f})}}})),!0===n.showCursorTrackingGuideButton&&(this.$button=cr('<div class="igv-nav-bar-button">'),r.append(this.$button),this.$button.text("cursor guide"),this.$button.on("click",(function(){!0===i.cursorGuideVisible?o.doHide():o.doShow()})))},yc=function(e,r,n,i,a){var o=wc(i.get(0),e).x,s="".concat(o,"px");n.css({left:s});var h=wc(r.get(0),e),c=r.data("viewportGUID"),l=a.getViewportWithGUID(c);if(t===l)return t;var u=l.genomicState.referenceFrame,f=u.start,p=1+u.start+h.width*u.bpPerPixel,d=Math.round(f+h.x*u.bpPerPixel),g=r.closest(".igv-track-container-div");wc(g.get(0),e);return{$host:g,host_css_left:s,bp:d,start:f,end:p,interpolant:h.xNormalized}};function wc(t,e){var r=t.getBoundingClientRect();return{x:e.clientX-r.left,y:e.clientY-r.top,xNormalized:(e.clientX-r.left)/r.width,yNormalized:(e.clientY-r.top)/r.height,width:r.width,height:r.height}}bc.prototype.doHide=function(){this.$button&&this.$button.removeClass("igv-nav-bar-button-clicked"),this.browser.hideCursorGuide()},bc.prototype.doShow=function(){this.$button.addClass("igv-nav-bar-button-clicked"),this.browser.showCursorGuide()},bc.prototype.setState=function(t){this.$button&&(!0===t?this.$button.addClass("igv-nav-bar-button-clicked"):this.$button.removeClass("igv-nav-bar-button-clicked"))},bc.prototype.disable=function(){this.doHide(),this.$guide.hide()},bc.prototype.enable=function(){this.$button&&this.$button.show()};var xc=function(t){this.browser=t};function kc(t){this.browser.$toggle_button_container.removeClass(),this.browser.$toggle_button_container.addClass(t.$toggle_button_container),this.browser.zoomWidget.$zoomContainer.removeClass(),this.browser.zoomWidget.$zoomContainer.addClass(t.$zoomContainer)}function Sc(t,e){var r={};return e?this.browser.windowSizePanel.hide():this.browser.windowSizePanel.show(),t>990?(r.$toggle_button_container="igv-nav-bar-toggle-button-container",r.$zoomContainer="igv-zoom-widget"):t>860?(r.$toggle_button_container="igv-nav-bar-toggle-button-container",r.$zoomContainer="igv-zoom-widget-900"):t>540?(r.$toggle_button_container="igv-nav-bar-toggle-button-container-750",r.$zoomContainer="igv-zoom-widget-900"):(r.$toggle_button_container="igv-nav-bar-toggle-button-container-750",r.$zoomContainer="igv-zoom-widget-900",this.browser.windowSizePanel.hide()),e&&(r.$zoomContainer="igv-zoom-widget-hidden"),r}xc.prototype.navbarDidResize=function(t,e){kc.call(this,Sc.call(this,t,e))};var _c=[];function Cc(){return(Cc=I(e.mark((function r(n,i){var a,o;return e.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=function(t){return t.sessionURL?a.loadSession({url:t.sessionURL}):a.loadSessionObject(t)},Mn.init(cr(n)),t===i&&(i={}),ri.genomeList=i.genomeList||"https://s3.amazonaws.com/igv.org.genomes/genomes.json",Tc(i),!1!==i.queryParametersSupported&&Rc(i),Ec(i),Ac(a=new rc(i,n),i),a.userFeedback=new fc(a.$content),a.userFeedback.hide(),a.alertDialog=new Rn(a.$content),a.inputDialog=new hc(a.$root),a.trackRemovalDialog=new uc(a.$root),a.dataRangeDialog=new cc(a.$root,a),i.apiKey&&pn.setApiKey(i.apiKey),i.oauthToken&&gn.setToken(i.oauthToken),e.abrupt("return",o(i).then((function(t){!1===i.showTrackLabels?a.hideTrackLabels():(a.showTrackLabels(),a.trackLabelControl&&a.trackLabelControl.setState(a.trackLabelsVisible)),!1===i.showCursorTrackingGuide?a.cursorGuide.doHide():a.cursorGuide.doShow(),!1===i.showCenterGuide?a.centerGuide.doHide():a.centerGuide.doShow();var e=a.isMultiLocusWholeGenomeView()||ri.isWholeGenomeView(a.genomicStateList[0].referenceFrame);return a.isMultiLocusMode()||e?a.centerGuide.forcedHide():a.centerGuide.forcedShow(),On.startup(),a.navbarManager.navbarDidResize(a.$navigation.width(),e),a})).then((function(t){return _c.push(t),t})));case 18:case"end":return e.stop()}}),r)})))).apply(this,arguments)}function Ec(e){var r=1;e.tracks&&e.tracks.forEach((function(e){e.order===t&&(e.order=r++)}))}function Ac(e,r){var n;n=r.createControls?r.createControls(e,r):function(e,r){var n,i,a,o,s,h,c,l,u,f,p;u=cr("<div>",{class:"igvControlDiv"}),f=cr("<div>",{class:"igv-navbar"}),u.append(f),e.$navigation=f,e.navbarManager=new xc(e),i=cr("<div>",{class:"igv-nav-bar-left-container"}),f.append(i),c=cr("<div>",{class:"igv-logo"}),(l=function(){return cr('<svg width="690px" height="324px" viewBox="0 0 690 324" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>IGV</title><g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="IGV" fill="#666666"><polygon id="Path" points="379.54574 8.00169252 455.581247 8.00169252 515.564813 188.87244 532.884012 253.529506 537.108207 253.529506 554.849825 188.87244 614.833392 8.00169252 689.60164 8.00169252 582.729511 320.722144 486.840288 320.722144"></polygon><path d="M261.482414,323.793286 C207.975678,323.793286 168.339046,310.552102 142.571329,284.069337 C116.803612,257.586572 103.919946,217.158702 103.919946,162.784513 C103.919946,108.410325 117.437235,67.8415913 144.472217,41.0770945 C171.507199,14.3125977 212.903894,0.930550071 268.663545,0.930550071 C283.025879,0.930550071 298.232828,1.84616386 314.284849,3.6774189 C330.33687,5.50867394 344.839793,7.97378798 357.794056,11.072835 L357.794056,68.968378 C339.48912,65.869331 323.578145,63.5450806 310.060654,61.9955571 C296.543163,60.4460336 284.574731,59.6712835 274.154998,59.6712835 C255.850062,59.6712835 240.502308,61.4320792 228.111274,64.9537236 C215.720241,68.4753679 205.793482,74.2507779 198.330701,82.2801269 C190.867919,90.309476 185.587729,100.87425 182.48997,113.974767 C179.392212,127.075284 177.843356,143.345037 177.843356,162.784513 C177.843356,181.942258 179.251407,198.000716 182.067551,210.960367 C184.883695,223.920018 189.671068,234.41436 196.429813,242.443709 C203.188559,250.473058 212.059279,256.178037 223.042241,259.558815 C234.025202,262.939594 247.683295,264.629958 264.01693,264.629958 C268.241146,264.629958 273.098922,264.489094 278.590403,264.207362 C284.081883,263.925631 289.643684,263.50304 295.275972,262.939577 L295.275972,159.826347 L361.595831,159.826347 L361.595831,308.579859 C344.698967,313.087564 327.239137,316.750019 309.215815,319.567334 C291.192494,322.38465 275.281519,323.793286 261.482414,323.793286 L261.482414,323.793286 L261.482414,323.793286 Z" id="Path"></path>;<polygon id="Path" points="0.81355666 5.00169252 73.0472883 5.00169252 73.0472883 317.722144 0.81355666 317.722144"></polygon></g> </g> </svg>')}()).css("width","34px"),l.css("height","32px"),c.append(l),i.append(c),e.$current_genome=cr("<div>",{class:"igv-current-genome"}),i.append(e.$current_genome),e.$current_genome.text(""),o=cr("<div>",{class:"igv-nav-bar-genomic-location"}),i.append(o),e.chromosomeSelectWidget=new gc(e,o),t===r.showChromosomeWidget&&(r.showChromosomeWidget=!0);!0===r.showChromosomeWidget?e.chromosomeSelectWidget.$container.show():e.chromosomeSelectWidget.$container.hide();s=cr("<div>",{class:"igv-locus-size-group"}),o.append(s),p=cr("<div>",{class:"igv-search-container"}),s.append(p),e.$searchInput=cr('<input type="text" placeholder="Locus Search">'),p.append(e.$searchInput),e.$searchInput.change((function(t){e.search(cr(this).val()).catch((function(t){e.presentAlert(t)}))})),n=cr("<div>"),p.append(n),n.append(_r("search")),n.click((function(){e.search(e.$searchInput.val())})),e.windowSizePanel=new sc(s,e),a=cr('<div class="igv-nav-bar-right-container">'),f.append(a),h=cr('<div class="igv-nav-bar-toggle-button-container">'),a.append(h),e.$toggle_button_container=h,e.cursorGuide=new bc(e.$content,h,r,e),e.centerGuide=new vc(cr(e.trackContainerDiv),h,r,e),!0===r.showTrackLabelButton&&(e.trackLabelControl=new mc(h,e));r.showSVGButton&&(e.svgSaveControl=new pc(h,e));e.zoomWidget=new dc(e,a),!1===r.showNavigation&&e.$navigation.hide();return u.get(0)}(e,r),cr(n).insertBefore(e.$content),!1===r.showControls&&cr(n).hide()}function Tc(e){t===e.promisified&&(e.promisified=!1),t===e.minimumBases&&(e.minimumBases=40),t===e.showIdeogram&&(e.showIdeogram=!0),t===e.showCursorTrackingGuideButton&&(e.showCursorTrackingGuideButton=!0),t===e.showCenterGuideButton&&(e.showCenterGuideButton=!0),t===e.showSVGButton&&(e.showSVGButton=!0),t===e.showTrackLabelButton&&(e.showTrackLabelButton=!0),t===e.showCursorTrackingGuide&&(e.showCursorTrackingGuide=!1),t===e.showCenterGuide&&(e.showCenterGuide=!1),t===e.showTrackLabels&&(e.showTrackLabels=!0),e.showControls===t&&(e.showControls=!0),e.showNavigation===t&&(e.showNavigation=!0),e.showRuler===t&&(e.showRuler=!0),e.showSequence===t&&(e.showSequence=!0),e.flanking===t&&(e.flanking=1e3),e.pairsSupported===t&&(e.pairsSupported=!0),e.tracks||(e.tracks=[]),e.showSequence&&e.tracks.push({type:"sequence",order:-Number.MAX_VALUE})}function Rc(t){var e,r,n,i,a,o,s,h,c,l,u;if(a={},e=(s=window.location.href).indexOf("?"),r=s.lastIndexOf("#"),e>=0)for(r<0&&(r=s.length),n=e+1;n<r;)(i=s.indexOf("&",n))<0&&(i=r),2===(o=s.substring(n,i).split("=",2)).length&&(h=o[0],c=decodeURIComponent(o[1]),"file"===h?l=c.split(","):"index"===h?u=c.split(","):t[h]=c,n=i+1);if(l){t.tracks||(t.tracks=[]);for(var f=0;f<l.length;f++){if(l[f].endsWith(".xml")||l[f].endsWith(".json")){t.sessionURL=l[f];break}var p={url:l[f]};u&&u.length>f&&(p.indexURL=u[f]),t.tracks.push(p)}}return a}var Lc="2.3.5 (4a87aea00b72dd23752bcfeb2f6f69f1602adb6d)";var Ic,Mc=On,Pc=Vr,Dc=Ri;return(Ic=document.createElement("style")).setAttribute("type","text/css"),Ic.innerHTML='.igv-user-feedback {\n  position: fixed;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  width: 512px;\n  height: 360px;\n  z-index: 2048;\n  background-color: white;\n  border-color: #a2a2a2;\n  border-style: solid;\n  border-width: thin;\n  font-family: "Open Sans", sans-serif;\n  font-size: medium;\n  font-weight: 400;\n  color: #444;\n  display: flex;\n  flex-direction: column;\n  flex-wrap: nowrap;\n  justify-content: flex-start;\n  align-items: center; }\n  .igv-user-feedback div:first-child {\n    position: relative;\n    height: 24px;\n    width: 100%;\n    background-color: white;\n    border-bottom-color: #a2a2a2;\n    border-bottom-style: solid;\n    border-bottom-width: thin; }\n    .igv-user-feedback div:first-child div {\n      position: absolute;\n      top: 2px;\n      width: 16px;\n      height: 16px;\n      background-color: transparent; }\n    .igv-user-feedback div:first-child div:first-child {\n      left: 8px; }\n    .igv-user-feedback div:first-child div:last-child {\n      cursor: pointer;\n      right: 8px; }\n  .igv-user-feedback div:last-child {\n    width: 100%;\n    height: calc(100% - 24px);\n    border-width: 0; }\n    .igv-user-feedback div:last-child div {\n      width: auto;\n      height: auto;\n      margin: 8px; }\n\n.igv-color-swatch {\n  display: flex;\n  flex-flow: row;\n  flex-wrap: wrap;\n  justify-content: center;\n  align-items: center;\n  width: 32px;\n  height: 32px;\n  border-style: solid;\n  border-width: 2px;\n  border-color: white;\n  border-radius: 4px; }\n\n.igv-colorpicker-menu-close-button {\n  display: flex;\n  flex-flow: row;\n  flex-wrap: nowrap;\n  justify-content: flex-end;\n  align-items: center;\n  width: 100%;\n  height: 32px;\n  margin-top: 4px;\n  margin-bottom: 4px;\n  padding-right: 8px; }\n  .igv-colorpicker-menu-close-button i.fa {\n    display: block;\n    margin-left: 4px;\n    margin-right: 4px;\n    color: #5f5f5f; }\n  .igv-colorpicker-menu-close-button i.fa:hover,\n  .igv-colorpicker-menu-close-button i.fa:focus,\n  .igv-colorpicker-menu-close-button i.fa:active {\n    cursor: pointer;\n    color: #0f0f0f; }\n\n.igv-alert-dialog-container {\n  position: absolute;\n  z-index: 2048;\n  top: 30%;\n  left: 50%;\n  margin: -150px 0 0 -150px;\n  width: 300px;\n  height: 256px;\n  border-color: #7F7F7F;\n  border-radius: 4px;\n  border-style: solid;\n  border-width: thin;\n  font-family: "Open Sans", sans-serif;\n  font-size: 15px;\n  font-weight: 400;\n  z-index: 2048;\n  background-color: white;\n  display: flex;\n  flex-flow: column;\n  flex-wrap: nowrap;\n  justify-content: flex-start;\n  align-items: center; }\n  .igv-alert-dialog-container div:first-child {\n    display: flex;\n    flex-flow: row;\n    flex-wrap: nowrap;\n    justify-content: flex-end;\n    align-items: center;\n    width: 100%;\n    height: 24px;\n    cursor: move;\n    border-top-left-radius: 4px;\n    border-top-right-radius: 4px;\n    border-bottom-color: #7F7F7F;\n    border-bottom-style: solid;\n    border-bottom-width: thin;\n    background-color: #eee; }\n    .igv-alert-dialog-container div:first-child div {\n      margin-right: 4px;\n      margin-bottom: 2px;\n      height: 12px;\n      width: 12px;\n      color: #7F7F7F; }\n    .igv-alert-dialog-container div:first-child div:hover {\n      cursor: pointer;\n      color: #444; }\n  .igv-alert-dialog-container #igv-alert-dialog-body {\n    color: #373737;\n    width: 100%;\n    height: calc(100% - 24px - 64px);\n    overflow-y: scroll; }\n    .igv-alert-dialog-container #igv-alert-dialog-body #igv-alert-dialog-body-copy {\n      cursor: pointer;\n      margin: 16px;\n      width: auto;\n      height: auto;\n      overflow-wrap: break-word;\n      word-break: break-word;\n      background-color: white;\n      border: unset; }\n  .igv-alert-dialog-container div:last-child {\n    width: 100%;\n    height: 64px;\n    background-color: white;\n    display: flex;\n    flex-flow: row;\n    flex-wrap: nowrap;\n    justify-content: center;\n    align-items: center; }\n    .igv-alert-dialog-container div:last-child div {\n      width: 98px;\n      height: 36px;\n      line-height: 36px;\n      text-align: center;\n      color: white;\n      font-family: "Open Sans", sans-serif;\n      font-size: medium;\n      font-weight: 400;\n      border-color: #2B81AF;\n      border-style: solid;\n      border-width: thin;\n      border-radius: 4px;\n      background-color: #2B81AF; }\n    .igv-alert-dialog-container div:last-child div:hover {\n      cursor: pointer;\n      border-color: #25597f;\n      background-color: #25597f; }\n\n.igv-generic-container {\n  position: absolute;\n  top: 0;\n  left: 0;\n  z-index: 2048;\n  background-color: white;\n  cursor: pointer;\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  justify-content: flex-start;\n  align-items: center; }\n  .igv-generic-container div:first-child {\n    cursor: move;\n    display: flex;\n    flex-flow: row;\n    flex-wrap: nowrap;\n    justify-content: flex-end;\n    align-items: center;\n    height: 24px;\n    width: 100%;\n    background-color: #dddddd; }\n    .igv-generic-container div:first-child i {\n      display: block;\n      color: #5f5f5f;\n      cursor: pointer;\n      width: 14px;\n      height: 14px;\n      margin-right: 8px;\n      margin-bottom: 4px; }\n\n.igv-generic-dialog-container {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 300px;\n  height: 200px;\n  border-color: #7F7F7F;\n  border-radius: 4px;\n  border-style: solid;\n  border-width: thin;\n  font-family: "Open Sans", sans-serif;\n  font-size: medium;\n  font-weight: 400;\n  z-index: 2048;\n  background-color: white;\n  display: flex;\n  flex-flow: column;\n  flex-wrap: nowrap;\n  justify-content: flex-start;\n  align-items: center; }\n  .igv-generic-dialog-container .igv-generic-dialog-header {\n    display: flex;\n    flex-flow: row;\n    flex-wrap: nowrap;\n    justify-content: flex-end;\n    align-items: center;\n    width: 100%;\n    height: 24px;\n    cursor: move;\n    border-top-left-radius: 4px;\n    border-top-right-radius: 4px;\n    border-bottom-color: #7F7F7F;\n    border-bottom-style: solid;\n    border-bottom-width: thin;\n    background-color: #eee; }\n    .igv-generic-dialog-container .igv-generic-dialog-header div {\n      margin-right: 4px;\n      margin-bottom: 2px;\n      height: 12px;\n      width: 12px;\n      color: #7F7F7F; }\n    .igv-generic-dialog-container .igv-generic-dialog-header div:hover {\n      cursor: pointer;\n      color: #444; }\n  .igv-generic-dialog-container .igv-generic-dialog-one-liner {\n    color: #373737;\n    width: 95%;\n    height: 24px;\n    line-height: 24px;\n    text-align: left;\n    margin-top: 8px;\n    padding-left: 8px;\n    overflow-wrap: break-word;\n    background-color: white; }\n  .igv-generic-dialog-container .igv-generic-dialog-label-input {\n    margin-top: 8px;\n    width: 95%;\n    height: 24px;\n    color: #373737;\n    line-height: 24px;\n    padding-left: 8px;\n    background-color: white;\n    display: flex;\n    flex-flow: row;\n    flex-wrap: nowrap;\n    justify-content: flex-start;\n    align-items: center; }\n    .igv-generic-dialog-container .igv-generic-dialog-label-input div {\n      width: 30%;\n      height: 100%;\n      font-size: 16px;\n      text-align: right;\n      padding-right: 8px;\n      background-color: white; }\n    .igv-generic-dialog-container .igv-generic-dialog-label-input input {\n      display: block;\n      height: 100%;\n      width: 100%;\n      padding-left: 4px;\n      font-family: "Open Sans", sans-serif;\n      font-weight: 400;\n      color: #373737;\n      text-align: left;\n      outline: none;\n      border-style: solid;\n      border-width: thin;\n      border-color: #7F7F7F;\n      background-color: white; }\n    .igv-generic-dialog-container .igv-generic-dialog-label-input input {\n      width: 50%;\n      font-size: 16px; }\n  .igv-generic-dialog-container .igv-generic-dialog-input {\n    margin-top: 8px;\n    width: calc(100% - 16px);\n    height: 24px;\n    color: #373737;\n    line-height: 24px;\n    display: flex;\n    flex-flow: row;\n    flex-wrap: nowrap;\n    justify-content: space-around;\n    align-items: center; }\n    .igv-generic-dialog-container .igv-generic-dialog-input input {\n      display: block;\n      height: 100%;\n      width: 100%;\n      padding-left: 4px;\n      font-family: "Open Sans", sans-serif;\n      font-weight: 400;\n      color: #373737;\n      text-align: left;\n      outline: none;\n      border-style: solid;\n      border-width: thin;\n      border-color: #7F7F7F;\n      background-color: white; }\n    .igv-generic-dialog-container .igv-generic-dialog-input input {\n      font-size: 16px; }\n  .igv-generic-dialog-container .igv-generic-dialog-ok-cancel {\n    width: 100%;\n    height: 28px;\n    display: flex;\n    flex-flow: row;\n    flex-wrap: nowrap;\n    justify-content: space-around;\n    align-items: center; }\n    .igv-generic-dialog-container .igv-generic-dialog-ok-cancel div {\n      margin-top: 32px;\n      color: white;\n      font-family: "Open Sans", sans-serif;\n      font-size: 14px;\n      font-weight: 400;\n      width: 75px;\n      height: 28px;\n      line-height: 28px;\n      text-align: center;\n      border-color: transparent;\n      border-style: solid;\n      border-width: thin;\n      border-radius: 2px; }\n    .igv-generic-dialog-container .igv-generic-dialog-ok-cancel div:first-child {\n      margin-left: 32px;\n      margin-right: 0;\n      background-color: #5ea4e0; }\n    .igv-generic-dialog-container .igv-generic-dialog-ok-cancel div:last-child {\n      margin-left: 0;\n      margin-right: 32px;\n      background-color: #c4c4c4; }\n    .igv-generic-dialog-container .igv-generic-dialog-ok-cancel div:first-child:hover {\n      cursor: pointer;\n      background-color: #3b5c7f; }\n    .igv-generic-dialog-container .igv-generic-dialog-ok-cancel div:last-child:hover {\n      cursor: pointer;\n      background-color: #7f7f7f; }\n  .igv-generic-dialog-container .igv-generic-dialog-ok {\n    width: 100%;\n    height: 36px;\n    margin-top: 32px;\n    display: flex;\n    flex-flow: row;\n    flex-wrap: nowrap;\n    justify-content: space-around;\n    align-items: center; }\n    .igv-generic-dialog-container .igv-generic-dialog-ok div {\n      width: 98px;\n      height: 36px;\n      line-height: 36px;\n      text-align: center;\n      color: white;\n      font-family: "Open Sans", sans-serif;\n      font-size: medium;\n      font-weight: 400;\n      border-color: white;\n      border-style: solid;\n      border-width: thin;\n      border-radius: 4px;\n      background-color: #2B81AF; }\n    .igv-generic-dialog-container .igv-generic-dialog-ok div:hover {\n      cursor: pointer;\n      background-color: #25597f; }\n\n.igv-popover {\n  position: absolute;\n  top: 0;\n  left: 0;\n  min-width: 128px;\n  z-index: 4096;\n  font-family: "Open Sans", sans-serif;\n  font-size: small;\n  font-weight: 400;\n  color: #4b4b4b;\n  background-color: white;\n  border-radius: 4px;\n  border-color: #7F7F7F;\n  border-style: solid;\n  border-width: thin;\n  display: none; }\n\n.igv-popover-header {\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  justify-content: flex-end;\n  align-items: center;\n  width: 100%;\n  height: 24px;\n  cursor: move;\n  border-top-left-radius: 4px;\n  border-top-right-radius: 4px;\n  border-bottom-color: #7F7F7F;\n  border-bottom-style: solid;\n  border-bottom-width: thin;\n  background-color: #eee; }\n  .igv-popover-header div {\n    margin-right: 4px;\n    height: 12px;\n    width: 12px;\n    color: #7F7F7F; }\n  .igv-popover-header div:hover {\n    cursor: pointer;\n    color: #444; }\n\n.igv-popover-track-popup-content {\n  position: relative;\n  top: 0;\n  left: 0;\n  max-height: 384px;\n  overflow-x: hidden;\n  overflow-y: auto;\n  background-color: white; }\n  .igv-popover-track-popup-content div {\n    margin-left: 4px;\n    background-color: white; }\n  .igv-popover-track-popup-content div:hover {\n    cursor: pointer;\n    background-color: #efefef; }\n\n.igv-popover-name-value {\n  cursor: default;\n  text-wrap: none;\n  white-space: nowrap;\n  max-width: 384px; }\n\n.igv-popover-name {\n  font-weight: bold;\n  padding-right: 4px;\n  float: left; }\n\n.igv-popover-value {\n  padding-left: 4px;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  max-width: 256px;\n  display: inline-block; }\n\n.igv-trackgear-container {\n  position: relative;\n  width: 20px;\n  height: 20px;\n  margin-left: 4px;\n  color: #7F7F7F; }\n\n.igv-trackgear-container:hover {\n  cursor: pointer;\n  color: #444; }\n\n.igv-trackgear-popover {\n  position: absolute;\n  top: 0;\n  left: 0;\n  min-width: 132px;\n  z-index: 4096;\n  cursor: pointer;\n  font-family: "Open Sans", sans-serif;\n  font-size: small;\n  font-weight: 400;\n  color: #4b4b4b;\n  background: white;\n  border-radius: 4px;\n  border-color: #7F7F7F;\n  border-style: solid;\n  border-width: thin;\n  display: flex;\n  flex-flow: column;\n  flex-wrap: nowrap;\n  justify-content: flex-start;\n  align-items: flex-end;\n  text-align: left; }\n  .igv-trackgear-popover > div:not(:first-child) {\n    width: 100%; }\n    .igv-trackgear-popover > div:not(:first-child) > div {\n      background: white; }\n    .igv-trackgear-popover > div:not(:first-child) > div:last-child {\n      border-bottom-left-radius: 4px;\n      border-bottom-right-radius: 4px;\n      border-bottom-color: transparent;\n      border-bottom-style: solid;\n      border-bottom-width: thin; }\n    .igv-trackgear-popover > div:not(:first-child) > div:hover {\n      background: #efefef; }\n\n.igv-trackgear-popover-shim {\n  padding-left: 8px;\n  padding-right: 8px; }\n\n.igv-trackgear-popover-header {\n  position: relative;\n  width: 100%;\n  height: 24px;\n  cursor: move;\n  border-top-color: transparent;\n  border-top-left-radius: 4px;\n  border-top-right-radius: 4px;\n  border-bottom-color: #7F7F7F;\n  border-bottom-style: solid;\n  border-bottom-width: thin;\n  background-color: #eee;\n  display: flex;\n  flex-flow: row;\n  flex-wrap: nowrap;\n  justify-content: flex-end;\n  align-items: center; }\n  .igv-trackgear-popover-header div {\n    margin-right: 4px;\n    height: 12px;\n    width: 12px;\n    color: #7F7F7F; }\n  .igv-trackgear-popover-header div:hover {\n    cursor: pointer;\n    color: #444; }\n\n.igv-trackgear-popover-check-container {\n  display: flex;\n  flex-flow: row;\n  flex-wrap: nowrap;\n  justify-content: flex-start;\n  align-items: center;\n  width: 100%;\n  height: 20px;\n  background-color: transparent; }\n  .igv-trackgear-popover-check-container div {\n    padding-top: 2px;\n    padding-left: 8px; }\n  .igv-trackgear-popover-check-container div:first-child {\n    position: relative;\n    width: 12px;\n    height: 12px; }\n    .igv-trackgear-popover-check-container div:first-child svg {\n      position: absolute;\n      width: 12px;\n      height: 12px; }\n\n.igvControlDiv {\n  position: relative; }\n\n.igv-content-header {\n  display: flex;\n  flex-flow: row;\n  flex-wrap: nowrap;\n  justify-content: flex-start;\n  align-items: center;\n  margin-top: 10px;\n  height: 16px;\n  width: 100%; }\n  .igv-content-header .igv-ideogram-shim {\n    height: 100%;\n    width: 50px;\n    background-color: white; }\n  .igv-content-header .igv-ideogram-content {\n    height: 100%;\n    background-color: white; }\n  .igv-content-header .igv-ideogram-content-border-right {\n    border-right-color: #292929;\n    border-right-style: solid;\n    border-right-width: 1px; }\n\n.igv-multi-locus-panel-border {\n  position: absolute;\n  top: 0;\n  left: 0;\n  height: 100%;\n  width: 1px;\n  background-color: green;\n  border-right-color: #ff0000;\n  border-right-style: solid;\n  border-right-width: 1px; }\n\n.igv-navbar {\n  position: relative;\n  padding-left: 8px;\n  padding-right: 8px;\n  display: flex;\n  flex-flow: row;\n  flex-wrap: nowrap;\n  justify-content: space-between;\n  align-items: center;\n  color: #444;\n  font-size: 12px;\n  font-family: "Open Sans", sans-serif;\n  font-weight: 400;\n  line-height: 32px;\n  margin-top: 2px;\n  margin-bottom: 4px;\n  height: 32px;\n  border-style: solid;\n  border-radius: 3px;\n  border-width: thin;\n  border-color: #bfbfbf;\n  background-color: #f3f3f3; }\n\n.igv-nav-bar-left-container {\n  display: flex;\n  flex-flow: row;\n  flex-wrap: nowrap;\n  justify-content: space-between;\n  align-items: center;\n  height: 32px;\n  line-height: 32px; }\n  .igv-nav-bar-left-container .igv-logo {\n    width: 34px;\n    height: 32px;\n    margin-top: 6px;\n    margin-right: 8px; }\n  .igv-nav-bar-left-container .igv-current-genome {\n    height: 32px;\n    width: 40px;\n    margin-left: 4px;\n    margin-right: 4px;\n    user-select: none;\n    line-height: 32px;\n    vertical-align: middle;\n    text-align: center; }\n\n.igv-nav-bar-genomic-location {\n  display: flex;\n  flex-flow: row;\n  flex-wrap: nowrap;\n  justify-content: space-between;\n  align-items: center;\n  height: 100%; }\n\n.igv-chromosome-select-widget-container {\n  height: 100%;\n  width: 125px;\n  margin-right: 4px;\n  display: flex;\n  flex-flow: column;\n  flex-wrap: nowrap;\n  justify-content: space-around;\n  align-items: center; }\n  .igv-chromosome-select-widget-container select {\n    display: block;\n    cursor: pointer;\n    width: 100px;\n    height: 75%;\n    outline: none;\n    font-size: 12px;\n    font-family: "Open Sans", sans-serif;\n    font-weight: 400; }\n\n.igv-locus-size-group {\n  display: flex;\n  flex-flow: row;\n  flex-wrap: nowrap;\n  justify-content: space-between;\n  align-items: center;\n  margin-left: 8px;\n  height: calc(32px - 10px); }\n  .igv-locus-size-group .igv-search-container {\n    width: 200px;\n    height: calc(32px - 10px);\n    line-height: calc(32px - 10px);\n    display: flex;\n    flex-flow: row;\n    flex-wrap: nowrap;\n    justify-content: flex-start;\n    align-items: center; }\n    .igv-locus-size-group .igv-search-container input {\n      cursor: text;\n      width: 85%;\n      height: calc(32px - 10px);\n      line-height: calc(32px - 10px);\n      font-size: 12px;\n      font-family: "Open Sans", sans-serif;\n      font-weight: 400;\n      text-align: left;\n      padding-left: 8px;\n      margin-right: 8px;\n      outline: none;\n      border-style: solid;\n      border-radius: 3px;\n      border-width: thin;\n      border-color: #bfbfbf;\n      background-color: white; }\n    .igv-locus-size-group .igv-search-container div {\n      cursor: pointer;\n      height: 16px;\n      width: 16px; }\n  .igv-locus-size-group .igv-windowsizepanel-content-div {\n    margin-left: 4px;\n    user-select: none; }\n\n.igv-nav-bar-right-container {\n  display: flex;\n  flex-flow: row;\n  flex-wrap: nowrap;\n  justify-content: space-between;\n  align-items: center;\n  height: 32px;\n  line-height: 32px; }\n  .igv-nav-bar-right-container .igv-nav-bar-toggle-button-container {\n    display: flex;\n    flex-flow: row;\n    flex-wrap: nowrap;\n    justify-content: space-between;\n    align-items: center;\n    height: 100%; }\n    .igv-nav-bar-right-container .igv-nav-bar-toggle-button-container div {\n      margin-left: 0;\n      margin-right: 4px; }\n    .igv-nav-bar-right-container .igv-nav-bar-toggle-button-container div:last-child {\n      margin-left: 0;\n      margin-right: 0; }\n  .igv-nav-bar-right-container .igv-nav-bar-toggle-button-container-750 {\n    display: none; }\n  .igv-nav-bar-right-container .igv-zoom-widget {\n    color: #737373;\n    font-size: 18px;\n    height: 32px;\n    line-height: 32px;\n    margin-left: 8px;\n    user-select: none;\n    display: flex;\n    flex-flow: row;\n    flex-wrap: nowrap;\n    justify-content: flex-end;\n    align-items: center; }\n    .igv-nav-bar-right-container .igv-zoom-widget div {\n      cursor: pointer;\n      margin-left: unset;\n      margin-right: unset; }\n    .igv-nav-bar-right-container .igv-zoom-widget div:first-child {\n      height: 24px;\n      width: 24px;\n      margin-left: unset;\n      margin-right: 8px; }\n    .igv-nav-bar-right-container .igv-zoom-widget div:last-child {\n      height: 24px;\n      width: 24px;\n      margin-left: 8px;\n      margin-right: unset; }\n    .igv-nav-bar-right-container .igv-zoom-widget div:nth-child(even) {\n      display: block;\n      height: fit-content; }\n    .igv-nav-bar-right-container .igv-zoom-widget input {\n      display: block;\n      width: 125px; }\n    .igv-nav-bar-right-container .igv-zoom-widget svg {\n      display: block; }\n  .igv-nav-bar-right-container .igv-zoom-widget-900 {\n    color: #737373;\n    font-size: 18px;\n    height: 32px;\n    line-height: 32px;\n    margin-left: 8px;\n    user-select: none;\n    display: flex;\n    flex-flow: row;\n    flex-wrap: nowrap;\n    justify-content: flex-end;\n    align-items: center; }\n    .igv-nav-bar-right-container .igv-zoom-widget-900 div {\n      cursor: pointer;\n      margin-left: unset;\n      margin-right: unset; }\n    .igv-nav-bar-right-container .igv-zoom-widget-900 div:first-child {\n      height: 24px;\n      width: 24px;\n      margin-left: unset;\n      margin-right: 8px; }\n    .igv-nav-bar-right-container .igv-zoom-widget-900 div:last-child {\n      height: 24px;\n      width: 24px;\n      margin-left: 8px;\n      margin-right: unset; }\n    .igv-nav-bar-right-container .igv-zoom-widget-900 div:nth-child(even) {\n      width: 0;\n      height: 0;\n      display: none; }\n    .igv-nav-bar-right-container .igv-zoom-widget-900 input {\n      width: 0;\n      height: 0;\n      display: none; }\n    .igv-nav-bar-right-container .igv-zoom-widget-900 svg {\n      display: block; }\n  .igv-nav-bar-right-container .igv-zoom-widget-hidden {\n    display: none; }\n\n.igv-nav-bar-button {\n  box-sizing: unset;\n  padding-left: 6px;\n  padding-right: 6px;\n  height: 18px;\n  text-transform: capitalize;\n  user-select: none;\n  line-height: 18px;\n  text-align: center;\n  vertical-align: middle;\n  font-family: "Open Sans", sans-serif;\n  font-size: 11px;\n  font-weight: 200;\n  color: #737373;\n  background-color: #f3f3f3;\n  border-color: #737373;\n  border-style: solid;\n  border-width: thin;\n  border-radius: 6px; }\n\n.igv-nav-bar-button-clicked {\n  color: white;\n  background-color: #737373; }\n\n.igv-nav-bar-button:hover {\n  cursor: pointer; }\n\n.igv-logo-nonav {\n  margin-left: 4px;\n  margin-top: 12px;\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 34px;\n  height: 16px; }\n\n.igv-search-results {\n  position: absolute;\n  top: 32px;\n  left: 2px;\n  height: 320px;\n  width: 213px;\n  background-color: white;\n  border-color: #7F7F7F;\n  border-style: solid;\n  border-width: thin;\n  overflow-x: hidden;\n  overflow-y: auto;\n  z-index: 9999; }\n  .igv-search-results tr {\n    font-family: "Open Sans", sans-serif;\n    font-size: small;\n    font-weight: 400;\n    color: #444; }\n  .igv-search-results tr:hover,\n  .igv-search-results tr:focus,\n  .igv-search-results tr:active {\n    cursor: pointer;\n    font-weight: 700;\n    color: #141414; }\n\n.igv-root-div {\n  position: relative;\n  left: 0;\n  right: 0;\n  height: auto;\n  margin-left: 10px;\n  margin-right: 10px;\n  padding-top: 4px; }\n\n.igv-content-div {\n  position: relative;\n  width: 100%;\n  height: 100%; }\n\n.igv-track-container-div {\n  user-select: none;\n  position: relative;\n  clear: both; }\n\n.igv-track-div {\n  position: relative;\n  width: 100%;\n  margin-top: 5px;\n  margin-bottom: 5px; }\n\n.igv-viewport-container {\n  position: absolute;\n  left: 50px;\n  right: 50px;\n  height: 100%;\n  white-space: nowrap;\n  overflow-x: hidden;\n  overflow-y: hidden; }\n\n.igv-viewport-div {\n  position: relative;\n  display: inline-block;\n  height: 100%;\n  overflow-x: hidden;\n  overflow-y: hidden; }\n\n.igv-viewport-content-div {\n  position: absolute;\n  width: 100%; }\n\n.igv-viewport-message {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  color: rgba(0, 0, 0, 0.15);\n  font-family: "Open Sans", sans-serif;\n  font-size: 25px;\n  font-weight: bold;\n  user-select: none; }\n\n.igv-whole-genome-container {\n  display: flex;\n  flex-flow: row;\n  flex-wrap: nowrap;\n  justify-content: space-between;\n  width: 100%;\n  height: 100%;\n  background-color: white; }\n  .igv-whole-genome-container div {\n    font-family: "Open Sans", sans-serif;\n    font-size: 10px;\n    font-weight: 400;\n    color: #444;\n    height: 100%;\n    text-align: center;\n    border-right-color: #bfbfbf;\n    border-right-style: solid;\n    border-right-width: thin; }\n    .igv-whole-genome-container div span {\n      display: block;\n      padding-top: 6px;\n      text-overflow: ellipsis; }\n  .igv-whole-genome-container div:last-child {\n    border-right-color: transparent; }\n  .igv-whole-genome-container div:hover,\n  .igv-whole-genome-container div:focus,\n  .igv-whole-genome-container div:active {\n    cursor: pointer;\n    background-color: #efefef; }\n\n.igv-viewport-div-border-right {\n  border-right-color: #292929;\n  border-right-style: solid;\n  border-right-width: 1px; }\n\n.igv-multi-locus-panel-close-container {\n  position: absolute;\n  top: 4px;\n  right: 4px;\n  width: 16px;\n  height: 16px;\n  color: #666666;\n  z-index: 1000; }\n\n.igv-multi-locus-panel-close-container:hover {\n  cursor: pointer;\n  color: #434343; }\n\n.igv-multi-locus-panel-label-div {\n  position: absolute;\n  left: 50%;\n  top: 25%;\n  transform: translate(-50%, -25%);\n  font-family: "Open Sans", sans-serif;\n  font-size: 12px;\n  font-weight: 400;\n  text-align: center;\n  min-width: 16px;\n  z-index: 64;\n  color: #373737;\n  background-color: white;\n  padding: 1px; }\n\n.igv-multi-locus-panel-label-div:hover {\n  cursor: pointer; }\n\n.igv-viewport-ruler {\n  cursor: pointer;\n  font-family: "Open Sans", sans-serif;\n  font-size: 10px;\n  font-weight: 200;\n  text-align: center; }\n  .igv-viewport-ruler > div {\n    height: 100%; }\n\n.igv-viewport-sequence {\n  font-family: "Open Sans", sans-serif;\n  font-size: 8px;\n  font-weight: 200;\n  text-align: center; }\n\n.igv-viewport-spinner {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  z-index: 1024;\n  width: 24px;\n  height: 24px;\n  pointer-events: none;\n  color: #737373; }\n\n.igv-track-container-spinner {\n  position: absolute;\n  top: 90%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  z-index: 1024;\n  width: 24px;\n  height: 24px;\n  pointer-events: none;\n  color: #737373; }\n\n.igv-ruler-sweeper-div {\n  display: none;\n  pointer-events: none;\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 0;\n  height: 100%;\n  z-index: 99999;\n  background-color: rgba(68, 134, 247, 0.25); }\n\n.igv-right-hand-gutter {\n  position: absolute;\n  right: 0;\n  width: 36px;\n  height: 100%;\n  background: white; }\n\n.igv-left-hand-gutter {\n  position: absolute;\n  left: 0;\n  width: 50px;\n  height: 100%; }\n  .igv-left-hand-gutter canvas {\n    position: absolute; }\n\n.igv-track-menu-border-top {\n  border-top-color: #a2a2a2;\n  border-top-style: solid;\n  border-top-width: thin; }\n\n.igv-track-menu-category {\n  padding-left: 4px;\n  font-weight: 400; }\n\n.igv-track-drag-scrim {\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 256;\n  background-color: rgba(68, 134, 247, 0.25); }\n\n.igv-track-manipulation-handle {\n  cursor: pointer;\n  position: absolute;\n  right: 36px;\n  width: 12px;\n  margin-left: 2px;\n  height: 100%;\n  box-sizing: border-box;\n  font-size: medium;\n  border-color: #c4c4c4;\n  border-style: solid;\n  border-width: thin;\n  border-top-right-radius: 6px;\n  border-bottom-right-radius: 6px;\n  z-index: 512;\n  background-color: #c4c4c4; }\n\n.igv-track-manipulation-handle:hover,\n.igv-track-manipulation-handle:focus,\n.igv-track-manipulation-handle:active {\n  border-color: #7e7e7e;\n  background-color: #7e7e7e; }\n\n.igv-track-label {\n  position: absolute;\n  left: 8px;\n  top: 4px;\n  width: auto;\n  height: auto;\n  max-width: 200px;\n  padding-left: 4px;\n  padding-right: 4px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  font-family: "Open Sans", sans-serif;\n  font-size: small;\n  font-weight: 400;\n  text-align: center;\n  user-select: none;\n  -moz-user-select: none;\n  -webkit-user-select: none;\n  border-color: #444;\n  border-radius: 2px;\n  border-style: solid;\n  border-width: thin;\n  background-color: white;\n  z-index: 128;\n  cursor: pointer; }\n\n.igv-track-label:hover,\n.igv-track-label:focus,\n.igv-track-label:active {\n  background-color: rgba(0, 0, 0, 0.05); }\n\n.igv-scrollbar-outer-div {\n  position: absolute;\n  top: 0;\n  right: 0;\n  width: 14px;\n  height: 100%;\n  background-color: white; }\n  .igv-scrollbar-outer-div div {\n    position: absolute;\n    top: 0;\n    left: 3px;\n    width: 8px;\n    border-style: solid;\n    border-width: thin;\n    border-color: #c4c4c4;\n    border-top-left-radius: 4px;\n    border-top-right-radius: 4px;\n    border-bottom-left-radius: 4px;\n    border-bottom-right-radius: 4px;\n    background-color: white; }\n  .igv-scrollbar-outer-div div:hover,\n  .igv-scrollbar-outer-div div:focus,\n  .igv-scrollbar-outer-div div:active {\n    cursor: pointer;\n    background-color: #c4c4c4; }\n\n.zoom-in-notice-container {\n  position: absolute;\n  top: 10px;\n  left: 50%; }\n  .zoom-in-notice-container div {\n    position: relative;\n    left: -50%;\n    font-family: "Open Sans", sans-serif;\n    font-size: medium;\n    font-weight: 400;\n    color: #3f3f3f;\n    background-color: rgba(255, 255, 255, 0.51);\n    z-index: 64; }\n\n.igv-center-guide {\n  pointer-events: none;\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 50%;\n  width: 8px;\n  z-index: 8;\n  display: none;\n  user-select: none;\n  -moz-user-select: none;\n  -webkit-user-select: none;\n  border-left-style: dashed;\n  border-left-width: thin;\n  border-right-style: dashed;\n  border-right-width: thin; }\n\n.igv-center-guide-wide {\n  background-color: rgba(0, 0, 0, 0);\n  border-left-color: rgba(127, 127, 127, 0.51);\n  border-right-color: rgba(127, 127, 127, 0.51); }\n\n.igv-center-guide-thin {\n  left: 50%;\n  width: 1px;\n  background-color: rgba(0, 0, 0, 0);\n  border-left-color: rgba(127, 127, 127, 0.51);\n  border-right-color: rgba(0, 0, 0, 0);\n  /*background-color: rgba(127, 127, 127, 0.51);*/\n  /*border-left-color: rgba(0,0,0,0);*/\n  /*border-right-color: rgba(0,0,0,0);*/ }\n\n.igv-cursor-tracking-guide {\n  pointer-events: none;\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 50%;\n  width: 1px;\n  z-index: 1;\n  border-left-style: dotted;\n  border-left-width: thin;\n  border-left-color: rgba(127, 127, 127, 0.76);\n  display: none;\n  user-select: none;\n  -moz-user-select: none;\n  -webkit-user-select: none; }\n\n.igv-clickable {\n  cursor: pointer;\n  background-color: white; }\n\n#color-by-tag {\n  color: #444; }\n\n#color-by-tag:hover,\n#color-by-tag:focus,\n#color-by-tag:active {\n  cursor: pointer;\n  padding-left: 2px;\n  padding-right: 2px;\n  color: white;\n  border-color: #444;\n  border-radius: 2px;\n  border-style: solid;\n  border-width: thin;\n  background-color: #7f7f7f; }\n\n.igv-ellipsis {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis; }\n\n.igv-spinner-container {\n  color: #3f3f3f;\n  width: 100%;\n  height: 100%;\n  text-align: center;\n  padding-top: 8px;\n  font-size: 24px;\n  z-index: 512; }\n\n.igv-fa-check-visible {\n  color: inherit;\n  padding-right: 2px; }\n\n.igv-fa-check-hidden {\n  color: transparent;\n  padding-right: 2px; }\n\n.validateTips {\n  border: 1px solid transparent;\n  padding: 0.3em; }\n  .validateTips fieldset {\n    border: 0; }\n\n.igv-spacer-10 {\n  height: 10px;\n  width: 100%;\n  font-size: 0;\n  margin: 0;\n  padding: 0;\n  border: 0;\n  display: block; }\n\n.igv-fa5-spin {\n  -webkit-animation: igv-fa5-spin 2s infinite linear;\n  animation: igv-fa5-spin 2s infinite linear; }\n\n@-webkit-keyframes igv-fa5-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg); }\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg); } }\n@keyframes igv-fa5-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg); }\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg); } }\n\n/*# sourceMappingURL=igv.css.map */\n',document.head.insertBefore(Ic,document.head.childNodes[document.head.childNodes.length-1]),{createBrowser:function(t,e){return Cc.apply(this,arguments)},removeBrowser:function(e){e.dispose(),e.$root.remove(),_c=_c.filter((function(t){return t!==e})),"undefined"!=typeof igv&&e===igv.browser&&(igv.browser=t)},visibilityChange:function(){_c.forEach((function(t){t.visibilityChange()}))},setGoogleOauthToken:function(t){return gn.setToken(t)},oauth:gn,version:function(){return Lc},download:an,getBrowser:function(){return _c[0]},doAutoscale:on,graphics:Dc,createTrack:function(t,e){return rc.prototype.createTrack.call(e,t)},getFilename:kn,getExtension:function(e){if(t===e.url)return t;var r=(Sn(e.url)?e.url.name:e.url).toLowerCase(),n=r.indexOf("?");return n>0&&(r=r.substr(0,n)),r.endsWith(".gz")?r=r.substr(0,r.length-3):(r.endsWith(".txt")||r.endsWith(".tab")||r.endsWith(".bgz"))&&(r=r.substr(0,r.length-4)),(n=r.lastIndexOf("."))<0?r:r.substr(1+n)},isFilePath:Sn,inferFileFormat:Qi,inferTrackTypes:Ki,knownFileExtensions:Yi,appendRightHandGutter:function(t){Oi.prototype.appendRightHandGutter.call(this,t)},attachDialogCloseHandlerWithParent:jr,guid:Yr,pageCoordinates:Zr,translateMouseCoordinates:Xr,createIcon:_r,GtexUtils:Oo,xhr:Mc,Color:Pc,splitLines:Hr,isString:zr,numberFormatter:Ur,getDataWrapper:Gi,setApiKey:function(t){return pn.setApiKey(t)},createColorSwatchSelector:Gr,makeDraggable:vr,GenericContainer:Bi,Popover:Qr,AlertDialog:Rn,InputDialog:hc,TrackRemovalDialog:uc,DataRangeDialog:cc,MenuUtils:xr,Alert:Mn,google:pn}}));
//# sourceMappingURL=igv.min.js.map